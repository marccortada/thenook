var qv=e=>{throw TypeError(e)};var ym=(e,t,n)=>t.has(e)||qv("Cannot "+n);var re=(e,t,n)=>(ym(e,t,"read from private field"),n?n.call(e):t.get(e)),et=(e,t,n)=>t.has(e)?qv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Be=(e,t,n,r)=>(ym(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),nn=(e,t,n)=>(ym(e,t,"access private method"),n);var mc=(e,t,n,r)=>({set _(a){Be(e,t,a,n)},get _(){return re(e,t,r)}});function Ak(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ok(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var ew={exports:{}},lu={},tw={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),Ik=Symbol.for("react.portal"),Lk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),Fk=Symbol.for("react.profiler"),zk=Symbol.for("react.provider"),Bk=Symbol.for("react.context"),Uk=Symbol.for("react.forward_ref"),Wk=Symbol.for("react.suspense"),Hk=Symbol.for("react.memo"),qk=Symbol.for("react.lazy"),Vv=Symbol.iterator;function Vk(e){return e===null||typeof e!="object"?null:(e=Vv&&e[Vv]||e["@@iterator"],typeof e=="function"?e:null)}var nw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rw=Object.assign,sw={};function di(e,t,n){this.props=e,this.context=t,this.refs=sw,this.updater=n||nw}di.prototype.isReactComponent={};di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aw(){}aw.prototype=di.prototype;function gp(e,t,n){this.props=e,this.context=t,this.refs=sw,this.updater=n||nw}var vp=gp.prototype=new aw;vp.constructor=gp;rw(vp,di.prototype);vp.isPureReactComponent=!0;var Gv=Array.isArray,ow=Object.prototype.hasOwnProperty,xp={current:null},iw={key:!0,ref:!0,__self:!0,__source:!0};function lw(e,t,n){var r,a={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)ow.call(t,r)&&!iw.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Vl,type:e,key:o,ref:i,props:a,_owner:xp.current}}function Gk(e,t){return{$$typeof:Vl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vl}function Kk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kv=/\/+/g;function wm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kk(""+e.key):t.toString(36)}function Qc(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Vl:case Ik:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+wm(i,0):r,Gv(a)?(n="",e!=null&&(n=e.replace(Kv,"$&/")+"/"),Qc(a,t,n,"",function(d){return d})):a!=null&&(yp(a)&&(a=Gk(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Kv,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=r===""?".":r+":",Gv(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+wm(o,l);i+=Qc(o,t,n,c,a)}else if(c=Vk(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+wm(o,l++),i+=Qc(o,t,n,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function hc(e,t,n){if(e==null)return e;var r=[],a=0;return Qc(e,r,"","",function(o){return t.call(n,o,a++)}),r}function Yk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jn={current:null},Xc={transition:null},Qk={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:Xc,ReactCurrentOwner:xp};function cw(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:hc,forEach:function(e,t,n){hc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hc(e,function(){t++}),t},toArray:function(e){return hc(e,function(t){return t})||[]},only:function(e){if(!yp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=di;Ge.Fragment=Lk;Ge.Profiler=Fk;Ge.PureComponent=gp;Ge.StrictMode=$k;Ge.Suspense=Wk;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qk;Ge.act=cw;Ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rw({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=xp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ow.call(t,c)&&!iw.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Vl,type:e.type,key:a,ref:o,props:r,_owner:i}};Ge.createContext=function(e){return e={$$typeof:Bk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zk,_context:e},e.Consumer=e};Ge.createElement=lw;Ge.createFactory=function(e){var t=lw.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:Uk,render:e}};Ge.isValidElement=yp;Ge.lazy=function(e){return{$$typeof:qk,_payload:{_status:-1,_result:e},_init:Yk}};Ge.memo=function(e,t){return{$$typeof:Hk,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=Xc.transition;Xc.transition={};try{e()}finally{Xc.transition=t}};Ge.unstable_act=cw;Ge.useCallback=function(e,t){return jn.current.useCallback(e,t)};Ge.useContext=function(e){return jn.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return jn.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return jn.current.useEffect(e,t)};Ge.useId=function(){return jn.current.useId()};Ge.useImperativeHandle=function(e,t,n){return jn.current.useImperativeHandle(e,t,n)};Ge.useInsertionEffect=function(e,t){return jn.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return jn.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return jn.current.useMemo(e,t)};Ge.useReducer=function(e,t,n){return jn.current.useReducer(e,t,n)};Ge.useRef=function(e){return jn.current.useRef(e)};Ge.useState=function(e){return jn.current.useState(e)};Ge.useSyncExternalStore=function(e,t,n){return jn.current.useSyncExternalStore(e,t,n)};Ge.useTransition=function(){return jn.current.useTransition()};Ge.version="18.3.1";tw.exports=Ge;var f=tw.exports;const X=pp(f),dw=Ak({__proto__:null,default:X},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk=f,Jk=Symbol.for("react.element"),Zk=Symbol.for("react.fragment"),e2=Object.prototype.hasOwnProperty,t2=Xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n2={key:!0,ref:!0,__self:!0,__source:!0};function uw(e,t,n){var r,a={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)e2.call(t,r)&&!n2.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Jk,type:e,key:o,ref:i,props:a,_owner:t2.current}}lu.Fragment=Zk;lu.jsx=uw;lu.jsxs=uw;ew.exports=lu;var s=ew.exports,mw={exports:{}},Kn={},hw={exports:{}},fw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,F){var H=S.length;S.push(F);e:for(;0<H;){var Q=H-1>>>1,O=S[Q];if(0<a(O,F))S[Q]=F,S[H]=O,H=Q;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var F=S[0],H=S.pop();if(H!==F){S[0]=H;e:for(var Q=0,O=S.length,q=O>>>1;Q<q;){var ne=2*(Q+1)-1,Pe=S[ne],ue=ne+1,$=S[ue];if(0>a(Pe,H))ue<O&&0>a($,Pe)?(S[Q]=$,S[ue]=H,Q=ue):(S[Q]=Pe,S[ne]=H,Q=ne);else if(ue<O&&0>a($,H))S[Q]=$,S[ue]=H,Q=ue;else break e}}return F}function a(S,F){var H=S.sortIndex-F.sortIndex;return H!==0?H:S.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,h=3,g=!1,w=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(S){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=S)r(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(d)}}function b(S){if(y=!1,v(S),!w)if(n(c)!==null)w=!0,A(j);else{var F=n(d);F!==null&&T(b,F.startTime-S)}}function j(S,F){w=!1,y&&(y=!1,x(E),E=-1),g=!0;var H=h;try{for(v(F),m=n(c);m!==null&&(!(m.expirationTime>F)||S&&!I());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,h=m.priorityLevel;var O=Q(m.expirationTime<=F);F=e.unstable_now(),typeof O=="function"?m.callback=O:m===n(c)&&r(c),v(F)}else r(c);m=n(c)}if(m!==null)var q=!0;else{var ne=n(d);ne!==null&&T(b,ne.startTime-F),q=!1}return q}finally{m=null,h=H,g=!1}}var k=!1,C=null,E=-1,M=5,R=-1;function I(){return!(e.unstable_now()-R<M)}function P(){if(C!==null){var S=e.unstable_now();R=S;var F=!0;try{F=C(!0,S)}finally{F?D():(k=!1,C=null)}}else k=!1}var D;if(typeof p=="function")D=function(){p(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=P,D=function(){Y.postMessage(null)}}else D=function(){_(P,0)};function A(S){C=S,k||(k=!0,D())}function T(S,F){E=_(function(){S(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,A(j))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(S){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var H=h;h=F;try{return S()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,F){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var H=h;h=S;try{return F()}finally{h=H}},e.unstable_scheduleCallback=function(S,F,H){var Q=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,S){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=H+O,S={id:u++,callback:F,priorityLevel:S,startTime:H,expirationTime:O,sortIndex:-1},H>Q?(S.sortIndex=H,t(d,S),n(c)===null&&S===n(d)&&(y?(x(E),E=-1):y=!0,T(b,H-Q))):(S.sortIndex=O,t(c,S),w||g||(w=!0,A(j))),S},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(S){var F=h;return function(){var H=h;h=F;try{return S.apply(this,arguments)}finally{h=H}}}})(fw);hw.exports=fw;var r2=hw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2=f,Vn=r2;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pw=new Set,hl={};function Xa(e,t){Xo(e,t),Xo(e+"Capture",t)}function Xo(e,t){for(hl[e]=t,e=0;e<t.length;e++)pw.add(t[e])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,a2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yv={},Qv={};function o2(e){return Eh.call(Qv,e)?!0:Eh.call(Yv,e)?!1:a2.test(e)?Qv[e]=!0:(Yv[e]=!0,!1)}function i2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function l2(e,t,n,r){if(t===null||typeof t>"u"||i2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nn(e,t,n,r,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tn[e]=new Nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tn[t]=new Nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tn[e]=new Nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tn[e]=new Nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tn[e]=new Nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tn[e]=new Nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tn[e]=new Nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tn[e]=new Nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tn[e]=new Nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var wp=/[\-:]([a-z])/g;function _p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wp,_p);tn[t]=new Nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wp,_p);tn[t]=new Nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wp,_p);tn[t]=new Nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tn[e]=new Nn(e,1,!1,e.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tn[e]=new Nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function bp(e,t,n,r){var a=tn.hasOwnProperty(t)?tn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(l2(t,n,a,r)&&(n=null),r||a===null?o2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vs=s2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),go=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),vw=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Mh=Symbol.for("react.suspense_list"),Cp=Symbol.for("react.memo"),Ms=Symbol.for("react.lazy"),xw=Symbol.for("react.offscreen"),Xv=Symbol.iterator;function Ri(e){return e===null||typeof e!="object"?null:(e=Xv&&e[Xv]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,_m;function Gi(e){if(_m===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_m=t&&t[1]||""}return`
`+_m+e}var bm=!1;function jm(e,t){if(!e||bm)return"";bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=r.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{bm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gi(e):""}function c2(e){switch(e.tag){case 5:return Gi(e.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return e=jm(e.type,!1),e;case 11:return e=jm(e.type.render,!1),e;case 1:return e=jm(e.type,!0),e;default:return""}}function Rh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vo:return"Fragment";case go:return"Portal";case Ph:return"Profiler";case jp:return"StrictMode";case Th:return"Suspense";case Mh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vw:return(e.displayName||"Context")+".Consumer";case gw:return(e._context.displayName||"Context")+".Provider";case Np:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cp:return t=e.displayName||null,t!==null?t:Rh(e.type)||"Memo";case Ms:t=e._payload,e=e._init;try{return Rh(e(t))}catch{}}return null}function d2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rh(t);case 8:return t===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ra(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function u2(e){var t=yw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pc(e){e._valueTracker||(e._valueTracker=u2(e))}function ww(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dh(e,t){var n=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Jv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ra(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _w(e,t){t=t.checked,t!=null&&bp(e,"checked",t,!1)}function Ah(e,t){_w(e,t);var n=ra(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oh(e,t.type,ra(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oh(e,t,n){(t!=="number"||vd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ki=Array.isArray;function Eo(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ra(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ih(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ex(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ce(92));if(Ki(n)){if(1<n.length)throw Error(ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ra(n)}}function bw(e,t){var n=ra(t.value),r=ra(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gc,Nw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gc=gc||document.createElement("div"),gc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var el={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m2=["Webkit","ms","Moz","O"];Object.keys(el).forEach(function(e){m2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),el[t]=el[e]})});function Cw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||el.hasOwnProperty(e)&&el[e]?(""+t).trim():t+"px"}function Sw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Cw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var h2=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(e,t){if(t){if(h2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Fh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=null;function Sp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bh=null,Po=null,To=null;function nx(e){if(e=Yl(e)){if(typeof Bh!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=hu(t),Bh(e.stateNode,e.type,t))}}function kw(e){Po?To?To.push(e):To=[e]:Po=e}function Ew(){if(Po){var e=Po,t=To;if(To=Po=null,nx(e),t)for(e=0;e<t.length;e++)nx(t[e])}}function Pw(e,t){return e(t)}function Tw(){}var Nm=!1;function Mw(e,t,n){if(Nm)return e(t,n);Nm=!0;try{return Pw(e,t,n)}finally{Nm=!1,(Po!==null||To!==null)&&(Tw(),Ew())}}function pl(e,t){var n=e.stateNode;if(n===null)return null;var r=hu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ce(231,t,typeof n));return n}var Uh=!1;if(us)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{Uh=!1}function f2(e,t,n,r,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var tl=!1,xd=null,yd=!1,Wh=null,p2={onError:function(e){tl=!0,xd=e}};function g2(e,t,n,r,a,o,i,l,c){tl=!1,xd=null,f2.apply(p2,arguments)}function v2(e,t,n,r,a,o,i,l,c){if(g2.apply(this,arguments),tl){if(tl){var d=xd;tl=!1,xd=null}else throw Error(ce(198));yd||(yd=!0,Wh=d)}}function Ja(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rx(e){if(Ja(e)!==e)throw Error(ce(188))}function x2(e){var t=e.alternate;if(!t){if(t=Ja(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return rx(a),e;if(o===r)return rx(a),t;o=o.sibling}throw Error(ce(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?e:t}function Dw(e){return e=x2(e),e!==null?Aw(e):null}function Aw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Aw(e);if(t!==null)return t;e=e.sibling}return null}var Ow=Vn.unstable_scheduleCallback,sx=Vn.unstable_cancelCallback,y2=Vn.unstable_shouldYield,w2=Vn.unstable_requestPaint,At=Vn.unstable_now,_2=Vn.unstable_getCurrentPriorityLevel,kp=Vn.unstable_ImmediatePriority,Iw=Vn.unstable_UserBlockingPriority,wd=Vn.unstable_NormalPriority,b2=Vn.unstable_LowPriority,Lw=Vn.unstable_IdlePriority,cu=null,Kr=null;function j2(e){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(cu,e,void 0,(e.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:S2,N2=Math.log,C2=Math.LN2;function S2(e){return e>>>=0,e===0?32:31-(N2(e)/C2|0)|0}var vc=64,xc=4194304;function Yi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~a;l!==0?r=Yi(l):(o&=i,o!==0&&(r=Yi(o)))}else i=n&~a,i!==0?r=Yi(i):o!==0&&(r=Yi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nr(t),a=1<<n,r|=e[n],t&=~a;return r}function k2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Nr(o),l=1<<i,c=a[i];c===-1?(!(l&n)||l&r)&&(a[i]=k2(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Hh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $w(){var e=vc;return vc<<=1,!(vc&4194240)&&(vc=64),e}function Cm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nr(t),e[t]=n}function P2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Nr(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Ep(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var rt=0;function Fw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zw,Pp,Bw,Uw,Ww,qh=!1,yc=[],Hs=null,qs=null,Vs=null,gl=new Map,vl=new Map,Ds=[],T2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ax(e,t){switch(e){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":gl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(t.pointerId)}}function Ai(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Yl(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function M2(e,t,n,r,a){switch(t){case"focusin":return Hs=Ai(Hs,e,t,n,r,a),!0;case"dragenter":return qs=Ai(qs,e,t,n,r,a),!0;case"mouseover":return Vs=Ai(Vs,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return gl.set(o,Ai(gl.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,vl.set(o,Ai(vl.get(o)||null,e,t,n,r,a)),!0}return!1}function Hw(e){var t=Ea(e.target);if(t!==null){var n=Ja(t);if(n!==null){if(t=n.tag,t===13){if(t=Rw(n),t!==null){e.blockedOn=t,Ww(e.priority,function(){Bw(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zh=r,n.target.dispatchEvent(r),zh=null}else return t=Yl(n),t!==null&&Pp(t),e.blockedOn=n,!1;t.shift()}return!0}function ox(e,t,n){Jc(e)&&n.delete(t)}function R2(){qh=!1,Hs!==null&&Jc(Hs)&&(Hs=null),qs!==null&&Jc(qs)&&(qs=null),Vs!==null&&Jc(Vs)&&(Vs=null),gl.forEach(ox),vl.forEach(ox)}function Oi(e,t){e.blockedOn===t&&(e.blockedOn=null,qh||(qh=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,R2)))}function xl(e){function t(a){return Oi(a,e)}if(0<yc.length){Oi(yc[0],e);for(var n=1;n<yc.length;n++){var r=yc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hs!==null&&Oi(Hs,e),qs!==null&&Oi(qs,e),Vs!==null&&Oi(Vs,e),gl.forEach(t),vl.forEach(t),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)Hw(n),n.blockedOn===null&&Ds.shift()}var Mo=vs.ReactCurrentBatchConfig,bd=!0;function D2(e,t,n,r){var a=rt,o=Mo.transition;Mo.transition=null;try{rt=1,Tp(e,t,n,r)}finally{rt=a,Mo.transition=o}}function A2(e,t,n,r){var a=rt,o=Mo.transition;Mo.transition=null;try{rt=4,Tp(e,t,n,r)}finally{rt=a,Mo.transition=o}}function Tp(e,t,n,r){if(bd){var a=Vh(e,t,n,r);if(a===null)Om(e,t,r,jd,n),ax(e,r);else if(M2(a,e,t,n,r))r.stopPropagation();else if(ax(e,r),t&4&&-1<T2.indexOf(e)){for(;a!==null;){var o=Yl(a);if(o!==null&&zw(o),o=Vh(e,t,n,r),o===null&&Om(e,t,r,jd,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else Om(e,t,r,null,n)}}var jd=null;function Vh(e,t,n,r){if(jd=null,e=Sp(r),e=Ea(e),e!==null)if(t=Ja(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Rw(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jd=e,null}function qw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_2()){case kp:return 1;case Iw:return 4;case wd:case b2:return 16;case Lw:return 536870912;default:return 16}default:return 16}}var Bs=null,Mp=null,Zc=null;function Vw(){if(Zc)return Zc;var e,t=Mp,n=t.length,r,a="value"in Bs?Bs.value:Bs.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===a[o-r];r++);return Zc=a.slice(e,1<r?1-r:void 0)}function ed(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wc(){return!0}function ix(){return!1}function Yn(e){function t(n,r,a,o,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wc:ix,this.isPropagationStopped=ix,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),t}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rp=Yn(ui),Kl=St({},ui,{view:0,detail:0}),O2=Yn(Kl),Sm,km,Ii,du=St({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(Sm=e.screenX-Ii.screenX,km=e.screenY-Ii.screenY):km=Sm=0,Ii=e),Sm)},movementY:function(e){return"movementY"in e?e.movementY:km}}),lx=Yn(du),I2=St({},du,{dataTransfer:0}),L2=Yn(I2),$2=St({},Kl,{relatedTarget:0}),Em=Yn($2),F2=St({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),z2=Yn(F2),B2=St({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U2=Yn(B2),W2=St({},ui,{data:0}),cx=Yn(W2),H2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=V2[e])?!!t[e]:!1}function Dp(){return G2}var K2=St({},Kl,{key:function(e){if(e.key){var t=H2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ed(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?q2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dp,charCode:function(e){return e.type==="keypress"?ed(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ed(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Y2=Yn(K2),Q2=St({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dx=Yn(Q2),X2=St({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dp}),J2=Yn(X2),Z2=St({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),eE=Yn(Z2),tE=St({},du,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=Yn(tE),rE=[9,13,27,32],Ap=us&&"CompositionEvent"in window,nl=null;us&&"documentMode"in document&&(nl=document.documentMode);var sE=us&&"TextEvent"in window&&!nl,Gw=us&&(!Ap||nl&&8<nl&&11>=nl),ux=" ",mx=!1;function Kw(e,t){switch(e){case"keyup":return rE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xo=!1;function aE(e,t){switch(e){case"compositionend":return Yw(t);case"keypress":return t.which!==32?null:(mx=!0,ux);case"textInput":return e=t.data,e===ux&&mx?null:e;default:return null}}function oE(e,t){if(xo)return e==="compositionend"||!Ap&&Kw(e,t)?(e=Vw(),Zc=Mp=Bs=null,xo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gw&&t.locale!=="ko"?null:t.data;default:return null}}var iE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iE[e.type]:t==="textarea"}function Qw(e,t,n,r){kw(r),t=Nd(t,"onChange"),0<t.length&&(n=new Rp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rl=null,yl=null;function lE(e){i_(e,0)}function uu(e){var t=_o(e);if(ww(t))return e}function cE(e,t){if(e==="change")return t}var Xw=!1;if(us){var Pm;if(us){var Tm="oninput"in document;if(!Tm){var fx=document.createElement("div");fx.setAttribute("oninput","return;"),Tm=typeof fx.oninput=="function"}Pm=Tm}else Pm=!1;Xw=Pm&&(!document.documentMode||9<document.documentMode)}function px(){rl&&(rl.detachEvent("onpropertychange",Jw),yl=rl=null)}function Jw(e){if(e.propertyName==="value"&&uu(yl)){var t=[];Qw(t,yl,e,Sp(e)),Mw(lE,t)}}function dE(e,t,n){e==="focusin"?(px(),rl=t,yl=n,rl.attachEvent("onpropertychange",Jw)):e==="focusout"&&px()}function uE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uu(yl)}function mE(e,t){if(e==="click")return uu(t)}function hE(e,t){if(e==="input"||e==="change")return uu(t)}function fE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sr=typeof Object.is=="function"?Object.is:fE;function wl(e,t){if(Sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Eh.call(t,a)||!Sr(e[a],t[a]))return!1}return!0}function gx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vx(e,t){var n=gx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gx(n)}}function Zw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function e_(){for(var e=window,t=vd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vd(e.document)}return t}function Op(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pE(e){var t=e_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zw(n.ownerDocument.documentElement,n)){if(r!==null&&Op(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=vx(n,o);var i=vx(n,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gE=us&&"documentMode"in document&&11>=document.documentMode,yo=null,Gh=null,sl=null,Kh=!1;function xx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||yo==null||yo!==vd(r)||(r=yo,"selectionStart"in r&&Op(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&wl(sl,r)||(sl=r,r=Nd(Gh,"onSelect"),0<r.length&&(t=new Rp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yo)))}function _c(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wo={animationend:_c("Animation","AnimationEnd"),animationiteration:_c("Animation","AnimationIteration"),animationstart:_c("Animation","AnimationStart"),transitionend:_c("Transition","TransitionEnd")},Mm={},t_={};us&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function mu(e){if(Mm[e])return Mm[e];if(!wo[e])return e;var t=wo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in t_)return Mm[e]=t[n];return e}var n_=mu("animationend"),r_=mu("animationiteration"),s_=mu("animationstart"),a_=mu("transitionend"),o_=new Map,yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(e,t){o_.set(e,t),Xa(t,[e])}for(var Rm=0;Rm<yx.length;Rm++){var Dm=yx[Rm],vE=Dm.toLowerCase(),xE=Dm[0].toUpperCase()+Dm.slice(1);da(vE,"on"+xE)}da(n_,"onAnimationEnd");da(r_,"onAnimationIteration");da(s_,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(a_,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function wx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,v2(r,t,void 0,e),e.currentTarget=null}function i_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;wx(a,l,d),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;wx(a,l,d),o=c}}}if(yd)throw e=Wh,yd=!1,Wh=null,e}function ft(e,t){var n=t[Zh];n===void 0&&(n=t[Zh]=new Set);var r=e+"__bubble";n.has(r)||(l_(t,e,2,!1),n.add(r))}function Am(e,t,n){var r=0;t&&(r|=4),l_(n,e,r,t)}var bc="_reactListening"+Math.random().toString(36).slice(2);function _l(e){if(!e[bc]){e[bc]=!0,pw.forEach(function(n){n!=="selectionchange"&&(yE.has(n)||Am(n,!1,e),Am(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bc]||(t[bc]=!0,Am("selectionchange",!1,t))}}function l_(e,t,n,r){switch(qw(t)){case 1:var a=D2;break;case 4:a=A2;break;default:a=Tp}n=a.bind(null,t,n,e),a=void 0,!Uh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Om(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Ea(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}Mw(function(){var d=o,u=Sp(n),m=[];e:{var h=o_.get(e);if(h!==void 0){var g=Rp,w=e;switch(e){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":g=Y2;break;case"focusin":w="focus",g=Em;break;case"focusout":w="blur",g=Em;break;case"beforeblur":case"afterblur":g=Em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=lx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=L2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=J2;break;case n_:case r_:case s_:g=z2;break;case a_:g=eE;break;case"scroll":g=O2;break;case"wheel":g=nE;break;case"copy":case"cut":case"paste":g=U2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dx}var y=(t&4)!==0,_=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var p=d,v;p!==null;){v=p;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,x!==null&&(b=pl(p,x),b!=null&&y.push(bl(p,b,v)))),_)break;p=p.return}0<y.length&&(h=new g(h,w,null,n,u),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==zh&&(w=n.relatedTarget||n.fromElement)&&(Ea(w)||w[ms]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?Ea(w):null,w!==null&&(_=Ja(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(y=lx,b="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=dx,b="onPointerLeave",x="onPointerEnter",p="pointer"),_=g==null?h:_o(g),v=w==null?h:_o(w),h=new y(b,p+"leave",g,n,u),h.target=_,h.relatedTarget=v,b=null,Ea(u)===d&&(y=new y(x,p+"enter",w,n,u),y.target=v,y.relatedTarget=_,b=y),_=b,g&&w)t:{for(y=g,x=w,p=0,v=y;v;v=no(v))p++;for(v=0,b=x;b;b=no(b))v++;for(;0<p-v;)y=no(y),p--;for(;0<v-p;)x=no(x),v--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=no(y),x=no(x)}y=null}else y=null;g!==null&&_x(m,h,g,y,!1),w!==null&&_!==null&&_x(m,_,w,y,!0)}}e:{if(h=d?_o(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var j=cE;else if(hx(h))if(Xw)j=hE;else{j=uE;var k=dE}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=mE);if(j&&(j=j(e,d))){Qw(m,j,n,u);break e}k&&k(e,h,d),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Oh(h,"number",h.value)}switch(k=d?_o(d):window,e){case"focusin":(hx(k)||k.contentEditable==="true")&&(yo=k,Gh=d,sl=null);break;case"focusout":sl=Gh=yo=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,xx(m,n,u);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":xx(m,n,u)}var C;if(Ap)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else xo?Kw(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Gw&&n.locale!=="ko"&&(xo||E!=="onCompositionStart"?E==="onCompositionEnd"&&xo&&(C=Vw()):(Bs=u,Mp="value"in Bs?Bs.value:Bs.textContent,xo=!0)),k=Nd(d,E),0<k.length&&(E=new cx(E,e,null,n,u),m.push({event:E,listeners:k}),C?E.data=C:(C=Yw(n),C!==null&&(E.data=C)))),(C=sE?aE(e,n):oE(e,n))&&(d=Nd(d,"onBeforeInput"),0<d.length&&(u=new cx("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=C))}i_(m,t)})}function bl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nd(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=pl(e,n),o!=null&&r.unshift(bl(e,o,a)),o=pl(e,t),o!=null&&r.push(bl(e,o,a))),e=e.return}return r}function no(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _x(e,t,n,r,a){for(var o=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=pl(n,o),c!=null&&i.unshift(bl(n,c,l))):a||(c=pl(n,o),c!=null&&i.push(bl(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var wE=/\r\n?/g,_E=/\u0000|\uFFFD/g;function bx(e){return(typeof e=="string"?e:""+e).replace(wE,`
`).replace(_E,"")}function jc(e,t,n){if(t=bx(t),bx(e)!==t&&n)throw Error(ce(425))}function Cd(){}var Yh=null,Qh=null;function Xh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,bE=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,jE=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(e){return jx.resolve(null).then(e).catch(NE)}:Jh;function NE(e){setTimeout(function(){throw e})}function Im(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),xl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);xl(t)}function Gs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),Ur="__reactFiber$"+mi,jl="__reactProps$"+mi,ms="__reactContainer$"+mi,Zh="__reactEvents$"+mi,CE="__reactListeners$"+mi,SE="__reactHandles$"+mi;function Ea(e){var t=e[Ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[Ur]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nx(e);e!==null;){if(n=e[Ur])return n;e=Nx(e)}return t}e=n,n=e.parentNode}return null}function Yl(e){return e=e[Ur]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _o(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function hu(e){return e[jl]||null}var ef=[],bo=-1;function ua(e){return{current:e}}function pt(e){0>bo||(e.current=ef[bo],ef[bo]=null,bo--)}function lt(e,t){bo++,ef[bo]=e.current,e.current=t}var sa={},un=ua(sa),Mn=ua(!1),za=sa;function Jo(e,t){var n=e.type.contextTypes;if(!n)return sa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rn(e){return e=e.childContextTypes,e!=null}function Sd(){pt(Mn),pt(un)}function Cx(e,t,n){if(un.current!==sa)throw Error(ce(168));lt(un,t),lt(Mn,n)}function c_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ce(108,d2(e)||"Unknown",a));return St({},n,r)}function kd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sa,za=un.current,lt(un,e),lt(Mn,Mn.current),!0}function Sx(e,t,n){var r=e.stateNode;if(!r)throw Error(ce(169));n?(e=c_(e,t,za),r.__reactInternalMemoizedMergedChildContext=e,pt(Mn),pt(un),lt(un,e)):pt(Mn),lt(Mn,n)}var is=null,fu=!1,Lm=!1;function d_(e){is===null?is=[e]:is.push(e)}function kE(e){fu=!0,d_(e)}function ma(){if(!Lm&&is!==null){Lm=!0;var e=0,t=rt;try{var n=is;for(rt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}is=null,fu=!1}catch(a){throw is!==null&&(is=is.slice(e+1)),Ow(kp,ma),a}finally{rt=t,Lm=!1}}return null}var jo=[],No=0,Ed=null,Pd=0,er=[],tr=0,Ba=null,ls=1,cs="";function ba(e,t){jo[No++]=Pd,jo[No++]=Ed,Ed=e,Pd=t}function u_(e,t,n){er[tr++]=ls,er[tr++]=cs,er[tr++]=Ba,Ba=e;var r=ls;e=cs;var a=32-Nr(r)-1;r&=~(1<<a),n+=1;var o=32-Nr(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,ls=1<<32-Nr(t)+a|n<<a|r,cs=o+e}else ls=1<<o|n<<a|r,cs=e}function Ip(e){e.return!==null&&(ba(e,1),u_(e,1,0))}function Lp(e){for(;e===Ed;)Ed=jo[--No],jo[No]=null,Pd=jo[--No],jo[No]=null;for(;e===Ba;)Ba=er[--tr],er[tr]=null,cs=er[--tr],er[tr]=null,ls=er[--tr],er[tr]=null}var Hn=null,Wn=null,vt=!1,_r=null;function m_(e,t){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hn=e,Wn=Gs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hn=e,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ba!==null?{id:ls,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hn=e,Wn=null,!0):!1;default:return!1}}function tf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nf(e){if(vt){var t=Wn;if(t){var n=t;if(!kx(e,t)){if(tf(e))throw Error(ce(418));t=Gs(n.nextSibling);var r=Hn;t&&kx(e,t)?m_(r,n):(e.flags=e.flags&-4097|2,vt=!1,Hn=e)}}else{if(tf(e))throw Error(ce(418));e.flags=e.flags&-4097|2,vt=!1,Hn=e}}}function Ex(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hn=e}function Nc(e){if(e!==Hn)return!1;if(!vt)return Ex(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xh(e.type,e.memoizedProps)),t&&(t=Wn)){if(tf(e))throw h_(),Error(ce(418));for(;t;)m_(e,t),t=Gs(t.nextSibling)}if(Ex(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wn=Gs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wn=null}}else Wn=Hn?Gs(e.stateNode.nextSibling):null;return!0}function h_(){for(var e=Wn;e;)e=Gs(e.nextSibling)}function Zo(){Wn=Hn=null,vt=!1}function $p(e){_r===null?_r=[e]:_r.push(e)}var EE=vs.ReactCurrentBatchConfig;function Li(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,e))}return e}function Cc(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Px(e){var t=e._init;return t(e._payload)}function f_(e){function t(x,p){if(e){var v=x.deletions;v===null?(x.deletions=[p],x.flags|=16):v.push(p)}}function n(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function r(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=Xs(x,p),x.index=0,x.sibling=null,x}function o(x,p,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<p?(x.flags|=2,p):v):(x.flags|=2,p)):(x.flags|=1048576,p)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,p,v,b){return p===null||p.tag!==6?(p=Hm(v,x.mode,b),p.return=x,p):(p=a(p,v),p.return=x,p)}function c(x,p,v,b){var j=v.type;return j===vo?u(x,p,v.props.children,b,v.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ms&&Px(j)===p.type)?(b=a(p,v.props),b.ref=Li(x,p,v),b.return=x,b):(b=id(v.type,v.key,v.props,null,x.mode,b),b.ref=Li(x,p,v),b.return=x,b)}function d(x,p,v,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=qm(v,x.mode,b),p.return=x,p):(p=a(p,v.children||[]),p.return=x,p)}function u(x,p,v,b,j){return p===null||p.tag!==7?(p=Ia(v,x.mode,b,j),p.return=x,p):(p=a(p,v),p.return=x,p)}function m(x,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Hm(""+p,x.mode,v),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case fc:return v=id(p.type,p.key,p.props,null,x.mode,v),v.ref=Li(x,null,p),v.return=x,v;case go:return p=qm(p,x.mode,v),p.return=x,p;case Ms:var b=p._init;return m(x,b(p._payload),v)}if(Ki(p)||Ri(p))return p=Ia(p,x.mode,v,null),p.return=x,p;Cc(x,p)}return null}function h(x,p,v,b){var j=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(x,p,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fc:return v.key===j?c(x,p,v,b):null;case go:return v.key===j?d(x,p,v,b):null;case Ms:return j=v._init,h(x,p,j(v._payload),b)}if(Ki(v)||Ri(v))return j!==null?null:u(x,p,v,b,null);Cc(x,v)}return null}function g(x,p,v,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(v)||null,l(p,x,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fc:return x=x.get(b.key===null?v:b.key)||null,c(p,x,b,j);case go:return x=x.get(b.key===null?v:b.key)||null,d(p,x,b,j);case Ms:var k=b._init;return g(x,p,v,k(b._payload),j)}if(Ki(b)||Ri(b))return x=x.get(v)||null,u(p,x,b,j,null);Cc(p,b)}return null}function w(x,p,v,b){for(var j=null,k=null,C=p,E=p=0,M=null;C!==null&&E<v.length;E++){C.index>E?(M=C,C=null):M=C.sibling;var R=h(x,C,v[E],b);if(R===null){C===null&&(C=M);break}e&&C&&R.alternate===null&&t(x,C),p=o(R,p,E),k===null?j=R:k.sibling=R,k=R,C=M}if(E===v.length)return n(x,C),vt&&ba(x,E),j;if(C===null){for(;E<v.length;E++)C=m(x,v[E],b),C!==null&&(p=o(C,p,E),k===null?j=C:k.sibling=C,k=C);return vt&&ba(x,E),j}for(C=r(x,C);E<v.length;E++)M=g(C,x,E,v[E],b),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?E:M.key),p=o(M,p,E),k===null?j=M:k.sibling=M,k=M);return e&&C.forEach(function(I){return t(x,I)}),vt&&ba(x,E),j}function y(x,p,v,b){var j=Ri(v);if(typeof j!="function")throw Error(ce(150));if(v=j.call(v),v==null)throw Error(ce(151));for(var k=j=null,C=p,E=p=0,M=null,R=v.next();C!==null&&!R.done;E++,R=v.next()){C.index>E?(M=C,C=null):M=C.sibling;var I=h(x,C,R.value,b);if(I===null){C===null&&(C=M);break}e&&C&&I.alternate===null&&t(x,C),p=o(I,p,E),k===null?j=I:k.sibling=I,k=I,C=M}if(R.done)return n(x,C),vt&&ba(x,E),j;if(C===null){for(;!R.done;E++,R=v.next())R=m(x,R.value,b),R!==null&&(p=o(R,p,E),k===null?j=R:k.sibling=R,k=R);return vt&&ba(x,E),j}for(C=r(x,C);!R.done;E++,R=v.next())R=g(C,x,E,R.value,b),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?E:R.key),p=o(R,p,E),k===null?j=R:k.sibling=R,k=R);return e&&C.forEach(function(P){return t(x,P)}),vt&&ba(x,E),j}function _(x,p,v,b){if(typeof v=="object"&&v!==null&&v.type===vo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case fc:e:{for(var j=v.key,k=p;k!==null;){if(k.key===j){if(j=v.type,j===vo){if(k.tag===7){n(x,k.sibling),p=a(k,v.props.children),p.return=x,x=p;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ms&&Px(j)===k.type){n(x,k.sibling),p=a(k,v.props),p.ref=Li(x,k,v),p.return=x,x=p;break e}n(x,k);break}else t(x,k);k=k.sibling}v.type===vo?(p=Ia(v.props.children,x.mode,b,v.key),p.return=x,x=p):(b=id(v.type,v.key,v.props,null,x.mode,b),b.ref=Li(x,p,v),b.return=x,x=b)}return i(x);case go:e:{for(k=v.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(x,p.sibling),p=a(p,v.children||[]),p.return=x,x=p;break e}else{n(x,p);break}else t(x,p);p=p.sibling}p=qm(v,x.mode,b),p.return=x,x=p}return i(x);case Ms:return k=v._init,_(x,p,k(v._payload),b)}if(Ki(v))return w(x,p,v,b);if(Ri(v))return y(x,p,v,b);Cc(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(x,p.sibling),p=a(p,v),p.return=x,x=p):(n(x,p),p=Hm(v,x.mode,b),p.return=x,x=p),i(x)):n(x,p)}return _}var ei=f_(!0),p_=f_(!1),Td=ua(null),Md=null,Co=null,Fp=null;function zp(){Fp=Co=Md=null}function Bp(e){var t=Td.current;pt(Td),e._currentValue=t}function rf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){Md=e,Fp=Co=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tn=!0),e.firstContext=null)}function or(e){var t=e._currentValue;if(Fp!==e)if(e={context:e,memoizedValue:t,next:null},Co===null){if(Md===null)throw Error(ce(308));Co=e,Md.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Pa=null;function Up(e){Pa===null?Pa=[e]:Pa.push(e)}function g_(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Up(t)):(n.next=a.next,a.next=n),t.interleaved=n,hs(e,r)}function hs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rs=!1;function Wp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ks(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,hs(e,n)}return a=r.interleaved,a===null?(t.next=t,Up(r)):(t.next=a.next,a.next=t),r.interleaved=t,hs(e,n)}function td(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ep(e,n)}}function Tx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rd(e,t,n,r){var a=e.updateQueue;Rs=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,u=d=c=null,l=o;do{var h=l.lane,g=l.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,y=l;switch(h=t,g=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){m=w.call(g,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(g,m,h):w,h==null)break e;m=St({},m,h);break e;case 2:Rs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Wa|=i,e.lanes=i,e.memoizedState=m}}function Mx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ce(191,a));a.call(r)}}}var Ql={},Yr=ua(Ql),Nl=ua(Ql),Cl=ua(Ql);function Ta(e){if(e===Ql)throw Error(ce(174));return e}function Hp(e,t){switch(lt(Cl,t),lt(Nl,e),lt(Yr,Ql),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lh(t,e)}pt(Yr),lt(Yr,t)}function ti(){pt(Yr),pt(Nl),pt(Cl)}function x_(e){Ta(Cl.current);var t=Ta(Yr.current),n=Lh(t,e.type);t!==n&&(lt(Nl,e),lt(Yr,n))}function qp(e){Nl.current===e&&(pt(Yr),pt(Nl))}var wt=ua(0);function Dd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $m=[];function Vp(){for(var e=0;e<$m.length;e++)$m[e]._workInProgressVersionPrimary=null;$m.length=0}var nd=vs.ReactCurrentDispatcher,Fm=vs.ReactCurrentBatchConfig,Ua=0,Ct=null,Ut=null,Vt=null,Ad=!1,al=!1,Sl=0,PE=0;function rn(){throw Error(ce(321))}function Gp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Sr(e[n],t[n]))return!1;return!0}function Kp(e,t,n,r,a,o){if(Ua=o,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nd.current=e===null||e.memoizedState===null?DE:AE,e=n(r,a),al){o=0;do{if(al=!1,Sl=0,25<=o)throw Error(ce(301));o+=1,Vt=Ut=null,t.updateQueue=null,nd.current=OE,e=n(r,a)}while(al)}if(nd.current=Od,t=Ut!==null&&Ut.next!==null,Ua=0,Vt=Ut=Ct=null,Ad=!1,t)throw Error(ce(300));return e}function Yp(){var e=Sl!==0;return Sl=0,e}function Lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ct.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function ir(){if(Ut===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var t=Vt===null?Ct.memoizedState:Vt.next;if(t!==null)Vt=t,Ut=e;else{if(e===null)throw Error(ce(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Vt===null?Ct.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function kl(e,t){return typeof t=="function"?t(e):t}function zm(e){var t=ir(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=Ut,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((Ua&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=r):c=c.next=m,Ct.lanes|=u,Wa|=u}d=d.next}while(d!==null&&d!==o);c===null?i=r:c.next=l,Sr(r,t.memoizedState)||(Tn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Ct.lanes|=o,Wa|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bm(e){var t=ir(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Sr(o,t.memoizedState)||(Tn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function y_(){}function w_(e,t){var n=Ct,r=ir(),a=t(),o=!Sr(r.memoizedState,a);if(o&&(r.memoizedState=a,Tn=!0),r=r.queue,Qp(j_.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,El(9,b_.bind(null,n,r,a,t),void 0,null),Kt===null)throw Error(ce(349));Ua&30||__(n,t,a)}return a}function __(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function b_(e,t,n,r){t.value=n,t.getSnapshot=r,N_(t)&&C_(e)}function j_(e,t,n){return n(function(){N_(t)&&C_(e)})}function N_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sr(e,n)}catch{return!0}}function C_(e){var t=hs(e,1);t!==null&&Cr(t,e,1,-1)}function Rx(e){var t=Lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:e},t.queue=e,e=e.dispatch=RE.bind(null,Ct,e),[t.memoizedState,e]}function El(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function S_(){return ir().memoizedState}function rd(e,t,n,r){var a=Lr();Ct.flags|=e,a.memoizedState=El(1|t,n,void 0,r===void 0?null:r)}function pu(e,t,n,r){var a=ir();r=r===void 0?null:r;var o=void 0;if(Ut!==null){var i=Ut.memoizedState;if(o=i.destroy,r!==null&&Gp(r,i.deps)){a.memoizedState=El(t,n,o,r);return}}Ct.flags|=e,a.memoizedState=El(1|t,n,o,r)}function Dx(e,t){return rd(8390656,8,e,t)}function Qp(e,t){return pu(2048,8,e,t)}function k_(e,t){return pu(4,2,e,t)}function E_(e,t){return pu(4,4,e,t)}function P_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T_(e,t,n){return n=n!=null?n.concat([e]):null,pu(4,4,P_.bind(null,t,e),n)}function Xp(){}function M_(e,t){var n=ir();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function R_(e,t){var n=ir();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function D_(e,t,n){return Ua&21?(Sr(n,t)||(n=$w(),Ct.lanes|=n,Wa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tn=!0),e.memoizedState=n)}function TE(e,t){var n=rt;rt=n!==0&&4>n?n:4,e(!0);var r=Fm.transition;Fm.transition={};try{e(!1),t()}finally{rt=n,Fm.transition=r}}function A_(){return ir().memoizedState}function ME(e,t,n){var r=Qs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O_(e))I_(t,n);else if(n=g_(e,t,n,r),n!==null){var a=wn();Cr(n,e,r,a),L_(n,t,r)}}function RE(e,t,n){var r=Qs(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O_(e))I_(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,Sr(l,i)){var c=t.interleaved;c===null?(a.next=a,Up(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=g_(e,t,a,r),n!==null&&(a=wn(),Cr(n,e,r,a),L_(n,t,r))}}function O_(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function I_(e,t){al=Ad=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function L_(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ep(e,n)}}var Od={readContext:or,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},DE={readContext:or,useCallback:function(e,t){return Lr().memoizedState=[e,t===void 0?null:t],e},useContext:or,useEffect:Dx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rd(4194308,4,P_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rd(4194308,4,e,t)},useInsertionEffect:function(e,t){return rd(4,2,e,t)},useMemo:function(e,t){var n=Lr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ME.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=Lr();return e={current:e},t.memoizedState=e},useState:Rx,useDebugValue:Xp,useDeferredValue:function(e){return Lr().memoizedState=e},useTransition:function(){var e=Rx(!1),t=e[0];return e=TE.bind(null,e[1]),Lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ct,a=Lr();if(vt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=t(),Kt===null)throw Error(ce(349));Ua&30||__(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Dx(j_.bind(null,r,o,e),[e]),r.flags|=2048,El(9,b_.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Lr(),t=Kt.identifierPrefix;if(vt){var n=cs,r=ls;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=PE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},AE={readContext:or,useCallback:M_,useContext:or,useEffect:Qp,useImperativeHandle:T_,useInsertionEffect:k_,useLayoutEffect:E_,useMemo:R_,useReducer:zm,useRef:S_,useState:function(){return zm(kl)},useDebugValue:Xp,useDeferredValue:function(e){var t=ir();return D_(t,Ut.memoizedState,e)},useTransition:function(){var e=zm(kl)[0],t=ir().memoizedState;return[e,t]},useMutableSource:y_,useSyncExternalStore:w_,useId:A_,unstable_isNewReconciler:!1},OE={readContext:or,useCallback:M_,useContext:or,useEffect:Qp,useImperativeHandle:T_,useInsertionEffect:k_,useLayoutEffect:E_,useMemo:R_,useReducer:Bm,useRef:S_,useState:function(){return Bm(kl)},useDebugValue:Xp,useDeferredValue:function(e){var t=ir();return Ut===null?t.memoizedState=e:D_(t,Ut.memoizedState,e)},useTransition:function(){var e=Bm(kl)[0],t=ir().memoizedState;return[e,t]},useMutableSource:y_,useSyncExternalStore:w_,useId:A_,unstable_isNewReconciler:!1};function gr(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gu={isMounted:function(e){return(e=e._reactInternals)?Ja(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wn(),a=Qs(e),o=ds(r,a);o.payload=t,n!=null&&(o.callback=n),t=Ks(e,o,a),t!==null&&(Cr(t,e,a,r),td(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wn(),a=Qs(e),o=ds(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ks(e,o,a),t!==null&&(Cr(t,e,a,r),td(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wn(),r=Qs(e),a=ds(n,r);a.tag=2,t!=null&&(a.callback=t),t=Ks(e,a,r),t!==null&&(Cr(t,e,r,n),td(t,e,r))}};function Ax(e,t,n,r,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!wl(n,r)||!wl(a,o):!0}function $_(e,t,n){var r=!1,a=sa,o=t.contextType;return typeof o=="object"&&o!==null?o=or(o):(a=Rn(t)?za:un.current,r=t.contextTypes,o=(r=r!=null)?Jo(e,a):sa),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ox(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gu.enqueueReplaceState(t,t.state,null)}function af(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Wp(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=or(o):(o=Rn(t)?za:un.current,a.context=Jo(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(sf(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gu.enqueueReplaceState(a,a.state,null),Rd(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var n="",r=t;do n+=c2(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Um(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function of(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function F_(e,t,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ld||(Ld=!0,vf=r),of(e,t)},n}function z_(e,t,n){n=ds(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){of(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){of(e,t),typeof r!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Ix(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new IE;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=QE.bind(null,e,t,n),t.then(e,e))}function Lx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $x(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ds(-1,1),t.tag=2,Ks(n,t,1))),n.lanes|=1),e)}var LE=vs.ReactCurrentOwner,Tn=!1;function vn(e,t,n,r){t.child=e===null?p_(t,null,n,r):ei(t,e.child,n,r)}function Fx(e,t,n,r,a){n=n.render;var o=t.ref;return Ro(t,a),r=Kp(e,t,n,r,o,a),n=Yp(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fs(e,t,a)):(vt&&n&&Ip(t),t.flags|=1,vn(e,t,r,a),t.child)}function zx(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!ag(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,B_(e,t,o,r,a)):(e=id(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:wl,n(i,r)&&e.ref===t.ref)return fs(e,t,a)}return t.flags|=1,e=Xs(o,r),e.ref=t.ref,e.return=t,t.child=e}function B_(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(wl(o,r)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(Tn=!0);else return t.lanes=e.lanes,fs(e,t,a)}return lf(e,t,n,r,a)}function U_(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ko,zn),zn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(ko,zn),zn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,lt(ko,zn),zn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(ko,zn),zn|=r;return vn(e,t,a,n),t.child}function W_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lf(e,t,n,r,a){var o=Rn(n)?za:un.current;return o=Jo(t,o),Ro(t,a),n=Kp(e,t,n,r,o,a),r=Yp(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fs(e,t,a)):(vt&&r&&Ip(t),t.flags|=1,vn(e,t,n,a),t.child)}function Bx(e,t,n,r,a){if(Rn(n)){var o=!0;kd(t)}else o=!1;if(Ro(t,a),t.stateNode===null)sd(e,t),$_(t,n,r),af(t,n,r,a),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=or(d):(d=Rn(n)?za:un.current,d=Jo(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Ox(t,i,r,d),Rs=!1;var h=t.memoizedState;i.state=h,Rd(t,r,i,a),c=t.memoizedState,l!==r||h!==c||Mn.current||Rs?(typeof u=="function"&&(sf(t,n,u,r),c=t.memoizedState),(l=Rs||Ax(t,n,l,r,h,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,v_(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:gr(t.type,l),i.props=d,m=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=or(c):(c=Rn(n)?za:un.current,c=Jo(t,c));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Ox(t,i,r,c),Rs=!1,h=t.memoizedState,i.state=h,Rd(t,r,i,a);var w=t.memoizedState;l!==m||h!==w||Mn.current||Rs?(typeof g=="function"&&(sf(t,n,g,r),w=t.memoizedState),(d=Rs||Ax(t,n,d,r,h,w,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return cf(e,t,n,r,o,a)}function cf(e,t,n,r,a,o){W_(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return a&&Sx(t,n,!1),fs(e,t,o);r=t.stateNode,LE.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ei(t,e.child,null,o),t.child=ei(t,null,l,o)):vn(e,t,l,o),t.memoizedState=r.state,a&&Sx(t,n,!0),t.child}function H_(e){var t=e.stateNode;t.pendingContext?Cx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cx(e,t.context,!1),Hp(e,t.containerInfo)}function Ux(e,t,n,r,a){return Zo(),$p(a),t.flags|=256,vn(e,t,n,r),t.child}var df={dehydrated:null,treeContext:null,retryLane:0};function uf(e){return{baseLanes:e,cachePool:null,transitions:null}}function q_(e,t,n){var r=t.pendingProps,a=wt.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),lt(wt,a&1),e===null)return nf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=yu(i,r,0,null),e=Ia(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=uf(n),t.memoizedState=df,e):Jp(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return $E(e,t,i,r,l,a,n);if(o){o=r.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Xs(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=Xs(l,o):(o=Ia(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?uf(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=df,r}return o=e.child,e=o.sibling,r=Xs(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Jp(e,t){return t=yu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sc(e,t,n,r){return r!==null&&$p(r),ei(t,e.child,null,n),e=Jp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $E(e,t,n,r,a,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Um(Error(ce(422))),Sc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=yu({mode:"visible",children:r.children},a,0,null),o=Ia(o,a,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ei(t,e.child,null,i),t.child.memoizedState=uf(i),t.memoizedState=df,o);if(!(t.mode&1))return Sc(e,t,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ce(419)),r=Um(o,r,void 0),Sc(e,t,i,r)}if(l=(i&e.childLanes)!==0,Tn||l){if(r=Kt,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,hs(e,a),Cr(r,e,a,-1))}return sg(),r=Um(Error(ce(421))),Sc(e,t,i,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=XE.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Wn=Gs(a.nextSibling),Hn=t,vt=!0,_r=null,e!==null&&(er[tr++]=ls,er[tr++]=cs,er[tr++]=Ba,ls=e.id,cs=e.overflow,Ba=t),t=Jp(t,r.children),t.flags|=4096,t)}function Wx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rf(e.return,t,n)}function Wm(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function V_(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(vn(e,t,r.children,n),r=wt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wx(e,n,t);else if(e.tag===19)Wx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(wt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Dd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Wm(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Dd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Wm(t,!0,n,null,o);break;case"together":Wm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,n=Xs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function FE(e,t,n){switch(t.tag){case 3:H_(t),Zo();break;case 5:x_(t);break;case 1:Rn(t.type)&&kd(t);break;case 4:Hp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;lt(Td,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lt(wt,wt.current&1),t.flags|=128,null):n&t.child.childLanes?q_(e,t,n):(lt(wt,wt.current&1),e=fs(e,t,n),e!==null?e.sibling:null);lt(wt,wt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return V_(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),lt(wt,wt.current),r)break;return null;case 22:case 23:return t.lanes=0,U_(e,t,n)}return fs(e,t,n)}var G_,mf,K_,Y_;G_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mf=function(){};K_=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ta(Yr.current);var o=null;switch(n){case"input":a=Dh(e,a),r=Dh(e,r),o=[];break;case"select":a=St({},a,{value:void 0}),r=St({},r,{value:void 0}),o=[];break;case"textarea":a=Ih(e,a),r=Ih(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cd)}$h(n,r);var i;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(hl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(hl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ft("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Y_=function(e,t,n,r){n!==r&&(t.flags|=4)};function $i(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zE(e,t,n){var r=t.pendingProps;switch(Lp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(t),null;case 1:return Rn(t.type)&&Sd(),sn(t),null;case 3:return r=t.stateNode,ti(),pt(Mn),pt(un),Vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Nc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_r!==null&&(wf(_r),_r=null))),mf(e,t),sn(t),null;case 5:qp(t);var a=Ta(Cl.current);if(n=t.type,e!==null&&t.stateNode!=null)K_(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ce(166));return sn(t),null}if(e=Ta(Yr.current),Nc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ur]=t,r[jl]=o,e=(t.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(a=0;a<Qi.length;a++)ft(Qi[a],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":Jv(r,o),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ft("invalid",r);break;case"textarea":ex(r,o),ft("invalid",r)}$h(n,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,l,e),a=["children",""+l]):hl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ft("scroll",r)}switch(n){case"input":pc(r),Zv(r,o,!0);break;case"textarea":pc(r),tx(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cd)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ur]=t,e[jl]=r,G_(e,t,!1,!1),t.stateNode=e;e:{switch(i=Fh(n,r),n){case"dialog":ft("cancel",e),ft("close",e),a=r;break;case"iframe":case"object":case"embed":ft("load",e),a=r;break;case"video":case"audio":for(a=0;a<Qi.length;a++)ft(Qi[a],e);a=r;break;case"source":ft("error",e),a=r;break;case"img":case"image":case"link":ft("error",e),ft("load",e),a=r;break;case"details":ft("toggle",e),a=r;break;case"input":Jv(e,r),a=Dh(e,r),ft("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=St({},r,{value:void 0}),ft("invalid",e);break;case"textarea":ex(e,r),a=Ih(e,r),ft("invalid",e);break;default:a=r}$h(n,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Sw(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nw(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fl(e,c):typeof c=="number"&&fl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(hl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ft("scroll",e):c!=null&&bp(e,o,c,i))}switch(n){case"input":pc(e),Zv(e,r,!1);break;case"textarea":pc(e),tx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ra(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Eo(e,!!r.multiple,o,!1):r.defaultValue!=null&&Eo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sn(t),null;case 6:if(e&&t.stateNode!=null)Y_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ce(166));if(n=Ta(Cl.current),Ta(Yr.current),Nc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ur]=t,(o=r.nodeValue!==n)&&(e=Hn,e!==null))switch(e.tag){case 3:jc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ur]=t,t.stateNode=r}return sn(t),null;case 13:if(pt(wt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Wn!==null&&t.mode&1&&!(t.flags&128))h_(),Zo(),t.flags|=98560,o=!1;else if(o=Nc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ce(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[Ur]=t}else Zo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sn(t),o=!1}else _r!==null&&(wf(_r),_r=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||wt.current&1?Ht===0&&(Ht=3):sg())),t.updateQueue!==null&&(t.flags|=4),sn(t),null);case 4:return ti(),mf(e,t),e===null&&_l(t.stateNode.containerInfo),sn(t),null;case 10:return Bp(t.type._context),sn(t),null;case 17:return Rn(t.type)&&Sd(),sn(t),null;case 19:if(pt(wt),o=t.memoizedState,o===null)return sn(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)$i(o,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Dd(e),i!==null){for(t.flags|=128,$i(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lt(wt,wt.current&1|2),t.child}e=e.sibling}o.tail!==null&&At()>ri&&(t.flags|=128,r=!0,$i(o,!1),t.lanes=4194304)}else{if(!r)if(e=Dd(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$i(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!vt)return sn(t),null}else 2*At()-o.renderingStartTime>ri&&n!==1073741824&&(t.flags|=128,r=!0,$i(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=At(),t.sibling=null,n=wt.current,lt(wt,r?n&1|2:n&1),t):(sn(t),null);case 22:case 23:return rg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zn&1073741824&&(sn(t),t.subtreeFlags&6&&(t.flags|=8192)):sn(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function BE(e,t){switch(Lp(t),t.tag){case 1:return Rn(t.type)&&Sd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),pt(Mn),pt(un),Vp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qp(t),null;case 13:if(pt(wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Zo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pt(wt),null;case 4:return ti(),null;case 10:return Bp(t.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var kc=!1,on=!1,UE=typeof WeakSet=="function"?WeakSet:Set,je=null;function So(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function hf(e,t,n){try{n()}catch(r){Pt(e,t,r)}}var Hx=!1;function WE(e,t){if(Yh=bd,e=e_(),Op(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var g;m!==n||a!==0&&m.nodeType!==3||(l=i+a),m!==o||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++d===a&&(l=i),h===o&&++u===r&&(c=i),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:e,selectionRange:n},bd=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,_=w.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:gr(t.type,y),_);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(b){Pt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return w=Hx,Hx=!1,w}function ol(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&hf(t,n,o)}a=a.next}while(a!==r)}}function vu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ff(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Q_(e){var t=e.alternate;t!==null&&(e.alternate=null,Q_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ur],delete t[jl],delete t[Zh],delete t[CE],delete t[SE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X_(e){return e.tag===5||e.tag===3||e.tag===4}function qx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cd));else if(r!==4&&(e=e.child,e!==null))for(pf(e,t,n),e=e.sibling;e!==null;)pf(e,t,n),e=e.sibling}function gf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gf(e,t,n),e=e.sibling;e!==null;)gf(e,t,n),e=e.sibling}var Xt=null,yr=!1;function js(e,t,n){for(n=n.child;n!==null;)J_(e,t,n),n=n.sibling}function J_(e,t,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(cu,n)}catch{}switch(n.tag){case 5:on||So(n,t);case 6:var r=Xt,a=yr;Xt=null,js(e,t,n),Xt=r,yr=a,Xt!==null&&(yr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(yr?(e=Xt,n=n.stateNode,e.nodeType===8?Im(e.parentNode,n):e.nodeType===1&&Im(e,n),xl(e)):Im(Xt,n.stateNode));break;case 4:r=Xt,a=yr,Xt=n.stateNode.containerInfo,yr=!0,js(e,t,n),Xt=r,yr=a;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&hf(n,t,i),a=a.next}while(a!==r)}js(e,t,n);break;case 1:if(!on&&(So(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pt(n,t,l)}js(e,t,n);break;case 21:js(e,t,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,js(e,t,n),on=r):js(e,t,n);break;default:js(e,t,n)}}function Vx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new UE),t.forEach(function(r){var a=JE.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function hr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Xt=l.stateNode,yr=!1;break e;case 3:Xt=l.stateNode.containerInfo,yr=!0;break e;case 4:Xt=l.stateNode.containerInfo,yr=!0;break e}l=l.return}if(Xt===null)throw Error(ce(160));J_(o,i,a),Xt=null,yr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Pt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z_(t,e),t=t.sibling}function Z_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hr(t,e),Ir(e),r&4){try{ol(3,e,e.return),vu(3,e)}catch(y){Pt(e,e.return,y)}try{ol(5,e,e.return)}catch(y){Pt(e,e.return,y)}}break;case 1:hr(t,e),Ir(e),r&512&&n!==null&&So(n,n.return);break;case 5:if(hr(t,e),Ir(e),r&512&&n!==null&&So(n,n.return),e.flags&32){var a=e.stateNode;try{fl(a,"")}catch(y){Pt(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&_w(a,o),Fh(l,i);var d=Fh(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?Sw(a,m):u==="dangerouslySetInnerHTML"?Nw(a,m):u==="children"?fl(a,m):bp(a,u,m,d)}switch(l){case"input":Ah(a,o);break;case"textarea":bw(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Eo(a,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Eo(a,!!o.multiple,o.defaultValue,!0):Eo(a,!!o.multiple,o.multiple?[]:"",!1))}a[jl]=o}catch(y){Pt(e,e.return,y)}}break;case 6:if(hr(t,e),Ir(e),r&4){if(e.stateNode===null)throw Error(ce(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(y){Pt(e,e.return,y)}}break;case 3:if(hr(t,e),Ir(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xl(t.containerInfo)}catch(y){Pt(e,e.return,y)}break;case 4:hr(t,e),Ir(e);break;case 13:hr(t,e),Ir(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(tg=At())),r&4&&Vx(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(on=(d=on)||u,hr(t,e),on=d):hr(t,e),Ir(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(je=e,u=e.child;u!==null;){for(m=je=u;je!==null;){switch(h=je,g=h.child,h.tag){case 0:case 11:case 14:case 15:ol(4,h,h.return);break;case 1:So(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Pt(r,n,y)}}break;case 5:So(h,h.return);break;case 22:if(h.memoizedState!==null){Kx(m);continue}}g!==null?(g.return=h,je=g):Kx(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Cw("display",i))}catch(y){Pt(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){Pt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hr(t,e),Ir(e),r&4&&Vx(e);break;case 21:break;default:hr(t,e),Ir(e)}}function Ir(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(X_(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(fl(a,""),r.flags&=-33);var o=qx(e);gf(e,o,a);break;case 3:case 4:var i=r.stateNode.containerInfo,l=qx(e);pf(e,l,i);break;default:throw Error(ce(161))}}catch(c){Pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function HE(e,t,n){je=e,eb(e)}function eb(e,t,n){for(var r=(e.mode&1)!==0;je!==null;){var a=je,o=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||kc;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||on;l=kc;var d=on;if(kc=i,(on=c)&&!d)for(je=a;je!==null;)i=je,c=i.child,i.tag===22&&i.memoizedState!==null?Yx(a):c!==null?(c.return=i,je=c):Yx(a);for(;o!==null;)je=o,eb(o),o=o.sibling;je=a,kc=l,on=d}Gx(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,je=o):Gx(e)}}function Gx(e){for(;je!==null;){var t=je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:on||vu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!on)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:gr(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Mx(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mx(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&xl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}on||t.flags&512&&ff(t)}catch(h){Pt(t,t.return,h)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function Kx(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function Yx(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vu(4,t)}catch(c){Pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Pt(t,a,c)}}var o=t.return;try{ff(t)}catch(c){Pt(t,o,c)}break;case 5:var i=t.return;try{ff(t)}catch(c){Pt(t,i,c)}}}catch(c){Pt(t,t.return,c)}if(t===e){je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,je=l;break}je=t.return}}var qE=Math.ceil,Id=vs.ReactCurrentDispatcher,Zp=vs.ReactCurrentOwner,rr=vs.ReactCurrentBatchConfig,Ze=0,Kt=null,$t=null,en=0,zn=0,ko=ua(0),Ht=0,Pl=null,Wa=0,xu=0,eg=0,il=null,kn=null,tg=0,ri=1/0,as=null,Ld=!1,vf=null,Ys=null,Ec=!1,Us=null,$d=0,ll=0,xf=null,ad=-1,od=0;function wn(){return Ze&6?At():ad!==-1?ad:ad=At()}function Qs(e){return e.mode&1?Ze&2&&en!==0?en&-en:EE.transition!==null?(od===0&&(od=$w()),od):(e=rt,e!==0||(e=window.event,e=e===void 0?16:qw(e.type)),e):1}function Cr(e,t,n,r){if(50<ll)throw ll=0,xf=null,Error(ce(185));Gl(e,n,r),(!(Ze&2)||e!==Kt)&&(e===Kt&&(!(Ze&2)&&(xu|=n),Ht===4&&As(e,en)),Dn(e,r),n===1&&Ze===0&&!(t.mode&1)&&(ri=At()+500,fu&&ma()))}function Dn(e,t){var n=e.callbackNode;E2(e,t);var r=_d(e,e===Kt?en:0);if(r===0)n!==null&&sx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sx(n),t===1)e.tag===0?kE(Qx.bind(null,e)):d_(Qx.bind(null,e)),jE(function(){!(Ze&6)&&ma()}),n=null;else{switch(Fw(r)){case 1:n=kp;break;case 4:n=Iw;break;case 16:n=wd;break;case 536870912:n=Lw;break;default:n=wd}n=lb(n,tb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tb(e,t){if(ad=-1,od=0,Ze&6)throw Error(ce(327));var n=e.callbackNode;if(Do()&&e.callbackNode!==n)return null;var r=_d(e,e===Kt?en:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fd(e,r);else{t=r;var a=Ze;Ze|=2;var o=rb();(Kt!==e||en!==t)&&(as=null,ri=At()+500,Oa(e,t));do try{KE();break}catch(l){nb(e,l)}while(!0);zp(),Id.current=o,Ze=a,$t!==null?t=0:(Kt=null,en=0,t=Ht)}if(t!==0){if(t===2&&(a=Hh(e),a!==0&&(r=a,t=yf(e,a))),t===1)throw n=Pl,Oa(e,0),As(e,r),Dn(e,At()),n;if(t===6)As(e,r);else{if(a=e.current.alternate,!(r&30)&&!VE(a)&&(t=Fd(e,r),t===2&&(o=Hh(e),o!==0&&(r=o,t=yf(e,o))),t===1))throw n=Pl,Oa(e,0),As(e,r),Dn(e,At()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ce(345));case 2:ja(e,kn,as);break;case 3:if(As(e,r),(r&130023424)===r&&(t=tg+500-At(),10<t)){if(_d(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){wn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Jh(ja.bind(null,e,kn,as),t);break}ja(e,kn,as);break;case 4:if(As(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-Nr(r);o=1<<i,i=t[i],i>a&&(a=i),r&=~o}if(r=a,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qE(r/1960))-r,10<r){e.timeoutHandle=Jh(ja.bind(null,e,kn,as),r);break}ja(e,kn,as);break;case 5:ja(e,kn,as);break;default:throw Error(ce(329))}}}return Dn(e,At()),e.callbackNode===n?tb.bind(null,e):null}function yf(e,t){var n=il;return e.current.memoizedState.isDehydrated&&(Oa(e,t).flags|=256),e=Fd(e,t),e!==2&&(t=kn,kn=n,t!==null&&wf(t)),e}function wf(e){kn===null?kn=e:kn.push.apply(kn,e)}function VE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Sr(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function As(e,t){for(t&=~eg,t&=~xu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nr(t),r=1<<n;e[n]=-1,t&=~r}}function Qx(e){if(Ze&6)throw Error(ce(327));Do();var t=_d(e,0);if(!(t&1))return Dn(e,At()),null;var n=Fd(e,t);if(e.tag!==0&&n===2){var r=Hh(e);r!==0&&(t=r,n=yf(e,r))}if(n===1)throw n=Pl,Oa(e,0),As(e,t),Dn(e,At()),n;if(n===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ja(e,kn,as),Dn(e,At()),null}function ng(e,t){var n=Ze;Ze|=1;try{return e(t)}finally{Ze=n,Ze===0&&(ri=At()+500,fu&&ma())}}function Ha(e){Us!==null&&Us.tag===0&&!(Ze&6)&&Do();var t=Ze;Ze|=1;var n=rr.transition,r=rt;try{if(rr.transition=null,rt=1,e)return e()}finally{rt=r,rr.transition=n,Ze=t,!(Ze&6)&&ma()}}function rg(){zn=ko.current,pt(ko)}function Oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bE(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(Lp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sd();break;case 3:ti(),pt(Mn),pt(un),Vp();break;case 5:qp(r);break;case 4:ti();break;case 13:pt(wt);break;case 19:pt(wt);break;case 10:Bp(r.type._context);break;case 22:case 23:rg()}n=n.return}if(Kt=e,$t=e=Xs(e.current,null),en=zn=t,Ht=0,Pl=null,eg=xu=Wa=0,kn=il=null,Pa!==null){for(t=0;t<Pa.length;t++)if(n=Pa[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=a,r.next=i}n.pending=r}Pa=null}return e}function nb(e,t){do{var n=$t;try{if(zp(),nd.current=Od,Ad){for(var r=Ct.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ad=!1}if(Ua=0,Vt=Ut=Ct=null,al=!1,Sl=0,Zp.current=null,n===null||n.return===null){Ht=1,Pl=t,$t=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=en,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Lx(i);if(g!==null){g.flags&=-257,$x(g,i,l,o,t),g.mode&1&&Ix(o,d,t),t=g,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){Ix(o,d,t),sg();break e}c=Error(ce(426))}}else if(vt&&l.mode&1){var _=Lx(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),$x(_,i,l,o,t),$p(ni(c,l));break e}}o=c=ni(c,l),Ht!==4&&(Ht=2),il===null?il=[o]:il.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=F_(o,c,t);Tx(o,x);break e;case 1:l=c;var p=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ys===null||!Ys.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=z_(o,l,t);Tx(o,b);break e}}o=o.return}while(o!==null)}ab(n)}catch(j){t=j,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function rb(){var e=Id.current;return Id.current=Od,e===null?Od:e}function sg(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Kt===null||!(Wa&268435455)&&!(xu&268435455)||As(Kt,en)}function Fd(e,t){var n=Ze;Ze|=2;var r=rb();(Kt!==e||en!==t)&&(as=null,Oa(e,t));do try{GE();break}catch(a){nb(e,a)}while(!0);if(zp(),Ze=n,Id.current=r,$t!==null)throw Error(ce(261));return Kt=null,en=0,Ht}function GE(){for(;$t!==null;)sb($t)}function KE(){for(;$t!==null&&!y2();)sb($t)}function sb(e){var t=ib(e.alternate,e,zn);e.memoizedProps=e.pendingProps,t===null?ab(e):$t=t,Zp.current=null}function ab(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=BE(n,t),n!==null){n.flags&=32767,$t=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,$t=null;return}}else if(n=zE(n,t,zn),n!==null){$t=n;return}if(t=t.sibling,t!==null){$t=t;return}$t=t=e}while(t!==null);Ht===0&&(Ht=5)}function ja(e,t,n){var r=rt,a=rr.transition;try{rr.transition=null,rt=1,YE(e,t,n,r)}finally{rr.transition=a,rt=r}return null}function YE(e,t,n,r){do Do();while(Us!==null);if(Ze&6)throw Error(ce(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(P2(e,o),e===Kt&&($t=Kt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ec||(Ec=!0,lb(wd,function(){return Do(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rr.transition,rr.transition=null;var i=rt;rt=1;var l=Ze;Ze|=4,Zp.current=null,WE(e,n),Z_(n,e),pE(Qh),bd=!!Yh,Qh=Yh=null,e.current=n,HE(n),w2(),Ze=l,rt=i,rr.transition=o}else e.current=n;if(Ec&&(Ec=!1,Us=e,$d=a),o=e.pendingLanes,o===0&&(Ys=null),j2(n.stateNode),Dn(e,At()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ld)throw Ld=!1,e=vf,vf=null,e;return $d&1&&e.tag!==0&&Do(),o=e.pendingLanes,o&1?e===xf?ll++:(ll=0,xf=e):ll=0,ma(),null}function Do(){if(Us!==null){var e=Fw($d),t=rr.transition,n=rt;try{if(rr.transition=null,rt=16>e?16:e,Us===null)var r=!1;else{if(e=Us,Us=null,$d=0,Ze&6)throw Error(ce(331));var a=Ze;for(Ze|=4,je=e.current;je!==null;){var o=je,i=o.child;if(je.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(je=d;je!==null;){var u=je;switch(u.tag){case 0:case 11:case 15:ol(8,u,o)}var m=u.child;if(m!==null)m.return=u,je=m;else for(;je!==null;){u=je;var h=u.sibling,g=u.return;if(Q_(u),u===d){je=null;break}if(h!==null){h.return=g,je=h;break}je=g}}}var w=o.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}je=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,je=i;else e:for(;je!==null;){if(o=je,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,je=x;break e}je=o.return}}var p=e.current;for(je=p;je!==null;){i=je;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,je=v;else e:for(i=p;je!==null;){if(l=je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vu(9,l)}}catch(j){Pt(l,l.return,j)}if(l===i){je=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,je=b;break e}je=l.return}}if(Ze=a,ma(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(cu,e)}catch{}r=!0}return r}finally{rt=n,rr.transition=t}}return!1}function Xx(e,t,n){t=ni(n,t),t=F_(e,t,1),e=Ks(e,t,1),t=wn(),e!==null&&(Gl(e,1,t),Dn(e,t))}function Pt(e,t,n){if(e.tag===3)Xx(e,e,n);else for(;t!==null;){if(t.tag===3){Xx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ys===null||!Ys.has(r))){e=ni(n,e),e=z_(t,e,1),t=Ks(t,e,1),e=wn(),t!==null&&(Gl(t,1,e),Dn(t,e));break}}t=t.return}}function QE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wn(),e.pingedLanes|=e.suspendedLanes&n,Kt===e&&(en&n)===n&&(Ht===4||Ht===3&&(en&130023424)===en&&500>At()-tg?Oa(e,0):eg|=n),Dn(e,t)}function ob(e,t){t===0&&(e.mode&1?(t=xc,xc<<=1,!(xc&130023424)&&(xc=4194304)):t=1);var n=wn();e=hs(e,t),e!==null&&(Gl(e,t,n),Dn(e,n))}function XE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ob(e,n)}function JE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(t),ob(e,n)}var ib;ib=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)Tn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tn=!1,FE(e,t,n);Tn=!!(e.flags&131072)}else Tn=!1,vt&&t.flags&1048576&&u_(t,Pd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sd(e,t),e=t.pendingProps;var a=Jo(t,un.current);Ro(t,n),a=Kp(null,t,r,e,a,n);var o=Yp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(r)?(o=!0,kd(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Wp(t),a.updater=gu,t.stateNode=a,a._reactInternals=t,af(t,r,e,n),t=cf(null,t,r,!0,o,n)):(t.tag=0,vt&&o&&Ip(t),vn(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sd(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=eP(r),e=gr(r,e),a){case 0:t=lf(null,t,r,e,n);break e;case 1:t=Bx(null,t,r,e,n);break e;case 11:t=Fx(null,t,r,e,n);break e;case 14:t=zx(null,t,r,gr(r.type,e),n);break e}throw Error(ce(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gr(r,a),lf(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gr(r,a),Bx(e,t,r,a,n);case 3:e:{if(H_(t),e===null)throw Error(ce(387));r=t.pendingProps,o=t.memoizedState,a=o.element,v_(e,t),Rd(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=ni(Error(ce(423)),t),t=Ux(e,t,r,n,a);break e}else if(r!==a){a=ni(Error(ce(424)),t),t=Ux(e,t,r,n,a);break e}else for(Wn=Gs(t.stateNode.containerInfo.firstChild),Hn=t,vt=!0,_r=null,n=p_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zo(),r===a){t=fs(e,t,n);break e}vn(e,t,r,n)}t=t.child}return t;case 5:return x_(t),e===null&&nf(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Xh(r,a)?i=null:o!==null&&Xh(r,o)&&(t.flags|=32),W_(e,t),vn(e,t,i,n),t.child;case 6:return e===null&&nf(t),null;case 13:return q_(e,t,n);case 4:return Hp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ei(t,null,r,n):vn(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gr(r,a),Fx(e,t,r,a,n);case 7:return vn(e,t,t.pendingProps,n),t.child;case 8:return vn(e,t,t.pendingProps.children,n),t.child;case 12:return vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,lt(Td,r._currentValue),r._currentValue=i,o!==null)if(Sr(o.value,i)){if(o.children===a.children&&!Mn.current){t=fs(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=ds(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),rf(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ce(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),rf(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}vn(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ro(t,n),a=or(a),r=r(a),t.flags|=1,vn(e,t,r,n),t.child;case 14:return r=t.type,a=gr(r,t.pendingProps),a=gr(r.type,a),zx(e,t,r,a,n);case 15:return B_(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gr(r,a),sd(e,t),t.tag=1,Rn(r)?(e=!0,kd(t)):e=!1,Ro(t,n),$_(t,r,a),af(t,r,a,n),cf(null,t,r,!0,e,n);case 19:return V_(e,t,n);case 22:return U_(e,t,n)}throw Error(ce(156,t.tag))};function lb(e,t){return Ow(e,t)}function ZE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(e,t,n,r){return new ZE(e,t,n,r)}function ag(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eP(e){if(typeof e=="function")return ag(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Np)return 11;if(e===Cp)return 14}return 2}function Xs(e,t){var n=e.alternate;return n===null?(n=nr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function id(e,t,n,r,a,o){var i=2;if(r=e,typeof e=="function")ag(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case vo:return Ia(n.children,a,o,t);case jp:i=8,a|=8;break;case Ph:return e=nr(12,n,t,a|2),e.elementType=Ph,e.lanes=o,e;case Th:return e=nr(13,n,t,a),e.elementType=Th,e.lanes=o,e;case Mh:return e=nr(19,n,t,a),e.elementType=Mh,e.lanes=o,e;case xw:return yu(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gw:i=10;break e;case vw:i=9;break e;case Np:i=11;break e;case Cp:i=14;break e;case Ms:i=16,r=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=nr(i,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Ia(e,t,n,r){return e=nr(7,e,r,t),e.lanes=n,e}function yu(e,t,n,r){return e=nr(22,e,r,t),e.elementType=xw,e.lanes=n,e.stateNode={isHidden:!1},e}function Hm(e,t,n){return e=nr(6,e,null,t),e.lanes=n,e}function qm(e,t,n){return t=nr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tP(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function og(e,t,n,r,a,o,i,l,c){return e=new tP(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=nr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wp(o),e}function nP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cb(e){if(!e)return sa;e=e._reactInternals;e:{if(Ja(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var n=e.type;if(Rn(n))return c_(e,n,t)}return t}function db(e,t,n,r,a,o,i,l,c){return e=og(n,r,!0,e,a,o,i,l,c),e.context=cb(null),n=e.current,r=wn(),a=Qs(n),o=ds(r,a),o.callback=t??null,Ks(n,o,a),e.current.lanes=a,Gl(e,a,r),Dn(e,r),e}function wu(e,t,n,r){var a=t.current,o=wn(),i=Qs(a);return n=cb(n),t.context===null?t.context=n:t.pendingContext=n,t=ds(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ks(a,t,i),e!==null&&(Cr(e,a,i,o),td(e,a,i)),i}function zd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ig(e,t){Jx(e,t),(e=e.alternate)&&Jx(e,t)}function rP(){return null}var ub=typeof reportError=="function"?reportError:function(e){console.error(e)};function lg(e){this._internalRoot=e}_u.prototype.render=lg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));wu(e,t,null,null)};_u.prototype.unmount=lg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ha(function(){wu(null,e,null,null)}),t[ms]=null}};function _u(e){this._internalRoot=e}_u.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uw();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ds.length&&t!==0&&t<Ds[n].priority;n++);Ds.splice(n,0,e),n===0&&Hw(e)}};function cg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zx(){}function sP(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var d=zd(i);o.call(d)}}var i=db(t,r,e,0,null,!1,!1,"",Zx);return e._reactRootContainer=i,e[ms]=i.current,_l(e.nodeType===8?e.parentNode:e),Ha(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=zd(c);l.call(d)}}var c=og(e,0,!1,null,null,!1,!1,"",Zx);return e._reactRootContainer=c,e[ms]=c.current,_l(e.nodeType===8?e.parentNode:e),Ha(function(){wu(t,c,n,r)}),c}function ju(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=zd(i);l.call(c)}}wu(t,i,e,a)}else i=sP(n,t,e,a,r);return zd(i)}zw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yi(t.pendingLanes);n!==0&&(Ep(t,n|1),Dn(t,At()),!(Ze&6)&&(ri=At()+500,ma()))}break;case 13:Ha(function(){var r=hs(e,1);if(r!==null){var a=wn();Cr(r,e,1,a)}}),ig(e,1)}};Pp=function(e){if(e.tag===13){var t=hs(e,134217728);if(t!==null){var n=wn();Cr(t,e,134217728,n)}ig(e,134217728)}};Bw=function(e){if(e.tag===13){var t=Qs(e),n=hs(e,t);if(n!==null){var r=wn();Cr(n,e,t,r)}ig(e,t)}};Uw=function(){return rt};Ww=function(e,t){var n=rt;try{return rt=e,t()}finally{rt=n}};Bh=function(e,t,n){switch(t){case"input":if(Ah(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=hu(r);if(!a)throw Error(ce(90));ww(r),Ah(r,a)}}}break;case"textarea":bw(e,n);break;case"select":t=n.value,t!=null&&Eo(e,!!n.multiple,t,!1)}};Pw=ng;Tw=Ha;var aP={usingClientEntryPoint:!1,Events:[Yl,_o,hu,kw,Ew,ng]},Fi={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dw(e),e===null?null:e.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{cu=Pc.inject(oP),Kr=Pc}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aP;Kn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cg(t))throw Error(ce(200));return nP(e,t,null,n)};Kn.createRoot=function(e,t){if(!cg(e))throw Error(ce(299));var n=!1,r="",a=ub;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=og(e,1,!1,null,null,n,!1,r,a),e[ms]=t.current,_l(e.nodeType===8?e.parentNode:e),new lg(t)};Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=Dw(t),e=e===null?null:e.stateNode,e};Kn.flushSync=function(e){return Ha(e)};Kn.hydrate=function(e,t,n){if(!bu(t))throw Error(ce(200));return ju(null,e,t,!0,n)};Kn.hydrateRoot=function(e,t,n){if(!cg(e))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",i=ub;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=db(t,null,e,1,n??null,a,!1,o,i),e[ms]=t.current,_l(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new _u(t)};Kn.render=function(e,t,n){if(!bu(t))throw Error(ce(200));return ju(null,e,t,!1,n)};Kn.unmountComponentAtNode=function(e){if(!bu(e))throw Error(ce(40));return e._reactRootContainer?(Ha(function(){ju(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Kn.unstable_batchedUpdates=ng;Kn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bu(n))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return ju(e,t,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function mb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mb)}catch(e){console.error(e)}}mb(),mw.exports=Kn;var Za=mw.exports;const hb=pp(Za);var fb,ey=Za;fb=ey.createRoot,ey.hydrateRoot;const iP=1,lP=1e6;let Vm=0;function cP(){return Vm=(Vm+1)%Number.MAX_SAFE_INTEGER,Vm.toString()}const Gm=new Map,ty=e=>{if(Gm.has(e))return;const t=setTimeout(()=>{Gm.delete(e),cl({type:"REMOVE_TOAST",toastId:e})},lP);Gm.set(e,t)},dP=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,iP)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ty(n):e.toasts.forEach(r=>{ty(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},ld=[];let cd={toasts:[]};function cl(e){cd=dP(cd,e),ld.forEach(t=>{t(cd)})}function Tl({...e}){const t=cP(),n=a=>cl({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>cl({type:"DISMISS_TOAST",toastId:t});return cl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function kt(){const[e,t]=f.useState(cd);return f.useEffect(()=>(ld.push(t),()=>{const n=ld.indexOf(t);n>-1&&ld.splice(n,1)}),[e]),{...e,toast:Tl,dismiss:n=>cl({type:"DISMISS_TOAST",toastId:n})}}function _e(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function uP(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function pb(...e){return t=>e.forEach(n=>uP(n,t))}function Ie(...e){return f.useCallback(pb(...e),e)}function mP(e,t=[]){let n=[];function r(o,i){const l=f.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:h,children:g,...w}=m,y=(h==null?void 0:h[e][c])||l,_=f.useMemo(()=>w,Object.values(w));return s.jsx(y.Provider,{value:_,children:g})}function u(m,h){const g=(h==null?void 0:h[e][c])||l,w=f.useContext(g);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,hP(a,...t)]}function hP(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var qa=f.forwardRef((e,t)=>{const{children:n,...r}=e,a=f.Children.toArray(n),o=a.find(fP);if(o){const i=o.props.children,l=a.map(c=>c===o?f.Children.count(i)>1?f.Children.only(null):f.isValidElement(i)?i.props.children:null:c);return s.jsx(_f,{...r,ref:t,children:f.isValidElement(i)?f.cloneElement(i,void 0,l):null})}return s.jsx(_f,{...r,ref:t,children:n})});qa.displayName="Slot";var _f=f.forwardRef((e,t)=>{const{children:n,...r}=e;if(f.isValidElement(n)){const a=gP(n);return f.cloneElement(n,{...pP(r,n.props),ref:t?pb(t,a):a})}return f.Children.count(n)>1?f.Children.only(null):null});_f.displayName="SlotClone";var dg=({children:e})=>s.jsx(s.Fragment,{children:e});function fP(e){return f.isValidElement(e)&&e.type===dg}function pP(e,t){const n={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...l)=>{o(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function gP(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Xl(e){const t=e+"CollectionProvider",[n,r]=mP(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:y}=g,_=X.useRef(null),x=X.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:x,collectionRef:_,children:y})};i.displayName=t;const l=e+"CollectionSlot",c=X.forwardRef((g,w)=>{const{scope:y,children:_}=g,x=o(l,y),p=Ie(w,x.collectionRef);return s.jsx(qa,{ref:p,children:_})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=X.forwardRef((g,w)=>{const{scope:y,children:_,...x}=g,p=X.useRef(null),v=Ie(w,p),b=o(d,y);return X.useEffect(()=>(b.itemMap.set(p,{ref:p,...x}),()=>void b.itemMap.delete(p))),s.jsx(qa,{[u]:"",ref:v,children:_})});m.displayName=d;function h(g){const w=o(e+"CollectionConsumer",g);return X.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const x=Array.from(_.querySelectorAll(`[${u}]`));return Array.from(w.itemMap.values()).sort((b,j)=>x.indexOf(b.ref.current)-x.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:c,ItemSlot:m},h,r]}function vP(e,t){const n=f.createContext(t),r=o=>{const{children:i,...l}=o,c=f.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function a(o){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,a]}function cr(e,t=[]){let n=[];function r(o,i){const l=f.createContext(i),c=n.length;n=[...n,i];const d=m=>{var x;const{scope:h,children:g,...w}=m,y=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,_=f.useMemo(()=>w,Object.values(w));return s.jsx(y.Provider,{value:_,children:g})};d.displayName=o+"Provider";function u(m,h){var y;const g=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,w=f.useContext(g);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,xP(a,...t)]}function xP(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var yP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Me=yP.reduce((e,t)=>{const n=f.forwardRef((r,a)=>{const{asChild:o,...i}=r,l=o?qa:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function gb(e,t){e&&Za.flushSync(()=>e.dispatchEvent(t))}function Ot(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function wP(e,t=globalThis==null?void 0:globalThis.document){const n=Ot(e);f.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var _P="DismissableLayer",bf="dismissableLayer.update",bP="dismissableLayer.pointerDownOutside",jP="dismissableLayer.focusOutside",ny,vb=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jl=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=f.useContext(vb),[u,m]=f.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=f.useState({}),w=Ie(t,C=>m(C)),y=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(_),p=u?y.indexOf(u):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,b=p>=x,j=CP(C=>{const E=C.target,M=[...d.branches].some(R=>R.contains(E));!b||M||(a==null||a(C),i==null||i(C),C.defaultPrevented||l==null||l())},h),k=SP(C=>{const E=C.target;[...d.branches].some(R=>R.contains(E))||(o==null||o(C),i==null||i(C),C.defaultPrevented||l==null||l())},h);return wP(C=>{p===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),f.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ny=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ry(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ny)}},[u,h,n,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ry())},[u,d]),f.useEffect(()=>{const C=()=>g({});return document.addEventListener(bf,C),()=>document.removeEventListener(bf,C)},[]),s.jsx(Me.div,{...c,ref:w,style:{pointerEvents:v?b?"auto":"none":void 0,...e.style},onFocusCapture:_e(e.onFocusCapture,k.onFocusCapture),onBlurCapture:_e(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:_e(e.onPointerDownCapture,j.onPointerDownCapture)})});Jl.displayName=_P;var NP="DismissableLayerBranch",xb=f.forwardRef((e,t)=>{const n=f.useContext(vb),r=f.useRef(null),a=Ie(t,r);return f.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Me.div,{...e,ref:a})});xb.displayName=NP;function CP(e,t=globalThis==null?void 0:globalThis.document){const n=Ot(e),r=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){yb(bP,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function SP(e,t=globalThis==null?void 0:globalThis.document){const n=Ot(e),r=f.useRef(!1);return f.useEffect(()=>{const a=o=>{o.target&&!r.current&&yb(jP,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ry(){const e=new CustomEvent(bf);document.dispatchEvent(e)}function yb(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?gb(a,o):a.dispatchEvent(o)}var kP=Jl,EP=xb,Qt=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},PP="Portal",Nu=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,o]=f.useState(!1);Qt(()=>o(!0),[]);const i=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?hb.createPortal(s.jsx(Me.div,{...r,ref:t}),i):null});Nu.displayName=PP;function TP(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Qn=e=>{const{present:t,children:n}=e,r=MP(t),a=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=Ie(r.ref,RP(a));return typeof n=="function"||r.isPresent?f.cloneElement(a,{ref:o}):null};Qn.displayName="Presence";function MP(e){const[t,n]=f.useState(),r=f.useRef({}),a=f.useRef(e),o=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=TP(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=Tc(r.current);o.current=l==="mounted"?d:"none"},[l]),Qt(()=>{const d=r.current,u=a.current;if(u!==e){const h=o.current,g=Tc(d);e?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Qt(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=g=>{const y=Tc(r.current).includes(g.animationName);if(g.target===t&&y&&(c("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},h=g=>{g.target===t&&(o.current=Tc(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Tc(e){return(e==null?void 0:e.animationName)||"none"}function RP(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function lr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=DP({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,l=Ot(n),c=f.useCallback(d=>{if(o){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[o,e,a,l]);return[i,c]}function DP({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,a=f.useRef(r),o=Ot(t);return f.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}var AP="VisuallyHidden",Zl=f.forwardRef((e,t)=>s.jsx(Me.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Zl.displayName=AP;var OP=Zl,ug="ToastProvider",[mg,IP,LP]=Xl("Toast"),[wb,Nz]=cr("Toast",[LP]),[$P,Cu]=wb(ug),_b=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),m=f.useRef(!1),h=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ug}\`. Expected non-empty \`string\`.`),s.jsx(mg.Provider,{scope:t,children:s.jsx($P,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(g=>g+1),[]),onToastRemove:f.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:i})})};_b.displayName=ug;var bb="ToastViewport",FP=["F8"],jf="toast.viewportPause",Nf="toast.viewportResume",jb=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=FP,label:a="Notifications ({hotkey})",...o}=e,i=Cu(bb,n),l=IP(n),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),m=f.useRef(null),h=Ie(t,m,i.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=i.toastCount>0;f.useEffect(()=>{const _=x=>{var v;r.length!==0&&r.every(b=>x[b]||x.code===b)&&((v=m.current)==null||v.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),f.useEffect(()=>{const _=c.current,x=m.current;if(w&&_&&x){const p=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(jf);x.dispatchEvent(k),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(Nf);x.dispatchEvent(k),i.isClosePausedRef.current=!1}},b=k=>{!_.contains(k.relatedTarget)&&v()},j=()=>{_.contains(document.activeElement)||v()};return _.addEventListener("focusin",p),_.addEventListener("focusout",b),_.addEventListener("pointermove",p),_.addEventListener("pointerleave",j),window.addEventListener("blur",p),window.addEventListener("focus",v),()=>{_.removeEventListener("focusin",p),_.removeEventListener("focusout",b),_.removeEventListener("pointermove",p),_.removeEventListener("pointerleave",j),window.removeEventListener("blur",p),window.removeEventListener("focus",v)}}},[w,i.isClosePausedRef]);const y=f.useCallback(({tabbingDirection:_})=>{const p=l().map(v=>{const b=v.ref.current,j=[b,...JP(b)];return _==="forwards"?j:j.reverse()});return(_==="forwards"?p.reverse():p).flat()},[l]);return f.useEffect(()=>{const _=m.current;if(_){const x=p=>{var j,k,C;const v=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!v){const E=document.activeElement,M=p.shiftKey;if(p.target===_&&M){(j=d.current)==null||j.focus();return}const P=y({tabbingDirection:M?"backwards":"forwards"}),D=P.findIndex(z=>z===E);Km(P.slice(D+1))?p.preventDefault():M?(k=d.current)==null||k.focus():(C=u.current)==null||C.focus()}};return _.addEventListener("keydown",x),()=>_.removeEventListener("keydown",x)}},[l,y]),s.jsxs(EP,{ref:c,role:"region","aria-label":a.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&s.jsx(Cf,{ref:d,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});Km(_)}}),s.jsx(mg.Slot,{scope:n,children:s.jsx(Me.ol,{tabIndex:-1,...o,ref:h})}),w&&s.jsx(Cf,{ref:u,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});Km(_)}})]})});jb.displayName=bb;var Nb="ToastFocusProxy",Cf=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,o=Cu(Nb,n);return s.jsx(Zl,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&r()}})});Cf.displayName=Nb;var Su="Toast",zP="toast.swipeStart",BP="toast.swipeMove",UP="toast.swipeCancel",WP="toast.swipeEnd",Cb=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o,...i}=e,[l=!0,c]=lr({prop:r,defaultProp:a,onChange:o});return s.jsx(Qn,{present:n||l,children:s.jsx(VP,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ot(e.onPause),onResume:Ot(e.onResume),onSwipeStart:_e(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_e(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:_e(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_e(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Cb.displayName=Su;var[HP,qP]=wb(Su,{onClose(){}}),VP=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:g,...w}=e,y=Cu(Su,n),[_,x]=f.useState(null),p=Ie(t,z=>x(z)),v=f.useRef(null),b=f.useRef(null),j=a||y.duration,k=f.useRef(0),C=f.useRef(j),E=f.useRef(0),{onToastAdd:M,onToastRemove:R}=y,I=Ot(()=>{var Y;(_==null?void 0:_.contains(document.activeElement))&&((Y=y.viewport)==null||Y.focus()),i()}),P=f.useCallback(z=>{!z||z===1/0||(window.clearTimeout(E.current),k.current=new Date().getTime(),E.current=window.setTimeout(I,z))},[I]);f.useEffect(()=>{const z=y.viewport;if(z){const Y=()=>{P(C.current),d==null||d()},A=()=>{const T=new Date().getTime()-k.current;C.current=C.current-T,window.clearTimeout(E.current),c==null||c()};return z.addEventListener(jf,A),z.addEventListener(Nf,Y),()=>{z.removeEventListener(jf,A),z.removeEventListener(Nf,Y)}}},[y.viewport,j,c,d,P]),f.useEffect(()=>{o&&!y.isClosePausedRef.current&&P(j)},[o,j,y.isClosePausedRef,P]),f.useEffect(()=>(M(),()=>R()),[M,R]);const D=f.useMemo(()=>_?Rb(_):null,[_]);return y.viewport?s.jsxs(s.Fragment,{children:[D&&s.jsx(GP,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),s.jsx(HP,{scope:n,onClose:I,children:Za.createPortal(s.jsx(mg.ItemSlot,{scope:n,children:s.jsx(kP,{asChild:!0,onEscapeKeyDown:_e(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||I(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":y.swipeDirection,...w,ref:p,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:_e(e.onKeyDown,z=>{z.key==="Escape"&&(l==null||l(z.nativeEvent),z.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:_e(e.onPointerDown,z=>{z.button===0&&(v.current={x:z.clientX,y:z.clientY})}),onPointerMove:_e(e.onPointerMove,z=>{if(!v.current)return;const Y=z.clientX-v.current.x,A=z.clientY-v.current.y,T=!!b.current,S=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,H=S?F(0,Y):0,Q=S?0:F(0,A),O=z.pointerType==="touch"?10:2,q={x:H,y:Q},ne={originalEvent:z,delta:q};T?(b.current=q,Mc(BP,m,ne,{discrete:!1})):sy(q,y.swipeDirection,O)?(b.current=q,Mc(zP,u,ne,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(Y)>O||Math.abs(A)>O)&&(v.current=null)}),onPointerUp:_e(e.onPointerUp,z=>{const Y=b.current,A=z.target;if(A.hasPointerCapture(z.pointerId)&&A.releasePointerCapture(z.pointerId),b.current=null,v.current=null,Y){const T=z.currentTarget,S={originalEvent:z,delta:Y};sy(Y,y.swipeDirection,y.swipeThreshold)?Mc(WP,g,S,{discrete:!0}):Mc(UP,h,S,{discrete:!0}),T.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),GP=e=>{const{__scopeToast:t,children:n,...r}=e,a=Cu(Su,t),[o,i]=f.useState(!1),[l,c]=f.useState(!1);return QP(()=>i(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Nu,{asChild:!0,children:s.jsx(Zl,{...r,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},KP="ToastTitle",Sb=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Me.div,{...r,ref:t})});Sb.displayName=KP;var YP="ToastDescription",kb=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Me.div,{...r,ref:t})});kb.displayName=YP;var Eb="ToastAction",Pb=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(Mb,{altText:n,asChild:!0,children:s.jsx(hg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Eb}\`. Expected non-empty \`string\`.`),null)});Pb.displayName=Eb;var Tb="ToastClose",hg=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=qP(Tb,n);return s.jsx(Mb,{asChild:!0,children:s.jsx(Me.button,{type:"button",...r,ref:t,onClick:_e(e.onClick,a.onClose)})})});hg.displayName=Tb;var Mb=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function Rb(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),XP(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Rb(r))}}),t}function Mc(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?gb(a,o):a.dispatchEvent(o)}var sy=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),o=r>a;return t==="left"||t==="right"?o&&r>n:!o&&a>n};function QP(e=()=>{}){const t=Ot(e);Qt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function XP(e){return e.nodeType===e.ELEMENT_NODE}function JP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Km(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var ZP=_b,Db=jb,Ab=Cb,Ob=Sb,Ib=kb,Lb=Pb,$b=hg;function Fb(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Fb(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function zb(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Fb(e))&&(r&&(r+=" "),r+=t);return r}const ay=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,oy=zb,ku=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return oy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],m=o==null?void 0:o[d];if(u===null)return null;const h=ay(u)||ay(m);return a[d][h]}),l=n&&Object.entries(n).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:m,className:h,...g}=u;return Object.entries(g).every(w=>{let[y,_]=w;return Array.isArray(_)?_.includes({...o,...l}[y]):{...o,...l}[y]===_})?[...d,m,h]:d},[]);return oy(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bb=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...tT,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Bb("lucide",a),...l},[...i.map(([d,u])=>f.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(e,t)=>{const n=f.forwardRef(({className:r,...a},o)=>f.createElement(nT,{ref:o,iconNode:t,className:Bb(`lucide-${eT(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Re("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Re("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=Re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Re("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Re("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Re("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=Re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=Re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Re("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Re("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Re("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Re("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_g="-",fT=e=>{const t=gT(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(_g);return l[0]===""&&l.length!==1&&l.shift(),Qb(l,t)||pT(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},Qb=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?Qb(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(_g);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},my=/^\[(.+)\]$/,pT=e=>{if(my.test(e)){const t=my.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},gT=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return xT(Object.entries(e.classGroups),n).forEach(([o,i])=>{Mf(i,r,o,t)}),r},Mf=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:hy(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(vT(a)){Mf(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,i])=>{Mf(i,hy(t,o),n,r)})})},hy=(e,t)=>{let n=e;return t.split(_g).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vT=e=>e.isThemeGetter,xT=(e,t)=>t?e.map(([n,r])=>{const a=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[n,a]}):e,yT=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return a(o,i),i},set(o,i){n.has(o)?n.set(o,i):a(o,i)}}},Xb="!",wT=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,m;for(let _=0;_<l.length;_++){let x=l[_];if(d===0){if(x===a&&(r||l.slice(_,_+o)===t)){c.push(l.slice(u,_)),u=_+o;continue}if(x==="/"){m=_;continue}}x==="["?d++:x==="]"&&d--}const h=c.length===0?l:l.substring(u),g=h.startsWith(Xb),w=g?h.substring(1):h,y=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:i}):i},_T=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},bT=e=>({cache:yT(e.cacheSize),parseClassName:wT(e),...fT(e)}),jT=/\s+/,NT=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(jT);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}=n(d);let w=!!g,y=r(w?h.substring(0,g):h);if(!y){if(!w){l=d+(l.length>0?" "+l:l);continue}if(y=r(h),!y){l=d+(l.length>0?" "+l:l);continue}w=!1}const _=_T(u).join(":"),x=m?_+Xb:_,p=x+y;if(o.includes(p))continue;o.push(p);const v=a(y,w);for(let b=0;b<v.length;++b){const j=v[b];o.push(x+j)}l=d+(l.length>0?" "+l:l)}return l};function CT(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Jb(t))&&(r&&(r+=" "),r+=n);return r}const Jb=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Jb(e[r]))&&(n&&(n+=" "),n+=t);return n};function ST(e,...t){let n,r,a,o=i;function i(c){const d=t.reduce((u,m)=>m(u),e());return n=bT(d),r=n.cache.get,a=n.cache.set,o=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=NT(c,n);return a(c,u),u}return function(){return o(CT.apply(null,arguments))}}const ht=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Zb=/^\[(?:([a-z-]+):)?(.+)\]$/i,kT=/^\d+\/\d+$/,ET=new Set(["px","full","screen"]),PT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,es=e=>Oo(e)||ET.has(e)||kT.test(e),Ns=e=>gi(e,"length",BT),Oo=e=>!!e&&!Number.isNaN(Number(e)),Qm=e=>gi(e,"number",Oo),zi=e=>!!e&&Number.isInteger(Number(e)),AT=e=>e.endsWith("%")&&Oo(e.slice(0,-1)),$e=e=>Zb.test(e),Cs=e=>PT.test(e),OT=new Set(["length","size","percentage"]),IT=e=>gi(e,OT,ej),LT=e=>gi(e,"position",ej),$T=new Set(["image","url"]),FT=e=>gi(e,$T,WT),zT=e=>gi(e,"",UT),Bi=()=>!0,gi=(e,t,n)=>{const r=Zb.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},BT=e=>TT.test(e)&&!MT.test(e),ej=()=>!1,UT=e=>RT.test(e),WT=e=>DT.test(e),HT=()=>{const e=ht("colors"),t=ht("spacing"),n=ht("blur"),r=ht("brightness"),a=ht("borderColor"),o=ht("borderRadius"),i=ht("borderSpacing"),l=ht("borderWidth"),c=ht("contrast"),d=ht("grayscale"),u=ht("hueRotate"),m=ht("invert"),h=ht("gap"),g=ht("gradientColorStops"),w=ht("gradientColorStopPositions"),y=ht("inset"),_=ht("margin"),x=ht("opacity"),p=ht("padding"),v=ht("saturate"),b=ht("scale"),j=ht("sepia"),k=ht("skew"),C=ht("space"),E=ht("translate"),M=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",$e,t],P=()=>[$e,t],D=()=>["",es,Ns],z=()=>["auto",Oo,$e],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],T=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",$e],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Oo,$e];return{cacheSize:500,separator:":",theme:{colors:[Bi],spacing:[es,Ns],blur:["none","",Cs,$e],brightness:Q(),borderColor:[e],borderRadius:["none","","full",Cs,$e],borderSpacing:P(),borderWidth:D(),contrast:Q(),grayscale:F(),hueRotate:Q(),invert:F(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[AT,Ns],inset:I(),margin:I(),opacity:Q(),padding:P(),saturate:Q(),scale:Q(),sepia:F(),skew:Q(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",$e]}],container:["container"],columns:[{columns:[Cs]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),$e]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zi,$e]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$e]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",zi,$e]}],"grid-cols":[{"grid-cols":[Bi]}],"col-start-end":[{col:["auto",{span:["full",zi,$e]},$e]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Bi]}],"row-start-end":[{row:["auto",{span:[zi,$e]},$e]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$e]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...S()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...S(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...S(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$e,t]}],"min-w":[{"min-w":[$e,t,"min","max","fit"]}],"max-w":[{"max-w":[$e,t,"none","full","min","max","fit","prose",{screen:[Cs]},Cs]}],h:[{h:[$e,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$e,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$e,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$e,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Cs,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qm]}],"font-family":[{font:[Bi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$e]}],"line-clamp":[{"line-clamp":["none",Oo,Qm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",es,$e]}],"list-image":[{"list-image":["none",$e]}],"list-style-type":[{list:["none","disc","decimal",$e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",es,Ns]}],"underline-offset":[{"underline-offset":["auto",es,$e]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),LT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FT]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:A()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[es,$e]}],"outline-w":[{outline:[es,Ns]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[es,Ns]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cs,zT]}],"shadow-color":[{shadow:[Bi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...T(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":T()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Cs,$e]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$e]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",$e]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",$e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[zi,$e]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[es,Ns,Qm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qT=ST(HT);function le(...e){return qT(zb(e))}const VT=ZP,tj=f.forwardRef(({className:e,...t},n)=>s.jsx(Db,{ref:n,className:le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));tj.displayName=Db.displayName;const GT=ku("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nj=f.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(Ab,{ref:r,className:le(GT({variant:t}),e),...n}));nj.displayName=Ab.displayName;const KT=f.forwardRef(({className:e,...t},n)=>s.jsx(Lb,{ref:n,className:le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));KT.displayName=Lb.displayName;const rj=f.forwardRef(({className:e,...t},n)=>s.jsx($b,{ref:n,className:le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Tt,{className:"h-4 w-4"})}));rj.displayName=$b.displayName;const sj=f.forwardRef(({className:e,...t},n)=>s.jsx(Ob,{ref:n,className:le("text-sm font-semibold",e),...t}));sj.displayName=Ob.displayName;const aj=f.forwardRef(({className:e,...t},n)=>s.jsx(Ib,{ref:n,className:le("text-sm opacity-90",e),...t}));aj.displayName=Ib.displayName;function YT(){const{toasts:e}=kt();return s.jsxs(VT,{children:[e.map(function({id:t,title:n,description:r,action:a,...o}){return s.jsxs(nj,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(sj,{children:n}),r&&s.jsx(aj,{children:r})]}),a,s.jsx(rj,{})]},t)}),s.jsx(tj,{})]})}var fy=["light","dark"],QT="(prefers-color-scheme: dark)",XT=f.createContext(void 0),JT={setTheme:e=>{},themes:[]},ZT=()=>{var e;return(e=f.useContext(XT))!=null?e:JT};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=a?fy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(w,y=!1,_=!0)=>{let x=i?i[w]:w,p=y?w+"|| ''":`'${x}'`,v="";return a&&_&&!y&&fy.includes(w)&&(v+=`d.style.colorScheme = '${w}';`),n==="class"?y||x?v+=`c.add(${p})`:v+="null":x&&(v+=`d[s](n,${p})`),v},g=e?`!function(){${u}${h(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${QT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${d?"":"else{"+h(o,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${m}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var eM=e=>{switch(e){case"success":return rM;case"info":return aM;case"warning":return sM;case"error":return oM;default:return null}},tM=Array(12).fill(0),nM=({visible:e})=>X.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},X.createElement("div",{className:"sonner-spinner"},tM.map((t,n)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),rM=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sM=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aM=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oM=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iM=()=>{let[e,t]=X.useState(document.hidden);return X.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Rf=1,lM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Rf++,o=this.toasts.find(l=>l.id===a),i=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0;return r.then(async o=>{if(dM(o)&&!o.ok){a=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:n,type:"error",message:i,description:l})}else if(t.success!==void 0){a=!1;let i=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"success",message:i,description:l})}}).catch(async o=>{if(t.error!==void 0){a=!1;let i=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"error",message:i,description:l})}}).finally(()=>{var o;a&&(this.dismiss(n),n=void 0),(o=t.finally)==null||o.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Rf++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Fn=new lM,cM=(e,t)=>{let n=(t==null?void 0:t.id)||Rf++;return Fn.addToast({title:e,...t,id:n}),n},dM=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",uM=cM,mM=()=>Fn.toasts,Wt=Object.assign(uM,{success:Fn.success,info:Fn.info,warning:Fn.warning,error:Fn.error,custom:Fn.custom,message:Fn.message,promise:Fn.promise,dismiss:Fn.dismiss,loading:Fn.loading},{getHistory:mM});function hM(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}hM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rc(e){return e.label!==void 0}var fM=3,pM="32px",gM=4e3,vM=356,xM=14,yM=20,wM=200;function _M(...e){return e.filter(Boolean).join(" ")}var bM=e=>{var t,n,r,a,o,i,l,c,d,u;let{invert:m,toast:h,unstyled:g,interacting:w,setHeights:y,visibleToasts:_,heights:x,index:p,toasts:v,expanded:b,removeToast:j,defaultRichColors:k,closeButton:C,style:E,cancelButtonStyle:M,actionButtonStyle:R,className:I="",descriptionClassName:P="",duration:D,position:z,gap:Y,loadingIcon:A,expandByDefault:T,classNames:S,icons:F,closeButtonAriaLabel:H="Close toast",pauseWhenPageIsHidden:Q,cn:O}=e,[q,ne]=X.useState(!1),[Pe,ue]=X.useState(!1),[$,te]=X.useState(!1),[xe,fe]=X.useState(!1),[he,N]=X.useState(0),[L,U]=X.useState(0),V=X.useRef(null),ee=X.useRef(null),ae=p===0,ye=p+1<=_,me=h.type,ve=h.dismissible!==!1,Ye=h.className||"",Z=h.descriptionClassName||"",ge=X.useMemo(()=>x.findIndex(Oe=>Oe.toastId===h.id)||0,[x,h.id]),J=X.useMemo(()=>{var Oe;return(Oe=h.closeButton)!=null?Oe:C},[h.closeButton,C]),Te=X.useMemo(()=>h.duration||D||gM,[h.duration,D]),Qe=X.useRef(0),ot=X.useRef(0),Fe=X.useRef(0),xt=X.useRef(null),[qt,ut]=z.split("-"),Ar=X.useMemo(()=>x.reduce((Oe,Xe,tt)=>tt>=ge?Oe:Oe+Xe.height,0),[x,ge]),Xn=iM(),gt=h.invert||m,mr=me==="loading";ot.current=X.useMemo(()=>ge*Y+Ar,[ge,Ar]),X.useEffect(()=>{ne(!0)},[]),X.useLayoutEffect(()=>{if(!q)return;let Oe=ee.current,Xe=Oe.style.height;Oe.style.height="auto";let tt=Oe.getBoundingClientRect().height;Oe.style.height=Xe,U(tt),y(Jn=>Jn.find(On=>On.toastId===h.id)?Jn.map(On=>On.toastId===h.id?{...On,height:tt}:On):[{toastId:h.id,height:tt,position:h.position},...Jn])},[q,h.title,h.description,y,h.id]);let mn=X.useCallback(()=>{ue(!0),N(ot.current),y(Oe=>Oe.filter(Xe=>Xe.toastId!==h.id)),setTimeout(()=>{j(h)},wM)},[h,j,y,ot]);X.useEffect(()=>{if(h.promise&&me==="loading"||h.duration===1/0||h.type==="loading")return;let Oe,Xe=Te;return b||w||Q&&Xn?(()=>{if(Fe.current<Qe.current){let tt=new Date().getTime()-Qe.current;Xe=Xe-tt}Fe.current=new Date().getTime()})():Xe!==1/0&&(Qe.current=new Date().getTime(),Oe=setTimeout(()=>{var tt;(tt=h.onAutoClose)==null||tt.call(h,h),mn()},Xe)),()=>clearTimeout(Oe)},[b,w,T,h,Te,mn,h.promise,me,Q,Xn]),X.useEffect(()=>{let Oe=ee.current;if(Oe){let Xe=Oe.getBoundingClientRect().height;return U(Xe),y(tt=>[{toastId:h.id,height:Xe,position:h.position},...tt]),()=>y(tt=>tt.filter(Jn=>Jn.toastId!==h.id))}},[y,h.id]),X.useEffect(()=>{h.delete&&mn()},[mn,h.delete]);function Or(){return F!=null&&F.loading?X.createElement("div",{className:"sonner-loader","data-visible":me==="loading"},F.loading):A?X.createElement("div",{className:"sonner-loader","data-visible":me==="loading"},A):X.createElement(nM,{visible:me==="loading"})}return X.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ee,className:O(I,Ye,S==null?void 0:S.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,S==null?void 0:S.default,S==null?void 0:S[me],(n=h==null?void 0:h.classNames)==null?void 0:n[me]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:k,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":q,"data-promise":!!h.promise,"data-removed":Pe,"data-visible":ye,"data-y-position":qt,"data-x-position":ut,"data-index":p,"data-front":ae,"data-swiping":$,"data-dismissible":ve,"data-type":me,"data-invert":gt,"data-swipe-out":xe,"data-expanded":!!(b||T&&q),style:{"--index":p,"--toasts-before":p,"--z-index":v.length-p,"--offset":`${Pe?he:ot.current}px`,"--initial-height":T?"auto":`${L}px`,...E,...h.style},onPointerDown:Oe=>{mr||!ve||(V.current=new Date,N(ot.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(te(!0),xt.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,Xe,tt,Jn;if(xe||!ve)return;xt.current=null;let On=Number(((Oe=ee.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),xa=new Date().getTime()-((Xe=V.current)==null?void 0:Xe.getTime()),Ti=Math.abs(On)/xa;if(Math.abs(On)>=yM||Ti>.11){N(ot.current),(tt=h.onDismiss)==null||tt.call(h,h),mn(),fe(!0);return}(Jn=ee.current)==null||Jn.style.setProperty("--swipe-amount","0px"),te(!1)},onPointerMove:Oe=>{var Xe;if(!xt.current||!ve)return;let tt=Oe.clientY-xt.current.y,Jn=Oe.clientX-xt.current.x,On=(qt==="top"?Math.min:Math.max)(0,tt),xa=Oe.pointerType==="touch"?10:2;Math.abs(On)>xa?(Xe=ee.current)==null||Xe.style.setProperty("--swipe-amount",`${tt}px`):Math.abs(Jn)>xa&&(xt.current=null)}},J&&!h.jsx?X.createElement("button",{"aria-label":H,"data-disabled":mr,"data-close-button":!0,onClick:mr||!ve?()=>{}:()=>{var Oe;mn(),(Oe=h.onDismiss)==null||Oe.call(h,h)},className:O(S==null?void 0:S.closeButton,(a=h==null?void 0:h.classNames)==null?void 0:a.closeButton)},X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||X.isValidElement(h.title)?h.jsx||h.title:X.createElement(X.Fragment,null,me||h.icon||h.promise?X.createElement("div",{"data-icon":"",className:O(S==null?void 0:S.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Or():null,h.type!=="loading"?h.icon||(F==null?void 0:F[me])||eM(me):null):null,X.createElement("div",{"data-content":"",className:O(S==null?void 0:S.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},X.createElement("div",{"data-title":"",className:O(S==null?void 0:S.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},h.title),h.description?X.createElement("div",{"data-description":"",className:O(P,Z,S==null?void 0:S.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),X.isValidElement(h.cancel)?h.cancel:h.cancel&&Rc(h.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||M,onClick:Oe=>{var Xe,tt;Rc(h.cancel)&&ve&&((tt=(Xe=h.cancel).onClick)==null||tt.call(Xe,Oe),mn())},className:O(S==null?void 0:S.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,X.isValidElement(h.action)?h.action:h.action&&Rc(h.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||R,onClick:Oe=>{var Xe,tt;Rc(h.action)&&(Oe.defaultPrevented||((tt=(Xe=h.action).onClick)==null||tt.call(Xe,Oe),mn()))},className:O(S==null?void 0:S.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function py(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var jM=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:a,closeButton:o,className:i,offset:l,theme:c="light",richColors:d,duration:u,style:m,visibleToasts:h=fM,toastOptions:g,dir:w=py(),gap:y=xM,loadingIcon:_,icons:x,containerAriaLabel:p="Notifications",pauseWhenPageIsHidden:v,cn:b=_M}=e,[j,k]=X.useState([]),C=X.useMemo(()=>Array.from(new Set([n].concat(j.filter(Q=>Q.position).map(Q=>Q.position)))),[j,n]),[E,M]=X.useState([]),[R,I]=X.useState(!1),[P,D]=X.useState(!1),[z,Y]=X.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=X.useRef(null),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=X.useRef(null),F=X.useRef(!1),H=X.useCallback(Q=>{var O;(O=j.find(q=>q.id===Q.id))!=null&&O.delete||Fn.dismiss(Q.id),k(q=>q.filter(({id:ne})=>ne!==Q.id))},[j]);return X.useEffect(()=>Fn.subscribe(Q=>{if(Q.dismiss){k(O=>O.map(q=>q.id===Q.id?{...q,delete:!0}:q));return}setTimeout(()=>{hb.flushSync(()=>{k(O=>{let q=O.findIndex(ne=>ne.id===Q.id);return q!==-1?[...O.slice(0,q),{...O[q],...Q},...O.slice(q+1)]:[Q,...O]})})})}),[]),X.useEffect(()=>{if(c!=="system"){Y(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Q})=>{Y(Q?"dark":"light")})},[c]),X.useEffect(()=>{j.length<=1&&I(!1)},[j]),X.useEffect(()=>{let Q=O=>{var q,ne;r.every(Pe=>O[Pe]||O.code===Pe)&&(I(!0),(q=A.current)==null||q.focus()),O.code==="Escape"&&(document.activeElement===A.current||(ne=A.current)!=null&&ne.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[r]),X.useEffect(()=>{if(A.current)return()=>{S.current&&(S.current.focus({preventScroll:!0}),S.current=null,F.current=!1)}},[A.current]),j.length?X.createElement("section",{"aria-label":`${p} ${T}`,tabIndex:-1},C.map((Q,O)=>{var q;let[ne,Pe]=Q.split("-");return X.createElement("ol",{key:Q,dir:w==="auto"?py():w,tabIndex:-1,ref:A,className:i,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":ne,"data-x-position":Pe,style:{"--front-toast-height":`${((q=E[0])==null?void 0:q.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||pM,"--width":`${vM}px`,"--gap":`${y}px`,...m},onBlur:ue=>{F.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(F.current=!1,S.current&&(S.current.focus({preventScroll:!0}),S.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||F.current||(F.current=!0,S.current=ue.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{P||I(!1)},onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},j.filter(ue=>!ue.position&&O===0||ue.position===Q).map((ue,$)=>{var te,xe;return X.createElement(bM,{key:ue.id,icons:x,index:$,toast:ue,defaultRichColors:d,duration:(te=g==null?void 0:g.duration)!=null?te:u,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:h,closeButton:(xe=g==null?void 0:g.closeButton)!=null?xe:o,interacting:P,position:Q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:H,toasts:j.filter(fe=>fe.position==ue.position),heights:E.filter(fe=>fe.position==ue.position),setHeights:M,expandByDefault:a,gap:y,loadingIcon:_,expanded:R,pauseWhenPageIsHidden:v,cn:b})}))})):null};const NM=({...e})=>{const{theme:t="system"}=ZT();return s.jsx(jM,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var CM=dw.useId||(()=>{}),SM=0;function Qr(e){const[t,n]=f.useState(CM());return Qt(()=>{e||n(r=>r??String(SM++))},[e]),e||(t?`radix-${t}`:"")}const kM=["top","right","bottom","left"],aa=Math.min,Bn=Math.max,Wd=Math.round,Dc=Math.floor,oa=e=>({x:e,y:e}),EM={left:"right",right:"left",bottom:"top",top:"bottom"},PM={start:"end",end:"start"};function Df(e,t,n){return Bn(e,aa(t,n))}function ps(e,t){return typeof e=="function"?e(t):e}function gs(e){return e.split("-")[0]}function vi(e){return e.split("-")[1]}function bg(e){return e==="x"?"y":"x"}function jg(e){return e==="y"?"height":"width"}function ia(e){return["top","bottom"].includes(gs(e))?"y":"x"}function Ng(e){return bg(ia(e))}function TM(e,t,n){n===void 0&&(n=!1);const r=vi(e),a=Ng(e),o=jg(a);let i=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Hd(i)),[i,Hd(i)]}function MM(e){const t=Hd(e);return[Af(e),t,Af(t)]}function Af(e){return e.replace(/start|end/g,t=>PM[t])}function RM(e,t,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?o:i;default:return[]}}function DM(e,t,n,r){const a=vi(e);let o=RM(gs(e),n==="start",r);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(Af)))),o}function Hd(e){return e.replace(/left|right|bottom|top/g,t=>EM[t])}function AM(e){return{top:0,right:0,bottom:0,left:0,...e}}function oj(e){return typeof e!="number"?AM(e):{top:e,right:e,bottom:e,left:e}}function qd(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function gy(e,t,n){let{reference:r,floating:a}=e;const o=ia(t),i=Ng(t),l=jg(i),c=gs(t),d=o==="y",u=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let g;switch(c){case"top":g={x:u,y:r.y-a.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-a.width,y:m};break;default:g={x:r.x,y:r.y}}switch(vi(t)){case"start":g[i]-=h*(n&&d?-1:1);break;case"end":g[i]+=h*(n&&d?-1:1);break}return g}const OM=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=gy(d,r,c),h=r,g={},w=0;for(let y=0;y<l.length;y++){const{name:_,fn:x}=l[y],{x:p,y:v,data:b,reset:j}=await x({x:u,y:m,initialPlacement:r,placement:h,strategy:a,middlewareData:g,rects:d,platform:i,elements:{reference:e,floating:t}});u=p??u,m=v??m,g={...g,[_]:{...g[_],...b}},j&&w<=50&&(w++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(d=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:u,y:m}=gy(d,h,c)),y=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:g}};async function Al(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:g=0}=ps(t,e),w=oj(g),_=l[h?m==="floating"?"reference":"floating":m],x=qd(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),p=m==="floating"?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},j=qd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:v,strategy:c}):p);return{top:(x.top-j.top+w.top)/b.y,bottom:(j.bottom-x.bottom+w.bottom)/b.y,left:(x.left-j.left+w.left)/b.x,right:(j.right-x.right+w.right)/b.x}}const IM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ps(e,t)||{};if(d==null)return{};const m=oj(u),h={x:n,y:r},g=Ng(a),w=jg(g),y=await i.getDimensions(d),_=g==="y",x=_?"top":"left",p=_?"bottom":"right",v=_?"clientHeight":"clientWidth",b=o.reference[w]+o.reference[g]-h[g]-o.floating[w],j=h[g]-o.reference[g],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let C=k?k[v]:0;(!C||!await(i.isElement==null?void 0:i.isElement(k)))&&(C=l.floating[v]||o.floating[w]);const E=b/2-j/2,M=C/2-y[w]/2-1,R=aa(m[x],M),I=aa(m[p],M),P=R,D=C-y[w]-I,z=C/2-y[w]/2+E,Y=Df(P,z,D),A=!c.arrow&&vi(a)!=null&&z!==Y&&o.reference[w]/2-(z<P?R:I)-y[w]/2<0,T=A?z<P?z-P:z-D:0;return{[g]:h[g]+T,data:{[g]:Y,centerOffset:z-Y-T,...A&&{alignmentOffset:T}},reset:A}}}),LM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,..._}=ps(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=gs(a),p=ia(l),v=gs(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=h||(v||!y?[Hd(l)]:MM(l)),k=w!=="none";!h&&k&&j.push(...DM(l,y,w,b));const C=[l,...j],E=await Al(t,_),M=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&M.push(E[x]),m){const z=TM(a,i,b);M.push(E[z[0]],E[z[1]])}if(R=[...R,{placement:a,overflows:M}],!M.every(z=>z<=0)){var I,P;const z=(((I=o.flip)==null?void 0:I.index)||0)+1,Y=C[z];if(Y)return{data:{index:z,overflows:R},reset:{placement:Y}};let A=(P=R.filter(T=>T.overflows[0]<=0).sort((T,S)=>T.overflows[1]-S.overflows[1])[0])==null?void 0:P.placement;if(!A)switch(g){case"bestFit":{var D;const T=(D=R.filter(S=>{if(k){const F=ia(S.placement);return F===p||F==="y"}return!0}).map(S=>[S.placement,S.overflows.filter(F=>F>0).reduce((F,H)=>F+H,0)]).sort((S,F)=>S[1]-F[1])[0])==null?void 0:D[0];T&&(A=T);break}case"initialPlacement":A=l;break}if(a!==A)return{reset:{placement:A}}}return{}}}};function vy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function xy(e){return kM.some(t=>e[t]>=0)}const $M=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ps(e,t);switch(r){case"referenceHidden":{const o=await Al(t,{...a,elementContext:"reference"}),i=vy(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:xy(i)}}}case"escaped":{const o=await Al(t,{...a,altBoundary:!0}),i=vy(o,n.floating);return{data:{escapedOffsets:i,escaped:xy(i)}}}default:return{}}}}};async function FM(e,t){const{placement:n,platform:r,elements:a}=e,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),i=gs(n),l=vi(n),c=ia(n)==="y",d=["left","top"].includes(i)?-1:1,u=o&&c?-1:1,m=ps(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*u,y:h*d}:{x:h*d,y:g*u}}const zM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await FM(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},BM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:_=>{let{x,y:p}=_;return{x,y:p}}},...c}=ps(e,t),d={x:n,y:r},u=await Al(t,c),m=ia(gs(a)),h=bg(m);let g=d[h],w=d[m];if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",p=g+u[_],v=g-u[x];g=Df(p,g,v)}if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",p=w+u[_],v=w-u[x];w=Df(p,w,v)}const y=l.fn({...t,[h]:g,[m]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[m]:i}}}}}},UM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ps(e,t),u={x:n,y:r},m=ia(a),h=bg(m);let g=u[h],w=u[m];const y=ps(l,t),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const v=h==="y"?"height":"width",b=o.reference[h]-o.floating[v]+_.mainAxis,j=o.reference[h]+o.reference[v]-_.mainAxis;g<b?g=b:g>j&&(g=j)}if(d){var x,p;const v=h==="y"?"width":"height",b=["top","left"].includes(gs(a)),j=o.reference[m]-o.floating[v]+(b&&((x=i.offset)==null?void 0:x[m])||0)+(b?0:_.crossAxis),k=o.reference[m]+o.reference[v]+(b?0:((p=i.offset)==null?void 0:p[m])||0)-(b?_.crossAxis:0);w<j?w=j:w>k&&(w=k)}return{[h]:g,[m]:w}}}},WM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=ps(e,t),u=await Al(t,d),m=gs(a),h=vi(a),g=ia(a)==="y",{width:w,height:y}=o.floating;let _,x;m==="top"||m==="bottom"?(_=m,x=h===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,_=h==="end"?"top":"bottom");const p=y-u.top-u.bottom,v=w-u.left-u.right,b=aa(y-u[_],p),j=aa(w-u[x],v),k=!t.middlewareData.shift;let C=b,E=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=p),k&&!h){const R=Bn(u.left,0),I=Bn(u.right,0),P=Bn(u.top,0),D=Bn(u.bottom,0);g?E=w-2*(R!==0||I!==0?R+I:Bn(u.left,u.right)):C=y-2*(P!==0||D!==0?P+D:Bn(u.top,u.bottom))}await c({...t,availableWidth:E,availableHeight:C});const M=await i.getDimensions(l.floating);return w!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function Tu(){return typeof window<"u"}function xi(e){return ij(e)?(e.nodeName||"").toLowerCase():"#document"}function qn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Jr(e){var t;return(t=(ij(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ij(e){return Tu()?e instanceof Node||e instanceof qn(e).Node:!1}function kr(e){return Tu()?e instanceof Element||e instanceof qn(e).Element:!1}function Xr(e){return Tu()?e instanceof HTMLElement||e instanceof qn(e).HTMLElement:!1}function yy(e){return!Tu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof qn(e).ShadowRoot}function ec(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Er(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function HM(e){return["table","td","th"].includes(xi(e))}function Mu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Cg(e){const t=Sg(),n=kr(e)?Er(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function qM(e){let t=la(e);for(;Xr(t)&&!si(t);){if(Cg(t))return t;if(Mu(t))return null;t=la(t)}return null}function Sg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function si(e){return["html","body","#document"].includes(xi(e))}function Er(e){return qn(e).getComputedStyle(e)}function Ru(e){return kr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function la(e){if(xi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yy(e)&&e.host||Jr(e);return yy(t)?t.host:t}function lj(e){const t=la(e);return si(t)?e.ownerDocument?e.ownerDocument.body:e.body:Xr(t)&&ec(t)?t:lj(t)}function Ol(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=lj(e),o=a===((r=e.ownerDocument)==null?void 0:r.body),i=qn(a);if(o){const l=Of(i);return t.concat(i,i.visualViewport||[],ec(a)?a:[],l&&n?Ol(l):[])}return t.concat(a,Ol(a,[],n))}function Of(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cj(e){const t=Er(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Xr(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,l=Wd(n)!==o||Wd(r)!==i;return l&&(n=o,r=i),{width:n,height:r,$:l}}function kg(e){return kr(e)?e:e.contextElement}function Io(e){const t=kg(e);if(!Xr(t))return oa(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=cj(t);let i=(o?Wd(n.width):n.width)/r,l=(o?Wd(n.height):n.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const VM=oa(0);function dj(e){const t=qn(e);return!Sg()||!t.visualViewport?VM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function GM(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==qn(e)?!1:t}function Ga(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=kg(e);let i=oa(1);t&&(r?kr(r)&&(i=Io(r)):i=Io(e));const l=GM(o,n,r)?dj(o):oa(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(o){const h=qn(o),g=r&&kr(r)?qn(r):r;let w=h,y=Of(w);for(;y&&r&&g!==w;){const _=Io(y),x=y.getBoundingClientRect(),p=Er(y),v=x.left+(y.clientLeft+parseFloat(p.paddingLeft))*_.x,b=x.top+(y.clientTop+parseFloat(p.paddingTop))*_.y;c*=_.x,d*=_.y,u*=_.x,m*=_.y,c+=v,d+=b,w=qn(y),y=Of(w)}}return qd({width:u,height:m,x:c,y:d})}function KM(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o=a==="fixed",i=Jr(r),l=t?Mu(t.floating):!1;if(r===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=oa(1);const u=oa(0),m=Xr(r);if((m||!m&&!o)&&((xi(r)!=="body"||ec(i))&&(c=Ru(r)),Xr(r))){const h=Ga(r);d=Io(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function YM(e){return Array.from(e.getClientRects())}function If(e,t){const n=Ru(e).scrollLeft;return t?t.left+n:Ga(Jr(e)).left+n}function QM(e){const t=Jr(e),n=Ru(e),r=e.ownerDocument.body,a=Bn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Bn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+If(e);const l=-n.scrollTop;return Er(r).direction==="rtl"&&(i+=Bn(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:i,y:l}}function XM(e,t){const n=qn(e),r=Jr(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=Sg();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}function JM(e,t){const n=Ga(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=Xr(e)?Io(e):oa(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=r*o.y;return{width:i,height:l,x:c,y:d}}function wy(e,t,n){let r;if(t==="viewport")r=XM(e,n);else if(t==="document")r=QM(Jr(e));else if(kr(t))r=JM(t,n);else{const a=dj(e);r={...t,x:t.x-a.x,y:t.y-a.y}}return qd(r)}function uj(e,t){const n=la(e);return n===t||!kr(n)||si(n)?!1:Er(n).position==="fixed"||uj(n,t)}function ZM(e,t){const n=t.get(e);if(n)return n;let r=Ol(e,[],!1).filter(l=>kr(l)&&xi(l)!=="body"),a=null;const o=Er(e).position==="fixed";let i=o?la(e):e;for(;kr(i)&&!si(i);){const l=Er(i),c=Cg(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ec(i)&&!c&&uj(e,i))?r=r.filter(u=>u!==i):a=l,i=la(i)}return t.set(e,r),r}function e4(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const i=[...n==="clippingAncestors"?Mu(t)?[]:ZM(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((d,u)=>{const m=wy(t,u,a);return d.top=Bn(m.top,d.top),d.right=aa(m.right,d.right),d.bottom=aa(m.bottom,d.bottom),d.left=Bn(m.left,d.left),d},wy(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function t4(e){const{width:t,height:n}=cj(e);return{width:t,height:n}}function n4(e,t,n){const r=Xr(t),a=Jr(t),o=n==="fixed",i=Ga(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=oa(0);if(r||!r&&!o)if((xi(t)!=="body"||ec(a))&&(l=Ru(t)),r){const g=Ga(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&(c.x=If(a));let d=0,u=0;if(a&&!r&&!o){const g=a.getBoundingClientRect();u=g.top+l.scrollTop,d=g.left+l.scrollLeft-If(a,g)}const m=i.left+l.scrollLeft-c.x-d,h=i.top+l.scrollTop-c.y-u;return{x:m,y:h,width:i.width,height:i.height}}function Xm(e){return Er(e).position==="static"}function _y(e,t){if(!Xr(e)||Er(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Jr(e)===n&&(n=n.ownerDocument.body),n}function mj(e,t){const n=qn(e);if(Mu(e))return n;if(!Xr(e)){let a=la(e);for(;a&&!si(a);){if(kr(a)&&!Xm(a))return a;a=la(a)}return n}let r=_y(e,t);for(;r&&HM(r)&&Xm(r);)r=_y(r,t);return r&&si(r)&&Xm(r)&&!Cg(r)?n:r||qM(e)||n}const r4=async function(e){const t=this.getOffsetParent||mj,n=this.getDimensions,r=await n(e.floating);return{reference:n4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function s4(e){return Er(e).direction==="rtl"}const a4={convertOffsetParentRelativeRectToViewportRelativeRect:KM,getDocumentElement:Jr,getClippingRect:e4,getOffsetParent:mj,getElementRects:r4,getClientRects:YM,getDimensions:t4,getScale:Io,isElement:kr,isRTL:s4};function o4(e,t){let n=null,r;const a=Jr(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:u,width:m,height:h}=e.getBoundingClientRect();if(l||t(),!m||!h)return;const g=Dc(u),w=Dc(a.clientWidth-(d+m)),y=Dc(a.clientHeight-(u+h)),_=Dc(d),p={rootMargin:-g+"px "+-w+"px "+-y+"px "+-_+"px",threshold:Bn(0,aa(1,c))||1};let v=!0;function b(j){const k=j[0].intersectionRatio;if(k!==c){if(!v)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}v=!1}try{n=new IntersectionObserver(b,{...p,root:a.ownerDocument})}catch{n=new IntersectionObserver(b,p)}n.observe(e)}return i(!0),o}function i4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=kg(e),u=a||o?[...d?Ol(d):[],...Ol(t)]:[];u.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const m=d&&l?o4(d,n):null;let h=-1,g=null;i&&(g=new ResizeObserver(x=>{let[p]=x;p&&p.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(t)})),n()}),d&&!c&&g.observe(d),g.observe(t));let w,y=c?Ga(e):null;c&&_();function _(){const x=Ga(e);y&&(x.x!==y.x||x.y!==y.y||x.width!==y.width||x.height!==y.height)&&n(),y=x,w=requestAnimationFrame(_)}return n(),()=>{var x;u.forEach(p=>{a&&p.removeEventListener("scroll",n),o&&p.removeEventListener("resize",n)}),m==null||m(),(x=g)==null||x.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const l4=zM,c4=BM,d4=LM,u4=WM,m4=$M,by=IM,h4=UM,f4=(e,t,n)=>{const r=new Map,a={platform:a4,...n},o={...a.platform,_c:r};return OM(e,t,{...a,platform:o})};var dd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Vd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Vd(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&e.$$typeof)&&!Vd(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function hj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jy(e,t){const n=hj(e);return Math.round(t*n)/n}function Jm(e){const t=f.useRef(e);return dd(()=>{t.current=e}),t}function p4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,g]=f.useState(r);Vd(h,r)||g(r);const[w,y]=f.useState(null),[_,x]=f.useState(null),p=f.useCallback(S=>{S!==k.current&&(k.current=S,y(S))},[]),v=f.useCallback(S=>{S!==C.current&&(C.current=S,x(S))},[]),b=o||w,j=i||_,k=f.useRef(null),C=f.useRef(null),E=f.useRef(u),M=c!=null,R=Jm(c),I=Jm(a),P=Jm(d),D=f.useCallback(()=>{if(!k.current||!C.current)return;const S={placement:t,strategy:n,middleware:h};I.current&&(S.platform=I.current),f4(k.current,C.current,S).then(F=>{const H={...F,isPositioned:P.current!==!1};z.current&&!Vd(E.current,H)&&(E.current=H,Za.flushSync(()=>{m(H)}))})},[h,t,n,I,P]);dd(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m(S=>({...S,isPositioned:!1})))},[d]);const z=f.useRef(!1);dd(()=>(z.current=!0,()=>{z.current=!1}),[]),dd(()=>{if(b&&(k.current=b),j&&(C.current=j),b&&j){if(R.current)return R.current(b,j,D);D()}},[b,j,D,R,M]);const Y=f.useMemo(()=>({reference:k,floating:C,setReference:p,setFloating:v}),[p,v]),A=f.useMemo(()=>({reference:b,floating:j}),[b,j]),T=f.useMemo(()=>{const S={position:n,left:0,top:0};if(!A.floating)return S;const F=jy(A.floating,u.x),H=jy(A.floating,u.y);return l?{...S,transform:"translate("+F+"px, "+H+"px)",...hj(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:H}},[n,l,A.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:D,refs:Y,elements:A,floatingStyles:T}),[u,D,Y,A,T])}const g4=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?by({element:r.current,padding:a}).fn(n):{}:r?by({element:r,padding:a}).fn(n):{}}}},v4=(e,t)=>({...l4(e),options:[e,t]}),x4=(e,t)=>({...c4(e),options:[e,t]}),y4=(e,t)=>({...h4(e),options:[e,t]}),w4=(e,t)=>({...d4(e),options:[e,t]}),_4=(e,t)=>({...u4(e),options:[e,t]}),b4=(e,t)=>({...m4(e),options:[e,t]}),j4=(e,t)=>({...g4(e),options:[e,t]});var N4="Arrow",fj=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...o}=e;return s.jsx(Me.svg,{...o,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});fj.displayName=N4;var C4=fj;function S4(e,t=[]){let n=[];function r(o,i){const l=f.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:h,children:g,...w}=m,y=(h==null?void 0:h[e][c])||l,_=f.useMemo(()=>w,Object.values(w));return s.jsx(y.Provider,{value:_,children:g})}function u(m,h){const g=(h==null?void 0:h[e][c])||l,w=f.useContext(g);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,k4(a,...t)]}function k4(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Du(e){const[t,n]=f.useState(void 0);return Qt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Eg="Popper",[pj,Au]=S4(Eg),[E4,gj]=pj(Eg),vj=e=>{const{__scopePopper:t,children:n}=e,[r,a]=f.useState(null);return s.jsx(E4,{scope:t,anchor:r,onAnchorChange:a,children:n})};vj.displayName=Eg;var xj="PopperAnchor",yj=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,o=gj(xj,n),i=f.useRef(null),l=Ie(t,i);return f.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:s.jsx(Me.div,{...a,ref:l})});yj.displayName=xj;var Pg="PopperContent",[P4,T4]=pj(Pg),wj=f.forwardRef((e,t)=>{var $,te,xe,fe,he,N;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:w,...y}=e,_=gj(Pg,n),[x,p]=f.useState(null),v=Ie(t,L=>p(L)),[b,j]=f.useState(null),k=Du(b),C=(k==null?void 0:k.width)??0,E=(k==null?void 0:k.height)??0,M=r+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(d)?d:[d],P=I.length>0,D={padding:R,boundary:I.filter(R4),altBoundary:P},{refs:z,floatingStyles:Y,placement:A,isPositioned:T,middlewareData:S}=p4({strategy:"fixed",placement:M,whileElementsMounted:(...L)=>i4(...L,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[v4({mainAxis:a+E,alignmentAxis:i}),c&&x4({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?y4():void 0,...D}),c&&w4({...D}),_4({...D,apply:({elements:L,rects:U,availableWidth:V,availableHeight:ee})=>{const{width:ae,height:ye}=U.reference,me=L.floating.style;me.setProperty("--radix-popper-available-width",`${V}px`),me.setProperty("--radix-popper-available-height",`${ee}px`),me.setProperty("--radix-popper-anchor-width",`${ae}px`),me.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),b&&j4({element:b,padding:l}),D4({arrowWidth:C,arrowHeight:E}),h&&b4({strategy:"referenceHidden",...D})]}),[F,H]=jj(A),Q=Ot(w);Qt(()=>{T&&(Q==null||Q())},[T,Q]);const O=($=S.arrow)==null?void 0:$.x,q=(te=S.arrow)==null?void 0:te.y,ne=((xe=S.arrow)==null?void 0:xe.centerOffset)!==0,[Pe,ue]=f.useState();return Qt(()=>{x&&ue(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:T?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(fe=S.transformOrigin)==null?void 0:fe.x,(he=S.transformOrigin)==null?void 0:he.y].join(" "),...((N=S.hide)==null?void 0:N.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(P4,{scope:n,placedSide:F,onArrowChange:j,arrowX:O,arrowY:q,shouldHideArrow:ne,children:s.jsx(Me.div,{"data-side":F,"data-align":H,...y,ref:v,style:{...y.style,animation:T?void 0:"none"}})})})});wj.displayName=Pg;var _j="PopperArrow",M4={top:"bottom",right:"left",bottom:"top",left:"right"},bj=f.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,o=T4(_j,r),i=M4[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(C4,{...a,ref:n,style:{...a.style,display:"block"}})})});bj.displayName=_j;function R4(e){return e!==null}var D4=e=>({name:"transformOrigin",options:e,fn(t){var _,x,p;const{placement:n,rects:r,middlewareData:a}=t,i=((_=a.arrow)==null?void 0:_.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=jj(n),m={start:"0%",center:"50%",end:"100%"}[u],h=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,g=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let w="",y="";return d==="bottom"?(w=i?m:`${h}px`,y=`${-c}px`):d==="top"?(w=i?m:`${h}px`,y=`${r.floating.height+c}px`):d==="right"?(w=`${-c}px`,y=i?m:`${g}px`):d==="left"&&(w=`${r.floating.width+c}px`,y=i?m:`${g}px`),{data:{x:w,y}}}});function jj(e){const[t,n="center"]=e.split("-");return[t,n]}var A4=vj,Nj=yj,Cj=wj,Sj=bj,[Ou,Cz]=cr("Tooltip",[Au]),Tg=Au(),kj="TooltipProvider",O4=700,Ny="tooltip.open",[I4,Ej]=Ou(kj),Pj=e=>{const{__scopeTooltip:t,delayDuration:n=O4,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:o}=e,[i,l]=f.useState(!0),c=f.useRef(!1),d=f.useRef(0);return f.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(I4,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:f.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:f.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:o})};Pj.displayName=kj;var Tj="Tooltip",[Sz,Iu]=Ou(Tj),Lf="TooltipTrigger",L4=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Iu(Lf,n),o=Ej(Lf,n),i=Tg(n),l=f.useRef(null),c=Ie(t,l,a.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),m=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(Nj,{asChild:!0,...i,children:s.jsx(Me.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:_e(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:_e(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:_e(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:_e(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:_e(e.onBlur,a.onClose),onClick:_e(e.onClick,a.onClose)})})});L4.displayName=Lf;var $4="TooltipPortal",[kz,F4]=Ou($4,{forceMount:void 0}),ai="TooltipContent",Mj=f.forwardRef((e,t)=>{const n=F4(ai,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...o}=e,i=Iu(ai,e.__scopeTooltip);return s.jsx(Qn,{present:r||i.open,children:i.disableHoverableContent?s.jsx(Rj,{side:a,...o,ref:t}):s.jsx(z4,{side:a,...o,ref:t})})}),z4=f.forwardRef((e,t)=>{const n=Iu(ai,e.__scopeTooltip),r=Ej(ai,e.__scopeTooltip),a=f.useRef(null),o=Ie(t,a),[i,l]=f.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:m}=r,h=f.useCallback(()=>{l(null),m(!1)},[m]),g=f.useCallback((w,y)=>{const _=w.currentTarget,x={x:w.clientX,y:w.clientY},p=H4(x,_.getBoundingClientRect()),v=q4(x,p),b=V4(y.getBoundingClientRect()),j=K4([...v,...b]);l(j),m(!0)},[m]);return f.useEffect(()=>()=>h(),[h]),f.useEffect(()=>{if(c&&u){const w=_=>g(_,u),y=_=>g(_,c);return c.addEventListener("pointerleave",w),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",y)}}},[c,u,g,h]),f.useEffect(()=>{if(i){const w=y=>{const _=y.target,x={x:y.clientX,y:y.clientY},p=(c==null?void 0:c.contains(_))||(u==null?void 0:u.contains(_)),v=!G4(x,i);p?h():v&&(h(),d())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,u,i,d,h]),s.jsx(Rj,{...e,ref:o})}),[B4,U4]=Ou(Tj,{isInside:!1}),Rj=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Iu(ai,n),d=Tg(n),{onClose:u}=c;return f.useEffect(()=>(document.addEventListener(Ny,u),()=>document.removeEventListener(Ny,u)),[u]),f.useEffect(()=>{if(c.trigger){const m=h=>{const g=h.target;g!=null&&g.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),s.jsx(Jl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(Cj,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(dg,{children:r}),s.jsx(B4,{scope:n,isInside:!0,children:s.jsx(OP,{id:c.contentId,role:"tooltip",children:a||r})})]})})});Mj.displayName=ai;var Dj="TooltipArrow",W4=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Tg(n);return U4(Dj,n).isInside?null:s.jsx(Sj,{...a,...r,ref:t})});W4.displayName=Dj;function H4(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,a,o)){case o:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function q4(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function V4(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function G4(e,t){const{x:n,y:r}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,u=t[i].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}function K4(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Y4(t)}function Y4(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Q4=Pj,Aj=Mj;const X4=Q4,J4=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(Aj,{ref:r,sideOffset:t,className:le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));J4.displayName=Aj.displayName;var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$u=typeof window>"u"||"Deno"in globalThis;function vr(){}function Z4(e,t){return typeof e=="function"?e(t):e}function eR(e){return typeof e=="number"&&e>=0&&e!==1/0}function tR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Cy(e,t){return typeof e=="function"?e(t):e}function nR(e,t){return typeof e=="function"?e(t):e}function Sy(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Mg(i,t.options))return!1}else if(!Ll(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function ky(e,t){const{exact:n,status:r,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Il(t.options.mutationKey)!==Il(o))return!1}else if(!Ll(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Mg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Il)(e)}function Il(e){return JSON.stringify(e,(t,n)=>$f(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Ll(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ll(e[n],t[n])):!1}function Oj(e,t){if(e===t)return e;const n=Ey(e)&&Ey(t);if(n||$f(e)&&$f(t)){const r=n?e:Object.keys(e),a=r.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{};let c=0;for(let d=0;d<i;d++){const u=n?d:o[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Oj(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===i&&c===a?e:l}return t}function Ey(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $f(e){if(!Py(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Py(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Py(e){return Object.prototype.toString.call(e)==="[object Object]"}function rR(e){return new Promise(t=>{setTimeout(t,e)})}function sR(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Oj(e,t):t}function aR(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function oR(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Rg=Symbol();function Ij(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Rg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ma,Is,Uo,V0,iR=(V0=class extends Lu{constructor(){super();et(this,Ma);et(this,Is);et(this,Uo);Be(this,Uo,t=>{if(!$u&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){re(this,Is)||this.setEventListener(re(this,Uo))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,Is))==null||t.call(this),Be(this,Is,void 0))}setEventListener(t){var n;Be(this,Uo,t),(n=re(this,Is))==null||n.call(this),Be(this,Is,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){re(this,Ma)!==t&&(Be(this,Ma,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof re(this,Ma)=="boolean"?re(this,Ma):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ma=new WeakMap,Is=new WeakMap,Uo=new WeakMap,V0),Lj=new iR,Wo,Ls,Ho,G0,lR=(G0=class extends Lu{constructor(){super();et(this,Wo,!0);et(this,Ls);et(this,Ho);Be(this,Ho,t=>{if(!$u&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){re(this,Ls)||this.setEventListener(re(this,Ho))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,Ls))==null||t.call(this),Be(this,Ls,void 0))}setEventListener(t){var n;Be(this,Ho,t),(n=re(this,Ls))==null||n.call(this),Be(this,Ls,t(this.setOnline.bind(this)))}setOnline(t){re(this,Wo)!==t&&(Be(this,Wo,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return re(this,Wo)}},Wo=new WeakMap,Ls=new WeakMap,Ho=new WeakMap,G0),Gd=new lR;function cR(){let e,t;const n=new Promise((a,o)=>{e=a,t=o});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function dR(e){return Math.min(1e3*2**e,3e4)}function $j(e){return(e??"online")==="online"?Gd.isOnline():!0}var Fj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Zm(e){return e instanceof Fj}function zj(e){let t=!1,n=0,r=!1,a;const o=cR(),i=y=>{var _;r||(h(new Fj(y)),(_=e.abort)==null||_.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Lj.isFocused()&&(e.networkMode==="always"||Gd.isOnline())&&e.canRun(),u=()=>$j(e.networkMode)&&e.canRun(),m=y=>{var _;r||(r=!0,(_=e.onSuccess)==null||_.call(e,y),a==null||a(),o.resolve(y))},h=y=>{var _;r||(r=!0,(_=e.onError)==null||_.call(e,y),a==null||a(),o.reject(y))},g=()=>new Promise(y=>{var _;a=x=>{(r||d())&&y(x)},(_=e.onPause)==null||_.call(e)}).then(()=>{var y;a=void 0,r||(y=e.onContinue)==null||y.call(e)}),w=()=>{if(r)return;let y;const _=n===0?e.initialPromise:void 0;try{y=_??e.fn()}catch(x){y=Promise.reject(x)}Promise.resolve(y).then(m).catch(x=>{var k;if(r)return;const p=e.retry??($u?0:3),v=e.retryDelay??dR,b=typeof v=="function"?v(n,x):v,j=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,x);if(t||!j){h(x);return}n++,(k=e.onFail)==null||k.call(e,n,x),rR(b).then(()=>d()?void 0:g()).then(()=>{t?h(x):w()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?w():g().then(w),o)}}function uR(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=l=>setTimeout(l,0);const o=l=>{t?e.push(l):a(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var xn=uR(),Ra,K0,Bj=(K0=class{constructor(){et(this,Ra)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eR(this.gcTime)&&Be(this,Ra,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($u?1/0:5*60*1e3))}clearGcTimeout(){re(this,Ra)&&(clearTimeout(re(this,Ra)),Be(this,Ra,void 0))}},Ra=new WeakMap,K0),qo,Vo,Zn,an,Hl,Da,xr,rs,Y0,mR=(Y0=class extends Bj{constructor(t){super();et(this,xr);et(this,qo);et(this,Vo);et(this,Zn);et(this,an);et(this,Hl);et(this,Da);Be(this,Da,!1),Be(this,Hl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Be(this,Zn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Be(this,qo,fR(this.options)),this.state=t.state??re(this,qo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=re(this,an))==null?void 0:t.promise}setOptions(t){this.options={...re(this,Hl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,Zn).remove(this)}setData(t,n){const r=sR(this.state.data,t,this.options);return nn(this,xr,rs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){nn(this,xr,rs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=re(this,an))==null?void 0:r.promise;return(a=re(this,an))==null||a.cancel(t),n?n.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,qo))}isActive(){return this.observers.some(t=>nR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!tR(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=re(this,an))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=re(this,an))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),re(this,Zn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(re(this,an)&&(re(this,Da)?re(this,an).cancel({revert:!0}):re(this,an).cancelRetry()),this.scheduleGc()),re(this,Zn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nn(this,xr,rs).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(re(this,an))return re(this,an).continueRetry(),re(this,an).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(h=>h.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Be(this,Da,!0),r.signal)})},o=()=>{const m=Ij(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return a(h),Be(this,Da,!1),this.options.persister?this.options.persister(m,h,this):m(h)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(i),(c=this.options.behavior)==null||c.onFetch(i,this),Be(this,Vo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&nn(this,xr,rs).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const l=m=>{var h,g,w,y;Zm(m)&&m.silent||nn(this,xr,rs).call(this,{type:"error",error:m}),Zm(m)||((g=(h=re(this,Zn).config).onError)==null||g.call(h,m,this),(y=(w=re(this,Zn).config).onSettled)==null||y.call(w,this.state.data,m,this)),this.scheduleGc()};return Be(this,an,zj({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var h,g,w,y;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(_){l(_);return}(g=(h=re(this,Zn).config).onSuccess)==null||g.call(h,m,this),(y=(w=re(this,Zn).config).onSettled)==null||y.call(w,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,h)=>{nn(this,xr,rs).call(this,{type:"failed",failureCount:m,error:h})},onPause:()=>{nn(this,xr,rs).call(this,{type:"pause"})},onContinue:()=>{nn(this,xr,rs).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),re(this,an).start()}},qo=new WeakMap,Vo=new WeakMap,Zn=new WeakMap,an=new WeakMap,Hl=new WeakMap,Da=new WeakMap,xr=new WeakSet,rs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...hR(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Zm(a)&&a.revert&&re(this,Vo)?{...re(this,Vo),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),xn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),re(this,Zn).notify({query:this,type:"updated",action:t})})},Y0);function hR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$j(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,Q0,pR=(Q0=class extends Lu{constructor(t={}){super();et(this,Fr);this.config=t,Be(this,Fr,new Map)}build(t,n,r){const a=n.queryKey,o=n.queryHash??Mg(a,n);let i=this.get(o);return i||(i=new mR({cache:this,queryKey:a,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){re(this,Fr).has(t.queryHash)||(re(this,Fr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=re(this,Fr).get(t.queryHash);n&&(t.destroy(),n===t&&re(this,Fr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return re(this,Fr).get(t)}getAll(){return[...re(this,Fr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Sy(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Sy(t,r)):n}notify(t){xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){xn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fr=new WeakMap,Q0),zr,gn,Aa,Br,Es,X0,gR=(X0=class extends Bj{constructor(t){super();et(this,Br);et(this,zr);et(this,gn);et(this,Aa);this.mutationId=t.mutationId,Be(this,gn,t.mutationCache),Be(this,zr,[]),this.state=t.state||vR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){re(this,zr).includes(t)||(re(this,zr).push(t),this.clearGcTimeout(),re(this,gn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Be(this,zr,re(this,zr).filter(n=>n!==t)),this.scheduleGc(),re(this,gn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){re(this,zr).length||(this.state.status==="pending"?this.scheduleGc():re(this,gn).remove(this))}continue(){var t;return((t=re(this,Aa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,i,l,c,d,u,m,h,g,w,y,_,x,p,v,b,j,k,C;Be(this,Aa,zj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,M)=>{nn(this,Br,Es).call(this,{type:"failed",failureCount:E,error:M})},onPause:()=>{nn(this,Br,Es).call(this,{type:"pause"})},onContinue:()=>{nn(this,Br,Es).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,gn).canRun(this)}));const n=this.state.status==="pending",r=!re(this,Aa).canStart();try{if(!n){nn(this,Br,Es).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(a=re(this,gn).config).onMutate)==null?void 0:o.call(a,t,this));const M=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));M!==this.state.context&&nn(this,Br,Es).call(this,{type:"pending",context:M,variables:t,isPaused:r})}const E=await re(this,Aa).start();return await((d=(c=re(this,gn).config).onSuccess)==null?void 0:d.call(c,E,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,E,t,this.state.context)),await((g=(h=re(this,gn).config).onSettled)==null?void 0:g.call(h,E,null,this.state.variables,this.state.context,this)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,E,null,t,this.state.context)),nn(this,Br,Es).call(this,{type:"success",data:E}),E}catch(E){try{throw await((x=(_=re(this,gn).config).onError)==null?void 0:x.call(_,E,t,this.state.context,this)),await((v=(p=this.options).onError)==null?void 0:v.call(p,E,t,this.state.context)),await((j=(b=re(this,gn).config).onSettled)==null?void 0:j.call(b,void 0,E,this.state.variables,this.state.context,this)),await((C=(k=this.options).onSettled)==null?void 0:C.call(k,void 0,E,t,this.state.context)),E}finally{nn(this,Br,Es).call(this,{type:"error",error:E})}}finally{re(this,gn).runNext(this)}}},zr=new WeakMap,gn=new WeakMap,Aa=new WeakMap,Br=new WeakSet,Es=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),xn.batch(()=>{re(this,zr).forEach(r=>{r.onMutationUpdate(t)}),re(this,gn).notify({mutation:this,type:"updated",action:t})})},X0);function vR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $n,ql,J0,xR=(J0=class extends Lu{constructor(t={}){super();et(this,$n);et(this,ql);this.config=t,Be(this,$n,new Map),Be(this,ql,Date.now())}build(t,n,r){const a=new gR({mutationCache:this,mutationId:++mc(this,ql)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){const n=Ac(t),r=re(this,$n).get(n)??[];r.push(t),re(this,$n).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Ac(t);if(re(this,$n).has(n)){const a=(r=re(this,$n).get(n))==null?void 0:r.filter(o=>o!==t);a&&(a.length===0?re(this,$n).delete(n):re(this,$n).set(n,a))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=re(this,$n).get(Ac(t)))==null?void 0:r.find(a=>a.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=re(this,$n).get(Ac(t)))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...re(this,$n).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ky(n,r))}findAll(t={}){return this.getAll().filter(n=>ky(t,n))}notify(t){xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return xn.batch(()=>Promise.all(t.map(n=>n.continue().catch(vr))))}},$n=new WeakMap,ql=new WeakMap,J0);function Ac(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Ty(e){return{onFetch:(t,n)=>{var u,m,h,g,w;const r=t.options,a=(h=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,o=((g=t.state.data)==null?void 0:g.pages)||[],i=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const _=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},x=Ij(t.options,t.fetchOptions),p=async(v,b,j)=>{if(y)return Promise.reject();if(b==null&&v.pages.length)return Promise.resolve(v);const k={queryKey:t.queryKey,pageParam:b,direction:j?"backward":"forward",meta:t.options.meta};_(k);const C=await x(k),{maxPages:E}=t.options,M=j?oR:aR;return{pages:M(v.pages,C,E),pageParams:M(v.pageParams,b,E)}};if(a&&o.length){const v=a==="backward",b=v?yR:My,j={pages:o,pageParams:i},k=b(r,j);l=await p(j,k,v)}else{const v=e??o.length;do{const b=c===0?i[0]??r.initialPageParam:My(r,l);if(c>0&&b==null)break;l=await p(l,b),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var y,_;return(_=(y=t.options).persister)==null?void 0:_.call(y,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function My(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function yR(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Et,$s,Fs,Go,Ko,zs,Yo,Qo,Z0,wR=(Z0=class{constructor(e={}){et(this,Et);et(this,$s);et(this,Fs);et(this,Go);et(this,Ko);et(this,zs);et(this,Yo);et(this,Qo);Be(this,Et,e.queryCache||new pR),Be(this,$s,e.mutationCache||new xR),Be(this,Fs,e.defaultOptions||{}),Be(this,Go,new Map),Be(this,Ko,new Map),Be(this,zs,0)}mount(){mc(this,zs)._++,re(this,zs)===1&&(Be(this,Yo,Lj.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,Et).onFocus())})),Be(this,Qo,Gd.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,Et).onOnline())})))}unmount(){var e,t;mc(this,zs)._--,re(this,zs)===0&&((e=re(this,Yo))==null||e.call(this),Be(this,Yo,void 0),(t=re(this,Qo))==null||t.call(this),Be(this,Qo,void 0))}isFetching(e){return re(this,Et).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return re(this,$s).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=re(this,Et).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=re(this,Et).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Cy(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return re(this,Et).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=re(this,Et).get(r.queryHash),o=a==null?void 0:a.state.data,i=Z4(t,o);if(i!==void 0)return re(this,Et).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return xn.batch(()=>re(this,Et).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=re(this,Et).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=re(this,Et);xn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=re(this,Et),r={type:"active",...e};return xn.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=xn.batch(()=>re(this,Et).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(vr).catch(vr)}invalidateQueries(e={},t={}){return xn.batch(()=>{if(re(this,Et).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=xn.batch(()=>re(this,Et).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(vr)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(vr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=re(this,Et).build(this,t);return n.isStaleByTime(Cy(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vr).catch(vr)}fetchInfiniteQuery(e){return e.behavior=Ty(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vr).catch(vr)}ensureInfiniteQueryData(e){return e.behavior=Ty(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gd.isOnline()?re(this,$s).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,Et)}getMutationCache(){return re(this,$s)}getDefaultOptions(){return re(this,Fs)}setDefaultOptions(e){Be(this,Fs,e)}setQueryDefaults(e,t){re(this,Go).set(Il(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...re(this,Go).values()];let n={};return t.forEach(r=>{Ll(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){re(this,Ko).set(Il(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...re(this,Ko).values()];let n={};return t.forEach(r=>{Ll(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...re(this,Fs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Mg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Rg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...re(this,Fs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){re(this,Et).clear(),re(this,$s).clear()}},Et=new WeakMap,$s=new WeakMap,Fs=new WeakMap,Go=new WeakMap,Ko=new WeakMap,zs=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,Z0),_R=f.createContext(void 0),bR=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(_R.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$l.apply(this,arguments)}var Ws;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ws||(Ws={}));const Ry="popstate";function jR(e){e===void 0&&(e={});function t(r,a){let{pathname:o,search:i,hash:l}=r.location;return Ff("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Kd(a)}return CR(t,n,null,e)}function It(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NR(){return Math.random().toString(36).substr(2,8)}function Dy(e,t){return{usr:e.state,key:e.key,idx:t}}function Ff(e,t,n,r){return n===void 0&&(n=null),$l({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yi(t):t,{state:n,key:t&&t.key||r||NR()})}function Kd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function CR(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,i=a.history,l=Ws.Pop,c=null,d=u();d==null&&(d=0,i.replaceState($l({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=Ws.Pop;let _=u(),x=_==null?null:_-d;d=_,c&&c({action:l,location:y.location,delta:x})}function h(_,x){l=Ws.Push;let p=Ff(y.location,_,x);d=u()+1;let v=Dy(p,d),b=y.createHref(p);try{i.pushState(v,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(b)}o&&c&&c({action:l,location:y.location,delta:1})}function g(_,x){l=Ws.Replace;let p=Ff(y.location,_,x);d=u();let v=Dy(p,d),b=y.createHref(p);i.replaceState(v,"",b),o&&c&&c({action:l,location:y.location,delta:0})}function w(_){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof _=="string"?_:Kd(_);return p=p.replace(/ $/,"%20"),It(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let y={get action(){return l},get location(){return e(a,i)},listen(_){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Ry,m),c=_,()=>{a.removeEventListener(Ry,m),c=null}},createHref(_){return t(a,_)},createURL:w,encodeLocation(_){let x=w(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(_){return i.go(_)}};return y}var Ay;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ay||(Ay={}));function SR(e,t,n){return n===void 0&&(n="/"),kR(e,t,n,!1)}function kR(e,t,n,r){let a=typeof t=="string"?yi(t):t,o=Dg(a.pathname||"/",n);if(o==null)return null;let i=Wj(e);ER(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=FR(o);l=LR(i[c],d,r)}return l}function Wj(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(It(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Js([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(It(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Wj(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:OR(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of Hj(o.path))a(o,i,c)}),t}function Hj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let i=Hj(r.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ER(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IR(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PR=/^:[\w-]+$/,TR=3,MR=2,RR=1,DR=10,AR=-2,Oy=e=>e==="*";function OR(e,t){let n=e.split("/"),r=n.length;return n.some(Oy)&&(r+=AR),t&&(r+=MR),n.filter(a=>!Oy(a)).reduce((a,o)=>a+(PR.test(o)?TR:o===""?RR:DR),r)}function IR(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function LR(e,t,n){let{routesMeta:r}=e,a={},o="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=Iy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Iy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:Js([o,m.pathname]),pathnameBase:WR(Js([o,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(o=Js([o,m.pathnameBase]))}return i}function Iy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$R(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,u,m)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let y=l[m]||"";i=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const w=l[m];return g&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function $R(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Uj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function FR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Dg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function zR(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?yi(e):e;return{pathname:n?n.startsWith("/")?n:BR(n,t):t,search:HR(r),hash:qR(a)}}function BR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function eh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ag(e,t){let n=UR(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Og(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=yi(e):(a=$l({},e),It(!a.pathname||!a.pathname.includes("?"),eh("?","pathname","search",a)),It(!a.pathname||!a.pathname.includes("#"),eh("#","pathname","hash",a)),It(!a.search||!a.search.includes("#"),eh("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=n;else{let m=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let c=zR(a,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Js=e=>e.join("/").replace(/\/\/+/g,"/"),WR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qj=["post","put","patch","delete"];new Set(qj);const GR=["get",...qj];new Set(GR);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fl.apply(this,arguments)}const Ig=f.createContext(null),KR=f.createContext(null),ha=f.createContext(null),Fu=f.createContext(null),fa=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Vj=f.createContext(null);function YR(e,t){let{relative:n}=t===void 0?{}:t;wi()||It(!1);let{basename:r,navigator:a}=f.useContext(ha),{hash:o,pathname:i,search:l}=Kj(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:Js([r,i])),a.createHref({pathname:c,search:l,hash:o})}function wi(){return f.useContext(Fu)!=null}function _i(){return wi()||It(!1),f.useContext(Fu).location}function Gj(e){f.useContext(ha).static||f.useLayoutEffect(e)}function xs(){let{isDataRoute:e}=f.useContext(fa);return e?l5():QR()}function QR(){wi()||It(!1);let e=f.useContext(Ig),{basename:t,future:n,navigator:r}=f.useContext(ha),{matches:a}=f.useContext(fa),{pathname:o}=_i(),i=JSON.stringify(Ag(a,n.v7_relativeSplatPath)),l=f.useRef(!1);return Gj(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Og(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Js([t,m.pathname])),(u.replace?r.replace:r.push)(m,u.state,u)},[t,r,i,o,e])}function Kj(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(ha),{matches:a}=f.useContext(fa),{pathname:o}=_i(),i=JSON.stringify(Ag(a,r.v7_relativeSplatPath));return f.useMemo(()=>Og(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function XR(e,t){return JR(e,t)}function JR(e,t,n,r){wi()||It(!1);let{navigator:a}=f.useContext(ha),{matches:o}=f.useContext(fa),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=_i(),u;if(t){var m;let _=typeof t=="string"?yi(t):t;c==="/"||(m=_.pathname)!=null&&m.startsWith(c)||It(!1),u=_}else u=d;let h=u.pathname||"/",g=h;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=SR(e,{pathname:g}),y=r5(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Js([c,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Js([c,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return t&&y?f.createElement(Fu.Provider,{value:{location:Fl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ws.Pop}},y):y}function ZR(){let e=i5(),t=VR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:a},n):null,null)}const e5=f.createElement(ZR,null);class t5 extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(fa.Provider,{value:this.props.routeContext},f.createElement(Vj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n5(e){let{routeContext:t,match:n,children:r}=e,a=f.useContext(Ig);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(fa.Provider,{value:t},r)}function r5(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||It(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:g}=n,w=m.route.loader&&h[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,h)=>{let g,w=!1,y=null,_=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,y=m.route.errorElement||e5,c&&(d<0&&h===0?(w=!0,_=null):d===h&&(w=!0,_=m.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),p=()=>{let v;return g?v=y:w?v=_:m.route.Component?v=f.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=u,f.createElement(n5,{match:m,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(t5,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var Yj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Yj||{}),Yd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Yd||{});function s5(e){let t=f.useContext(Ig);return t||It(!1),t}function a5(e){let t=f.useContext(KR);return t||It(!1),t}function o5(e){let t=f.useContext(fa);return t||It(!1),t}function Qj(e){let t=o5(),n=t.matches[t.matches.length-1];return n.route.id||It(!1),n.route.id}function i5(){var e;let t=f.useContext(Vj),n=a5(Yd.UseRouteError),r=Qj(Yd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function l5(){let{router:e}=s5(Yj.UseNavigateStable),t=Qj(Yd.UseNavigateStable),n=f.useRef(!1);return Gj(()=>{n.current=!0}),f.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Fl({fromRouteId:t},o)))},[e,t])}function th(e){let{to:t,replace:n,state:r,relative:a}=e;wi()||It(!1);let{future:o,static:i}=f.useContext(ha),{matches:l}=f.useContext(fa),{pathname:c}=_i(),d=xs(),u=Og(t,Ag(l,o.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:a}),[d,m,a,n,r]),null}function pn(e){It(!1)}function c5(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ws.Pop,navigator:o,static:i=!1,future:l}=e;wi()&&It(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:o,static:i,future:Fl({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof r=="string"&&(r=yi(r));let{pathname:u="/",search:m="",hash:h="",state:g=null,key:w="default"}=r,y=f.useMemo(()=>{let _=Dg(u,c);return _==null?null:{location:{pathname:_,search:m,hash:h,state:g,key:w},navigationType:a}},[c,u,m,h,g,w,a]);return y==null?null:f.createElement(ha.Provider,{value:d},f.createElement(Fu.Provider,{children:n,value:y}))}function d5(e){let{children:t,location:n}=e;return XR(zf(t),n)}new Promise(()=>{});function zf(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,a)=>{if(!f.isValidElement(r))return;let o=[...t,a];if(r.type===f.Fragment){n.push.apply(n,zf(r.props.children,o));return}r.type!==pn&&It(!1),!r.props.index||!r.props.children||It(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=zf(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bf.apply(this,arguments)}function u5(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function m5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h5(e,t){return e.button===0&&(!t||t==="_self")&&!m5(e)}function Uf(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function f5(e,t){let n=Uf(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(o=>{n.append(a,o)})}),n}const p5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g5="6";try{window.__reactRouterVersion=g5}catch{}const v5="startTransition",Ly=dw[v5];function x5(e){let{basename:t,children:n,future:r,window:a}=e,o=f.useRef();o.current==null&&(o.current=jR({window:a,v5Compat:!0}));let i=o.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},u=f.useCallback(m=>{d&&Ly?Ly(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>i.listen(u),[i,u]),f.createElement(c5,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=f.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=u5(t,p5),{basename:g}=f.useContext(ha),w,y=!1;if(typeof d=="string"&&w5.test(d)&&(w=d,y5))try{let v=new URL(window.location.href),b=d.startsWith("//")?new URL(v.protocol+d):new URL(d),j=Dg(b.pathname,g);b.origin===v.origin&&j!=null?d=j+b.search+b.hash:y=!0}catch{}let _=YR(d,{relative:a}),x=_5(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function p(v){r&&r(v),v.defaultPrevented||x(v)}return f.createElement("a",Bf({},h,{href:w||_,onClick:y||o?r:p,ref:n,target:c}))});var $y;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($y||($y={}));var Fy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fy||(Fy={}));function _5(e,t){let{target:n,replace:r,state:a,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=xs(),d=_i(),u=Kj(e,{relative:i});return f.useCallback(m=>{if(h5(m,n)){m.preventDefault();let h=r!==void 0?r:Kd(d)===Kd(u);c(e,{replace:h,state:a,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,r,a,n,e,o,i,l])}function zu(e){let t=f.useRef(Uf(e)),n=f.useRef(!1),r=_i(),a=f.useMemo(()=>f5(r.search,n.current?null:t.current),[r.search]),o=xs(),i=f.useCallback((l,c)=>{const d=Uf(typeof l=="function"?l(a):l);n.current=!0,o("?"+d,c)},[o,a]);return[a,i]}const zy={es:{admin:"Admin",back:"Volver",wellness_center:"Centro de Bienestar",landing_subtitle:"Descubre la armona perfecta entre relajacin y bienestar en nuestro exclusivo centro de masajes",book_appointment:"Reservar Cita",gift_cards:"Tarjetas Regalo",our_services:"Nuestros Servicios",services_subtitle:"Ofrecemos una amplia gama de tratamientos diseados para tu bienestar",individual_massages:"Masajes Individuales",individual_description:"Tratamientos personalizados para tu bienestar personal",couples_massages:"Masajes para Parejas",couples_description:"Momentos especiales para compartir en pareja",special_rituals:"Rituales Especiales",rituals_description:"Experiencias nicas para una relajacin profunda",contact_us:"Contctanos",contact_subtitle:"Estamos aqu para ayudarte a encontrar tu momento de bienestar",location:"Ubicacin",location_description:"Encuentra nuestro centro de bienestar en el corazn de Madrid",view_maps:"Ver en Maps",hours:"Horarios",book_now:"Reservar Ahora",rights_reserved:"Todos los derechos reservados",relaxing_massage:"Masaje Relajante",therapeutic_massage:"Masaje Descontracturante",foot_reflexology:"Reflexologa Podal",sports_massage:"Masaje Deportivo",couples_massage:"Masaje para Dos Personas",romantic_ritual:"Ritual Romntico",hot_stones:"Masaje con Piedras Calientes",bamboo_therapy:"Bambuterapia",kobido_ritual:"Ritual del Kobido",sakura_ritual:"Ritual Sakura",energizing_ritual:"Ritual Energizante",beauty_ritual:"Ritual Beauty",buy_voucher:"Comprar Bono",voucher_subtitle:"Elige el bono y completa los datos del beneficiario",voucher:"Bono",select_voucher:"Selecciona un bono",four_hands_massages:"Masajes a Cuatro Manos",rituals:"Rituales",for_two_people:"Bonos para Dos Personas",no_individual_vouchers:"No hay bonos individuales",no_four_hands_vouchers:"No hay bonos a cuatro manos",no_ritual_vouchers:"No hay bonos de rituales",no_two_people_vouchers:"No hay bonos para dos",who_for:"Para quin es?",for_me:"Para m",its_gift:"Es un regalo",buyer:"Comprador",beneficiary:"Beneficiario",name:"Nombre",email:"Email",phone:"Telfono",notes:"Notas (opcional)",notes_placeholder:"Escribe aqu si quieres comentarnos cualquier cosa",sessions:"sesiones",total:"Total",confirm_purchase:"Confirmar compra",proceed_payment:"Proceder al Pago",secure_payment_info:"Se abrir una nueva ventana segura para completar tu compra. La tarjeta regalo se enviar automticamente por email al comprador y al beneficiario.",email_buyer:"Email al comprador",email_beneficiary:"Email al beneficiario",email_center:"Notificacin al centro",open_secure_payment:"Abrir Pgina de Pago Seguro",gift_cards_page:"Tarjetas Regalo",gift_cards_subtitle:"Elige tu tarjeta regalo. Diseo elegante y 100% responsive.",cart:"Carrito",your_cart:"Tu carrito",cart_empty:"Tu carrito est vaco.",empty_cart:"Vaciar",proceed_to_payment:"Proceder al Pago",custom_amount:"Importe Personalizado",custom_gift_card:"TARJETA REGALO por VALOR personalizado",custom_description:"Elige un importe fijo o escribe otro importe.",custom_placeholder:"Otro importe ()",valid_amount:"Indica un importe vlido",add_to_cart:"Aadir al Carrito",added_to_cart:"Aadido al carrito",select_voucher_error:"Selecciona un bono",buyer_data_required:"Datos del comprador requeridos",beneficiary_data_required:"Datos del beneficiario requeridos",error:"Error",payment_init_error:"No se pudo iniciar el pago",recipient_name_error:"Por favor, indica el nombre del beneficiario",buyer_name_error:"Por favor, indica tu nombre",buyer_email_error:"Por favor, indica tu email",purchase_success:"Compra procesada exitosamente!",purchase_error:"Error al procesar la compra. Intntalo de nuevo.",buy_button:"Comprar",loading_centers:"Cargando centros...",personal_information:"Informacin Personal",full_name:"Nombre Completo",full_name_placeholder:"Nombre y apellidos",phone_placeholder:"+34 600 000 000",email_placeholder:"cliente@email.com",email_help:"Introduce tu email o telfono para ver tus reservas anteriores y bonos",your_bookings_vouchers:"Tus Reservas y Bonos",sessions_remaining:"sesiones restantes",expires:"Vence",center_selection:"Seleccin de Centro",center:"Centro",select_center:"Selecciona un centro",service_selection:"Seleccin de Servicio",service:"Servicio",loading_options:"Cargando opciones...",date_time:"Fecha y Hora",date:"Fecha",select_date:"Selecciona una fecha",time:"Hora",select_time:"Selecciona una hora",additional_notes:"Notas Adicionales",notes_placeholder_form:"Cualquier informacin adicional que consideres importante...",booking_summary:"Resumen de la Reserva",confirm_booking:"Confirmar Reserva",select_service_error:"Selecciona un servicio",complete_required_fields:"Por favor completa todos los campos obligatorios",booking_created:" Reserva Creada",booking_confirmed:"confirmada exitosamente. ID:",booking_error:"No se pudo crear la reserva. Intntalo de nuevo.",booking_cancelled:"Reserva Cancelada",booking_cancelled_success:"La reserva ha sido cancelada exitosamente.",cancel_booking_error:"No se pudo cancelar la reserva.",client_found:"Cliente encontrado",client_data_loaded:"Datos del cliente cargados automticamente",book_description:"Reserva tu cita de masaje relajante",vouchers:"Bonos",vouchers_description:"Compra paquetes de sesiones con descuento",gift_description:"Regala experiencias de bienestar nicas",our_locations:"Nuestras Ubicaciones",locations_subtitle:"Encuntranos en Madrid",open_maps:"Abrir en Mapas",massage_vouchers:"Bonos de Masaje",save_buying_session_packages:"Ahorra comprando paquetes de sesiones con descuento",enter_email_or_phone:"Por favor introduce tu email o telfono",name_label:"Nombre",close:"Cerrar",remove:"Quitar",purchased_by_name:"Comprado por (nombre)",buyer_name_placeholder:"Nombre del comprador",buyer_email:"Email del comprador",buyer_email_placeholder:"email@ejemplo.com",is_gift:"Es un regalo?",recipient_name_required:"Para (nombre del beneficiario) *",recipient_name_placeholder:"Nombre del beneficiario",recipient_email:"Email del beneficiario",gift_message:"Mensaje de regalo (opcional)",gift_message_placeholder:"Tu mensaje personalizado...",empty_cart_button:"Vaciar",individual_massages_packages:"Tarjetas para Masaje Individual",four_hands_packages:"Tarjetas para Masaje a Cuatro Manos",rituals_packages:"Tarjetas para Rituales Individuales",couples_packages:"Tarjetas para Masaje para Dos",sessions_count:"sesiones",bono_5_masajes_piernas_cansadas:"Bono 5 masajes Piernas Cansadas",bono_5_masajes_55:"Bono 5 masajes 55'",bono_5_sesiones_shiatsu:"Bono 5 sesiones de Shiatsu",bono_5_masajes_relajante:"Bono 5 masajes Relajante",bono_5_masajes_descontracturante:"Bono 5 masajes Descontracturante",bono_5_masajes_75_minutos:"Bono 5 masajes 75 minutos",bono_10_masajes_55:"Bono 10 masajes 55'",bono_10_masajes_75:"Bono 10 masajes 75'",piernas_cansadas:"Piernas Cansadas",masaje_descontracturante_55_minutos:"Masaje Descontracturante 55 minutos",reflexologia_podal:"Reflexologa Podal",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"Masaje para Embarazada 50 minutos",masaje_relajante_55_minutos:"Masaje Relajante 55 minutos",masaje_deportivo_50_minutos:"Masaje Deportivo 50 minutos",masaje_con_piedras_calientes:"Masaje con Piedras Calientes",bambuterapia_masaje_con_canas_de_bambu:"Bambuterapia Masaje con Caas de Bamb",ritual_romantico_individual:"Ritual Romntico Individual",ritual_energizante_individual:"Ritual Energizante Individual",drenaje_linfatico_75_minutos:"Drenaje Linftico 75 minutos",antiestres_the_nook:"Antiestrs The Nook",masaje_para_embarazada_75_minutos:"Masaje para Embarazada 75 minutos",masaje_descontracturante_75_minutos:"Masaje Descontracturante 75 minutos",tarjeta_regalo_por_valor_personalizado:"TARJETA REGALO por VALOR personalizado",gift_card_config:"Configuracin de la Tarjeta",show_price_on_card:"Mostrar precio en la tarjeta?",who_to_send_card:"A quin enviar la tarjeta?",send_to_buyer:"Enviar al comprador",send_to_recipient:"Enviar directamente al beneficiario",show_buyer_data:"Mostrar datos del comprador?",complete_payment:"Completar Pago",cancel:"Cancelar",save:"Guardar",search:"Buscar",loading:"Cargando",no_results:"No hay resultados",select:"Seleccionar",confirm:"Confirmar",description:"Descripcin",price:"Precio",status:"Estado",active:"Activo",inactive:"Inactivo",administration:"Administracin",management:"Gestin",configuration:"Configuracin",dashboard:"Panel de Control",appointments:"Citas",voucher_page_title:"Bonos",voucher_page_description:"Elige tu bono de sesiones. Perfecto para regalos o uso personal.",create_new_package:"Crear Nuevo Paquete",package_name:"Nombre del paquete",package_description:"Descripcin del paquete",select_service:"Seleccionar servicio",create_package:"Crear Paquete",total_packages:"Total Paquetes",active_packages:"Paquetes Activos",all_packages:"Todos los Paquetes",inactive_packages:"Paquetes Inactivos"},en:{admin:"Admin",back:"Back",wellness_center:"Wellness Center",landing_subtitle:"Discover the perfect harmony between relaxation and wellness in our exclusive massage center",book_appointment:"Book Appointment",gift_cards:"Gift Cards",our_services:"Our Services",services_subtitle:"We offer a wide range of treatments designed for your wellness",individual_massages:"Individual Massages",individual_description:"Personalized treatments for your personal wellness",couples_massages:"Couples Massages",couples_description:"Special moments to share as a couple",special_rituals:"Special Rituals",rituals_description:"Unique experiences for deep relaxation",contact_us:"Contact Us",contact_subtitle:"We're here to help you find your moment of wellness",location:"Location",location_description:"Find our wellness center in the heart of Madrid",view_maps:"View on Maps",hours:"Hours",book_now:"Book Now",rights_reserved:"All rights reserved",relaxing_massage:"Relaxing Massage",therapeutic_massage:"Therapeutic Massage",foot_reflexology:"Foot Reflexology",sports_massage:"Sports Massage",couples_massage:"Couples Massage",romantic_ritual:"Romantic Ritual",hot_stones:"Hot Stone Massage",bamboo_therapy:"Bamboo Therapy",kobido_ritual:"Kobido Ritual",sakura_ritual:"Sakura Ritual",energizing_ritual:"Energizing Ritual",beauty_ritual:"Beauty Ritual",buy_voucher:"Buy Voucher",voucher_subtitle:"Choose the voucher and complete the beneficiary details",voucher:"Voucher",select_voucher:"Select a voucher",four_hands_massages:"Four Hands Massages",rituals:"Rituals",for_two_people:"Vouchers for Two People",no_individual_vouchers:"No individual vouchers available",no_four_hands_vouchers:"No four hands vouchers available",no_ritual_vouchers:"No ritual vouchers available",no_two_people_vouchers:"No vouchers for two available",who_for:"Who is it for?",for_me:"For me",its_gift:"It's a gift",buyer:"Buyer",beneficiary:"Beneficiary",name:"Name",email:"Email",phone:"Phone",notes:"Notes (optional)",notes_placeholder:"Write here if you want to tell us anything",sessions:"sessions",total:"Total",confirm_purchase:"Confirm purchase",proceed_payment:"Proceed to Payment",secure_payment_info:"A secure window will open to complete your purchase. The gift card will be automatically sent by email to the buyer and the recipient.",email_buyer:"Email to buyer",email_beneficiary:"Email to beneficiary",email_center:"Notification to center",open_secure_payment:"Open Secure Payment Page",gift_cards_page:"Gift Cards",gift_cards_subtitle:"Choose your gift card. Elegant and 100% responsive design.",cart:"Cart",your_cart:"Your cart",cart_empty:"Your cart is empty.",empty_cart:"Empty",proceed_to_payment:"Proceed to Payment",custom_amount:"Custom Amount",custom_gift_card:"CUSTOM AMOUNT GIFT CARD",custom_description:"Choose a fixed amount or enter another amount.",custom_placeholder:"Other amount ()",valid_amount:"Please enter a valid amount",add_to_cart:"Add to Cart",added_to_cart:"Added to cart",select_voucher_error:"Select a voucher",buyer_data_required:"Buyer data required",beneficiary_data_required:"Beneficiary data required",error:"Error",payment_init_error:"Could not initiate payment",recipient_name_error:"Please enter the recipient's name",buyer_name_error:"Please enter your name",buyer_email_error:"Please enter your email",purchase_success:"Purchase processed successfully!",purchase_error:"Error processing purchase. Please try again.",buy_button:"Buy",loading_centers:"Loading centers...",personal_information:"Personal Information",full_name:"Full Name",full_name_placeholder:"First and Last Name",phone_placeholder:"+34 600 000 000",email_placeholder:"client@email.com",email_help:"Enter your email or phone to see your previous bookings and vouchers",your_bookings_vouchers:"Your Bookings and Vouchers",sessions_remaining:"sessions remaining",expires:"Expires",center_selection:"Center Selection",center:"Center",select_center:"Select a center",service_selection:"Service Selection",service:"Service",loading_options:"Loading options...",date_time:"Date and Time",date:"Date",select_date:"Select a date",time:"Time",select_time:"Select a time",additional_notes:"Additional Notes",notes_placeholder_form:"Any additional information you consider important...",booking_summary:"Booking Summary",admin_assignment:"The administrator will assign the specialist and service type when you arrive at the center.",confirm_booking:"Confirm Booking",select_service_error:"Select a service",complete_required_fields:"Please complete all required fields",booking_created:" Booking Created",booking_confirmed:"confirmed successfully. ID:",booking_error:"Could not create booking. Try again.",booking_cancelled:"Booking Cancelled",booking_cancelled_success:"The booking has been cancelled successfully.",cancel_booking_error:"Could not cancel booking.",client_found:"Client found",client_data_loaded:"Client data loaded automatically",book_description:"Book your relaxing massage appointment",vouchers:"Vouchers",vouchers_description:"Buy session packages with discount",gift_description:"Give unique wellness experiences",our_locations:"Our Locations",locations_subtitle:"Find us in Madrid",open_maps:"Open in Maps",massage_vouchers:"Massage Vouchers",save_buying_session_packages:"Save by buying session packages with discount",enter_email_or_phone:"Please enter your email or phone",name_label:"Name",close:"Close",remove:"Remove",purchased_by_name:"Purchased by (name)",buyer_name_placeholder:"Buyer's name",buyer_email:"Buyer's email",buyer_email_placeholder:"email@example.com",is_gift:"Is it a gift?",recipient_name_required:"For (recipient's name) *",recipient_name_placeholder:"Recipient's name",recipient_email:"Recipient's email",gift_message:"Gift message (optional)",gift_message_placeholder:"Your personalized message...",empty_cart_button:"Empty",individual_massages_packages:"Individual Massage Gift Cards",four_hands_packages:"Four Hands Massage Gift Cards",rituals_packages:"Ritual Gift Cards",couples_packages:"Couples Massage Gift Cards",sessions_count:"sessions",bono_5_masajes_piernas_cansadas:"5 Tired Legs Massage Package",bono_5_masajes_55:"5 Massage Package 55'",bono_5_sesiones_shiatsu:"5 Shiatsu Sessions Package",bono_5_masajes_relajante:"5 Relaxing Massage Package",bono_5_masajes_descontracturante:"5 Therapeutic Massage Package",bono_5_masajes_75_minutos:"5 75-Minute Massage Package",bono_5_masajes_dos_personas_45_minutos:"5 45-Minute Couples Massage Package",bono_10_masajes_55_minutos:"10 55-Minute Massage Package",bono_10_masajes_reductor_anticelulitico:"10 Anti-Cellulite Massage Package",bono_10_masajes_para_embarazada:"10 Pregnancy Massage Package",bono_5_masajes_dos_personas_75_minutos:"5 75-Minute Couples Massage Package",bono_5_masajes_para_embarazada:"5 Pregnancy Massage Package",bono_5_masajes_reductor_anticelulitico:"5 Anti-Cellulite Massage Package",bono_5_masajes_55_minutos:"5 55-Minute Massage Package",piernas_cansadas:"Tired Legs Massage",masaje_descontracturante_55_minutos:"55-Minute Therapeutic Massage",reflexologia_podal:"Foot Reflexology",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"50-Minute Pregnancy Massage",masaje_relajante_55_minutos:"55-Minute Relaxing Massage",masaje_deportivo_50_minutos:"50-Minute Sports Massage",masaje_con_piedras_calientes:"Hot Stone Massage",bambuterapia_masaje_con_canas_de_bambu:"Bamboo Cane Massage Therapy",ritual_romantico_individual:"Individual Romantic Ritual",ritual_energizante_individual:"Individual Energizing Ritual",drenaje_linfatico_75_minutos:"75-Minute Lymphatic Drainage",antiestres_the_nook:"The Nook Anti-Stress",masaje_para_embarazada_75_minutos:"75-Minute Pregnancy Massage",masaje_descontracturante_75_minutos:"75-Minute Therapeutic Massage",masaje_dos_personas_45_minutos:"45-Minute Couples Massage",ritual_del_kobido_individual:"Individual Kobido Ritual",masaje_90_minutos:"90-Minute Massage",ritual_sakura_individual:"Individual Sakura Ritual",masaje_dos_personas_55_minutos:"55-Minute Couples Massage",masaje_a_cuatro_manos_50_minutos:"50-Minute Four Hands Massage",masaje_relajante_extra_largo_110_minutos:"110-Minute Extra Long Relaxing Massage",bambuterapia_masaje_con_canas_de_bambu_para_dos_personas:"Couples Bamboo Cane Massage Therapy",masaje_con_piedras_calientes_para_dos_personas:"Couples Hot Stone Massage",ritual_beauty_individual:"Individual Beauty Ritual",ritual_energizante_para_dos_personas:"Couples Energizing Ritual",ritual_romantico_para_dos_personas:"Couples Romantic Ritual",masaje_dos_personas_75_minutos:"75-Minute Couples Massage",masaje_a_cuatro_manos_80_minutos:"80-Minute Four Hands Massage",ritual_del_kobido_para_dos_personas:"Couples Kobido Ritual",masaje_dos_personas_110_minutos:"110-Minute Couples Massage",ritual_sakura_para_dos_personas:"Couples Sakura Ritual",ritual_beauty_para_dos_personas:"Couples Beauty Ritual",tarjeta_regalo_por_valor_personalizado:"GIFT CARD for CUSTOM value",gift_card_config:"Gift Card Configuration",show_price_on_card:"Show price on card?",who_to_send_card:"Who to send the card to?",send_to_buyer:"Send to buyer",send_to_recipient:"Send directly to recipient",show_buyer_data:"Show buyer data?",complete_payment:"Complete Payment",cancel:"Cancel",save:"Save",search:"Search",loading:"Loading",no_results:"No results",select:"Select",confirm:"Confirm",description:"Description",price:"Price",status:"Status",active:"Active",inactive:"Inactive",administration:"Administration",management:"Management",configuration:"Configuration",dashboard:"Dashboard",appointments:"Appointments",voucher_page_title:"Vouchers",voucher_page_description:"Choose your session voucher. Perfect for gifts or personal use.",create_new_package:"Create New Package",package_name:"Package name",package_description:"Package description",select_service:"Select service",create_package:"Create Package",total_packages:"Total Packages",active_packages:"Active Packages",all_packages:"All Packages",inactive_packages:"Inactive Packages"},fr:{admin:"Admin",back:"Retour",wellness_center:"Centre de Bien-tre",landing_subtitle:"Dcouvrez l'harmonie parfaite entre relaxation et bien-tre dans notre centre de massage exclusif",book_appointment:"Prendre Rendez-vous",gift_cards:"Cartes Cadeaux",our_services:"Nos Services",services_subtitle:"Nous proposons une large gamme de soins conus pour votre bien-tre",individual_massages:"Massages Individuels",individual_description:"Soins personnaliss pour votre bien-tre personnel",couples_massages:"Massages en Couple",couples_description:"Moments spciaux  partager en couple",special_rituals:"Rituels Spciaux",rituals_description:"Expriences uniques pour une relaxation profonde",contact_us:"Contactez-nous",contact_subtitle:"Nous sommes l pour vous aider  trouver votre moment de bien-tre",location:"Localisation",location_description:"Trouvez notre centre de bien-tre au cur de Madrid",view_maps:"Voir sur Maps",hours:"Horaires",book_now:"Rserver Maintenant",rights_reserved:"Tous droits rservs",buy_voucher:"Acheter Bon",voucher_subtitle:"Choisissez le bon et compltez les donnes du bnficiaire",voucher:"Bon",select_voucher:"Slectionnez un bon",four_hands_massages:"Massages  Quatre Mains",rituals:"Rituels",for_two_people:"Bons pour Deux Personnes",who_for:"Pour qui est-ce ?",for_me:"Pour moi",its_gift:"C'est un cadeau",buyer:"Acheteur",beneficiary:"Bnficiaire",name:"Nom",email:"Email",phone:"Tlphone",notes:"Notes (optionnel)",notes_placeholder:"crivez ici si vous voulez nous dire quelque chose",sessions:"sances",total:"Total",confirm_purchase:"Confirmer l'achat",gift_cards_page:"Cartes Cadeaux",gift_cards_subtitle:"Choisissez votre carte cadeau. Design lgant et 100% responsive.",cart:"Panier",add_to_cart:"Ajouter au Panier",added_to_cart:"Ajout au panier",individual_massages_packages:"Cartes Cadeaux Massages Individuels",couples_packages:"Cartes Cadeaux Massages en Couple",four_hands_packages:"Cartes Cadeaux Massages  Quatre Mains",rituals_packages:"Cartes Cadeaux Rituels",custom_amount:"Montant Personnalis",book_description:"Rservez votre rendez-vous de massage relaxant",vouchers:"Bons",vouchers_description:"Achetez des forfaits de sances avec remise",gift_description:"Offrez des expriences de bien-tre uniques",our_locations:"Nos Emplacements",locations_subtitle:"Trouvez-nous  Madrid",open_maps:"Ouvrir dans Maps",massage_vouchers:"Bons de Massage",save_buying_session_packages:"conomisez en achetant des forfaits de sances avec remise",enter_email_or_phone:"Veuillez saisir votre email ou tlphone",name_label:"Nom",close:"Fermer",bono_5_masajes_piernas_cansadas:"Forfait 5 massages Jambes Fatigues",bono_5_masajes_55:"Forfait 5 massages 55'",bono_5_sesiones_shiatsu:"Forfait 5 sances de Shiatsu",bono_5_masajes_relajante:"Forfait 5 massages Relaxants",bono_5_masajes_descontracturante:"Forfait 5 massages Thrapeutiques",bono_5_masajes_75_minutos:"Forfait 5 massages 75 minutes",bono_10_masajes_55:"Forfait 10 massages 55'",bono_10_masajes_75:"Forfait 10 massages 75'",bono_5_masajes_dos_personas_45_minutos:"Forfait 5 massages couple 45 minutes",bono_10_masajes_55_minutos:"Forfait 10 massages 55 minutes",bono_10_masajes_reductor_anticelulitico:"Forfait 10 massages anti-cellulite",bono_10_masajes_para_embarazada:"Forfait 10 massages prnataux",bono_5_masajes_dos_personas_75_minutos:"Forfait 5 massages couple 75 minutes",bono_5_masajes_para_embarazada:"Forfait 5 massages prnataux",bono_5_masajes_reductor_anticelulitico:"Forfait 5 massages anti-cellulite",bono_5_masajes_55_minutos:"Forfait 5 massages 55 minutes",piernas_cansadas:"Jambes Fatigues",masaje_descontracturante_55_minutos:"Massage Thrapeutique 55 minutes",reflexologia_podal:"Rflexologie Plantaire",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"Massage Prnatal 50 minutes",masaje_relajante_55_minutos:"Massage Relaxant 55 minutes",masaje_deportivo_50_minutos:"Massage Sportif 50 minutes",masaje_con_piedras_calientes:"Massage aux Pierres Chaudes",bambuterapia_masaje_con_canas_de_bambu:"Massage Bambou Thrapie",ritual_romantico_individual:"Rituel Romantique Individuel",ritual_energizante_individual:"Rituel nergisant Individuel",drenaje_linfatico_75_minutos:"Drainage Lymphatique 75 minutes",antiestres_the_nook:"Anti-stress The Nook",masaje_para_embarazada_75_minutos:"Massage Prnatal 75 minutes",masaje_descontracturante_75_minutos:"Massage Thrapeutique 75 minutes",masaje_dos_personas_45_minutos:"Massage couple 45 minutes",ritual_del_kobido_individual:"Rituel Kobido individuel",masaje_90_minutos:"Massage 90 minutes",ritual_sakura_individual:"Rituel Sakura individuel",masaje_dos_personas_55_minutos:"Massage couple 55 minutes",masaje_a_cuatro_manos_50_minutos:"Massage  quatre mains 50 minutes",masaje_relajante_extra_largo_110_minutos:"Massage relaxant extra long 110 minutes",bambuterapia_masaje_con_canas_de_bambu_para_dos_personas:"Massage bambou thrapie pour deux",masaje_con_piedras_calientes_para_dos_personas:"Massage pierres chaudes pour deux",ritual_beauty_individual:"Rituel beaut individuel",ritual_energizante_para_dos_personas:"Rituel nergisant pour deux",ritual_romantico_para_dos_personas:"Rituel romantique pour deux",masaje_dos_personas_75_minutos:"Massage couple 75 minutes",masaje_a_cuatro_manos_80_minutos:"Massage  quatre mains 80 minutes",ritual_del_kobido_para_dos_personas:"Rituel Kobido pour deux",masaje_dos_personas_110_minutos:"Massage couple 110 minutes",ritual_sakura_para_dos_personas:"Rituel Sakura pour deux",ritual_beauty_para_dos_personas:"Rituel beaut pour deux",tarjeta_regalo_por_valor_personalizado:"CARTE CADEAU pour VALEUR personnalise",gift_card_config:"Configuration de la Carte Cadeau",show_price_on_card:"Afficher le prix sur la carte ?",who_to_send_card:" qui envoyer la carte ?",send_to_buyer:"Envoyer  l'acheteur",send_to_recipient:"Envoyer directement au bnficiaire",show_buyer_data:"Afficher les donnes de l'acheteur ?",complete_payment:"Finaliser le Paiement",buy_button:"Acheter",custom_gift_card:"CARTE CADEAU pour VALEUR personnalise",custom_description:"Choisissez un montant fixe ou saisissez un autre montant.",custom_placeholder:"Autre montant ()",valid_amount:"Veuillez indiquer un montant valide",proceed_to_payment:"Procder au Paiement",cart_empty:"Votre panier est vide.",remove:"Retirer",purchased_by_name:"Achet par (nom)",buyer_name_placeholder:"Nom de l'acheteur",buyer_email:"Email de l'acheteur",buyer_email_placeholder:"email@exemple.com",is_gift:"Est-ce un cadeau ?",recipient_name_required:"Pour (nom du bnficiaire) *",recipient_name_placeholder:"Nom du bnficiaire",recipient_email:"Email du bnficiaire",gift_message:"Message cadeau (optionnel)",gift_message_placeholder:"Votre message personnalis...",empty_cart_button:"Vider"},de:{admin:"Admin",back:"Zurck",wellness_center:"Wellness-Zentrum",landing_subtitle:"Entdecken Sie die perfekte Harmonie zwischen Entspannung und Wohlbefinden in unserem exklusiven Massagezentrum",book_appointment:"Termin Buchen",gift_cards:"Geschenkkarten",our_services:"Unsere Dienstleistungen",services_subtitle:"Wir bieten eine breite Palette von Behandlungen fr Ihr Wohlbefinden",individual_massages:"Einzelmassagen",individual_description:"Personalisierte Behandlungen fr Ihr persnliches Wohlbefinden",couples_massages:"Paarmassagen",couples_description:"Besondere Momente zu zweit",special_rituals:"Besondere Rituale",rituals_description:"Einzigartige Erfahrungen fr tiefe Entspannung",contact_us:"Kontaktieren Sie uns",contact_subtitle:"Wir sind hier, um Ihnen zu helfen, Ihren Moment des Wohlbefindens zu finden",location:"Standort",location_description:"Finden Sie unser Wellness-Zentrum im Herzen von Madrid",view_maps:"Auf Maps anzeigen",hours:"ffnungszeiten",book_now:"Jetzt Buchen",rights_reserved:"Alle Rechte vorbehalten",buy_voucher:"Gutschein Kaufen",voucher:"Gutschein",select_voucher:"Whlen Sie einen Gutschein",four_hands_massages:"Vier-Hnde-Massagen",rituals:"Rituale",for_two_people:"Gutscheine fr Zwei Personen",who_for:"Fr wen ist es?",for_me:"Fr mich",its_gift:"Es ist ein Geschenk",buyer:"Kufer",beneficiary:"Begnstigter",name:"Name",email:"Email",phone:"Telefon",confirm_purchase:"Kauf besttigen",gift_cards_page:"Geschenkkarten",cart:"Warenkorb",add_to_cart:"In den Warenkorb",added_to_cart:"Zum Warenkorb hinzugefgt",book_description:"Buchen Sie Ihren entspannenden Massage-Termin",vouchers:"Gutscheine",vouchers_description:"Kaufen Sie Sitzungspakete mit Rabatt",gift_description:"Schenken Sie einzigartige Wellness-Erlebnisse",our_locations:"Unsere Standorte",locations_subtitle:"Finden Sie uns in Madrid",open_maps:"In Maps ffnen",massage_vouchers:"Massage-Gutscheine",save_buying_session_packages:"Sparen Sie beim Kauf von Sitzungspaketen mit Rabatt",enter_email_or_phone:"Bitte geben Sie Ihre E-Mail oder Telefon ein",name_label:"Name",close:"Schlieen",bono_5_masajes_piernas_cansadas:"5er-Paket Mde Beine Massage",bono_5_masajes_55:"5er-Paket Massage 55'",bono_5_sesiones_shiatsu:"5er-Paket Shiatsu-Sitzungen",bono_5_masajes_relajante:"5er-Paket Entspannungsmassage",bono_5_masajes_descontracturante:"5er-Paket Therapeutische Massage",bono_5_masajes_75_minutos:"5er-Paket Massage 75 Minuten",bono_10_masajes_55:"10er-Paket Massage 55'",bono_10_masajes_75:"10er-Paket Massage 75'",bono_5_masajes_dos_personas_45_minutos:"5er-Paket Paarmassage 45 Minuten",bono_10_masajes_55_minutos:"10er-Paket Massage 55 Minuten",bono_10_masajes_reductor_anticelulitico:"10er-Paket Anti-Cellulite Massage",bono_10_masajes_para_embarazada:"10er-Paket Schwangerschaftsmassage",bono_5_masajes_dos_personas_75_minutos:"5er-Paket Paarmassage 75 Minuten",bono_5_masajes_para_embarazada:"5er-Paket Schwangerschaftsmassage",bono_5_masajes_reductor_anticelulitico:"5er-Paket Anti-Cellulite Massage",bono_5_masajes_55_minutos:"5er-Paket Massage 55 Minuten",piernas_cansadas:"Mde Beine",masaje_descontracturante_55_minutos:"Therapeutische Massage 55 Minuten",reflexologia_podal:"Fureflexzonenmassage",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"Schwangerschaftsmassage 50 Minuten",masaje_relajante_55_minutos:"Entspannungsmassage 55 Minuten",masaje_deportivo_50_minutos:"Sportmassage 50 Minuten",masaje_con_piedras_calientes:"Hot Stone Massage",bambuterapia_masaje_con_canas_de_bambu:"Bambus-Therapie Massage",ritual_romantico_individual:"Romantisches Ritual Einzeln",ritual_energizante_individual:"Energierendes Ritual Einzeln",drenaje_linfatico_75_minutos:"Lymphdrainage 75 Minuten",antiestres_the_nook:"Anti-Stress The Nook",masaje_para_embarazada_75_minutos:"Schwangerschaftsmassage 75 Minuten",masaje_descontracturante_75_minutos:"Therapeutische Massage 75 Minuten",masaje_dos_personas_45_minutos:"Paarmassage 45 Minuten",ritual_del_kobido_individual:"Kobido Ritual Einzeln",masaje_90_minutos:"Massage 90 Minuten",ritual_sakura_individual:"Sakura Ritual Einzeln",masaje_dos_personas_55_minutos:"Paarmassage 55 Minuten",masaje_a_cuatro_manos_50_minutos:"Vier-Hnde-Massage 50 Minuten",masaje_relajante_extra_largo_110_minutos:"Extra lange Entspannungsmassage 110 Minuten",bambuterapia_masaje_con_canas_de_bambu_para_dos_personas:"Bambus-Therapie fr zwei Personen",masaje_con_piedras_calientes_para_dos_personas:"Hot Stone Massage fr zwei",ritual_beauty_individual:"Beauty Ritual Einzeln",ritual_energizante_para_dos_personas:"Energierendes Ritual fr zwei",ritual_romantico_para_dos_personas:"Romantisches Ritual fr zwei",masaje_dos_personas_75_minutos:"Paarmassage 75 Minuten",masaje_a_cuatro_manos_80_minutos:"Vier-Hnde-Massage 80 Minuten",ritual_del_kobido_para_dos_personas:"Kobido Ritual fr zwei",masaje_dos_personas_110_minutos:"Paarmassage 110 Minuten",ritual_sakura_para_dos_personas:"Sakura Ritual fr zwei",ritual_beauty_para_dos_personas:"Beauty Ritual fr zwei",tarjeta_regalo_por_valor_personalizado:"GESCHENKKARTE fr INDIVIDUELLEN Wert",gift_card_config:"Geschenkkarten-Konfiguration",show_price_on_card:"Preis auf der Karte anzeigen?",who_to_send_card:"An wen soll die Karte gesendet werden?",send_to_buyer:"An Kufer senden",send_to_recipient:"Direkt an Empfnger senden",show_buyer_data:"Kuferdaten anzeigen?",complete_payment:"Zahlung Abschlieen",buy_button:"Kaufen",custom_gift_card:"GESCHENKKARTE fr INDIVIDUELLEN Wert",custom_description:"Whlen Sie einen festen Betrag oder geben Sie einen anderen Betrag ein.",custom_placeholder:"Anderer Betrag ()",valid_amount:"Bitte geben Sie einen gltigen Betrag an",proceed_to_payment:"Zur Zahlung",empty_cart:"Leeren",your_cart:"Ihr Warenkorb",cart_empty:"Ihr Warenkorb ist leer.",remove:"Entfernen",purchased_by_name:"Gekauft von (Name)",buyer_name_placeholder:"Name des Kufers",buyer_email:"Email des Kufers",buyer_email_placeholder:"email@beispiel.com",is_gift:"Ist es ein Geschenk?",recipient_name_required:"Fr (Name des Empfngers) *",recipient_name_placeholder:"Name des Empfngers",recipient_email:"Email des Empfngers",gift_message:"Geschenknachricht (optional)",gift_message_placeholder:"Ihre persnliche Nachricht...",empty_cart_button:"Leeren",individual_massages_packages:"Geschenkkarten fr Individuelle Massagen",couples_packages:"Geschenkkarten fr Paar-Massagen",four_hands_packages:"Geschenkkarten fr Vier-Hnde-Massagen",rituals_packages:"Geschenkkarten fr Rituale",custom_amount:"Benutzerdefinierter Betrag"},it:{admin:"Admin",back:"Indietro",wellness_center:"Centro Benessere",landing_subtitle:"Scopri l'armonia perfetta tra relax e benessere nel nostro esclusivo centro massaggi",book_appointment:"Prenota Appuntamento",gift_cards:"Carte Regalo",our_services:"I Nostri Servizi",services_subtitle:"Offriamo una vasta gamma di trattamenti pensati per il vostro benessere",individual_massages:"Massaggi Individuali",individual_description:"Trattamenti personalizzati per il vostro benessere personale",couples_massages:"Massaggi di Coppia",couples_description:"Momenti speciali da condividere in coppia",special_rituals:"Rituali Speciali",rituals_description:"Esperienze uniche per un relax profondo",contact_us:"Contattaci",contact_subtitle:"Siamo qui per aiutarvi a trovare il vostro momento di benessere",location:"Posizione",location_description:"Trova il nostro centro benessere nel cuore di Madrid",view_maps:"Visualizza su Maps",hours:"Orari",book_now:"Prenota Ora",rights_reserved:"Tutti i diritti riservati",buy_voucher:"Acquista Buono",voucher:"Buono",select_voucher:"Seleziona un buono",four_hands_massages:"Massaggi a Quattro Mani",rituals:"Rituali",for_two_people:"Buoni per Due Persone",who_for:"Per chi ?",for_me:"Per me",its_gift:" un regalo",buyer:"Acquirente",beneficiary:"Beneficiario",name:"Nome",email:"Email",phone:"Telefono",confirm_purchase:"Conferma acquisto",gift_cards_page:"Carte Regalo",cart:"Carrello",add_to_cart:"Aggiungi al Carrello",added_to_cart:"Aggiunto al carrello",book_description:"Prenota il tuo appuntamento per massaggio rilassante",vouchers:"Buoni",vouchers_description:"Acquista pacchetti di sessioni con sconto",gift_description:"Regala esperienze di benessere uniche",our_locations:"Le Nostre Sedi",locations_subtitle:"Trovaci a Madrid",open_maps:"Apri in Maps",massage_vouchers:"Buoni Massaggio",save_buying_session_packages:"Risparmia acquistando pacchetti di sessioni con sconto",enter_email_or_phone:"Per favore inserisci la tua email o telefono",name_label:"Nome",close:"Chiudi",bono_5_masajes_piernas_cansadas:"Pacchetto 5 massaggi Gambe Stanche",bono_5_masajes_55:"Pacchetto 5 massaggi 55'",bono_5_sesiones_shiatsu:"Pacchetto 5 sessioni di Shiatsu",bono_5_masajes_relajante:"Pacchetto 5 massaggi Rilassanti",bono_5_masajes_descontracturante:"Pacchetto 5 massaggi Terapeutici",bono_5_masajes_75_minutos:"Pacchetto 5 massaggi 75 minuti",bono_10_masajes_55:"Pacchetto 10 massaggi 55'",bono_10_masajes_75:"Pacchetto 10 massaggi 75'",bono_5_masajes_dos_personas_45_minutos:"Pacchetto 5 massaggi coppia 45 minuti",bono_10_masajes_55_minutos:"Pacchetto 10 massaggi 55 minuti",bono_10_masajes_reductor_anticelulitico:"Pacchetto 10 massaggi anticellulite",bono_10_masajes_para_embarazada:"Pacchetto 10 massaggi prenatali",bono_5_masajes_dos_personas_75_minutos:"Pacchetto 5 massaggi coppia 75 minuti",bono_5_masajes_para_embarazada:"Pacchetto 5 massaggi prenatali",bono_5_masajes_reductor_anticelulitico:"Pacchetto 5 massaggi anticellulite",bono_5_masajes_55_minutos:"Pacchetto 5 massaggi 55 minuti",piernas_cansadas:"Gambe Stanche",masaje_descontracturante_55_minutos:"Massaggio Terapeutico 55 minuti",reflexologia_podal:"Riflessologia Plantare",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"Massaggio Prenatale 50 minuti",masaje_relajante_55_minutos:"Massaggio Rilassante 55 minuti",masaje_deportivo_50_minutos:"Massaggio Sportivo 50 minuti",masaje_con_piedras_calientes:"Massaggio con Pietre Calde",bambuterapia_masaje_con_canas_de_bambu:"Bambu Terapia Massaggio",ritual_romantico_individual:"Rituale Romantico Individuale",ritual_energizante_individual:"Rituale Energizzante Individuale",drenaje_linfatico_75_minutos:"Drenaggio Linfatico 75 minuti",antiestres_the_nook:"Anti-stress The Nook",masaje_para_embarazada_75_minutos:"Massaggio Prenatale 75 minuti",masaje_descontracturante_75_minutos:"Massaggio Terapeutico 75 minuti",masaje_dos_personas_45_minutos:"Massaggio coppia 45 minuti",ritual_del_kobido_individual:"Rituale Kobido individuale",masaje_90_minutos:"Massaggio 90 minuti",ritual_sakura_individual:"Rituale Sakura individuale",masaje_dos_personas_55_minutos:"Massaggio coppia 55 minuti",masaje_a_cuatro_manos_50_minutos:"Massaggio a quattro mani 50 minuti",masaje_relajante_extra_largo_110_minutos:"Massaggio rilassante extra lungo 110 minuti",bambuterapia_masaje_con_canas_de_bambu_para_dos_personas:"Bambu terapia per due persone",masaje_con_piedras_calientes_para_dos_personas:"Massaggio pietre calde per due",ritual_beauty_individual:"Rituale beauty individuale",ritual_energizante_para_dos_personas:"Rituale energizzante per due",ritual_romantico_para_dos_personas:"Rituale romantico per due",masaje_dos_personas_75_minutos:"Massaggio coppia 75 minuti",masaje_a_cuatro_manos_80_minutos:"Massaggio a quattro mani 80 minuti",ritual_del_kobido_para_dos_personas:"Rituale Kobido per due",masaje_dos_personas_110_minutos:"Massaggio coppia 110 minuti",ritual_sakura_para_dos_personas:"Rituale Sakura per due",ritual_beauty_para_dos_personas:"Rituale beauty per due",tarjeta_regalo_por_valor_personalizado:"CARTA REGALO per VALORE personalizzato",gift_card_config:"Configurazione Carta Regalo",show_price_on_card:"Mostrare il prezzo sulla carta?",who_to_send_card:"A chi inviare la carta?",send_to_buyer:"Invia all'acquirente",send_to_recipient:"Invia direttamente al beneficiario",show_buyer_data:"Mostrare dati dell'acquirente?",complete_payment:"Completa Pagamento",buy_button:"Acquista",custom_gift_card:"CARTA REGALO per VALORE personalizzato",custom_description:"Scegli un importo fisso o inserisci un altro importo.",custom_placeholder:"Altro importo ()",valid_amount:"Indica un importo valido",proceed_to_payment:"Procedi al Pagamento",empty_cart:"Svuota",your_cart:"Il tuo carrello",cart_empty:"Il tuo carrello  vuoto.",remove:"Rimuovi",purchased_by_name:"Acquistato da (nome)",buyer_name_placeholder:"Nome dell'acquirente",buyer_email:"Email dell'acquirente",buyer_email_placeholder:"email@esempio.com",is_gift:" un regalo?",recipient_name_required:"Per (nome del beneficiario) *",recipient_name_placeholder:"Nome del beneficiario",recipient_email:"Email del beneficiario",gift_message:"Messaggio regalo (opzionale)",gift_message_placeholder:"Il tuo messaggio personalizzato...",empty_cart_button:"Svuota",individual_massages_packages:"Carte Regalo Massaggi Individuali",couples_packages:"Carte Regalo Massaggi di Coppia",four_hands_packages:"Carte Regalo Massaggi a Quattro Mani",rituals_packages:"Carte Regalo Rituali",custom_amount:"Importo Personalizzato"},pt:{admin:"Admin",back:"Voltar",wellness_center:"Centro de Bem-estar",landing_subtitle:"Descubra a harmonia perfeita entre relaxamento e bem-estar no nosso centro de massagens exclusivo",book_appointment:"Marcar Consulta",gift_cards:"Cartes Presente",our_services:"Os Nossos Servios",services_subtitle:"Oferecemos uma vasta gama de tratamentos pensados para o seu bem-estar",individual_massages:"Massagens Individuais",individual_description:"Tratamentos personalizados para o seu bem-estar pessoal",couples_massages:"Massagens para Casais",couples_description:"Momentos especiais para partilhar em casal",special_rituals:"Rituais Especiais",rituals_description:"Experincias nicas para um relaxamento profundo",contact_us:"Contacte-nos",contact_subtitle:"Estamos aqui para o ajudar a encontrar o seu momento de bem-estar",location:"Localizao",location_description:"Encontre o nosso centro de bem-estar no corao de Madrid",view_maps:"Ver no Maps",hours:"Horrios",book_now:"Reservar Agora",rights_reserved:"Todos os direitos reservados",buy_voucher:"Comprar Voucher",voucher:"Voucher",select_voucher:"Selecione um voucher",four_hands_massages:"Massagens a Quatro Mos",rituals:"Rituais",for_two_people:"Vouchers para Duas Pessoas",who_for:"Para quem ?",for_me:"Para mim",its_gift:" um presente",buyer:"Comprador",beneficiary:"Beneficirio",name:"Nome",email:"Email",phone:"Telefone",confirm_purchase:"Confirmar compra",gift_cards_page:"Cartes Presente",cart:"Carrinho",add_to_cart:"Adicionar ao Carrinho",added_to_cart:"Adicionado ao carrinho",book_description:"Reserve a sua consulta de massagem relaxante",vouchers:"Vouchers",vouchers_description:"Compre pacotes de sesses com desconto",gift_description:"Oferea experincias de bem-estar nicas",our_locations:"As Nossas Localizaes",locations_subtitle:"Encontre-nos em Madrid",open_maps:"Abrir no Maps",massage_vouchers:"Vouchers de Massagem",save_buying_session_packages:"Poupe comprando pacotes de sesses com desconto",enter_email_or_phone:"Por favor insira o seu email ou telefone",name_label:"Nome",close:"Fechar",bono_5_masajes_piernas_cansadas:"Pacote 5 massagens Pernas Cansadas",bono_5_masajes_55:"Pacote 5 massagens 55'",bono_5_sesiones_shiatsu:"Pacote 5 sesses de Shiatsu",bono_5_masajes_relajante:"Pacote 5 massagens Relaxantes",bono_5_masajes_descontracturante:"Pacote 5 massagens Teraputicas",bono_5_masajes_75_minutos:"Pacote 5 massagens 75 minutos",bono_10_masajes_55:"Pacote 10 massagens 55'",bono_10_masajes_75:"Pacote 10 massagens 75'",bono_5_masajes_dos_personas_45_minutos:"Pacote 5 massagens casal 45 minutos",bono_10_masajes_55_minutos:"Pacote 10 massagens 55 minutos",bono_10_masajes_reductor_anticelulitico:"Pacote 10 massagens anticelulite",bono_10_masajes_para_embarazada:"Pacote 10 massagens pr-natais",bono_5_masajes_dos_personas_75_minutos:"Pacote 5 massagens casal 75 minutos",bono_5_masajes_para_embarazada:"Pacote 5 massagens pr-natais",bono_5_masajes_reductor_anticelulitico:"Pacote 5 massagens anticelulite",bono_5_masajes_55_minutos:"Pacote 5 massagens 55 minutos",piernas_cansadas:"Pernas Cansadas",masaje_descontracturante_55_minutos:"Massagem Teraputica 55 minutos",reflexologia_podal:"Reflexologia Podal",shiatsu:"Shiatsu",masaje_para_embarazada_50_minutos:"Massagem Pr-natal 50 minutos",masaje_relajante_55_minutos:"Massagem Relaxante 55 minutos",masaje_deportivo_50_minutos:"Massagem Desportiva 50 minutos",masaje_con_piedras_calientes:"Massagem com Pedras Quentes",bambuterapia_masaje_con_canas_de_bambu:"Bambu Terapia Massagem",ritual_romantico_individual:"Ritual Romntico Individual",ritual_energizante_individual:"Ritual Energizante Individual",drenaje_linfatico_75_minutos:"Drenagem Linftica 75 minutos",antiestres_the_nook:"Anti-stress The Nook",masaje_para_embarazada_75_minutos:"Massagem Pr-natal 75 minutos",masaje_descontracturante_75_minutos:"Massagem Teraputica 75 minutos",masaje_dos_personas_45_minutos:"Massagem casal 45 minutos",ritual_del_kobido_individual:"Ritual Kobido individual",masaje_90_minutos:"Massagem 90 minutos",ritual_sakura_individual:"Ritual Sakura individual",masaje_dos_personas_55_minutos:"Massagem casal 55 minutos",masaje_a_cuatro_manos_50_minutos:"Massagem a quatro mos 50 minutos",masaje_relajante_extra_largo_110_minutos:"Massagem relaxante extra longa 110 minutos",bambuterapia_masaje_con_canas_de_bambu_para_dos_personas:"Bambu terapia para duas pessoas",masaje_con_piedras_calientes_para_dos_personas:"Massagem pedras quentes para dois",ritual_beauty_individual:"Ritual beauty individual",ritual_energizante_para_dos_personas:"Ritual energizante para dois",ritual_romantico_para_dos_personas:"Ritual romntico para dois",masaje_dos_personas_75_minutos:"Massagem casal 75 minutos",masaje_a_cuatro_manos_80_minutos:"Massagem a quatro mos 80 minutos",ritual_del_kobido_para_dos_personas:"Ritual Kobido para dois",masaje_dos_personas_110_minutos:"Massagem casal 110 minutos",ritual_sakura_para_dos_personas:"Ritual Sakura para dois",ritual_beauty_para_dos_personas:"Ritual beauty para dois",tarjeta_regalo_por_valor_personalizado:"CARTO PRESENTE para VALOR personalizado",gift_card_config:"Configurao do Carto Presente",show_price_on_card:"Mostrar preo no carto?",who_to_send_card:"Para quem enviar o carto?",send_to_buyer:"Enviar para o comprador",send_to_recipient:"Enviar diretamente para o beneficirio",show_buyer_data:"Mostrar dados do comprador?",complete_payment:"Finalizar Pagamento",buy_button:"Comprar",custom_gift_card:"CARTO PRESENTE para VALOR personalizado",custom_description:"Escolha um valor fixo ou escreva outro valor.",custom_placeholder:"Outro valor ()",valid_amount:"Indique um valor vlido",proceed_to_payment:"Prosseguir para Pagamento",empty_cart:"Esvaziar",your_cart:"Seu carrinho",cart_empty:"Seu carrinho est vazio.",remove:"Remover",purchased_by_name:"Comprado por (nome)",buyer_name_placeholder:"Nome do comprador",buyer_email:"Email do comprador",buyer_email_placeholder:"email@exemplo.com",is_gift:" um presente?",recipient_name_required:"Para (nome do beneficirio) *",recipient_name_placeholder:"Nome do beneficirio",recipient_email:"Email do beneficirio",gift_message:"Mensagem do presente (opcional)",gift_message_placeholder:"Sua mensagem personalizada...",empty_cart_button:"Esvaziar",individual_massages_packages:"Cartes Presente de Massagens Individuais",couples_packages:"Cartes Presente de Massagens para Casais",four_hands_packages:"Cartes Presente de Massagens a Quatro Mos",rituals_packages:"Cartes Presente de Rituais",custom_amount:"Valor Personalizado"}},Xj=f.createContext({language:"es",setLanguage:()=>{},t:e=>e}),tc=()=>{const e=f.useContext(Xj);if(!e)throw new Error("useTranslation must be used within a TranslationProvider");return e},b5=()=>{const[e,t]=f.useState(()=>localStorage.getItem("language")||"es");return f.useEffect(()=>{localStorage.setItem("language",e)},[e]),{language:e,setLanguage:t,t:r=>{var a;return((a=zy[e])==null?void 0:a[r])||zy.es[r]||r}}},j5=({children:e})=>{const t=b5();return s.jsx(Xj.Provider,{value:t,children:e})};function N5(e,t=[]){let n=[];function r(o,i){const l=f.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:h,children:g,...w}=m,y=(h==null?void 0:h[e][c])||l,_=f.useMemo(()=>w,Object.values(w));return s.jsx(y.Provider,{value:_,children:g})}function u(m,h){const g=(h==null?void 0:h[e][c])||l,w=f.useContext(g);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,C5(a,...t)]}function C5(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var S5=f.createContext(void 0);function bi(e){const t=f.useContext(S5);return e||t||"ltr"}var nh="rovingFocusGroup.onEntryFocus",k5={bubbles:!1,cancelable:!0},Bu="RovingFocusGroup",[Wf,Jj,E5]=Xl(Bu),[P5,Zj]=N5(Bu,[E5]),[T5,M5]=P5(Bu),eN=f.forwardRef((e,t)=>s.jsx(Wf.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Wf.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(R5,{...e,ref:t})})}));eN.displayName=Bu;var R5=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,h=f.useRef(null),g=Ie(t,h),w=bi(o),[y=null,_]=lr({prop:i,defaultProp:l,onChange:c}),[x,p]=f.useState(!1),v=Ot(d),b=Jj(n),j=f.useRef(!1),[k,C]=f.useState(0);return f.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(nh,v),()=>E.removeEventListener(nh,v)},[v]),s.jsx(T5,{scope:n,orientation:r,dir:w,loop:a,currentTabStopId:y,onItemFocus:f.useCallback(E=>_(E),[_]),onItemShiftTab:f.useCallback(()=>p(!0),[]),onFocusableItemAdd:f.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:f.useCallback(()=>C(E=>E-1),[]),children:s.jsx(Me.div,{tabIndex:x||k===0?-1:0,"data-orientation":r,...m,ref:g,style:{outline:"none",...e.style},onMouseDown:_e(e.onMouseDown,()=>{j.current=!0}),onFocus:_e(e.onFocus,E=>{const M=!j.current;if(E.target===E.currentTarget&&M&&!x){const R=new CustomEvent(nh,k5);if(E.currentTarget.dispatchEvent(R),!R.defaultPrevented){const I=b().filter(A=>A.focusable),P=I.find(A=>A.active),D=I.find(A=>A.id===y),Y=[P,D,...I].filter(Boolean).map(A=>A.ref.current);rN(Y,u)}}j.current=!1}),onBlur:_e(e.onBlur,()=>p(!1))})})}),tN="RovingFocusGroupItem",nN=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:o,...i}=e,l=Qr(),c=o||l,d=M5(tN,n),u=d.currentTabStopId===c,m=Jj(n),{onFocusableItemAdd:h,onFocusableItemRemove:g}=d;return f.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),s.jsx(Wf.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:s.jsx(Me.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:_e(e.onMouseDown,w=>{r?d.onItemFocus(c):w.preventDefault()}),onFocus:_e(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:_e(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=O5(w,d.orientation,d.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=m().filter(p=>p.focusable).map(p=>p.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const p=x.indexOf(w.currentTarget);x=d.loop?I5(x,p+1):x.slice(p+1)}setTimeout(()=>rN(x))}})})})});nN.displayName=tN;var D5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function A5(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function O5(e,t,n){const r=A5(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return D5[r]}function rN(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function I5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var L5=eN,$5=nN,Lg="Tabs",[F5,Ez]=cr(Lg,[Zj]),sN=Zj(),[z5,$g]=F5(Lg),aN=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=bi(l),[m,h]=lr({prop:r,onChange:a,defaultProp:o});return s.jsx(z5,{scope:n,baseId:Qr(),value:m,onValueChange:h,orientation:i,dir:u,activationMode:c,children:s.jsx(Me.div,{dir:u,"data-orientation":i,...d,ref:t})})});aN.displayName=Lg;var oN="TabsList",iN=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,o=$g(oN,n),i=sN(n);return s.jsx(L5,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:s.jsx(Me.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});iN.displayName=oN;var lN="TabsTrigger",cN=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...o}=e,i=$g(lN,n),l=sN(n),c=mN(i.baseId,r),d=hN(i.baseId,r),u=r===i.value;return s.jsx($5,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Me.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:_e(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(r):m.preventDefault()}),onKeyDown:_e(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(r)}),onFocus:_e(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!a&&m&&i.onValueChange(r)})})})});cN.displayName=lN;var dN="TabsContent",uN=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:o,...i}=e,l=$g(dN,n),c=mN(l.baseId,r),d=hN(l.baseId,r),u=r===l.value,m=f.useRef(u);return f.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Qn,{present:a||u,children:({present:h})=>s.jsx(Me.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&o})})});uN.displayName=dN;function mN(e,t){return`${e}-trigger-${t}`}function hN(e,t){return`${e}-content-${t}`}var B5=aN,fN=iN,pN=cN,gN=uN;const ys=B5,ws=f.forwardRef(({className:e,...t},n)=>s.jsx(fN,{ref:n,className:le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ws.displayName=fN.displayName;const ct=f.forwardRef(({className:e,...t},n)=>s.jsx(pN,{ref:n,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ct.displayName=pN.displayName;const st=f.forwardRef(({className:e,...t},n)=>s.jsx(gN,{ref:n,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));st.displayName=gN.displayName;const ie=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ie.displayName="Card";const Ne=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("flex flex-col space-y-1.5 p-6",e),...t}));Ne.displayName="CardHeader";const Ee=f.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:le("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ee.displayName="CardTitle";const Un=f.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:le("text-sm text-muted-foreground",e),...t}));Un.displayName="CardDescription";const de=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("p-6 pt-0",e),...t}));de.displayName="CardContent";const br=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("flex items-center p-6 pt-0",e),...t}));br.displayName="CardFooter";const zl=ku("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},o)=>{const i=r?qa:"button";return s.jsx(i,{className:le(zl({variant:t,size:n,className:e})),ref:o,...a})});W.displayName="Button";const rh=768;function dr(){const[e,t]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${rh-1}px)`),r=()=>{t(window.innerWidth<rh)};return n.addEventListener("change",r),t(window.innerWidth<rh),()=>n.removeEventListener("change",r)},[]),!!e}const U5="modulepreload",W5=function(e){return"/"+e},By={},ji=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=W5(c),c in By)return;By[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":U5,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((h,g)=>{m.addEventListener("load",h),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Pr=({open:e,onClose:t,children:n,maxWidth:r=500,mobileMaxWidth:a=350,maxHeight:o=600,viewportPadding:i=20,className:l="",zIndex:c=50,overlayZIndex:d,centered:u=!0})=>{const m=dr(),[h,g]=X.useState({top:0,left:0,width:0,height:0}),w=X.useCallback(()=>{const y=window.innerHeight,_=window.innerWidth,x=Math.min(m?a:r,_-i*2),p=Math.min(o,y-i*2),b=(window.pageYOffset||document.documentElement.scrollTop)+(y-p)/2,j=(_-x)/2;g({top:b,left:j,width:x,height:p})},[m,o,r,a,i]);return X.useEffect(()=>{if(!e)return;w();const y=()=>w(),_=()=>w(),x=p=>{p.key==="Escape"&&t()};return window.addEventListener("resize",y),window.addEventListener("scroll",_,!0),window.addEventListener("keydown",x),()=>{window.removeEventListener("resize",y),window.removeEventListener("scroll",_,!0),window.removeEventListener("keydown",x)}},[e,w,t]),e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50",style:{zIndex:d??c-10},onClick:t}),s.jsx("div",{className:"fixed bg-white rounded-lg shadow-2xl border transition-all duration-300 "+l,role:"dialog","aria-modal":"true",style:{top:u?"50%":`${h.top}px`,left:u?"50%":`${h.left}px`,transform:u?"translate(-50%, -50%)":void 0,width:`${h.width}px`,maxHeight:`${h.height}px`,overflowY:"auto",zIndex:c},onClick:y=>y.stopPropagation(),children:n})]}):null};function qe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function An(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Gt(e,t){const n=qe(e);return isNaN(t)?An(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Tr(e,t){const n=qe(e);if(isNaN(t))return An(e,NaN);if(!t)return n;const r=n.getDate(),a=An(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const o=a.getDate();return r>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function H5(e,t){const n=+qe(e);return An(e,n+t)}const Fg=6048e5,q5=864e5,zg=6e4,vN=36e5;let V5={};function nc(){return V5}function Mr(e,t){var l,c,d,u;const n=nc(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=qe(e),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Ka(e){return Mr(e,{weekStartsOn:1})}function xN(e){const t=qe(e),n=t.getFullYear(),r=An(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Ka(r),o=An(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Ka(o);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function ca(e){const t=qe(e);return t.setHours(0,0,0,0),t}function Qd(e){const t=qe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Gr(e,t){const n=ca(e),r=ca(t),a=+n-Qd(n),o=+r-Qd(r);return Math.round((a-o)/q5)}function G5(e){const t=xN(e),n=An(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ka(n)}function Uy(e,t){return H5(e,t*zg)}function Hf(e,t){const n=t*7;return Gt(e,n)}function K5(e,t){return Tr(e,t*12)}function Y5(e){let t;return e.forEach(function(n){const r=qe(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Q5(e){let t;return e.forEach(n=>{const r=qe(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function dn(e,t){const n=ca(e),r=ca(t);return+n==+r}function Bg(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function X5(e){if(!Bg(e)&&typeof e!="number")return!1;const t=qe(e);return!isNaN(Number(t))}function Bl(e,t){const n=qe(e),r=qe(t),a=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return a*12+o}function J5(e,t,n){const r=Mr(e,n),a=Mr(t,n),o=+r-Qd(r),i=+a-Qd(a);return Math.round((o-i)/Fg)}function Uu(e){const t=qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Z5(e,t){const n=qe(e.start),r=qe(e.end);let a=+n>+r;const o=a?+n:+r,i=a?r:n;i.setHours(0,0,0,0);let l=1;const c=[];for(;+i<=o;)c.push(qe(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return a?c.reverse():c}function bn(e){const t=qe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Wy(e){const t=qe(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Xd(e){const t=qe(e),n=An(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Wu(e,t){var l,c,d,u;const n=nc(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=qe(e),o=a.getDay(),i=(o<r?-7:0)+6-(o-r);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function yN(e){return Wu(e,{weekStartsOn:1})}const eD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tD=(e,t,n)=>{let r;const a=eD[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Lo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const nD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aD={date:Lo({formats:nD,defaultWidth:"full"}),time:Lo({formats:rD,defaultWidth:"full"}),dateTime:Lo({formats:sD,defaultWidth:"full"})},oD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iD=(e,t,n,r)=>oD[e];function Wr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const lD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fD=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},pD={ordinalNumber:fD,era:Wr({values:lD,defaultWidth:"wide"}),quarter:Wr({values:cD,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wr({values:dD,defaultWidth:"wide"}),day:Wr({values:uD,defaultWidth:"wide"}),dayPeriod:Wr({values:mD,defaultWidth:"wide",formattingValues:hD,defaultFormattingWidth:"wide"})};function Hr(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?vD(l,m=>m.test(i)):gD(l,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function gD(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function vD(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function wN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const xD=/^(\d+)(th|st|nd|rd)?/i,yD=/\d+/i,wD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_D={any:[/^b/i,/^(a|c)/i]},bD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jD={any:[/1/i,/2/i,/3/i,/4/i]},ND={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ED={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},TD={ordinalNumber:wN({matchPattern:xD,parsePattern:yD,valueCallback:e=>parseInt(e,10)}),era:Hr({matchPatterns:wD,defaultMatchWidth:"wide",parsePatterns:_D,defaultParseWidth:"any"}),quarter:Hr({matchPatterns:bD,defaultMatchWidth:"wide",parsePatterns:jD,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hr({matchPatterns:ND,defaultMatchWidth:"wide",parsePatterns:CD,defaultParseWidth:"any"}),day:Hr({matchPatterns:SD,defaultMatchWidth:"wide",parsePatterns:kD,defaultParseWidth:"any"}),dayPeriod:Hr({matchPatterns:ED,defaultMatchWidth:"any",parsePatterns:PD,defaultParseWidth:"any"})},_N={code:"en-US",formatDistance:tD,formatLong:aD,formatRelative:iD,localize:pD,match:TD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MD(e){const t=qe(e);return Gr(t,Xd(t))+1}function bN(e){const t=qe(e),n=+Ka(t)-+G5(t);return Math.round(n/Fg)+1}function jN(e,t){var u,m,h,g;const n=qe(e),r=n.getFullYear(),a=nc(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(h=a.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,i=An(e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const l=Mr(i,t),c=An(e,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const d=Mr(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function RD(e,t){var l,c,d,u;const n=nc(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=jN(e,t),o=An(e,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),Mr(o,t)}function NN(e,t){const n=qe(e),r=+Mr(n,t)-+RD(n,t);return Math.round(r/Fg)+1}function nt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ss={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return nt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):nt(n+1,2)},d(e,t){return nt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return nt(e.getHours()%12||12,t.length)},H(e,t){return nt(e.getHours(),t.length)},m(e,t){return nt(e.getMinutes(),t.length)},s(e,t){return nt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return nt(a,t.length)}},ro={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hy={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ss.y(e,t)},Y:function(e,t,n,r){const a=jN(e,r),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return nt(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):nt(o,t.length)},R:function(e,t){const n=xN(e);return nt(n,t.length)},u:function(e,t){const n=e.getFullYear();return nt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return nt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return nt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ss.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return nt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=NN(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):nt(a,t.length)},I:function(e,t,n){const r=bN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):nt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ss.d(e,t)},D:function(e,t,n){const r=MD(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):nt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return nt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return nt(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return nt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=ro.noon:r===0?a=ro.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=ro.evening:r>=12?a=ro.afternoon:r>=4?a=ro.morning:a=ro.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ss.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ss.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):nt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):nt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ss.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ss.s(e,t)},S:function(e,t){return Ss.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Vy(r);case"XXXX":case"XX":return Na(r);case"XXXXX":case"XXX":default:return Na(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Vy(r);case"xxxx":case"xx":return Na(r);case"xxxxx":case"xxx":default:return Na(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+qy(r,":");case"OOOO":default:return"GMT"+Na(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+qy(r,":");case"zzzz":default:return"GMT"+Na(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return nt(r,t.length)},T:function(e,t,n){const r=e.getTime();return nt(r,t.length)}};function qy(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return o===0?n+String(a):n+String(a)+t+nt(o,2)}function Vy(e,t){return e%60===0?(e>0?"-":"+")+nt(Math.abs(e)/60,2):Na(e,t)}function Na(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=nt(Math.trunc(r/60),2),o=nt(r%60,2);return n+a+t+o}const Gy=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},CN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DD=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Gy(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Gy(r,t)).replace("{{time}}",CN(a,t))},AD={p:CN,P:DD},OD=/^D+$/,ID=/^Y+$/,LD=["D","DD","YY","YYYY"];function $D(e){return OD.test(e)}function FD(e){return ID.test(e)}function zD(e,t,n){const r=BD(e,t,n);if(console.warn(r),LD.includes(e))throw new RangeError(r)}function BD(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const UD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HD=/^'([^]*?)'?$/,qD=/''/g,VD=/[a-zA-Z]/;function ke(e,t,n){var u,m,h,g,w,y,_,x;const r=nc(),a=(n==null?void 0:n.locale)??r.locale??_N,o=(n==null?void 0:n.firstWeekContainsDate)??((m=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((y=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((x=(_=r.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,l=qe(e);if(!X5(l))throw new RangeError("Invalid time value");let c=t.match(WD).map(p=>{const v=p[0];if(v==="p"||v==="P"){const b=AD[v];return b(p,a.formatLong)}return p}).join("").match(UD).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const v=p[0];if(v==="'")return{isToken:!1,value:GD(p)};if(Hy[v])return{isToken:!0,value:p};if(v.match(VD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(p=>{if(!p.isToken)return p.value;const v=p.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&FD(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&$D(v))&&zD(v,t,String(e));const b=Hy[v[0]];return b(l,v,a.localize,d)}).join("")}function GD(e){const t=e.match(HD);return t?t[1].replace(qD,"'"):e}function KD(e){const t=qe(e),n=t.getFullYear(),r=t.getMonth(),a=An(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function YD(e){return Math.trunc(+qe(e)/1e3)}function QD(e){const t=qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function XD(e,t){return J5(QD(e),bn(e),t)+1}function qf(e,t){const n=qe(e),r=qe(t);return n.getTime()>r.getTime()}function SN(e,t){const n=qe(e),r=qe(t);return+n<+r}function Ug(e,t){const n=qe(e),r=qe(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function JD(e,t){const n=qe(e),r=qe(t);return n.getFullYear()===r.getFullYear()}function $o(e,t){return Gt(e,-t)}function Dt(e,t){const r=nA(e);let a;if(r.date){const c=rA(r.date,2);a=sA(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const o=a.getTime();let i=0,l;if(r.time&&(i=aA(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(l=oA(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const Oc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ZD=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,eA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nA(e){const t={},n=e.split(Oc.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Oc.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Oc.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=Oc.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function rA(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function sA(e,t){if(t===null)return new Date(NaN);const n=e.match(ZD);if(!n)return new Date(NaN);const r=!!n[4],a=Ui(n[1]),o=Ui(n[2])-1,i=Ui(n[3]),l=Ui(n[4]),c=Ui(n[5])-1;if(r)return uA(t,l,c)?iA(t,l,c):new Date(NaN);{const d=new Date(0);return!cA(t,o,i)||!dA(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,i)),d)}}function Ui(e){return e?parseInt(e):1}function aA(e){const t=e.match(eA);if(!t)return NaN;const n=sh(t[1]),r=sh(t[2]),a=sh(t[3]);return mA(n,r,a)?n*vN+r*zg+a*1e3:NaN}function sh(e){return e&&parseFloat(e.replace(",","."))||0}function oA(e){if(e==="Z")return 0;const t=e.match(tA);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return hA(r,a)?n*(r*vN+a*zg):NaN}function iA(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,o=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}const lA=[31,null,31,30,31,30,31,31,30,31,30,31];function kN(e){return e%400===0||e%4===0&&e%100!==0}function cA(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(lA[t]||(kN(e)?29:28))}function dA(e,t){return t>=1&&t<=(kN(e)?366:365)}function uA(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function mA(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function hA(e,t){return t>=0&&t<=59}function ah(e,t){const n=qe(e),r=n.getFullYear(),a=n.getDate(),o=An(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const i=KD(o);return n.setMonth(t,Math.min(a,i)),n}function Ky(e,t){const n=qe(e);return isNaN(+n)?An(e,NaN):(n.setFullYear(t),n)}const fA={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},pA=(e,t,n)=>{let r;const a=fA[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},gA={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},vA={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},xA={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yA={date:Lo({formats:gA,defaultWidth:"full"}),time:Lo({formats:vA,defaultWidth:"full"}),dateTime:Lo({formats:xA,defaultWidth:"full"})},wA={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},_A={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},bA=(e,t,n,r)=>t.getHours()!==1?_A[e]:wA[e],jA={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},NA={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},CA={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},SA={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},kA={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},EA={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},PA=(e,t)=>Number(e)+"",TA={ordinalNumber:PA,era:Wr({values:jA,defaultWidth:"wide"}),quarter:Wr({values:NA,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Wr({values:CA,defaultWidth:"wide"}),day:Wr({values:SA,defaultWidth:"wide"}),dayPeriod:Wr({values:kA,defaultWidth:"wide",formattingValues:EA,defaultFormattingWidth:"wide"})},MA=/^(\d+)()?/i,RA=/\d+/i,DA={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},AA={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},OA={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},IA={any:[/1/i,/2/i,/3/i,/4/i]},LA={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},$A={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},FA={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},zA={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},BA={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},UA={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},WA={ordinalNumber:wN({matchPattern:MA,parsePattern:RA,valueCallback:function(e){return parseInt(e,10)}}),era:Hr({matchPatterns:DA,defaultMatchWidth:"wide",parsePatterns:AA,defaultParseWidth:"any"}),quarter:Hr({matchPatterns:OA,defaultMatchWidth:"wide",parsePatterns:IA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hr({matchPatterns:LA,defaultMatchWidth:"wide",parsePatterns:$A,defaultParseWidth:"any"}),day:Hr({matchPatterns:FA,defaultMatchWidth:"wide",parsePatterns:zA,defaultParseWidth:"any"}),dayPeriod:Hr({matchPatterns:BA,defaultMatchWidth:"any",parsePatterns:UA,defaultParseWidth:"any"})},Ue={code:"es",formatDistance:pA,formatLong:yA,formatRelative:bA,localize:TA,match:WA,options:{weekStartsOn:1,firstWeekContainsDate:1}},HA=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Ni);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Wg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class qA extends Wg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Yy extends Wg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qy extends Wg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vf||(Vf={}));var VA=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class GA{constructor(t,{headers:n={},customFetch:r,region:a=Vf.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=HA(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return VA(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(y=>{throw new qA(y)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Yy(m);if(!m.ok)throw new Qy(m);let g=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield m.json():g==="application/octet-stream"?w=yield m.blob():g==="text/event-stream"?w=m:g==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Qy||a instanceof Yy?a.context:void 0}}})}}var Pn={},Hg={},Hu={},rc={},qu={},Vu={},KA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oi=KA();const YA=oi.fetch,EN=oi.fetch.bind(oi),PN=oi.Headers,QA=oi.Request,XA=oi.Response,Ni=Object.freeze(Object.defineProperty({__proto__:null,Headers:PN,Request:QA,Response:XA,default:EN,fetch:YA},Symbol.toStringTag,{value:"Module"})),JA=Ok(Ni);var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});let ZA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Gu.default=ZA;var TN=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vu,"__esModule",{value:!0});const e3=TN(JA),t3=TN(Gu);let n3=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=e3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,d;let u=null,m=null,h=null,g=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const p=await o.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?m=p:m=JSON.parse(p))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(u={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,h=null,g=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const _=await o.text();try{u=JSON.parse(_),Array.isArray(u)&&o.status===404&&(m=[],u=null,g=200,w="OK")}catch{o.status===404&&_===""?(g=204,w="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,g=200,w="OK"),u&&this.shouldThrowOnError)throw new t3.default(u)}return{error:u,data:m,count:h,status:g,statusText:w}});return this.shouldThrowOnError||(a=a.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Vu.default=n3;var r3=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qu,"__esModule",{value:!0});const s3=r3(Vu);let a3=class extends s3.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:o=a}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const o=typeof a>"u"?"offset":`${a}.offset`,i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};qu.default=a3;var o3=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rc,"__esModule",{value:!0});const i3=o3(qu);let l3=class extends i3.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${i}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};rc.default=l3;var c3=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hu,"__esModule",{value:!0});const Wi=c3(rc);let d3=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Wi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wi.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Wi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Wi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Hu.default=d3;var MN=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hg,"__esModule",{value:!0});const u3=MN(Hu),m3=MN(rc);let h3=class RN{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new u3.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new RN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([m,h])=>h!==void 0).map(([m,h])=>[m,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([m,h])=>{c.searchParams.append(m,h)})):(l="POST",d=n);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new m3.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Hg.default=h3;var Ci=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.PostgrestError=Pn.PostgrestBuilder=Pn.PostgrestTransformBuilder=Pn.PostgrestFilterBuilder=Pn.PostgrestQueryBuilder=Pn.PostgrestClient=void 0;const DN=Ci(Hg);Pn.PostgrestClient=DN.default;const AN=Ci(Hu);Pn.PostgrestQueryBuilder=AN.default;const ON=Ci(rc);Pn.PostgrestFilterBuilder=ON.default;const IN=Ci(qu);Pn.PostgrestTransformBuilder=IN.default;const LN=Ci(Vu);Pn.PostgrestBuilder=LN.default;const $N=Ci(Gu);Pn.PostgrestError=$N.default;var f3=Pn.default={PostgrestClient:DN.default,PostgrestQueryBuilder:AN.default,PostgrestFilterBuilder:ON.default,PostgrestTransformBuilder:IN.default,PostgrestBuilder:LN.default,PostgrestError:$N.default};const{PostgrestClient:p3,PostgrestQueryBuilder:Az,PostgrestFilterBuilder:Oz,PostgrestTransformBuilder:Iz,PostgrestBuilder:Lz,PostgrestError:$z}=f3;class g3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const v3="2.15.4",x3=`realtime-js/${v3}`,y3="1.0.0",Gf=1e4,w3=1e3,_3=100;var dl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(dl||(dl={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wr||(wr={}));var Kf;(function(e){e.websocket="websocket"})(Kf||(Kf={}));var ka;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ka||(ka={}));class b3{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(t.slice(i,i+a));i=i+a;const c=r.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class FN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(it||(it={}));const Xy=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,i)=>(o[i]=j3(i,e,t,a),o),{})},j3=(e,t,n,r)=>{const a=t.find(l=>l.name===e),o=a==null?void 0:a.type,i=n[e];return o&&!r.includes(o)?zN(o,i):Yf(i)},zN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return k3(t,n)}switch(e){case it.bool:return N3(t);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return C3(t);case it.json:case it.jsonb:return S3(t);case it.timestamp:return E3(t);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Yf(t);default:return Yf(t)}},Yf=e=>e,N3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},C3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},S3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},k3=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>zN(t,l))}return e},E3=e=>typeof e=="string"?e.replace(" ","T"):e,BN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class oh{constructor(t,n,r={},a=Gf){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Jy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Jy||(Jy={}));class ul{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,a,o,i),this.pendingDiffs.forEach(c=>{this.state=ul.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ul.syncDiff(this.state,a,o,i),l())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const o=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const m=o[d];if(m){const h=u.map(_=>_.presence_ref),g=m.map(_=>_.presence_ref),w=u.filter(_=>g.indexOf(_.presence_ref)<0),y=m.filter(_=>h.indexOf(_.presence_ref)<0);w.length>0&&(l[d]=w),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(g=>g.presence_ref),h=u.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...h)}r(l,u,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zy;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Zy||(Zy={}));var ml;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ml||(ml={}));var os;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(os||(os={}));class qg{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oh(this,wr.join,this.params,this.timeout),this.rejoinTimer=new FN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new ul(this),this.broadcastEndpointURL=BN(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[ml.PRESENCE]&&this.bindings[ml.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},h={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(os.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(os.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var w;if(this.socket.setAuth(),g===void 0){t==null||t(os.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,_=(w=y==null?void 0:y.length)!==null&&w!==void 0?w:0,x=[];for(let p=0;p<_;p++){const v=y[p],{filter:{event:b,schema:j,table:k,filter:C}}=v,E=g&&g[p];if(E&&E.event===b&&E.schema===j&&E.table===k&&E.filter===C)x.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(os.SUBSCRIBED);return}}).receive("error",g=>{this.state=zt.errored,t==null||t(os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===ml.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new oh(this,wr.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new oh(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_3){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=wr;if(r&&[l,c,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var w,y,_;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(y=g.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(g=>g.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(g=>{var w,y,_,x,p,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const b=g.id,j=(w=g.filter)===null||w===void 0?void 0:w.event;return b&&((y=n.ids)===null||y===void 0?void 0:y.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const b=(p=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return b==="*"||b===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:y,table:_,commit_timestamp:x,type:p,errors:v}=w;h=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:x,eventType:p,new:{},old:{},errors:v}),this._getPayloadRecords(w))}g.callback(h,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&qg.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wr.close,{},t)}_onError(t){this._on(wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Xy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Xy(t.columns,t.old_record)),n}}const ih=()=>{},Ic={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},P3=[1e3,2e3,5e3,1e4],T3=1e4,M3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class R3{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gf,this.transport=null,this.heartbeatIntervalMs=Ic.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ih,this.ref=0,this.reconnectTimer=null,this.logger=ih,this.conn=null,this.sendBuffer=[],this.serializer=new b3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...i)=>ji(async()=>{const{default:l}=await Promise.resolve().then(()=>Ni);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Kf.websocket}`,this.httpEndpoint=BN(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=g3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:y3}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case dl.connecting:return ka.Connecting;case dl.open:return ka.Open;case dl.closing:return ka.Closing;default:return ka.Closed}}isConnected(){return this.connectionState()===ka.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===r);if(a)return a;{const o=new qg(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:a,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(w3,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ic.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:o,ref:i}=n,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(a,o,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([M3],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:x3};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new FN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ic.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,o,i,l,c,d,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Gf,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Ic.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ih,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>P3[m-1]||T3,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,h)=>h(JSON.stringify(m)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Vg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class D3 extends Vg{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qf extends Vg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var A3=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const UN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Ni);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},O3=()=>A3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ji(()=>Promise.resolve().then(()=>Ni),void 0)).Response:Response}),Xf=e=>{if(Array.isArray(e))return e.map(n=>Xf(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Xf(r)}),t},I3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var eo=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const lh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),L3=(e,t,n)=>eo(void 0,void 0,void 0,function*(){const r=yield O3();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const o=e.status||500,i=(a==null?void 0:a.statusCode)||o+"";t(new D3(lh(a),o,i))}).catch(a=>{t(new Qf(lh(a),a))}):t(new Qf(lh(e),e))}),$3=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(I3(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function sc(e,t,n,r,a,o){return eo(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,$3(t,r,a,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>L3(c,l,r))})})}function Jd(e,t,n,r){return eo(this,void 0,void 0,function*(){return sc(e,"GET",t,n,r)})}function $r(e,t,n,r,a){return eo(this,void 0,void 0,function*(){return sc(e,"POST",t,r,a,n)})}function Jf(e,t,n,r,a){return eo(this,void 0,void 0,function*(){return sc(e,"PUT",t,r,a,n)})}function F3(e,t,n,r){return eo(this,void 0,void 0,function*(){return sc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function WN(e,t,n,r,a){return eo(this,void 0,void 0,function*(){return sc(e,"DELETE",t,r,a,n)})}var hn=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const z3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class B3{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=UN(a)}uploadOrUpdate(t,n,r,a){return hn(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},e0),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),m=yield(t=="PUT"?Jf:$r)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return hn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:e0.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Jf(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:m.Key},error:null}}catch(c){if(Bt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return hn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield $r(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Vg("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}update(t,n,r){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return hn(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}copy(t,n,r){return hn(this,void 0,void 0,function*(){try{return{data:{path:(yield $r(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return hn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield $r(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return hn(this,void 0,void 0,function*(){try{const a=yield $r(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}download(t,n){return hn(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Jd(this.fetch,`${this.url}/${a}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}info(t){return hn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Jd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xf(r),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}exists(t){return hn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield F3(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Bt(r)&&r instanceof Qf){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return hn(this,void 0,void 0,function*(){try{return{data:yield WN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}list(t,n,r){return hn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},z3),n),{prefix:t||""});return{data:yield $r(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}listV2(t,n){return hn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield $r(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const U3="2.11.1",W3={"X-Client-Info":`storage-js/${U3}`};var so=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class H3{constructor(t,n={},r,a){const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},W3),n),this.fetch=UN(r)}listBuckets(){return so(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}})}getBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return so(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return so(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield WN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}}class q3 extends H3{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new B3(this.url,this.headers,t,this.fetch)}}const V3="2.57.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const G3={"X-Client-Info":`supabase-js-${Xi}/${V3}`},K3={headers:G3},Y3={schema:"public"},Q3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},X3={};var J3=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Z3=e=>{let t;return e?t=e:typeof fetch>"u"?t=EN:t=fetch,(...n)=>t(...n)},eO=()=>typeof Headers>"u"?PN:Headers,tO=(e,t,n)=>{const r=Z3(n),a=eO();return(o,i)=>J3(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};var nO=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function rO(e){return e.endsWith("/")?e:e+"/"}function sO(e,t){var n,r;const{db:a,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>nO(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const HN="2.71.1",fo=30*1e3,Zf=3,ch=Zf*fo,aO="http://localhost:9999",oO="supabase.auth.token",iO={"X-Client-Info":`gotrue-js/${HN}`},ep="X-Supabase-Api-Version",qN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cO=10*60*1e3;class Gg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dO extends Gg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function uO(e){return Le(e)&&e.name==="AuthApiError"}class VN extends Gg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class pa extends Gg{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Ps extends pa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mO(e){return Le(e)&&e.name==="AuthSessionMissingError"}class Lc extends pa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $c extends pa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fc extends pa{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hO(e){return Le(e)&&e.name==="AuthImplicitGrantRedirectError"}class t0 extends pa{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tp extends pa{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function dh(e){return Le(e)&&e.name==="AuthRetryableFetchError"}class n0 extends pa{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class np extends pa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r0=` 	
\r=`.split(""),fO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<r0.length;t+=1)e[r0[t].charCodeAt(0)]=-2;for(let t=0;t<Zd.length;t+=1)e[Zd[t].charCodeAt(0)]=t;return e})();function s0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zd[r]),t.queuedBits-=6}}function GN(e,t,n){const r=fO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a0(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=i=>{vO(i,r,n)};for(let i=0;i<e.length;i+=1)GN(e.charCodeAt(i),a,o);return t.join("")}function pO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}pO(r,t)}}function vO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function xO(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)GN(e.charCodeAt(a),n,r);return new Uint8Array(t)}function yO(e){const t=[];return gO(e,n=>t.push(n)),new Uint8Array(t)}function wO(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>s0(a,n,r)),s0(null,n,r),t.join("")}function _O(e){return Math.round(Date.now()/1e3)+e}function bO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const fr=()=>typeof window<"u"&&typeof document<"u",wa={tested:!1,writable:!1},KN=()=>{if(!fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wa.tested)return wa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wa.tested=!0,wa.writable=!0}catch{wa.tested=!0,wa.writable=!1}return wa.writable};function jO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const YN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Ni);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},NO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",po=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},_a=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ks=async(e,t)=>{await e.removeItem(t)};class Ku{constructor(){this.promise=new Ku.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ku.promiseConstructor=Promise;function uh(e){const t=e.split(".");if(t.length!==3)throw new np("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!lO.test(t[r]))throw new np("JWT not in base64url format");return{header:JSON.parse(a0(t[0])),payload:JSON.parse(a0(t[1])),signature:xO(t[2]),raw:{header:t[0],payload:t[1]}}}async function CO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SO(e,t){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){r(i);return}}catch(i){if(!t(o,i)){a(i);return}}})()})}function kO(e){return("0"+e.toString(16)).substr(-2)}function EO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,kO).join("")}async function PO(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function TO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await PO(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(e,t,n=!1){const r=EO();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await po(e,`${t}-code-verifier`,a);const o=await TO(r);return[o,r===o?"plain":"s256"]}const MO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RO(e){const t=e.headers.get(ep);if(!t||!t.match(MO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function DO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function AO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(e){if(!OO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o0(e){return JSON.parse(JSON.stringify(e))}var IO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LO=[502,503,504];async function i0(e){var t;if(!NO(e))throw new tp(Ca(e),0);if(LO.includes(e.status))throw new tp(Ca(e),e.status);let n;try{n=await e.json()}catch(o){throw new VN(Ca(o),o)}let r;const a=RO(e);if(a&&a.getTime()>=qN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new n0(Ca(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ps}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new n0(Ca(n),e.status,n.weak_password.reasons);throw new dO(Ca(n),e.status||500,r)}const $O=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Ve(e,t,n,r){var a;const o=Object.assign({},r==null?void 0:r.headers);o[ep]||(o[ep]=qN["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await FO(e,t,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function FO(e,t,n,r,a,o){const i=$O(t,r,a,o);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new tp(Ca(c),0)}if(l.ok||await i0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await i0(c)}}function ss(e){var t;let n=null;WO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=_O(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function l0(e){const t=ss(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Os(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function zO(e){return{data:e,error:null}}function BO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=e,i=IO(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function UO(e){return e}function WO(e){return e.access_token&&e.refresh_token&&e.expires_in}const hh=["global","local","others"];var HO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class qO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=YN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=hh[0]){if(hh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hh.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Os})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=HO(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:BO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Os})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:UO});if(u.error)throw u.error;const m=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);d[`${_}Page`]=y}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Le(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){oo(t);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Os})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){oo(t);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Os})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){oo(t);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Os})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){oo(t.userId);try{const{data:n,error:r}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(t){oo(t.userId),oo(t.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function c0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function VO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const io={debug:!!(globalThis&&KN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class QN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class GO extends QN{}async function KO(e,t,n){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new GO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(io.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}VO();const YO={url:aO,storageKey:oO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function d0(e,t,n){return await n()}const lo={};class Ul{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ul.nextInstanceID,Ul.nextInstanceID+=1,this.instanceID>0&&fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},YO),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qO({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=YN(a.fetch),this.lock=a.lock||d0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:fr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=KO:this.lock=d0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:KN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=c0(this.memoryStorage)),fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${HN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=jO(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),fr()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),hO(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new VN("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ss}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,a;try{let o;if("email"in t){const{email:u,password:m,options:h}=t;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await ao(this.storage,this.storageKey)),o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:w},xform:ss})}else if("phone"in t){const{phone:u,password:m,options:h}=t;o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ss})}else throw new $c("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:i,options:l}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:l0})}else if("phone"in t){const{phone:o,password:i,options:l}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:l0})}else throw new $c("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Lc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,o,i,l,c,d,u,m,h,g;let w,y;if("message"in t)w=t.message,y=t.signature;else{const{chain:_,wallet:x,statement:p,options:v}=t;let b;if(fr())if(typeof x=="object")b=x;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const j=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)w=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((m=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(w),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:_,error:x}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:wO(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ss});if(x)throw x;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Lc}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x})}catch(_){if(Le(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const n=await _a(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:o,error:i}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ss});if(await ks(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Lc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}catch(o){if(Le(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:o,nonce:i}=t,l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ss}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Lc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ao(this.storage,this.storageKey));const{error:m}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new $c("You must provide either an email or phone number.")}catch(l){if(Le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ss});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await ao(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:zO})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ps;const{error:a}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:o}=t,{error:i}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:a,options:o}=t,{data:i,error:l}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new $c("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await _a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ch:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await _a(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=mh()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Os}):await this._useSession(async n=>{var r,a,o;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Os})})}catch(n){if(Le(n))return mO(n)&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new Ps;const i=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ao(this.storage,this.storageKey));const{data:d,error:u}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Os});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ps;const n=Date.now()/1e3;let r=n,a=!0,o=null;const{payload:i}=uh(t.access_token);if(i.exp&&(r=i.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ps;const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!fr())throw new Fc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new t0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new t0("No code detected.");const{data:p,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Fc("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let h=u+m;c&&(h=parseInt(c));const g=h-u;g*1e3<=fo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const w=h-m;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,h,u);const{data:y,error:_}=await this._getUser(o);if(_)throw _;const x={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:m,expires_at:h,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(Le(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await _a(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{error:o};const i=(r=a.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(uO(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=bO(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await ao(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async o=>{var i,l,c,d,u;const{data:m,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return fr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Le(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)throw i;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await SO(async a=>(a>0&&await CO(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ss})),(a,o)=>{const i=200*Math.pow(2,a);return o&&dh(o)&&Date.now()+i-r<fo})}catch(r){if(this._debug(n,"error",r),Le(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),fr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await _a(this.storage,this.storageKey);if(a&&this.userStorage){let i=await _a(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:a.user},await po(this.userStorage,this.storageKey+"-user",i)),a.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:mh()}else if(a&&!a.user&&!a.user){const i=await _a(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(a.user=i.user,await ks(this.storage,this.storageKey+"-user"),await po(this.storage,this.storageKey,a)):a.user=mh()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ch;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ch}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),dh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(a.access_token);!l&&(i!=null&&i.user)?(a.user=i.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ku;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Ps;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(a,"error",o),Le(o)){const i={session:null,error:o};return dh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await po(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=o0(a);await po(this.storage,this.storageKey,o)}else{const a=o0(n);await po(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ks(this.storage,this.storageKey),await ks(this.storage,this.storageKey+"-code-verifier"),await ks(this.storage,this.storageKey+"-user"),this.userStorage&&await ks(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/fo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${fo}ms, refresh threshold is ${Zf} ticks`),a<=Zf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof QN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await ao(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:l}=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=uh(a.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+cO>a)return r;const{data:o,error:i}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,r=o.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};r=g.session.access_token}const{header:a,payload:o,signature:i,raw:{header:l,payload:c}}=uh(r);n!=null&&n.allowExpired||DO(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:o,header:a,signature:i},error:null}}const u=AO(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,i,yO(`${l}.${c}`)))throw new np("Invalid JWT signature");return{data:{claims:o,header:a,signature:i},error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}}}Ul.nextInstanceID=0;const QO=Ul;class XO extends QO{constructor(t){super(t)}}var JO=function(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(m){i(m)}}function c(u){try{d(r.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class ZO{constructor(t,n,r){var a,o,i;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=rO(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Y3,realtime:X3,auth:Object.assign(Object.assign({},Q3),{storageKey:d}),global:K3},m=sO(r??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(h,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=m.auth)!==null&&i!==void 0?i:{},this.headers,m.global.fetch),this.fetch=tO(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new p3(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new q3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new GA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return JO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},u,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XO({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,flowType:l,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new R3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eI=(e,t,n)=>new ZO(e,t,n);function tI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nI="https://duedcqgrflmmmxmpdytu.supabase.co",rI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR1ZWRjcWdyZmxtbW14bXBkeXR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0Njg2NzEsImV4cCI6MjA2ODA0NDY3MX0.o4u-NR2j3gYTkzjPDV3_Iu-Ru75W9KBwgetplEhuU_I",G=eI(nI,rI,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),sI=Object.freeze(Object.defineProperty({__proto__:null,supabase:G},Symbol.toStringTag,{value:"Module"})),Si=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,o]=f.useState(null);f.useEffect(()=>{i()},[]);const i=async()=>{try{r(!0);const{data:l,error:c}=await G.from("centers").select("*").eq("active",!0).order("name");if(c)throw c;t(l||[])}catch(l){o(l instanceof Error?l.message:"Error fetching centers")}finally{r(!1)}};return{centers:e,loading:n,error:a,refetch:i}},ki=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null);f.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);let c=G.from("services").select("*, color, lane_ids").eq("active",!0);e&&(c=c.or(`center_id.eq.${e},center_id.is.null`));const{data:d,error:u}=await c.order("name");if(u)throw u;console.log("Services fetched:",d),n(d||[])}catch(c){console.error("Error fetching services:",c),i(c instanceof Error?c.message:"Error fetching services")}finally{a(!1)}};return{services:t,loading:r,error:o,refetch:l}},aI=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null);f.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);let c=G.from("employees").select(`
          *,
          profiles (
            first_name,
            last_name,
            email,
            phone
          )
        `).eq("active",!0);const{data:d,error:u}=await c.order("created_at");if(u)throw u;n(d||[])}catch(c){i(c instanceof Error?c.message:"Error fetching employees")}finally{a(!1)}};return{employees:t,loading:r,error:o,refetch:l}},Yu=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null);f.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);let c=G.from("lanes").select("*").eq("active",!0);const{data:d,error:u}=await c.order("name");if(u)throw u;n(d||[])}catch(c){i(c instanceof Error?c.message:"Error fetching lanes")}finally{a(!1)}};return{lanes:t,loading:r,error:o,refetch:l}},Kg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,o]=f.useState(null);f.useEffect(()=>{i()},[]);const i=async()=>{try{r(!0);const{data:d,error:u}=await G.from("bookings").select(`
          *,
          profiles!client_id (
            id,
            first_name,
            last_name,
            email,
            phone
          ),
          services (
            name
          ),
          centers (
            name
          )
        `).order("booking_datetime",{ascending:!0});if(u)throw u;const m=await Promise.all((d||[]).map(async h=>{if(h.client_id){const{data:g}=await G.from("client_notes").select("id, title, content, is_alert, priority, created_at").eq("client_id",h.client_id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{...h,client_notes:g?[g]:[]}}return h}));t(m)}catch(d){o(d instanceof Error?d.message:"Error fetching bookings")}finally{r(!1)}};return{bookings:e,loading:n,error:a,refetch:i,createBooking:async d=>{try{console.log("Creating booking with data:",d);const{data:u,error:m}=await G.from("bookings").insert([d]).select().single();if(m)throw console.error("Booking creation error:",m),m;return console.log("Booking created successfully:",u),await i(),u}catch(u){throw console.error("Error in createBooking:",u),new Error(u instanceof Error?u.message:"Error creating booking")}},updateBookingStatus:async(d,u)=>{try{const{error:m}=await G.from("bookings").update({status:u}).eq("id",d);if(m)throw m;await i()}catch(m){throw new Error(m instanceof Error?m.message:"Error updating booking")}}}},XN=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null);f.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);let c=G.from("packages").select(`
          *,
          services (
            name,
            description,
            duration_minutes,
            type
          )
        `).eq("active",!0);const{data:d,error:u}=await c.order("sessions_count").order("name");if(u)throw u;const m=d||[],h=m.map(y=>y.id),g={};if(h.length){const{data:y,error:_}=await G.from("package_services").select(`
            package_id,
            service_id,
            services ( name )
          `).in("package_id",h);_?console.error("Error fetching package services:",_):(y||[]).forEach(x=>{var v;const p=(v=x.services)==null?void 0:v.name;g[x.package_id]||(g[x.package_id]=[]),p&&!g[x.package_id].includes(p)&&g[x.package_id].push(p)})}const w=m.map(y=>{var _,x;return{...y,service_names:(_=g[y.id])!=null&&_.length?g[y.id]:(x=y.services)!=null&&x.name?[y.services.name]:[]}});n(w)}catch(c){i(c instanceof Error?c.message:"Error fetching packages")}finally{a(!1)}};return{packages:t,loading:r,error:o,refetch:l}},ac=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),{toast:a}=kt(),o=async()=>{try{r(!0);const{data:u,error:m}=await G.from("treatment_groups").select(`
          *,
          lanes (
            id,
            name
          )
        `).eq("active",!0).order("name");if(m){console.error("Error fetching treatment groups:",m),a({title:"Error",description:"No se pudieron cargar los grupos de tratamientos",variant:"destructive"});return}console.log("=== fetchTreatmentGroups ==="),console.log("Treatment groups fetched from DB:",u),t(u||[])}catch(u){console.error("Error fetching treatment groups:",u),a({title:"Error",description:"Error inesperado al cargar los grupos",variant:"destructive"})}finally{r(!1)}},i=async u=>{try{const{data:m,error:h}=await G.from("treatment_groups").insert({name:u.name,color:u.color,lane_id:u.lane_id||null,lane_ids:u.lane_ids||[],center_id:u.center_id||null,active:u.active??!0}).select().single();if(h){if(h.code==="23505"){console.log("Group already exists, fetching existing:",u.name);const{data:g}=await G.from("treatment_groups").select("*").eq("name",u.name).single();return o(),g}return console.error("Error creating treatment group:",h),a({title:"Error",description:`No se pudo crear el grupo: ${h.message}`,variant:"destructive"}),null}return a({title:"xito",description:"Grupo de tratamiento creado correctamente"}),o(),m}catch(m){return console.error("Error creating treatment group:",m),a({title:"Error",description:"Error inesperado al crear el grupo",variant:"destructive"}),null}},l=async(u,m)=>{try{const h={name:m.name,color:m.color,center_id:m.center_id||null,lane_ids:m.lane_ids||[],active:m.active!==void 0?m.active:!0,updated_at:new Date().toISOString()},{data:g,error:w}=await G.from("treatment_groups").update(h).eq("id",u).select().single();return w?(console.error("Error updating treatment group:",w),a({title:"Error",description:`No se pudo actualizar el grupo: ${w.message}`,variant:"destructive"}),null):(a({title:"xito",description:"Grupo de tratamiento actualizado correctamente"}),o(),g)}catch(h){return console.error("Error updating treatment group:",h),a({title:"Error",description:"Error inesperado al actualizar el grupo",variant:"destructive"}),null}},c=async u=>{try{const{error:m}=await G.from("treatment_groups").update({active:!1}).eq("id",u);return m?(console.error("Error deleting treatment group:",m),a({title:"Error",description:`No se pudo eliminar el grupo: ${m.message}`,variant:"destructive"}),!1):(a({title:"xito",description:"Grupo de tratamiento eliminado correctamente"}),o(),!0)}catch(m){return console.error("Error deleting treatment group:",m),a({title:"Error",description:"Error inesperado al eliminar el grupo",variant:"destructive"}),!1}},d=(u,m)=>{const h=m.find(g=>g.id===u);return h!=null&&h.group_id&&e.find(g=>g.id===h.group_id)||null};return f.useEffect(()=>{o()},[]),{treatmentGroups:e,loading:n,fetchTreatmentGroups:o,createTreatmentGroup:i,updateTreatmentGroup:l,deleteTreatmentGroup:c,getTreatmentGroupByService:d}},Sa={anchorSelector:".client-card",desktopWidth:500,mobileWidth:350,desktopMaxHeight:600,mobileMaxHeight:0,verticalOffset:50,viewportMargin:20},oI=()=>window.pageYOffset||document.documentElement.scrollTop||0,u0=(e,t,n)=>Math.min(Math.max(e,t),n),iI=({anchor:e,isMobile:t,config:n})=>{if(typeof window>"u")return null;const r={...Sa,...n},a=window.innerHeight,o=window.innerWidth,i=oI(),l=t?20:40,c=t?40:80,d=Math.min(t?r.mobileWidth:r.desktopWidth,Math.max(o-l,240)),u=Math.min(t?r.mobileMaxHeight&&r.mobileMaxHeight>0?r.mobileMaxHeight:a-c:r.desktopMaxHeight,a-c);let m;e?m=e.getBoundingClientRect().top+i-r.verticalOffset:m=i+(a-u)/2;const h=i+r.viewportMargin,g=i+a-r.viewportMargin,w=Math.max(g-u,h);m=u0(m,h,w);let y=(o-d)/2;const _=Math.max(o-d-r.viewportMargin,r.viewportMargin);return y=u0(y,r.viewportMargin,_),{top:m,left:y,width:d,maxHeight:u}},JN=({anchorSelector:e=Sa.anchorSelector,desktopWidth:t=Sa.desktopWidth,mobileWidth:n=Sa.mobileWidth,desktopMaxHeight:r=Sa.desktopMaxHeight,mobileMaxHeight:a,verticalOffset:o=Sa.verticalOffset,viewportMargin:i=Sa.viewportMargin,open:l,onOpenChange:c}={})=>{const d=dr(),u=l!==void 0,[m,h]=f.useState(l??!1),[g,w]=f.useState(null),y=f.useRef(null),_=u?!!l:m;f.useEffect(()=>{u&&h(!!l)},[l,u]);const x=f.useCallback((M,R)=>{const I=iI({anchor:M,isMobile:d,config:{anchorSelector:e,desktopWidth:t,mobileWidth:n,desktopMaxHeight:r,mobileMaxHeight:a,verticalOffset:o,viewportMargin:i,...R}});I&&w(I)},[e,r,t,d,a,n,o,i]),p=f.useCallback(M=>{u||h(M),c==null||c(M)},[u,c]),v=f.useCallback((M,R)=>{const I=(R==null?void 0:R.anchorSelector)??e;return!M||!I?M:M.closest(I)??M},[e]),b=f.useCallback((M,R)=>{const I=(M==null?void 0:M.currentTarget)||(M==null?void 0:M.target)||null;M!=null&&M.preventDefault&&M.preventDefault(),M!=null&&M.stopPropagation&&M.stopPropagation();const P=v(I,R);y.current=P,x(P,R),p(!0)},[x,v,p]),j=f.useCallback((M,R)=>{y.current=M,x(M,R),p(!0)},[x,p]),k=f.useCallback(()=>{y.current=null,p(!1)},[p]),C=f.useCallback(M=>{_&&x(y.current,M)},[x,_]);f.useEffect(()=>{if(!_)return;g||x(y.current,void 0);const M=()=>{C()};return window.addEventListener("resize",M),window.addEventListener("scroll",M,!0),()=>{window.removeEventListener("resize",M),window.removeEventListener("scroll",M,!0)}},[x,g,_,C]);const E=g?{top:`${g.top}px`,left:`${g.left}px`,width:`${g.width}px`,maxHeight:`${g.maxHeight}px`,overflowY:"auto"}:void 0;return{isOpen:_,modalStyle:E,handleOpenModal:b,openFromElement:j,closeModal:k,updatePosition:C,setOpen:p,anchorRef:y}},lI=({selectedDate:e,selectedCenter:t,onCenterChange:n,onSlotSelect:r})=>{const{toast:a}=kt(),o=dr(),[i,l]=f.useState(e),[c,d]=f.useState(null),[u,m]=f.useState(t||""),[h,g]=f.useState(!1),[w,y]=f.useState(!1),{isOpen:_,handleOpenModal:x,closeModal:p,modalStyle:v}=JN({anchorSelector:".booking-card"}),[b,j]=f.useState(null),[k,C]=f.useState({x:0,y:0}),[E,M]=f.useState(!1),[R,I]=f.useState(0),[P,D]=f.useState({x:0,y:0});f.useEffect(()=>{w||(j(null),M(!1))},[w]),console.log(" MOBILE CALENDAR VIEW LOADING!");const{bookings:z,loading:Y}=Kg(),{lanes:A}=Yu(),{centers:T}=Si(),{services:S}=ki(),{treatmentGroups:F}=ac();console.log(" MOBILE DATA LOADED - bookings:",z.length,"services:",S.length,"groups:",F.length),f.useEffect(()=>{l(e)},[e]),f.useEffect(()=>{if(t)m(t),console.log(" Mobile: Using selected center from props:",t);else if(T.length>0&&!u){const Z=T[0].id;m(Z),console.log(" Mobile: Setting initial center:",Z,T[0].name)}},[T,t,u]);const Q=(()=>{const Z=[];for(let Te=10;Te<=22;Te++)for(let Qe=0;Qe<60&&!(Te===22&&Qe>0);Qe+=5){const ot=`${Te.toString().padStart(2,"0")}:${Qe.toString().padStart(2,"0")}`;Z.push(ot)}return Z})(),O=(A==null?void 0:A.filter(Z=>Z.center_id===u))||[],q=(z==null?void 0:z.filter(Z=>{if(!Z.booking_datetime||!Z.center_id)return!1;try{const ge=Dt(Z.booking_datetime),J=ke(ge,"yyyy-MM-dd")===ke(i,"yyyy-MM-dd"),Te=Z.center_id===u;return J&&Te}catch(ge){return console.error("Error parsing booking date:",Z.booking_datetime,ge),!1}}))||[];console.log(" Mobile Calendar Debug:",{activeCenter:u,currentDate:ke(i,"yyyy-MM-dd"),totalBookings:(z==null?void 0:z.length)||0,filteredBookings:q.length,centerLanes:O.length});const ne=(Z,ge)=>q.find(J=>{if(!J.booking_datetime||J.lane_id!==Z)return!1;try{const Te=Dt(J.booking_datetime);return ke(Te,"HH:mm")===ge}catch{return!1}}),Pe=(Z,ge)=>q.some(J=>{if(!J.booking_datetime||J.lane_id!==Z)return!1;try{const Te=Dt(J.booking_datetime),Qe=J.duration_minutes||60,ot=new Date,[Fe,xt]=ge.split(":").map(Number);ot.setHours(Fe,xt,0,0);const qt=new Date;qt.setHours(Te.getHours(),Te.getMinutes(),0,0);const ut=new Date(qt.getTime()+Qe*6e4);return ot>=qt&&ot<ut}catch{return!1}}),ue=Z=>{const ge=S.find(Te=>Te.id===Z);if(!ge||!ge.group_id)return"#3B82F6";const J=F.find(Te=>Te.id===ge.group_id);return J&&J.color||"#3B82F6"},$=Z=>{const ge=ue(Z);return{backgroundColor:`${ge}20`,borderLeftColor:ge,color:ge}},te=Z=>"bg-gray-50",xe=(Z,ge)=>{console.log(" BOOKING CLICKED:",Z.id,"Mobile:",o),d(Z),x(ge)},fe=()=>{p(),d(null)},he=f.useRef(null),N=(Z,ge)=>{if(h||!w)return;console.log(" Touch start:",Z.id);const J=ge.touches[0],Te=ge.currentTarget.getBoundingClientRect();I(Date.now()),D({x:J.clientX,y:J.clientY}),j(null),M(!1),he.current&&clearTimeout(he.current),he.current=setTimeout(()=>{console.log(" Long press detected - enabling drag for:",Z.id),j(Z),C({x:J.clientX-Te.left,y:J.clientY-Te.top});const Qe=ge.currentTarget;Qe.style.transform="scale(1.1)",Qe.style.zIndex="1000",navigator.vibrate&&navigator.vibrate(100),console.log(" Drag enabled with offset:",{x:J.clientX-Te.left,y:J.clientY-Te.top})},200)},L=Z=>{if(!w)return;console.log(" Touch move triggered");const ge=Z.touches[0],J=Math.sqrt(Math.pow(ge.clientX-P.x,2)+Math.pow(ge.clientY-P.y,2));console.log(" Move distance:",J),J>5&&he.current&&!b&&(console.log(" Canceling long press due to movement"),clearTimeout(he.current),he.current=null),b&&(console.log(" Dragging confirmed - preventing scroll"),M(!0),Z.preventDefault(),Z.stopPropagation())},U=Z=>{var Qe,ot,Fe;if(!w)return;console.log(" Touch end triggered");const ge=Z.currentTarget;ge.style.transform="",ge.style.zIndex="",he.current&&(clearTimeout(he.current),he.current=null);const J=E,Te=b;if(console.log(" Touch end state:",{wasDragging:J,hasDraggedBooking:!!Te}),Te&&J){const xt=Z.changedTouches[0],qt=document.elementFromPoint(xt.clientX,xt.clientY);console.log(" Looking for drop target at:",{x:xt.clientX,y:xt.clientY}),console.log(" Element below:",qt);let ut=qt,Ar=0;for(;ut&&!((Qe=ut.dataset)!=null&&Qe.laneId)&&Ar<10;)ut=ut.parentElement,Ar++;if(console.log(" Target cell found:",ut==null?void 0:ut.dataset),ut&&((ot=ut.dataset)!=null&&ot.laneId)&&((Fe=ut.dataset)!=null&&Fe.timeSlot)){const Xn=ut.dataset.laneId,gt=ut.dataset.timeSlot;console.log(" Valid drop target:",{targetLaneId:Xn,targetTimeStr:gt});const mr=ke(Dt(Te.booking_datetime),"HH:mm");Xn!==Te.lane_id||gt!==mr?(console.log(" Moving booking from",{fromLane:Te.lane_id,fromTime:mr},"to",{targetLaneId:Xn,targetTimeStr:gt}),V(Te,Xn,gt)):console.log(" Same position - no move needed")}else console.log(" No valid drop target found")}else Te&&!J&&(console.log(" Short tap detected - opening modal"),xe(Te,Z));j(null),M(!1),C({x:0,y:0})},V=async(Z,ge,J)=>{if(w)try{const Te=Dt(Z.booking_datetime),[Qe,ot]=J.split(":").map(Number),Fe=new Date(Te);Fe.setHours(Qe,ot,0,0),console.log(" Moving booking:",{bookingId:Z.id,from:{laneId:Z.lane_id,time:ke(Dt(Z.booking_datetime),"HH:mm")},to:{laneId:ge,time:J}});const{supabase:xt}=await ji(async()=>{const{supabase:ut}=await Promise.resolve().then(()=>sI);return{supabase:ut}},void 0),{error:qt}=await xt.from("bookings").update({lane_id:ge,booking_datetime:Fe.toISOString()}).eq("id",Z.id);if(qt)throw qt;a({title:"Reserva movida",description:`Reserva movida a ${J} en carril ${O.findIndex(ut=>ut.id===ge)+1}`,variant:"default"}),window.location.reload()}catch(Te){console.error("Error moving booking:",Te),a({title:"Error",description:"No se pudo mover la reserva",variant:"destructive"})}},ee=(Z,ge,J)=>{J==null||J.stopPropagation(),console.log(" SLOT BLOCKED:",Z,ge),a({title:"Carril bloqueado",description:`Carril bloqueado en ${ge}`,variant:"default"})},ae=()=>l($o(i,1)),ye=()=>l(Gt(i,1)),me=()=>{var Z,ge;return!c||!_?null:s.jsx(s.Fragment,{children:s.jsx(Pr,{open:!0,onClose:fe,maxWidth:360,mobileMaxWidth:350,maxHeight:640,children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-lg",children:"Detalles de la Cita"})]}),s.jsx(W,{variant:"outline",size:"sm",onClick:fe,className:"h-8 w-8 p-0",children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-xs",children:"Cliente"}),s.jsx("p",{className:"font-medium",children:((Z=c.profiles)==null?void 0:Z.first_name)||"Cliente"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-xs",children:"Servicio"}),s.jsx("p",{className:"font-medium",children:((ge=c.services)==null?void 0:ge.name)||"Servicio"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-xs",children:"Fecha y Hora"}),s.jsx("p",{className:"font-medium",children:ke(Dt(c.booking_datetime),"d 'de' MMMM 'a las' HH:mm",{locale:Ue})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-xs",children:"Duracin"}),s.jsxs("p",{className:"font-medium",children:[c.duration_minutes||60," min"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-xs",children:"Precio"}),s.jsxs("p",{className:"font-medium",children:["",((c.total_price_cents||0)/100).toFixed(2)]})]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{variant:"outline",size:"sm",className:"flex-1",onClick:fe,children:"Cerrar"}),s.jsx(W,{size:"sm",className:"flex-1",onClick:()=>{a({title:"Editar reserva",description:"Funcin de edicin en desarrollo"})},children:"Editar"})]})]})]})})})};T.find(Z=>Z.id===u);const ve=T.filter(Z=>Z.id&&Z.id.trim()!==""),Ye=X.useCallback(Z=>{m(Z),n==null||n(Z);const ge=T.find(J=>J.id===Z);a({title:"Centro cambiado",description:`Mostrando calendario de ${ge==null?void 0:ge.name}`})},[T,n,a]);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"bg-white p-3 border-b shadow-sm sticky top-0 z-50",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-sm font-semibold",children:"The Nook Madrid"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Centro"}),ve.map(Z=>{const ge=Z.id===u;return s.jsxs("button",{type:"button",onClick:()=>Ye(Z.id),className:le("flex w-full items-center justify-between rounded-2xl border px-4 py-3 text-left transition shadow-sm",ge?"border-blue-400 bg-blue-50 text-blue-600":"border-border bg-white text-foreground hover:bg-blue-50/40"),children:[s.jsxs("span",{className:"flex flex-col gap-1 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[s.jsx(yn,{className:le("h-4 w-4",ge?"text-blue-500":"text-muted-foreground")}),Z.name]}),Z.address&&s.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:Z.address})]}),s.jsx("span",{className:le("flex h-5 w-5 items-center justify-center rounded-full border-2",ge?"border-blue-500":"border-muted-foreground/40"),children:ge?s.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-blue-500"}):null})]},Z.id)})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-lg font-bold",children:ke(i,"d")}),s.jsx("p",{className:"text-xs text-gray-500",children:ke(i,"MMM",{locale:Ue})})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[s.jsx(W,{variant:"ghost",size:"sm",onClick:ae,className:"h-8 w-8 p-0",children:s.jsx(pg,{className:"h-4 w-4"})}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm font-medium",children:ke(i,"EEEE, d 'de' MMMM",{locale:Ue})})}),s.jsx(W,{variant:"ghost",size:"sm",onClick:ye,className:"h-8 w-8 p-0",children:s.jsx(gg,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"bg-white p-3 border-b shadow-sm sticky top-[120px] z-30",children:[s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsxs(W,{size:"sm",variant:h?"default":"outline",className:le("shadow-sm",h?"bg-red-600 text-white":"bg-white"),onClick:()=>{const Z=!h;g(Z),Z&&y(!1),a({title:Z?"Modo bloqueo activado":"Modo normal",description:Z?"Toca los espacios vacos para bloquearlos.":"Puedes tocar reservas para editarlas."})},children:[s.jsx(dy,{className:"h-4 w-4 mr-1"}),h?"Desbloquear":"Bloquear"]}),s.jsxs(W,{size:"sm",variant:w?"default":"outline",className:le("shadow-sm",w?"bg-blue-600 text-white":"bg-white"),onClick:()=>{const Z=!w;y(Z),Z?g(!1):(j(null),M(!1)),a({title:Z?"Modo mover activado":"Modo mover desactivado",description:Z?"Mantn pulsada una reserva y arrstrala a otro carril u hora.":"Las reservas vuelven a editarse al tocarlas."})},children:[s.jsx(yg,{className:"h-4 w-4 mr-1"}),w?"Mover (on)":"Mover"]})]}),(h||w)&&s.jsx("p",{className:"mt-2 text-center text-xs text-muted-foreground",children:h?"Pulsa los huecos libres para establecer bloqueos.":"Mantn pulsada una reserva y arrstrala hasta otra posicin."})]}),s.jsx("div",{className:"bg-white border-b sticky top-[170px] z-40",children:s.jsxs("div",{className:"grid grid-cols-5 text-xs",children:[s.jsx("div",{className:"p-2 text-center border-r bg-gray-50",children:s.jsx("span",{className:"font-medium",children:"Hora"})}),O.slice(0,4).map((Z,ge)=>s.jsx("div",{className:`p-2 text-center border-r last:border-r-0 ${te()}`,children:s.jsxs("div",{className:"font-semibold",children:["C",ge+1]})},Z.id))]})}),s.jsx("div",{className:"bg-white",children:O.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Nt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay carriles configurados"})]}):s.jsxs("div",{className:"min-h-full",children:[Q.map((Z,ge)=>{const[J,Te]=Z.split(":").map(Number);return s.jsxs("div",{className:"grid grid-cols-5 border-b border-gray-100 min-h-[40px]",children:[s.jsx("div",{className:"p-2 text-center border-r border-gray-200 bg-gray-50 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-gray-700",children:Z})}),O.slice(0,4).map((Qe,ot)=>{var ut,Ar,Xn;const Fe=ne(Qe.id,Z),xt=Pe(Qe.id,Z),qt=!!Fe;return s.jsxs("div",{"data-lane-id":Qe.id,"data-time-slot":Z,className:le("border-r border-gray-200 last:border-r-0 p-1 min-h-[40px] relative bg-white",h?"hover:bg-red-50 cursor-pointer":"hover:bg-gray-50",b&&"transition-colors duration-200"),onClick:gt=>{if(console.log(" CELL CLICKED:",{blockingMode:h,hasBooking:!!Fe,moveMode:w}),!w){if(h&&!Fe){ee(Qe.id,Z,gt);return}if(!h&&!Fe&&r){if(!u){a({title:"Selecciona un centro",description:"Elige un centro antes de crear una reserva."});return}const mr=new Date(i);mr.setHours(J,Te,0,0),r(u,Qe.id,new Date(i),mr,gt)}}},children:[h&&!Fe&&s.jsx("div",{className:"absolute top-1 right-1",children:s.jsx(dy,{className:"h-3 w-3 text-red-500"})}),qt&&Fe&&s.jsxs("div",{className:le("booking-card w-full rounded text-left cursor-pointer p-1 border-l-4 absolute top-0 left-0 select-none touch-manipulation",(b==null?void 0:b.id)===Fe.id&&"opacity-70 z-50 scale-105 shadow-lg"),style:{...$(Fe.service_id),height:`${(Fe.duration_minutes||60)/5*40}px`,zIndex:(b==null?void 0:b.id)===Fe.id?50:10,transform:(b==null?void 0:b.id)===Fe.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease, opacity 0.2s ease"},onTouchStart:gt=>N(Fe,gt),onTouchMove:L,onTouchEnd:U,onClick:gt=>{w||!E&&!b&&(gt.stopPropagation(),console.log(" BOOKING CLICKED ON MOBILE:",Fe),xe(Fe,gt))},children:[s.jsx("div",{className:"text-xs font-semibold truncate",children:((ut=Fe.profiles)==null?void 0:ut.first_name)||"Cliente"}),s.jsx("div",{className:"text-xs text-gray-600 truncate",children:((Ar=Fe.services)==null?void 0:Ar.name)||"Servicio"}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["",((Fe.total_price_cents||0)/100).toFixed(0)]}),Fe.notes&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1 truncate italic",children:['" ',Fe.notes,'"']}),Fe.client_notes&&Fe.client_notes.length>0&&s.jsxs("div",{className:"text-xs text-orange-600 mt-1 truncate italic",children:['" ',Fe.client_notes[0].content,'"']})]}),xt&&!qt&&s.jsx("div",{className:"w-full h-full opacity-30 pointer-events-none",style:{backgroundColor:`${ue(((Xn=q.find(gt=>Pe(Qe.id,Z)&&gt.lane_id===Qe.id))==null?void 0:Xn.service_id)||"")}20`}})]},`${Qe.id}-${Z}`)})]},Z)}),q.length===0&&s.jsxs("div",{className:"p-4 text-center text-gray-500 bg-gray-50 m-2 rounded",children:[s.jsx(Nt,{className:"h-6 w-6 mx-auto mb-2 opacity-50"}),s.jsxs("p",{className:"text-xs",children:["No hay reservas para ",ke(i,"d 'de' MMMM",{locale:Ue})]})]})]})}),s.jsx(me,{})]})};function Wl(e,[t,n]){return Math.min(n,Math.max(t,e))}var fh=0;function ZN(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??m0()),document.body.insertAdjacentElement("beforeend",e[1]??m0()),fh++,()=>{fh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),fh--}},[])}function m0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ph="focusScope.autoFocusOnMount",gh="focusScope.autoFocusOnUnmount",h0={bubbles:!1,cancelable:!0},cI="FocusScope",Yg=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=f.useState(null),d=Ot(a),u=Ot(o),m=f.useRef(null),h=Ie(t,y=>c(y)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(v){if(g.paused||!l)return;const b=v.target;l.contains(b)?m.current=b:Ts(m.current,{select:!0})},_=function(v){if(g.paused||!l)return;const b=v.relatedTarget;b!==null&&(l.contains(b)||Ts(m.current,{select:!0}))},x=function(v){if(document.activeElement===document.body)for(const j of v)j.removedNodes.length>0&&Ts(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const p=new MutationObserver(x);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),p.disconnect()}}},[r,l,g.paused]),f.useEffect(()=>{if(l){p0.add(g);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(ph,h0);l.addEventListener(ph,d),l.dispatchEvent(x),x.defaultPrevented||(dI(pI(e1(l)),{select:!0}),document.activeElement===y&&Ts(l))}return()=>{l.removeEventListener(ph,d),setTimeout(()=>{const x=new CustomEvent(gh,h0);l.addEventListener(gh,u),l.dispatchEvent(x),x.defaultPrevented||Ts(y??document.body,{select:!0}),l.removeEventListener(gh,u),p0.remove(g)},0)}}},[l,d,u,g]);const w=f.useCallback(y=>{if(!n&&!r||g.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(_&&x){const p=y.currentTarget,[v,b]=uI(p);v&&b?!y.shiftKey&&x===b?(y.preventDefault(),n&&Ts(v,{select:!0})):y.shiftKey&&x===v&&(y.preventDefault(),n&&Ts(b,{select:!0})):x===p&&y.preventDefault()}},[n,r,g.paused]);return s.jsx(Me.div,{tabIndex:-1,...i,ref:h,onKeyDown:w})});Yg.displayName=cI;function dI(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ts(r,{select:t}),document.activeElement!==n)return}function uI(e){const t=e1(e),n=f0(t,e),r=f0(t.reverse(),e);return[n,r]}function e1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function f0(e,t){for(const n of e)if(!mI(n,{upTo:t}))return n}function mI(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hI(e){return e instanceof HTMLInputElement&&"select"in e}function Ts(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&hI(e)&&t&&e.select()}}var p0=fI();function fI(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=g0(e,t),e.unshift(t)},remove(t){var n;e=g0(e,t),(n=e[0])==null||n.resume()}}}function g0(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function pI(e){return e.filter(t=>t.tagName!=="A")}function Qu(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var gI=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},co=new WeakMap,zc=new WeakMap,Bc={},vh=0,t1=function(e){return e&&(e.host||t1(e.parentNode))},vI=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=t1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},xI=function(e,t,n,r){var a=vI(t,Array.isArray(e)?e:[e]);Bc[n]||(Bc[n]=new WeakMap);var o=Bc[n],i=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))u(h);else try{var g=h.getAttribute(r),w=g!==null&&g!=="false",y=(co.get(h)||0)+1,_=(o.get(h)||0)+1;co.set(h,y),o.set(h,_),i.push(h),y===1&&w&&zc.set(h,!0),_===1&&h.setAttribute(n,"true"),w||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),l.clear(),vh++,function(){i.forEach(function(m){var h=co.get(m)-1,g=o.get(m)-1;co.set(m,h),o.set(m,g),h||(zc.has(m)||m.removeAttribute(r),zc.delete(m)),g||m.removeAttribute(n)}),vh--,vh||(co=new WeakMap,co=new WeakMap,zc=new WeakMap,Bc={})}},n1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=gI(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),xI(r,a,n,"aria-hidden")):function(){return null}},qr=function(){return qr=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},qr.apply(this,arguments)};function r1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function yI(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var ud="right-scroll-bar-position",md="width-before-scroll-bar",wI="with-scroll-bars-hidden",_I="--removed-body-scroll-bar-size";function xh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bI(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var jI=typeof window<"u"?f.useLayoutEffect:f.useEffect,v0=new WeakMap;function NI(e,t){var n=bI(null,function(r){return e.forEach(function(a){return xh(a,r)})});return jI(function(){var r=v0.get(n);if(r){var a=new Set(r),o=new Set(e),i=n.current;a.forEach(function(l){o.has(l)||xh(l,null)}),o.forEach(function(l){a.has(l)||xh(l,i)})}v0.set(n,e)},[e]),n}function CI(e){return e}function SI(e,t){t===void 0&&(t=CI);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),n}}}};return a}function kI(e){e===void 0&&(e={});var t=SI(null);return t.options=qr({async:!0,ssr:!1},e),t}var s1=function(e){var t=e.sideCar,n=r1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,qr({},n))};s1.isSideCarExport=!0;function EI(e,t){return e.useMedium(t),s1}var a1=kI(),yh=function(){},Xu=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:yh,onWheelCapture:yh,onTouchMoveCapture:yh}),a=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,h=e.sideCar,g=e.noIsolation,w=e.inert,y=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,p=e.gapMode,v=r1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,j=NI([n,t]),k=qr(qr({},v),a);return f.createElement(f.Fragment,null,u&&f.createElement(b,{sideCar:a1,removeScrollBar:d,shards:m,noIsolation:g,inert:w,setCallbacks:o,allowPinchZoom:!!y,lockRef:n,gapMode:p}),i?f.cloneElement(f.Children.only(l),qr(qr({},k),{ref:j})):f.createElement(x,qr({},k,{className:c,ref:j}),l))});Xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xu.classNames={fullWidth:md,zeroRight:ud};var PI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=PI();return t&&e.setAttribute("nonce",t),e}function MI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function RI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var DI=function(){var e=0,t=null;return{add:function(n){e==0&&(t=TI())&&(MI(t,n),RI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},AI=function(){var e=DI();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},o1=function(){var e=AI(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},OI={left:0,top:0,right:0,gap:0},wh=function(e){return parseInt(e||"",10)||0},II=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[wh(n),wh(r),wh(a)]},LI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return OI;var t=II(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$I=o1(),Fo="data-scroll-locked",FI=function(e,t,n,r){var a=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(wI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Fo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ud,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(md,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ud," .").concat(ud,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(md," .").concat(md,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fo,`] {
    `).concat(_I,": ").concat(l,`px;
  }
`)},x0=function(){var e=parseInt(document.body.getAttribute(Fo)||"0",10);return isFinite(e)?e:0},zI=function(){f.useEffect(function(){return document.body.setAttribute(Fo,(x0()+1).toString()),function(){var e=x0()-1;e<=0?document.body.removeAttribute(Fo):document.body.setAttribute(Fo,e.toString())}},[])},BI=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;zI();var o=f.useMemo(function(){return LI(a)},[a]);return f.createElement($I,{styles:FI(o,!t,a,n?"":"!important")})},rp=!1;if(typeof window<"u")try{var Uc=Object.defineProperty({},"passive",{get:function(){return rp=!0,!0}});window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{rp=!1}var uo=rp?{passive:!1}:!1,UI=function(e){return e.tagName==="TEXTAREA"},i1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!UI(e)&&n[t]==="visible")},WI=function(e){return i1(e,"overflowY")},HI=function(e){return i1(e,"overflowX")},y0=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=l1(e,r);if(a){var o=c1(e,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},qI=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},VI=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},l1=function(e,t){return e==="v"?WI(t):HI(t)},c1=function(e,t){return e==="v"?qI(t):VI(t)},GI=function(e,t){return e==="h"&&t==="rtl"?-1:1},KI=function(e,t,n,r,a){var o=GI(e,window.getComputedStyle(t).direction),i=o*r,l=n.target,c=t.contains(l),d=!1,u=i>0,m=0,h=0;do{var g=c1(e,l),w=g[0],y=g[1],_=g[2],x=y-_-o*w;(w||x)&&l1(e,l)&&(m+=x,h+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(h)<1||!a))&&(d=!0),d},Wc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},w0=function(e){return[e.deltaX,e.deltaY]},_0=function(e){return e&&"current"in e?e.current:e},YI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},QI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},XI=0,mo=[];function JI(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),a=f.useState(XI++)[0],o=f.useState(o1)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=yI([e.lockRef.current],(e.shards||[]).map(_0),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var x=Wc(y),p=n.current,v="deltaX"in y?y.deltaX:p[0]-x[0],b="deltaY"in y?y.deltaY:p[1]-x[1],j,k=y.target,C=Math.abs(v)>Math.abs(b)?"h":"v";if("touches"in y&&C==="h"&&k.type==="range")return!1;var E=y0(C,k);if(!E)return!0;if(E?j=C:(j=C==="v"?"h":"v",E=y0(C,k)),!E)return!1;if(!r.current&&"changedTouches"in y&&(v||b)&&(r.current=j),!j)return!0;var M=r.current||j;return KI(M,_,y,M==="h"?v:b,!0)},[]),c=f.useCallback(function(y){var _=y;if(!(!mo.length||mo[mo.length-1]!==o)){var x="deltaY"in _?w0(_):Wc(_),p=t.current.filter(function(j){return j.name===_.type&&(j.target===_.target||_.target===j.shadowParent)&&YI(j.delta,x)})[0];if(p&&p.should){_.cancelable&&_.preventDefault();return}if(!p){var v=(i.current.shards||[]).map(_0).filter(Boolean).filter(function(j){return j.contains(_.target)}),b=v.length>0?l(_,v[0]):!i.current.noIsolation;b&&_.cancelable&&_.preventDefault()}}},[]),d=f.useCallback(function(y,_,x,p){var v={name:y,delta:_,target:x,should:p,shadowParent:ZI(x)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(b){return b!==v})},1)},[]),u=f.useCallback(function(y){n.current=Wc(y),r.current=void 0},[]),m=f.useCallback(function(y){d(y.type,w0(y),y.target,l(y,e.lockRef.current))},[]),h=f.useCallback(function(y){d(y.type,Wc(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return mo.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,uo),document.addEventListener("touchmove",c,uo),document.addEventListener("touchstart",u,uo),function(){mo=mo.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,uo),document.removeEventListener("touchmove",c,uo),document.removeEventListener("touchstart",u,uo)}},[]);var g=e.removeScrollBar,w=e.inert;return f.createElement(f.Fragment,null,w?f.createElement(o,{styles:QI(a)}):null,g?f.createElement(BI,{gapMode:e.gapMode}):null)}function ZI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const eL=EI(a1,JI);var Qg=f.forwardRef(function(e,t){return f.createElement(Xu,qr({},e,{ref:t,sideCar:eL}))});Qg.classNames=Xu.classNames;var tL=[" ","Enter","ArrowUp","ArrowDown"],nL=[" ","Enter"],oc="Select",[Ju,Zu,rL]=Xl(oc),[Ei,Fz]=cr(oc,[rL,Au]),em=Au(),[sL,ga]=Ei(oc),[aL,oL]=Ei(oc),d1=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:g,form:w}=e,y=em(t),[_,x]=f.useState(null),[p,v]=f.useState(null),[b,j]=f.useState(!1),k=bi(d),[C=!1,E]=lr({prop:r,defaultProp:a,onChange:o}),[M,R]=lr({prop:i,defaultProp:l,onChange:c}),I=f.useRef(null),P=_?w||!!_.closest("form"):!0,[D,z]=f.useState(new Set),Y=Array.from(D).map(A=>A.props.value).join(";");return s.jsx(A4,{...y,children:s.jsxs(sL,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:p,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:Qr(),value:M,onValueChange:R,open:C,onOpenChange:E,dir:k,triggerPointerDownPosRef:I,disabled:h,children:[s.jsx(Ju.Provider,{scope:t,children:s.jsx(aL,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(A=>{z(T=>new Set(T).add(A))},[]),onNativeOptionRemove:f.useCallback(A=>{z(T=>{const S=new Set(T);return S.delete(A),S})},[]),children:n})}),P?s.jsxs(O1,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:m,value:M,onChange:A=>R(A.target.value),disabled:h,form:w,children:[M===void 0?s.jsx("option",{value:""}):null,Array.from(D)]},Y):null]})})};d1.displayName=oc;var u1="SelectTrigger",m1=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,o=em(n),i=ga(u1,n),l=i.disabled||r,c=Ie(t,i.onTriggerChange),d=Zu(n),u=f.useRef("touch"),[m,h,g]=I1(y=>{const _=d().filter(v=>!v.disabled),x=_.find(v=>v.value===i.value),p=L1(_,y,x);p!==void 0&&i.onValueChange(p.value)}),w=y=>{l||(i.onOpenChange(!0),g()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(Nj,{asChild:!0,...o,children:s.jsx(Me.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":A1(i.value)?"":void 0,...a,ref:c,onClick:_e(a.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&w(y)}),onPointerDown:_e(a.onPointerDown,y=>{u.current=y.pointerType;const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(w(y),y.preventDefault())}),onKeyDown:_e(a.onKeyDown,y=>{const _=m.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(_&&y.key===" ")&&tL.includes(y.key)&&(w(),y.preventDefault())})})})});m1.displayName=u1;var h1="SelectValue",f1=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:i="",...l}=e,c=ga(h1,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=Ie(t,c.onValueNodeChange);return Qt(()=>{d(u)},[d,u]),s.jsx(Me.span,{...l,ref:m,style:{pointerEvents:"none"},children:A1(c.value)?s.jsx(s.Fragment,{children:i}):o})});f1.displayName=h1;var iL="SelectIcon",p1=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(Me.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});p1.displayName=iL;var lL="SelectPortal",g1=e=>s.jsx(Nu,{asChild:!0,...e});g1.displayName=lL;var Ya="SelectContent",v1=f.forwardRef((e,t)=>{const n=ga(Ya,e.__scopeSelect),[r,a]=f.useState();if(Qt(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?Za.createPortal(s.jsx(x1,{scope:e.__scopeSelect,children:s.jsx(Ju.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(y1,{...e,ref:t})});v1.displayName=Ya;var pr=10,[x1,va]=Ei(Ya),cL="SelectContentImpl",y1=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:_,...x}=e,p=ga(Ya,n),[v,b]=f.useState(null),[j,k]=f.useState(null),C=Ie(t,$=>b($)),[E,M]=f.useState(null),[R,I]=f.useState(null),P=Zu(n),[D,z]=f.useState(!1),Y=f.useRef(!1);f.useEffect(()=>{if(v)return n1(v)},[v]),ZN();const A=f.useCallback($=>{const[te,...xe]=P().map(N=>N.ref.current),[fe]=xe.slice(-1),he=document.activeElement;for(const N of $)if(N===he||(N==null||N.scrollIntoView({block:"nearest"}),N===te&&j&&(j.scrollTop=0),N===fe&&j&&(j.scrollTop=j.scrollHeight),N==null||N.focus(),document.activeElement!==he))return},[P,j]),T=f.useCallback(()=>A([E,v]),[A,E,v]);f.useEffect(()=>{D&&T()},[D,T]);const{onOpenChange:S,triggerPointerDownPosRef:F}=p;f.useEffect(()=>{if(v){let $={x:0,y:0};const te=fe=>{var he,N;$={x:Math.abs(Math.round(fe.pageX)-(((he=F.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((N=F.current)==null?void 0:N.y)??0))}},xe=fe=>{$.x<=10&&$.y<=10?fe.preventDefault():v.contains(fe.target)||S(!1),document.removeEventListener("pointermove",te),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",xe,{capture:!0})}}},[v,S,F]),f.useEffect(()=>{const $=()=>S(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[S]);const[H,Q]=I1($=>{const te=P().filter(he=>!he.disabled),xe=te.find(he=>he.ref.current===document.activeElement),fe=L1(te,$,xe);fe&&setTimeout(()=>fe.ref.current.focus())}),O=f.useCallback(($,te,xe)=>{const fe=!Y.current&&!xe;(p.value!==void 0&&p.value===te||fe)&&(M($),fe&&(Y.current=!0))},[p.value]),q=f.useCallback(()=>v==null?void 0:v.focus(),[v]),ne=f.useCallback(($,te,xe)=>{const fe=!Y.current&&!xe;(p.value!==void 0&&p.value===te||fe)&&I($)},[p.value]),Pe=r==="popper"?sp:w1,ue=Pe===sp?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:_}:{};return s.jsx(x1,{scope:n,content:v,viewport:j,onViewportChange:k,itemRefCallback:O,selectedItem:E,onItemLeave:q,itemTextRefCallback:ne,focusSelectedItem:T,selectedItemText:R,position:r,isPositioned:D,searchRef:H,children:s.jsx(Qg,{as:qa,allowPinchZoom:!0,children:s.jsx(Yg,{asChild:!0,trapped:p.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:_e(a,$=>{var te;(te=p.trigger)==null||te.focus({preventScroll:!0}),$.preventDefault()}),children:s.jsx(Jl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:s.jsx(Pe,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:$=>$.preventDefault(),...x,...ue,onPlaced:()=>z(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:_e(x.onKeyDown,$=>{const te=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!te&&$.key.length===1&&Q($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let fe=P().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes($.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const he=$.target,N=fe.indexOf(he);fe=fe.slice(N+1)}setTimeout(()=>A(fe)),$.preventDefault()}})})})})})})});y1.displayName=cL;var dL="SelectItemAlignedPosition",w1=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,o=ga(Ya,n),i=va(Ya,n),[l,c]=f.useState(null),[d,u]=f.useState(null),m=Ie(t,C=>u(C)),h=Zu(n),g=f.useRef(!1),w=f.useRef(!0),{viewport:y,selectedItem:_,selectedItemText:x,focusSelectedItem:p}=i,v=f.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&y&&_&&x){const C=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),M=o.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(o.dir!=="rtl"){const he=R.left-E.left,N=M.left-he,L=C.left-N,U=C.width+L,V=Math.max(U,E.width),ee=window.innerWidth-pr,ae=Wl(N,[pr,Math.max(pr,ee-V)]);l.style.minWidth=U+"px",l.style.left=ae+"px"}else{const he=E.right-R.right,N=window.innerWidth-M.right-he,L=window.innerWidth-C.right-N,U=C.width+L,V=Math.max(U,E.width),ee=window.innerWidth-pr,ae=Wl(N,[pr,Math.max(pr,ee-V)]);l.style.minWidth=U+"px",l.style.right=ae+"px"}const I=h(),P=window.innerHeight-pr*2,D=y.scrollHeight,z=window.getComputedStyle(d),Y=parseInt(z.borderTopWidth,10),A=parseInt(z.paddingTop,10),T=parseInt(z.borderBottomWidth,10),S=parseInt(z.paddingBottom,10),F=Y+A+D+S+T,H=Math.min(_.offsetHeight*5,F),Q=window.getComputedStyle(y),O=parseInt(Q.paddingTop,10),q=parseInt(Q.paddingBottom,10),ne=C.top+C.height/2-pr,Pe=P-ne,ue=_.offsetHeight/2,$=_.offsetTop+ue,te=Y+A+$,xe=F-te;if(te<=ne){const he=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const N=d.clientHeight-y.offsetTop-y.offsetHeight,L=Math.max(Pe,ue+(he?q:0)+N+T),U=te+L;l.style.height=U+"px"}else{const he=I.length>0&&_===I[0].ref.current;l.style.top="0px";const L=Math.max(ne,Y+y.offsetTop+(he?O:0)+ue)+xe;l.style.height=L+"px",y.scrollTop=te-ne+y.offsetTop}l.style.margin=`${pr}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[h,o.trigger,o.valueNode,l,d,y,_,x,o.dir,r]);Qt(()=>v(),[v]);const[b,j]=f.useState();Qt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const k=f.useCallback(C=>{C&&w.current===!0&&(v(),p==null||p(),w.current=!1)},[v,p]);return s.jsx(mL,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:k,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:s.jsx(Me.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});w1.displayName=dL;var uL="SelectPopperPosition",sp=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=pr,...o}=e,i=em(n);return s.jsx(Cj,{...i,...o,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sp.displayName=uL;var[mL,Xg]=Ei(Ya,{}),ap="SelectViewport",_1=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,o=va(ap,n),i=Xg(ap,n),l=Ie(t,o.onViewportChange),c=f.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ju.Slot,{scope:n,children:s.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:_e(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&m){const g=Math.abs(c.current-u.scrollTop);if(g>0){const w=window.innerHeight-pr*2,y=parseFloat(m.style.minHeight),_=parseFloat(m.style.height),x=Math.max(y,_);if(x<w){const p=x+g,v=Math.min(w,p),b=p-v;m.style.height=v+"px",m.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});_1.displayName=ap;var b1="SelectGroup",[hL,fL]=Ei(b1),pL=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Qr();return s.jsx(hL,{scope:n,id:a,children:s.jsx(Me.div,{role:"group","aria-labelledby":a,...r,ref:t})})});pL.displayName=b1;var j1="SelectLabel",N1=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=fL(j1,n);return s.jsx(Me.div,{id:a.id,...r,ref:t})});N1.displayName=j1;var eu="SelectItem",[gL,C1]=Ei(eu),S1=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...i}=e,l=ga(eu,n),c=va(eu,n),d=l.value===r,[u,m]=f.useState(o??""),[h,g]=f.useState(!1),w=Ie(t,p=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,p,r,a)}),y=Qr(),_=f.useRef("touch"),x=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(gL,{scope:n,value:r,disabled:a,textId:y,isSelected:d,onItemTextChange:f.useCallback(p=>{m(v=>v||((p==null?void 0:p.textContent)??"").trim())},[]),children:s.jsx(Ju.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:s.jsx(Me.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:w,onFocus:_e(i.onFocus,()=>g(!0)),onBlur:_e(i.onBlur,()=>g(!1)),onClick:_e(i.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:_e(i.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:_e(i.onPointerDown,p=>{_.current=p.pointerType}),onPointerMove:_e(i.onPointerMove,p=>{var v;_.current=p.pointerType,a?(v=c.onItemLeave)==null||v.call(c):_.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(i.onPointerLeave,p=>{var v;p.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:_e(i.onKeyDown,p=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&p.key===" "||(nL.includes(p.key)&&x(),p.key===" "&&p.preventDefault())})})})})});S1.displayName=eu;var Ji="SelectItemText",k1=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...o}=e,i=ga(Ji,n),l=va(Ji,n),c=C1(Ji,n),d=oL(Ji,n),[u,m]=f.useState(null),h=Ie(t,x=>m(x),c.onItemTextChange,x=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,x,c.value,c.disabled)}),g=u==null?void 0:u.textContent,w=f.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:_}=d;return Qt(()=>(y(w),()=>_(w)),[y,_,w]),s.jsxs(s.Fragment,{children:[s.jsx(Me.span,{id:c.textId,...o,ref:h}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Za.createPortal(o.children,i.valueNode):null]})});k1.displayName=Ji;var E1="SelectItemIndicator",P1=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return C1(E1,n).isSelected?s.jsx(Me.span,{"aria-hidden":!0,...r,ref:t}):null});P1.displayName=E1;var op="SelectScrollUpButton",T1=f.forwardRef((e,t)=>{const n=va(op,e.__scopeSelect),r=Xg(op,e.__scopeSelect),[a,o]=f.useState(!1),i=Ie(t,r.onScrollButtonChange);return Qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(R1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});T1.displayName=op;var ip="SelectScrollDownButton",M1=f.forwardRef((e,t)=>{const n=va(ip,e.__scopeSelect),r=Xg(ip,e.__scopeSelect),[a,o]=f.useState(!1),i=Ie(t,r.onScrollButtonChange);return Qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(R1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});M1.displayName=ip;var R1=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,o=va("SelectScrollButton",n),i=f.useRef(null),l=Zu(n),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),Qt(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Me.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:_e(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:_e(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:_e(a.onPointerLeave,()=>{c()})})}),vL="SelectSeparator",D1=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Me.div,{"aria-hidden":!0,...r,ref:t})});D1.displayName=vL;var lp="SelectArrow",xL=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=em(n),o=ga(lp,n),i=va(lp,n);return o.open&&i.position==="popper"?s.jsx(Sj,{...a,...r,ref:t}):null});xL.displayName=lp;function A1(e){return e===""||e===void 0}var O1=f.forwardRef((e,t)=>{const{value:n,...r}=e,a=f.useRef(null),o=Ie(t,a),i=Qu(n);return f.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&u){const m=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(m)}},[i,n]),s.jsx(Zl,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:n})})});O1.displayName="BubbleSelect";function I1(e){const t=Ot(e),n=f.useRef(""),r=f.useRef(0),a=f.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function L1(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=yL(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function yL(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var wL=d1,$1=m1,_L=f1,bL=p1,jL=g1,F1=v1,NL=_1,z1=N1,B1=S1,CL=k1,SL=P1,U1=T1,W1=M1,H1=D1;const ln=wL,cn=_L,Jt=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs($1,{ref:r,className:le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(bL,{asChild:!0,children:s.jsx(fi,{className:"h-4 w-4 opacity-50"})})]}));Jt.displayName=$1.displayName;const kL=f.forwardRef(({className:e,...t},n)=>s.jsx(U1,{ref:n,className:le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(vg,{className:"h-4 w-4"})}));kL.displayName=U1.displayName;const EL=f.forwardRef(({className:e,...t},n)=>s.jsx(W1,{ref:n,className:le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(fi,{className:"h-4 w-4"})}));EL.displayName=W1.displayName;const Zt=f.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(jL,{children:s.jsx(F1,{ref:a,className:le("relative z-[9999] min-w-[8rem] max-w-[90vw] overflow-hidden rounded-md border !bg-white dark:!bg-gray-900 text-gray-900 dark:text-gray-100 shadow-xl border-gray-200 dark:border-gray-700 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 max-h-[80vh]",n==="popper"&&"data-[side=bottom]:translate-y-2 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-2",e),...r,children:s.jsx(NL,{className:le("p-1 overflow-y-auto max-h-[70vh]","w-full min-w-[var(--radix-select-trigger-width)] max-w-[90vw]"),children:t})})}));Zt.displayName=F1.displayName;const PL=f.forwardRef(({className:e,...t},n)=>s.jsx(z1,{ref:n,className:le("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));PL.displayName=z1.displayName;const Ke=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(B1,{ref:r,className:le("relative flex w-full cursor-pointer select-none items-center rounded-sm py-2 pl-8 pr-8 text-sm outline-none hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 whitespace-normal break-words leading-snug text-gray-900 dark:text-gray-100",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(SL,{children:s.jsx(hi,{className:"h-4 w-4"})})}),s.jsx(CL,{children:t})]}));Ke.displayName=B1.displayName;const TL=f.forwardRef(({className:e,...t},n)=>s.jsx(H1,{ref:n,className:le("-mx-1 my-1 h-px bg-muted",e),...t}));TL.displayName=H1.displayName;const pe=f.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));pe.displayName="Input";var ML="Label",q1=f.forwardRef((e,t)=>s.jsx(Me.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));q1.displayName=ML;var V1=q1;const RL=ku("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=f.forwardRef(({className:e,...t},n)=>s.jsx(V1,{ref:n,className:le(RL(),e),...t}));K.displayName=V1.displayName;const Yt=f.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Yt.displayName="Textarea";var Jg="Dialog",[G1,K1]=cr(Jg),[DL,Dr]=G1(Jg),Y1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[d=!1,u]=lr({prop:r,defaultProp:a,onChange:o});return s.jsx(DL,{scope:t,triggerRef:l,contentRef:c,contentId:Qr(),titleId:Qr(),descriptionId:Qr(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(m=>!m),[u]),modal:i,children:n})};Y1.displayName=Jg;var Q1="DialogTrigger",X1=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Dr(Q1,n),o=Ie(t,a.triggerRef);return s.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tv(a.open),...r,ref:o,onClick:_e(e.onClick,a.onOpenToggle)})});X1.displayName=Q1;var Zg="DialogPortal",[AL,J1]=G1(Zg,{forceMount:void 0}),Z1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,o=Dr(Zg,t);return s.jsx(AL,{scope:t,forceMount:n,children:f.Children.map(r,i=>s.jsx(Qn,{present:n||o.open,children:s.jsx(Nu,{asChild:!0,container:a,children:i})}))})};Z1.displayName=Zg;var tu="DialogOverlay",eC=f.forwardRef((e,t)=>{const n=J1(tu,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Dr(tu,e.__scopeDialog);return o.modal?s.jsx(Qn,{present:r||o.open,children:s.jsx(OL,{...a,ref:t})}):null});eC.displayName=tu;var OL=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Dr(tu,n);return s.jsx(Qg,{as:qa,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Me.div,{"data-state":tv(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Qa="DialogContent",tC=f.forwardRef((e,t)=>{const n=J1(Qa,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Dr(Qa,e.__scopeDialog);return s.jsx(Qn,{present:r||o.open,children:o.modal?s.jsx(IL,{...a,ref:t}):s.jsx(LL,{...a,ref:t})})});tC.displayName=Qa;var IL=f.forwardRef((e,t)=>{const n=Dr(Qa,e.__scopeDialog),r=f.useRef(null),a=Ie(t,n.contentRef,r);return f.useEffect(()=>{const o=r.current;if(o)return n1(o)},[]),s.jsx(nC,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:_e(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:_e(e.onFocusOutside,o=>o.preventDefault())})}),LL=f.forwardRef((e,t)=>{const n=Dr(Qa,e.__scopeDialog),r=f.useRef(!1),a=f.useRef(!1);return s.jsx(nC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),nC=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Dr(Qa,n),c=f.useRef(null),d=Ie(t,c);return ZN(),s.jsxs(s.Fragment,{children:[s.jsx(Yg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(Jl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tv(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(FL,{titleId:l.titleId}),s.jsx(BL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ev="DialogTitle",rC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Dr(ev,n);return s.jsx(Me.h2,{id:a.titleId,...r,ref:t})});rC.displayName=ev;var sC="DialogDescription",aC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Dr(sC,n);return s.jsx(Me.p,{id:a.descriptionId,...r,ref:t})});aC.displayName=sC;var oC="DialogClose",iC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Dr(oC,n);return s.jsx(Me.button,{type:"button",...r,ref:t,onClick:_e(e.onClick,()=>a.onOpenChange(!1))})});iC.displayName=oC;function tv(e){return e?"open":"closed"}var lC="DialogTitleWarning",[$L,cC]=vP(lC,{contentName:Qa,titleName:ev,docsSlug:"dialog"}),FL=({titleId:e})=>{const t=cC(lC),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},zL="DialogDescriptionWarning",BL=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cC(zL).contentName}}.`;return f.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},dC=Y1,nv=X1,uC=Z1,rv=eC,sv=tC,av=rC,ov=aC,iv=iC,mC="AlertDialog",[UL,zz]=cr(mC,[K1]),_s=K1(),hC=e=>{const{__scopeAlertDialog:t,...n}=e,r=_s(t);return s.jsx(dC,{...r,...n,modal:!0})};hC.displayName=mC;var WL="AlertDialogTrigger",fC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_s(n);return s.jsx(nv,{...a,...r,ref:t})});fC.displayName=WL;var HL="AlertDialogPortal",pC=e=>{const{__scopeAlertDialog:t,...n}=e,r=_s(t);return s.jsx(uC,{...r,...n})};pC.displayName=HL;var qL="AlertDialogOverlay",gC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_s(n);return s.jsx(rv,{...a,...r,ref:t})});gC.displayName=qL;var zo="AlertDialogContent",[VL,GL]=UL(zo),vC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,o=_s(n),i=f.useRef(null),l=Ie(t,i),c=f.useRef(null);return s.jsx($L,{contentName:zo,titleName:xC,docsSlug:"alert-dialog",children:s.jsx(VL,{scope:n,cancelRef:c,children:s.jsxs(sv,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:_e(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(dg,{children:r}),s.jsx(YL,{contentRef:i})]})})})});vC.displayName=zo;var xC="AlertDialogTitle",yC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_s(n);return s.jsx(av,{...a,...r,ref:t})});yC.displayName=xC;var wC="AlertDialogDescription",_C=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_s(n);return s.jsx(ov,{...a,...r,ref:t})});_C.displayName=wC;var KL="AlertDialogAction",bC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_s(n);return s.jsx(iv,{...a,...r,ref:t})});bC.displayName=KL;var jC="AlertDialogCancel",NC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=GL(jC,n),o=_s(n),i=Ie(t,a);return s.jsx(iv,{...o,...r,ref:i})});NC.displayName=jC;var YL=({contentRef:e})=>{const t=`\`${zo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zo}\` by passing a \`${wC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},QL=hC,XL=fC,JL=pC,CC=gC,SC=vC,kC=bC,EC=NC,PC=yC,TC=_C;const lv=QL,cv=XL,ZL=JL,MC=f.forwardRef(({className:e,...t},n)=>s.jsx(CC,{className:le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));MC.displayName=CC.displayName;const tm=f.forwardRef(({className:e,...t},n)=>s.jsxs(ZL,{children:[s.jsx(MC,{}),s.jsx(SC,{ref:n,className:le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 max-h-[min(500px,calc(100vh-40px))] overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));tm.displayName=SC.displayName;const nm=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col space-y-2 text-center sm:text-left",e),...t});nm.displayName="AlertDialogHeader";const rm=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});rm.displayName="AlertDialogFooter";const sm=f.forwardRef(({className:e,...t},n)=>s.jsx(PC,{ref:n,className:le("text-lg font-semibold",e),...t}));sm.displayName=PC.displayName;const am=f.forwardRef(({className:e,...t},n)=>s.jsx(TC,{ref:n,className:le("text-sm text-muted-foreground",e),...t}));am.displayName=TC.displayName;const om=f.forwardRef(({className:e,...t},n)=>s.jsx(kC,{ref:n,className:le(zl(),e),...t}));om.displayName=kC.displayName;const im=f.forwardRef(({className:e,...t},n)=>s.jsx(EC,{ref:n,className:le(zl({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));im.displayName=EC.displayName;var dv="Collapsible",[e6,RC]=cr(dv),[t6,uv]=e6(dv),DC=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:i,...l}=e,[c=!1,d]=lr({prop:r,defaultProp:a,onChange:i});return s.jsx(t6,{scope:n,disabled:o,contentId:Qr(),open:c,onOpenToggle:f.useCallback(()=>d(u=>!u),[d]),children:s.jsx(Me.div,{"data-state":hv(c),"data-disabled":o?"":void 0,...l,ref:t})})});DC.displayName=dv;var AC="CollapsibleTrigger",OC=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=uv(AC,n);return s.jsx(Me.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":hv(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:_e(e.onClick,a.onOpenToggle)})});OC.displayName=AC;var mv="CollapsibleContent",IC=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=uv(mv,e.__scopeCollapsible);return s.jsx(Qn,{present:n||a.open,children:({present:o})=>s.jsx(n6,{...r,ref:t,present:o})})});IC.displayName=mv;var n6=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=e,i=uv(mv,n),[l,c]=f.useState(r),d=f.useRef(null),u=Ie(t,d),m=f.useRef(0),h=m.current,g=f.useRef(0),w=g.current,y=i.open||l,_=f.useRef(y),x=f.useRef();return f.useEffect(()=>{const p=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(p)},[]),Qt(()=>{const p=d.current;if(p){x.current=x.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const v=p.getBoundingClientRect();m.current=v.height,g.current=v.width,_.current||(p.style.transitionDuration=x.current.transitionDuration,p.style.animationName=x.current.animationName),c(r)}},[i.open,r]),s.jsx(Me.div,{"data-state":hv(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!y,...o,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:y&&a})});function hv(e){return e?"open":"closed"}var r6=DC,s6=OC,a6=IC,bs="Accordion",o6=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[fv,i6,l6]=Xl(bs),[lm,Bz]=cr(bs,[l6,RC]),pv=RC(),LC=X.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,o=r;return s.jsx(fv.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?s.jsx(m6,{...o,ref:t}):s.jsx(u6,{...a,ref:t})})});LC.displayName=bs;var[$C,c6]=lm(bs),[FC,d6]=lm(bs,{collapsible:!1}),u6=X.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...i}=e,[l,c]=lr({prop:n,defaultProp:r,onChange:a});return s.jsx($C,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:X.useCallback(()=>o&&c(""),[o,c]),children:s.jsx(FC,{scope:e.__scopeAccordion,collapsible:o,children:s.jsx(zC,{...i,ref:t})})})}),m6=X.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=e,[i=[],l]=lr({prop:n,defaultProp:r,onChange:a}),c=X.useCallback(u=>l((m=[])=>[...m,u]),[l]),d=X.useCallback(u=>l((m=[])=>m.filter(h=>h!==u)),[l]);return s.jsx($C,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:d,children:s.jsx(FC,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(zC,{...o,ref:t})})})}),[h6,cm]=lm(bs),zC=X.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...i}=e,l=X.useRef(null),c=Ie(l,t),d=i6(n),m=bi(a)==="ltr",h=_e(e.onKeyDown,g=>{var E;if(!o6.includes(g.key))return;const w=g.target,y=d().filter(M=>{var R;return!((R=M.ref.current)!=null&&R.disabled)}),_=y.findIndex(M=>M.ref.current===w),x=y.length;if(_===-1)return;g.preventDefault();let p=_;const v=0,b=x-1,j=()=>{p=_+1,p>b&&(p=v)},k=()=>{p=_-1,p<v&&(p=b)};switch(g.key){case"Home":p=v;break;case"End":p=b;break;case"ArrowRight":o==="horizontal"&&(m?j():k());break;case"ArrowDown":o==="vertical"&&j();break;case"ArrowLeft":o==="horizontal"&&(m?k():j());break;case"ArrowUp":o==="vertical"&&k();break}const C=p%x;(E=y[C].ref.current)==null||E.focus()});return s.jsx(h6,{scope:n,disabled:r,direction:a,orientation:o,children:s.jsx(fv.Slot,{scope:n,children:s.jsx(Me.div,{...i,"data-orientation":o,ref:c,onKeyDown:r?void 0:h})})})}),nu="AccordionItem",[f6,gv]=lm(nu),BC=X.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,o=cm(nu,n),i=c6(nu,n),l=pv(n),c=Qr(),d=r&&i.value.includes(r)||!1,u=o.disabled||e.disabled;return s.jsx(f6,{scope:n,open:d,disabled:u,triggerId:c,children:s.jsx(r6,{"data-orientation":o.orientation,"data-state":GC(d),...l,...a,ref:t,disabled:u,open:d,onOpenChange:m=>{m?i.onItemOpen(r):i.onItemClose(r)}})})});BC.displayName=nu;var UC="AccordionHeader",WC=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=cm(bs,n),o=gv(UC,n);return s.jsx(Me.h3,{"data-orientation":a.orientation,"data-state":GC(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:t})});WC.displayName=UC;var cp="AccordionTrigger",HC=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=cm(bs,n),o=gv(cp,n),i=d6(cp,n),l=pv(n);return s.jsx(fv.ItemSlot,{scope:n,children:s.jsx(s6,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...l,...r,ref:t})})});HC.displayName=cp;var qC="AccordionContent",VC=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=cm(bs,n),o=gv(qC,n),i=pv(n);return s.jsx(a6,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});VC.displayName=qC;function GC(e){return e?"open":"closed"}var p6=LC,g6=BC,v6=WC,KC=HC,YC=VC;const jr=p6,_t=f.forwardRef(({className:e,...t},n)=>s.jsx(g6,{ref:n,className:le("rounded-xl border border-border bg-background/95 shadow-sm transition-all data-[state=open]:shadow-md",e),...t}));_t.displayName="AccordionItem";const bt=f.forwardRef(({className:e,children:t,...n},r)=>s.jsx(v6,{className:"flex",children:s.jsxs(KC,{ref:r,className:le("flex flex-1 items-center justify-between gap-3 px-4 py-3 text-left text-sm font-semibold transition-all hover:bg-accent/40 [&[data-state=open]>svg]:rotate-180 data-[state=open]:text-primary",e),...n,children:[t,s.jsx(fi,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));bt.displayName=KC.displayName;const jt=f.forwardRef(({className:e,children:t,...n},r)=>s.jsx(YC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:le("px-4 pb-4 pt-0",e),children:t})}));jt.displayName=YC.displayName;function x6(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var vv="ScrollArea",[QC,Uz]=cr(vv),[y6,ur]=QC(vv),XC=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState(null),[g,w]=f.useState(null),[y,_]=f.useState(null),[x,p]=f.useState(0),[v,b]=f.useState(0),[j,k]=f.useState(!1),[C,E]=f.useState(!1),M=Ie(t,I=>c(I)),R=bi(a);return s.jsx(y6,{scope:n,type:r,dir:R,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:j,onScrollbarXEnabledChange:k,scrollbarY:y,onScrollbarYChange:_,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:p,onCornerHeightChange:b,children:s.jsx(Me.div,{dir:R,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});XC.displayName=vv;var JC="ScrollAreaViewport",ZC=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:a,nonce:o,...i}=e,l=ur(JC,n),c=f.useRef(null),d=Ie(t,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),s.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...i,asChild:a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:P6({asChild:a,children:r},u=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});ZC.displayName=JC;var Zr="ScrollAreaScrollbar",xv=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ur(Zr,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return f.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?s.jsx(w6,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(_6,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(eS,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(yv,{...r,ref:t}):null});xv.displayName=Zr;var w6=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ur(Zr,e.__scopeScrollArea),[o,i]=f.useState(!1);return f.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},u=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Qn,{present:n||o,children:s.jsx(eS,{"data-state":o?"visible":"hidden",...r,ref:t})})}),_6=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ur(Zr,e.__scopeScrollArea),o=e.orientation==="horizontal",i=um(()=>c("SCROLL_END"),100),[l,c]=x6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),f.useEffect(()=>{const d=a.viewport,u=o?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const g=d[u];m!==g&&(c("SCROLL"),i()),m=g};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,o,c,i]),s.jsx(Qn,{present:n||l!=="hidden",children:s.jsx(yv,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:_e(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:_e(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),eS=f.forwardRef((e,t)=>{const n=ur(Zr,e.__scopeScrollArea),{forceMount:r,...a}=e,[o,i]=f.useState(!1),l=e.orientation==="horizontal",c=um(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?d:u)}},10);return ii(n.viewport,c),ii(n.content,c),s.jsx(Qn,{present:r||o,children:s.jsx(yv,{"data-state":o?"visible":"hidden",...a,ref:t})})}),yv=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=ur(Zr,e.__scopeScrollArea),o=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=aS(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function m(h,g){return k6(h,i.current,l,g)}return n==="horizontal"?s.jsx(b6,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,g=b0(h,l,a.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):n==="vertical"?s.jsx(j6,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,g=b0(h,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),b6=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=ur(Zr,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),d=Ie(t,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(nS,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dm(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),iS(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:su(i.paddingLeft),paddingEnd:su(i.paddingRight)}})}})}),j6=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=ur(Zr,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),d=Ie(t,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(nS,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dm(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),iS(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:su(i.paddingTop),paddingEnd:su(i.paddingBottom)}})}})}),[N6,tS]=QC(Zr),nS=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=e,g=ur(Zr,n),[w,y]=f.useState(null),_=Ie(t,M=>y(M)),x=f.useRef(null),p=f.useRef(""),v=g.viewport,b=r.content-r.viewport,j=Ot(u),k=Ot(c),C=um(m,10);function E(M){if(x.current){const R=M.clientX-x.current.left,I=M.clientY-x.current.top;d({x:R,y:I})}}return f.useEffect(()=>{const M=R=>{const I=R.target;(w==null?void 0:w.contains(I))&&j(R,b)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[v,w,b,j]),f.useEffect(k,[r,k]),ii(w,C),ii(g.content,C),s.jsx(N6,{scope:n,scrollbar:w,hasThumb:a,onThumbChange:Ot(o),onThumbPointerUp:Ot(i),onThumbPositionChange:k,onThumbPointerDown:Ot(l),children:s.jsx(Me.div,{...h,ref:_,style:{position:"absolute",...h.style},onPointerDown:_e(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),x.current=w.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(M))}),onPointerMove:_e(e.onPointerMove,E),onPointerUp:_e(e.onPointerUp,M=>{const R=M.target;R.hasPointerCapture(M.pointerId)&&R.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=p.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),ru="ScrollAreaThumb",rS=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=tS(ru,e.__scopeScrollArea);return s.jsx(Qn,{present:n||a.hasThumb,children:s.jsx(C6,{ref:t,...r})})}),C6=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,o=ur(ru,n),i=tS(ru,n),{onThumbPositionChange:l}=i,c=Ie(t,m=>i.onThumbChange(m)),d=f.useRef(),u=um(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const m=o.viewport;if(m){const h=()=>{if(u(),!d.current){const g=E6(m,l);d.current=g,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[o.viewport,u,l]),s.jsx(Me.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:_e(e.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),w=m.clientX-g.left,y=m.clientY-g.top;i.onThumbPointerDown({x:w,y})}),onPointerUp:_e(e.onPointerUp,i.onThumbPointerUp)})});rS.displayName=ru;var wv="ScrollAreaCorner",sS=f.forwardRef((e,t)=>{const n=ur(wv,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(S6,{...e,ref:t}):null});sS.displayName=wv;var S6=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=ur(wv,n),[o,i]=f.useState(0),[l,c]=f.useState(0),d=!!(o&&l);return ii(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),ii(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),i(u)}),d?s.jsx(Me.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function su(e){return e?parseInt(e,10):0}function aS(e,t){const n=e/t;return isNaN(n)?0:n}function dm(e){const t=aS(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function k6(e,t,n,r="ltr"){const a=dm(n),o=a/2,i=t||o,l=a-i,c=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,m=r==="ltr"?[0,u]:[u*-1,0];return oS([c,d],m)(e)}function b0(e,t,n="ltr"){const r=dm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,i]:[i*-1,0],d=Wl(e,c);return oS([0,i],[0,l])(d)}function oS(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function iS(e,t){return e>0&&e<t}var E6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function um(e,t){const n=Ot(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ii(e,t){const n=Ot(t);Qt(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}function P6(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const a=f.Children.only(r);return f.cloneElement(a,{children:typeof t=="function"?t(a.props.children):t})}var lS=XC,T6=ZC,M6=sS;const li=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(lS,{ref:r,className:le("relative overflow-hidden",e),...n,children:[s.jsx(T6,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(dp,{}),s.jsx(dp,{orientation:"horizontal"}),s.jsx(M6,{})]}));li.displayName=lS.displayName;const dp=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(xv,{ref:r,orientation:t,className:le("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(rS,{className:"relative flex-1 rounded-full bg-border"})}));dp.displayName=xv.displayName;const R6=ku("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function We({className:e,variant:t,...n}){return s.jsx("div",{className:le(R6({variant:t}),e),...n})}const mm=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,o]=f.useState(null),{toast:i}=kt(),l=async()=>{try{r(!0),o(null),console.log(" useClients: Iniciando consulta a Supabase...");const{data:u,error:m}=await G.from("profiles").select(`
          *,
          bookings:bookings(
            id,
            booking_datetime,
            total_price_cents,
            status
          )
        `).eq("role","client").order("created_at",{ascending:!1});if(m)throw m;console.log(" useClients: Datos recibidos de Supabase:",{clientsCount:(u==null?void 0:u.length)||0,firstClient:u==null?void 0:u[0]});const h=(u==null?void 0:u.map(g=>{var y,_,x;const w=((y=g.bookings)==null?void 0:y.filter(p=>p.status==="completed"))||[];return{...g,total_bookings:((_=g.bookings)==null?void 0:_.length)||0,last_booking:((x=g.bookings)==null?void 0:x.length)>0?g.bookings.sort((p,v)=>new Date(v.booking_datetime).getTime()-new Date(p.booking_datetime).getTime())[0].booking_datetime:null,total_spent:w.reduce((p,v)=>p+(v.total_price_cents||0),0),tags:[]}}))||[];t(h),console.log(" useClients: Clientes procesados exitosamente:",h.length)}catch(u){console.error(" useClients Error fetching clients:",u),o("Error al cargar los clientes"),i({title:"Error",description:"No se pudieron cargar los clientes",variant:"destructive"})}finally{r(!1)}},c=async(u,m)=>{try{const{error:h}=await G.from("profiles").update({first_name:m.first_name,last_name:m.last_name,email:m.email,phone:m.phone}).eq("id",u);if(h)throw h;await l(),i({title:"xito",description:"Cliente actualizado correctamente"})}catch(h){console.error("Error updating client:",h),i({title:"Error",description:"No se pudo actualizar el cliente",variant:"destructive"})}},d=async u=>{try{const{data:m,error:h}=await G.from("bookings").select(`
          *,
          services(name),
          centers(name)
        `).eq("client_id",u).order("booking_datetime",{ascending:!1});if(h)throw h;return(m==null?void 0:m.map(g=>{var w,y;return{...g,service_name:((w=g.services)==null?void 0:w.name)||"Servicio desconocido",center_name:((y=g.centers)==null?void 0:y.name)||"Centro desconocido"}}))||[]}catch(m){return console.error("Error fetching client bookings:",m),[]}};return f.useEffect(()=>{l();const u=G.channel("profiles-changes").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:"role=eq.client"},h=>{console.log("Profile change detected:",h),l()}).subscribe(),m=G.channel("bookings-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},h=>{console.log("Booking change detected:",h),l()}).subscribe();return()=>{G.removeChannel(u),G.removeChannel(m)}},[]),{clients:e,loading:n,error:a,refetch:l,updateClient:c,fetchClientBookings:d}},D6=({label:e="Cliente habitual",placeholder:t="Buscar cliente que haya venido ms de una vez...",onSelect:n,className:r})=>{const[a,o]=f.useState(""),[i,l]=f.useState([]),[c,d]=f.useState(!1),[u,m]=f.useState(null);f.useEffect(()=>{let g;return a&&a.length>=2?g=setTimeout(async()=>{try{d(!0);const{data:w,error:y}=await G.from("profiles").select(`
              id, first_name, last_name, email, phone,
              bookings:bookings(count)
            `).eq("role","client").or(`first_name.ilike.%${a}%,last_name.ilike.%${a}%,email.ilike.%${a}%,phone.ilike.%${a}%`).limit(10);if(y)throw y;const _=(w||[]).map(x=>{var p;return{...x,booking_count:((p=x.bookings[0])==null?void 0:p.count)||0}}).map(({bookings:x,...p})=>p);l(_)}catch(w){console.error("Error searching repeat clients",w),l([])}finally{d(!1)}},300):l([]),()=>clearTimeout(g)},[a]);const h=!!u;return s.jsxs("div",{className:le("space-y-2",r),children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-sm font-medium",children:e}),h?s.jsxs(ie,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium",children:[u.first_name," ",u.last_name]}),s.jsxs("div",{className:"text-muted-foreground text-xs",children:[u.email," ",u.phone?` ${u.phone}`:"","  ",u.booking_count," visitas"]})]}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>m(null),children:"Cambiar"})]}):s.jsx(pe,{placeholder:t,value:a,onChange:g=>o(g.target.value)})]}),!h&&s.jsxs("div",{className:"space-y-1",children:[c&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"Buscando..."}),i.length>0&&s.jsx("div",{className:"border rounded-md divide-y max-h-40 overflow-y-auto",children:i.map(g=>s.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-muted",onClick:()=>{m(g),n(g)},children:[s.jsxs("div",{className:"text-sm font-medium",children:[g.first_name," ",g.last_name]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[g.email," ",g.phone?` ${g.phone}`:"","  ",g.booking_count," visitas previas"]})]},g.id))}),a.length>=2&&!c&&i.length===0&&s.jsx("div",{className:"text-xs text-muted-foreground p-2 text-center",children:"No hay clientes habituales que coincidan con la bsqueda"})]})]})},A6=({onSelect:e,children:t})=>{const[n,r]=f.useState(!1),[a,o]=f.useState(""),{clients:i,loading:l}=mm(),c=f.useRef(null),d=i.filter(m=>{if(!a)return!0;const h=a.toLowerCase(),g=`${m.first_name||""} ${m.last_name||""}`.toLowerCase(),w=(m.email||"").toLowerCase(),y=(m.phone||"").toLowerCase();return g.includes(h)||w.includes(h)||y.includes(h)}),u=m=>{console.log("Cliente seleccionado:",m),e(m),r(!1),o("")};return s.jsxs(s.Fragment,{children:[s.jsx("span",{onClick:()=>r(!0),style:{display:"contents"},children:t}),n&&s.jsx(s.Fragment,{children:s.jsx(Pr,{open:n,onClose:()=>r(!1),maxWidth:480,mobileMaxWidth:360,maxHeight:680,className:"z-[120]",children:s.jsxs("div",{ref:c,className:"flex max-h-[calc(100vh-3rem)] sm:max-h-[85vh] p-4 sm:p-6 flex-col rounded-xl overflow-hidden",children:[s.jsx("div",{className:"pb-4 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsxs("span",{className:"truncate",children:["Seleccionar Cliente (",d.length,")"]})]})}),s.jsxs("div",{className:"relative mb-4 flex-shrink-0",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Buscar por nombre, email o telfono...",value:a,onChange:m=>o(m.target.value),className:"pl-9 text-sm"})]}),s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(li,{className:"h-full",children:s.jsx("div",{className:"px-1",children:l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando clientes..."})}):d.length===0?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:a?"No se encontraron clientes":"No hay clientes registrados"})}):s.jsx("div",{className:"space-y-3 py-2 pb-4",children:d.map(m=>s.jsxs("div",{className:"border rounded-lg p-3 hover:bg-muted/50 cursor-pointer transition-colors active:bg-muted",onClick:()=>u(m),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("h4",{className:"font-medium text-sm truncate flex-1",children:[m.first_name," ",m.last_name]}),s.jsx(W,{variant:"outline",size:"sm",className:"text-xs px-3 py-1 shrink-0",children:"Seleccionar"})]}),s.jsxs("div",{className:"space-y-1",children:[m.email&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Eu,{className:"h-3 w-3 shrink-0"}),s.jsx("span",{className:"truncate",children:m.email})]}),m.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Pu,{className:"h-3 w-3 shrink-0"}),s.jsx("span",{className:"truncate",children:m.phone})]}),m.total_bookings&&m.total_bookings>1&&s.jsxs(We,{variant:"secondary",className:"text-xs",children:[m.total_bookings," visitas"]})]})]},m.id))})})})}),s.jsx("div",{className:"flex justify-end pt-4 border-t mt-4 flex-shrink-0",children:s.jsx(W,{variant:"outline",onClick:()=>r(!1),className:"w-full sm:w-auto text-sm",children:"Cancelar"})})]})})})]})},O6=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,o]=f.useState(null),{toast:i}=kt();f.useEffect(()=>{l()},[]);const l=async()=>{try{r(!0);const{data:h,error:g}=await G.from("lane_blocks").select("*").order("start_datetime");if(g)throw g;t(h||[])}catch(h){o(h instanceof Error?h.message:"Error fetching lane blocks")}finally{r(!1)}};return{laneBlocks:e,loading:n,error:a,refetch:l,createLaneBlock:async(h,g,w,y,_)=>{var x;try{const{data:p}=await G.from("profiles").select("id").eq("user_id",(x=(await G.auth.getUser()).data.user)==null?void 0:x.id).single();if(!p)throw new Error("Usuario no encontrado");const{data:v,error:b}=await G.from("lane_blocks").insert([{center_id:h,lane_id:g,start_datetime:w.toISOString(),end_datetime:y.toISOString(),reason:_||"Bloqueo manual",created_by:p.id}]).select().single();if(b)throw b;return i({title:" Carril bloqueado",description:"El carril se ha bloqueado correctamente"}),await l(),v}catch(p){const v=p instanceof Error?p.message:"Error creando bloqueo";throw i({title:"Error",description:v,variant:"destructive"}),p}},deleteLaneBlock:async h=>{try{const{error:g}=await G.from("lane_blocks").delete().eq("id",h);if(g)throw g;i({title:" Bloqueo eliminado",description:"El carril est disponible nuevamente"}),await l()}catch(g){const w=g instanceof Error?g.message:"Error eliminando bloqueo";throw i({title:"Error",description:w,variant:"destructive"}),g}},isLaneBlocked:(h,g)=>e.find(w=>w.lane_id===h&&new Date(w.start_datetime)<=g&&new Date(w.end_datetime)>g)||null,getBlocksForLaneAndDate:(h,g)=>{const w=new Date(g);w.setHours(0,0,0,0);const y=new Date(g);return y.setHours(23,59,59,999),e.filter(_=>_.lane_id===h&&(new Date(_.start_datetime)>=w&&new Date(_.start_datetime)<=y||new Date(_.end_datetime)>=w&&new Date(_.end_datetime)<=y||new Date(_.start_datetime)<=w&&new Date(_.end_datetime)>=y))}}},_v=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(!0);f.useEffect(()=>{(()=>{try{const d=localStorage.getItem("nook_user_session");if(d){const u=JSON.parse(d),m=Date.now()-u.loginTime,h=24*60*60*1e3;m<h?t(u):localStorage.removeItem("nook_user_session")}}catch(d){console.error("Error checking session:",d),localStorage.removeItem("nook_user_session")}r(!1)})()},[]);const a=()=>{localStorage.removeItem("nook_user_session"),t(null),window.location.href="/admin-login"},o=(e==null?void 0:e.role)==="admin",i=(e==null?void 0:e.role)==="employee";return{user:e,loading:n,signOut:a,isAdmin:o,isEmployee:i,isAuthenticated:!!e}},ic=()=>{const{toast:e}=kt(),[t,n]=f.useState([]),[r,a]=f.useState([]),[o,i]=f.useState(!1),l=async()=>{try{i(!0);const{data:p,error:v}=await G.rpc("get_codes_with_stats");if(v)throw v;n(p||[])}catch(p){console.error("Error fetching codes:",p),e({title:"Error",description:"No se pudieron cargar los cdigos",variant:"destructive"})}finally{i(!1)}},c=async(p,v)=>{try{const{data:b,error:j}=await G.rpc("get_code_assignments_with_details",{target_entity_type:p||null,target_entity_id:v||null});if(j)throw j;a(b||[])}catch(b){console.error("Error fetching assignments:",b),e({title:"Error",description:"No se pudieron cargar las asignaciones",variant:"destructive"})}},d=async p=>{var v,b;try{i(!0);const{data:j}=await G.from("profiles").select("id").eq("user_id",(v=(await G.auth.getUser()).data.user)==null?void 0:v.id).single(),{data:k,error:C}=await G.from("internal_codes").insert([{...p,created_by:j==null?void 0:j.id}]).select().single();if(C)throw C;return e({title:"Cdigo creado",description:`El cdigo "${p.code}" ha sido creado exitosamente`}),await l(),k}catch(j){throw console.error("Error creating code:",j),e({title:"Error",description:(b=j.message)!=null&&b.includes("duplicate")?"El cdigo ya existe":"No se pudo crear el cdigo",variant:"destructive"}),j}finally{i(!1)}},u=async(p,v)=>{try{i(!0);const{error:b}=await G.from("internal_codes").update(v).eq("id",p);if(b)throw b;e({title:"Cdigo actualizado",description:"El cdigo ha sido actualizado exitosamente"}),await l()}catch(b){console.error("Error updating code:",b),e({title:"Error",description:"No se pudo actualizar el cdigo",variant:"destructive"})}finally{i(!1)}},m=async p=>{try{i(!0);const{error:v}=await G.from("internal_codes").delete().eq("id",p);if(v)throw v;e({title:"Cdigo eliminado",description:"El cdigo ha sido eliminado exitosamente"}),await l()}catch(v){console.error("Error deleting code:",v),e({title:"Error",description:"No se pudo eliminar el cdigo",variant:"destructive"})}finally{i(!1)}},h=async p=>{var v,b,j,k,C,E,M;try{i(!0);const{data:R,error:I}=await G.auth.getSession();if(I)throw I;const P=(b=(v=R.session)==null?void 0:v.user)==null?void 0:b.id;if(!P)throw new Error("No se pudo obtener la sesin del usuario actual.");const{data:D,error:z}=await G.from("profiles").select("id, first_name, last_name").eq("user_id",P).single();if(z)throw z;if(!(D!=null&&D.id))throw new Error("El usuario actual no tiene un perfil asociado.");const{data:Y,error:A}=await G.from("code_assignments").insert([{...p,assigned_by:D.id}]).select(`
          id,
          code_id,
          entity_type,
          entity_id,
          assigned_at,
          assigned_by,
          notes,
          code:code_id ( code, name, color, category ),
          assigner:assigned_by ( first_name, last_name )
        `).single();if(A)throw A;const T={id:Y.id,code_id:Y.code_id,entity_type:Y.entity_type,entity_id:Y.entity_id,assigned_at:Y.assigned_at,assigned_by:Y.assigned_by,notes:Y.notes,code:((j=Y.code)==null?void 0:j.code)??"",code_name:((k=Y.code)==null?void 0:k.name)??"",code_color:((C=Y.code)==null?void 0:C.color)??"#94A3B8",code_category:((E=Y.code)==null?void 0:E.category)??"general",assigner_name:Y.assigner?`${Y.assigner.first_name??""} ${Y.assigner.last_name??""}`.trim()||"Equipo":`${D.first_name??""} ${D.last_name??""}`.trim()||"Equipo"};a(S=>[T,...S]),e({title:"Cdigo asignado",description:"El cdigo ha sido asignado exitosamente"})}catch(R){console.error("Error assigning code:",R),e({title:"Error",description:(M=R.message)!=null&&M.includes("duplicate")?"El cdigo ya est asignado a esta entidad":R.message||"No se pudo asignar el cdigo",variant:"destructive"})}finally{i(!1)}},g=async p=>{try{i(!0);const{error:v}=await G.from("code_assignments").delete().eq("id",p);if(v)throw v;e({title:"Cdigo desasignado",description:"El cdigo ha sido desasignado exitosamente"}),a(b=>b.filter(j=>j.id!==p))}catch(v){console.error("Error unassigning code:",v),e({title:"Error",description:"No se pudo desasignar el cdigo",variant:"destructive"})}finally{i(!1)}},w=async p=>{try{const{data:v,error:b}=await G.rpc("search_entities_by_codes",{codes:p});if(b)throw b;return v||[]}catch(v){return console.error("Error searching entities:",v),e({title:"Error",description:"No se pudo realizar la bsqueda",variant:"destructive"}),[]}},y=p=>t.filter(v=>v.category===p),_=(p,v)=>r.filter(b=>b.entity_type===p&&b.entity_id===v),x=()=>[...new Set(t.map(v=>v.category))].sort();return f.useEffect(()=>{l(),c()},[]),{codes:t,assignments:r,loading:o,createCode:d,updateCode:u,deleteCode:m,assignCode:h,unassignCode:g,searchEntitiesByCodes:w,getCodesByCategory:y,getAssignmentsByEntity:_,getAvailableCategories:x,refetchCodes:l,refetchAssignments:c}},bv=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!1),{toast:a}=kt(),o=async()=>{r(!0);try{const{data:_,error:x}=await G.from("promotions").select("*").order("created_at",{ascending:!1});if(x)throw x;t(_||[])}catch(_){console.error("Error fetching promotions:",_),a({title:"Error",description:"No se pudieron cargar las promociones",variant:"destructive"})}finally{r(!1)}},i=async _=>{var x;r(!0);try{const{data:p}=await G.from("profiles").select("id").eq("user_id",(x=(await G.auth.getUser()).data.user)==null?void 0:x.id).single(),{data:v,error:b}=await G.from("promotions").insert({..._,created_by:p==null?void 0:p.id,is_active:_.is_active??!0}).select().single();if(b)throw b;return t(j=>[v,...j]),a({title:"xito",description:"Promocin creada exitosamente"}),v}catch(p){throw console.error("Error creating promotion:",p),a({title:"Error",description:"No se pudo crear la promocin",variant:"destructive"}),p}finally{r(!1)}},l=async(_,x)=>{r(!0);try{const{data:p,error:v}=await G.from("promotions").update(x).eq("id",_).select().single();if(v)throw v;return t(b=>b.map(j=>j.id===_?p:j)),a({title:"xito",description:"Promocin actualizada exitosamente"}),p}catch(p){throw console.error("Error updating promotion:",p),a({title:"Error",description:"No se pudo actualizar la promocin",variant:"destructive"}),p}finally{r(!1)}},c=async _=>{r(!0);try{const{error:x}=await G.from("promotions").delete().eq("id",_);if(x)throw x;t(p=>p.filter(v=>v.id!==_)),a({title:"xito",description:"Promocin eliminada exitosamente"})}catch(x){throw console.error("Error deleting promotion:",x),a({title:"Error",description:"No se pudo eliminar la promocin",variant:"destructive"}),x}finally{r(!1)}},d=async(_,x)=>{await l(_,{is_active:x})},u=()=>e.filter(_=>_.is_active),m=_=>w(_),h=_=>w(void 0,_),g=(_,x)=>_.type==="percentage"?x*_.value/100:_.type==="fixed_amount"?Math.min(_.value,x):0,w=(_,x)=>{const p=new Date,v=p.getDay(),b=p.toTimeString().slice(0,5),j=p.toISOString().split("T")[0];return e.filter(k=>!k.is_active||k.start_at&&j<k.start_at.split("T")[0]||k.end_at&&j>k.end_at.split("T")[0]||k.time_start&&b<k.time_start||k.time_end&&b>k.time_end||k.days_of_week&&k.days_of_week.length>0&&!k.days_of_week.includes(v)?!1:k.applies_to==="all_services"||k.applies_to==="specific_service"&&k.target_id===_||k.applies_to==="specific_center"&&k.target_id===x)},y=(_,x,p)=>{const v=w(x,p);if(v.length===0)return{originalPrice:_,finalPrice:_,discount:0,appliedPromotions:[]};let b=0,j=null;for(const k of v){const C=g(k,_);C>b&&(b=C,j=k)}return{originalPrice:_,finalPrice:_-b,discount:b,appliedPromotions:j?[j]:[]}};return f.useEffect(()=>{o()},[]),{promotions:e,loading:n,fetchPromotions:o,createPromotion:i,updatePromotion:l,deletePromotion:c,togglePromotionStatus:d,getActivePromotions:u,getPromotionsByService:m,getPromotionsByCenter:h,calculateDiscount:g,getApplicablePromotions:w,calculatePriceWithPromotions:y}},hd=e=>typeof e=="number"?(e/100).toLocaleString("es-ES",{style:"currency",currency:"EUR"}):"",I6=({service:e,active:t,onClick:n,centerId:r})=>{const{calculatePriceWithPromotions:a}=bv();let o=e.price_cents,i=0;e.has_discount&&e.discount_price_cents&&e.discount_price_cents<e.price_cents&&(o=e.discount_price_cents,i=e.price_cents-e.discount_price_cents);const l=a(o,e.id,r);l.discount>0;const c=i+l.discount,d=e.price_cents-c,u=c>0;return s.jsx("button",{type:"button",onClick:n,className:le("w-full p-3 rounded-lg border text-left transition-all duration-200","bg-card hover:bg-accent/10","shadow-sm hover:shadow-md",t?"border-primary ring-2 ring-primary/20 bg-primary/5":"border-border hover:border-primary/40"),children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:le("font-semibold text-sm truncate",t&&"text-primary"),children:e.name}),s.jsx("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"w-3 h-3"}),s.jsxs("span",{children:[e.duration_minutes," min"]})]})})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u?s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-muted-foreground line-through",children:hd(e.price_cents)}),s.jsx("p",{className:"text-sm font-bold text-primary",children:hd(d)})]}):s.jsx("p",{className:"text-sm font-bold",children:hd(e.price_cents)}),u&&s.jsxs(We,{variant:"secondary",className:"bg-orange-500/20 text-orange-600 text-xs",children:[s.jsx(Rl,{className:"w-3 h-3 mr-1"}),Math.round(c/e.price_cents*100),"%"]})]})]})})},cS=({mode:e="individual",services:t,packages:n,selectedId:r,onSelect:a,useDropdown:o=!0})=>{const[i,l]=f.useState([]),c=f.useMemo(()=>{const u={"masajes-individuales":{name:"Masajes Individuales",services:[],packages:[]},"masajes-pareja":{name:"Masajes para Dos",services:[],packages:[]},"masajes-cuatro-manos":{name:"Masajes a Cuatro Manos",services:[],packages:[]},rituales:{name:"Rituales",services:[],packages:[]}};return t.forEach(m=>{const h=m.name.toLowerCase(),g=(m.description||"").toLowerCase(),w=h.includes("ritual")||g.includes("ritual"),y=h.includes("dos personas")||h.includes("pareja")||h.includes("para dos")||h.includes("2 personas")||h.includes("duo");h.includes("cuatro manos")?u["masajes-cuatro-manos"].services.push(m):y?u["masajes-pareja"].services.push(m):w?u.rituales.services.push(m):u["masajes-individuales"].services.push(m)}),Object.entries(u).filter(([m,h])=>h.services.length>0).map(([m,h])=>({key:m,...h}))},[t]),d=u=>{l(m=>m.includes(u)?m.filter(h=>h!==u):[...m,u])};return o?s.jsxs(ln,{value:r,onValueChange:u=>a(u,"service"),children:[s.jsx(Jt,{children:s.jsx(cn,{placeholder:"Selecciona un servicio"})}),s.jsx(Zt,{children:c.map(u=>s.jsxs(X.Fragment,{children:[s.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:u.name}),u.services.map(m=>s.jsxs(Ke,{value:m.id,children:[m.name," - ",hd(m.price_cents)]},m.id))]},u.key))})]}):s.jsx("div",{className:"space-y-3",children:c.map(u=>{const m=i.includes(u.key);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{type:"button",onClick:()=>d(u.key),className:le("w-full flex items-center justify-between px-3 py-2 rounded-lg","bg-accent/30 hover:bg-accent/50 transition-colors","border border-border/50"),children:[s.jsx("span",{className:"font-semibold text-sm",children:u.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{variant:"secondary",className:"text-xs",children:u.services.length}),m?s.jsx(vg,{className:"w-4 h-4"}):s.jsx(fi,{className:"w-4 h-4"})]})]}),m&&s.jsx("div",{className:"grid gap-2 pl-2",children:u.services.map(h=>s.jsx(I6,{service:h,active:r===h.id,onClick:()=>a(h.id,"service")},h.id))})]},u.key)})})},L6=()=>{var Uv,Wv;console.log(" AdvancedCalendarView RENDER - Location:",window.location.pathname);const{toast:e}=kt(),{isAdmin:t,isEmployee:n}=_v(),r=dr(),[a,o]=f.useState(new Date),[i,l]=f.useState("day"),[c,d]=f.useState(""),[u,m]=f.useState(!1),[h,g]=f.useState({top:0,left:0}),[w,y]=f.useState(null),[_,x]=f.useState(!1),[p,v]=f.useState(!1),[b,j]=f.useState(null),[k,C]=f.useState(null),[E,M]=f.useState(!1),[R,I]=f.useState(null),[P,D]=f.useState(null),[z,Y]=f.useState("booking"),[A,T]=f.useState(null),[S,F]=f.useState(!1),[H,Q]=f.useState(null),[O,q]=f.useState(null),[ne,Pe]=f.useState(""),[ue,$]=f.useState("pending"),[te,xe]=f.useState("pending"),[fe,he]=f.useState(""),[N,L]=f.useState(""),[U,V]=f.useState(""),[ee,ae]=f.useState(""),[ye,me]=f.useState(60),[ve,Ye]=f.useState(new Date),[Z,ge]=f.useState([]),[J,Te]=f.useState({clientName:"",clientPhone:"",clientEmail:"",centerId:"",laneId:"",serviceId:"",date:new Date,timeSlot:new Date,notes:""}),[Qe,ot]=f.useState(""),[Fe,xt]=f.useState(void 0),[qt,ut]=f.useState(""),[Ar,Xn]=f.useState(!1),{bookings:gt,loading:mr,refetch:mn}=Kg();f.useEffect(()=>{console.log("AdvancedCalendarView - Bookings loaded:",gt.length,gt),console.log("AdvancedCalendarView - Selected center:",c)},[gt,c]);const{centers:Or}=Si(),{lanes:Oe}=Yu(),{services:Xe}=ki(),{updateClient:tt}=mm(),{laneBlocks:Jn,createLaneBlock:On,deleteLaneBlock:xa,isLaneBlocked:Ti}=O6(),{treatmentGroups:gm}=ac(),{codes:pk,assignments:_z,getAssignmentsByEntity:gk}=ic(),vk=(B,se)=>{var Se,ze,Je,He,Cn;const be=Xe.find(Sn=>Sn.id===B);if(!be||!be.group_id)return null;const oe=Oe.filter(Sn=>Sn.center_id===se&&Sn.active),Ce=gm.find(Sn=>Sn.id===be.group_id);if(!Ce)return oe[0]||null;let we=0;return(Se=Ce.name)!=null&&Se.includes("Masajes")&&!((ze=Ce.name)!=null&&ze.includes("Cuatro Manos"))?we=0:(Je=Ce.name)!=null&&Je.includes("Tratamientos")?we=1:(He=Ce.name)!=null&&He.includes("Rituales")?we=2:(Cn=Ce.name)!=null&&Cn.includes("Cuatro Manos")&&(we=3),oe[we]||oe[0]},to=B=>{const se=Xe.find(oe=>oe.id===B);if(!se||!se.group_id)return"#3B82F6";const be=gm.find(oe=>oe.id===se.group_id);return be&&be.color||"#3B82F6"};f.useEffect(()=>{const B=G.channel("calendar-bookings-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},se=>{console.log("Calendar: Booking change detected:",se),mn()}).subscribe();return()=>{G.removeChannel(B)}},[mn]),f.useEffect(()=>{if(Or.length>0&&!c){const B=Or[0].id;d(B),console.log(" Setting initial center:",B,Or[0].name)}},[Or,c]),f.useEffect(()=>{const B=()=>{E&&(M(!1),I(null),D(null))};return document.addEventListener("mouseup",B),()=>document.removeEventListener("mouseup",B)},[E]);const xk=(B,se)=>{if(!E||!R||!P||R.laneId!==B)return!1;const be=R.timeSlot<P.timeSlot?R.timeSlot:P.timeSlot,oe=R.timeSlot<P.timeSlot?P.timeSlot:R.timeSlot;return se>=be&&se<=oe},Iv=(()=>{const B=[],se=ca(a);for(let be=10;be<=22;be++)for(let oe=0;oe<60&&!(be===22&&oe>0);oe+=5){const Ce=new Date(se);Ce.setHours(be,oe,0,0),B.push({time:Ce,hour:ke(Ce,"HH:mm")})}return B})(),yk=X.useMemo(()=>{const B=[],se=ca(a),be=new Date(se);be.setHours(10,0,0,0);const oe=new Date(se);oe.setHours(22,0,0,0);const Ce=new Date(be);for(;Ce<=oe;)B.push(ke(Ce,"HH:mm")),Ce.setMinutes(Ce.getMinutes()+5);return B},[a]),vm=()=>{const B=Mr(a,{weekStartsOn:1}),se=Wu(a,{weekStartsOn:1});return Z5({start:B,end:se})},xm=B=>Oe.filter(se=>se.center_id===B&&se.active).sort((se,be)=>se.name.localeCompare(be.name)),Mi=(B,se,be,oe)=>{console.log("Looking for booking:",{centerId:B,laneId:se,date:be.toISOString(),timeSlot:oe.toISOString()}),console.log("Available bookings:",gt.length);const Ce=gt.find(we=>{if(!we.booking_datetime||we.center_id!==B)return!1;const Se=Dt(we.booking_datetime),ze=new Date(Se.getFullYear(),Se.getMonth(),Se.getDate()),Je=new Date(be.getFullYear(),be.getMonth(),be.getDate());if(!dn(ze,Je))return!1;const He=Se,Cn=Uy(He,we.duration_minutes||60);if(!(oe>=He&&oe<Cn))return!1;if(we.lane_id)return we.lane_id===se;const at=Xe.find(Ft=>Ft.id===we.service_id),De=at!=null&&at.group_id?gm.find(Ft=>Ft.id===at.group_id):null;let mt=0;return De!=null&&De.name&&(De.name.includes("Masajes")&&!De.name.includes("Cuatro Manos")?mt=0:De.name.includes("Tratamientos")?mt=1:De.name.includes("Rituales")?mt=2:De.name.includes("Cuatro Manos")&&(mt=3)),Oe.filter(Ft=>Ft.center_id===B&&Ft.active).findIndex(Ft=>Ft.id===se)===mt});return console.log("Found booking:",Ce?Ce.id:"none"),Ce},wk=(B,se,be)=>{const oe=xm(B),Ce=oe.length,we=oe.filter(Je=>Mi(B,Je.id,se,be)).length,Se=oe.filter(Je=>Ti(Je.id,be)).length,ze=Ce-we-Se;return{total:Ce,booked:we,blocked:Se,available:Math.max(0,ze),isFullyBooked:ze<=0}},_k=(B,se,be,oe,Ce)=>{if(p)return;if(Ce.preventDefault(),_){$v(se,oe);return}if(Mi(B,se,be,oe)){uc(B,se,be,oe,Ce);return}M(!0),I({centerId:B,laneId:se,timeSlot:oe}),D({centerId:B,laneId:se,timeSlot:oe}),Y(Ce.shiftKey?"block":"booking")},bk=(B,se,be,oe)=>{p||E&&R&&R.laneId===se&&D({centerId:B,laneId:se,timeSlot:oe})},Lv=X.useCallback(B=>{if(typeof window>"u"){g({top:100,left:100});return}const se=window.innerWidth,be=window.innerHeight,oe=window.pageYOffset||document.documentElement.scrollTop,Ce=oe,we=oe+be,Se=se<768?Math.max(280,se-32):Math.min(520,se-48),ze=Math.min(be-40,se<768?be-32:720);let Je=oe+(be-ze)/2,He=(se-Se)/2;Je=Math.max(Ce+16,Math.min(Je,we-ze-16)),He=Math.max(16,Math.min(He,se-Se-16)),g({top:Je,left:He})},[]);X.useCallback(()=>{if(typeof window>"u")return{top:`${h.top}px`,left:`${h.left}px`,width:"520px",maxHeight:"85vh"};const B=window.innerWidth,se=window.innerHeight,be=B<768?Math.max(280,B-32):Math.min(520,B-48),oe=Math.min(se-40,B<768?se-32:720);return{top:`${h.top}px`,left:`${h.left}px`,width:`${be}px`,maxHeight:`${oe}px`}},[h]);const jk=(B,se,be,oe,Ce)=>{if(p||!E||!R)return;if(M(!1),R.timeSlot.getTime()===oe.getTime()){uc(B,se,be,oe,Ce),I(null),D(null);return}const we=R.timeSlot<oe?R.timeSlot:oe,Se=R.timeSlot<oe?oe:R.timeSlot;if(z==="block"){const ze=new Date(Se);ze.setMinutes(ze.getMinutes()+5),On(c,se,we,ze,"Bloqueo por arrastre")}else{const ze=(Se.getTime()-we.getTime())/6e4+5;Lv(Ce==null?void 0:Ce.currentTarget),y({centerId:B,laneId:se,timeSlot:we}),Te({...J,centerId:B,laneId:se,date:be,timeSlot:we});const Je=Xe.find(He=>Math.abs((He.duration_minutes||60)-ze)<=10);Je&&Te(He=>({...He,serviceId:Je.id})),m(!0)}I(null),D(null)},uc=(B,se,be,oe,Ce)=>{var Se,ze,Je,He;if(_){$v(se,oe);return}if(p)return;Lv(Ce==null?void 0:Ce.currentTarget);const we=Mi(B,se,be,oe);if(we){Q(we),q(we.client_id||null),Pe(we.notes||""),$(we.payment_status||"pending"),xe(we.status||"pending"),ae(we.service_id||""),me(we.duration_minutes||60);const Cn=Dt(we.booking_datetime);Ye(Cn),he(`${((Se=we.profiles)==null?void 0:Se.first_name)||""} ${((ze=we.profiles)==null?void 0:ze.last_name)||""}`.trim()),L(((Je=we.profiles)==null?void 0:Je.email)||""),V(((He=we.profiles)==null?void 0:He.phone)||""),ge(we.booking_codes||[]),F(!0);return}y({centerId:B,laneId:se,timeSlot:oe}),Te({...J,centerId:B,laneId:se,date:be,timeSlot:oe}),m(!0)},$v=(B,se)=>{if(!b)j({laneId:B,timeSlot:se});else if(b.laneId===B){const be=b.timeSlot<se?b.timeSlot:se,oe=b.timeSlot<se?se:b.timeSlot,Ce=new Date(oe);Ce.setMinutes(Ce.getMinutes()+30),On(c,B,be,Ce,"Bloqueo manual"),x(!1),j(null),C(null)}else j({laneId:B,timeSlot:se})},Nk=async()=>{var B;try{if(!J.serviceId){e({title:"Error",description:"Selecciona un servicio",variant:"destructive"});return}if(!J.isWalkIn&&!A&&!J.clientEmail){e({title:"Error",description:"Selecciona un cliente o introduce email",variant:"destructive"});return}const se=J.isWalkIn?((B=J.clientName)==null?void 0:B.trim())||"Walk-in":J.clientName;if(wk(J.centerId,J.date,J.timeSlot).isFullyBooked){e({title:"No disponible",description:"No hay carriles disponibles en esta hora. Selecciona otra hora.",variant:"destructive"});return}let oe=A;if(J.isWalkIn)if(J.saveAsClient){console.log(" Creando perfil de cliente para WALK IN:",{name:J.clientName,phone:J.clientPhone,email:J.clientEmail});const{data:at,error:De}=await G.from("profiles").insert([{first_name:J.clientName.split(" ")[0],last_name:J.clientName.split(" ").slice(1).join(" ")||"",phone:J.clientPhone||null,email:J.clientEmail||null,role:"client"}]).select("id").single();if(De)throw console.error(" Error al crear cliente WALK IN:",De),De;console.log(" Cliente WALK IN creado exitosamente:",at),oe=at.id}else console.log(" WALK IN sin guardar como cliente:",J.clientName),oe=null;else if(!oe&&J.clientEmail){const{data:at}=await G.from("profiles").select("id").eq("email",J.clientEmail).maybeSingle();if(at)oe=at.id,await tt(at.id,{first_name:J.clientName.split(" ")[0],last_name:J.clientName.split(" ").slice(1).join(" "),phone:J.clientPhone,email:J.clientEmail});else{const{data:De,error:mt}=await G.from("profiles").insert([{email:J.clientEmail,first_name:J.clientName.split(" ")[0],last_name:J.clientName.split(" ").slice(1).join(" "),phone:J.clientPhone,role:"client"}]).select("id").single();if(mt)throw mt;oe=De.id}}const Ce=Xe.find(at=>at.id===J.serviceId);if(!Ce)throw new Error("Servicio no encontrado");let we=J.laneId;if(we)console.log("Using user-selected lane from slot click:",{laneId:we,timeSlot:J.timeSlot});else{const at=vk(J.serviceId,J.centerId);at&&(we=at.id,console.log("Auto-assigned lane for service (no specific slot):",{serviceId:J.serviceId,laneId:we,laneName:at.name}))}const Se=new Date(J.date),ze=J.timeSlot.getHours(),Je=J.timeSlot.getMinutes();Se.setHours(ze,Je,0,0);const{data:He,error:Cn}=await G.from("bookings").insert({client_id:oe,service_id:J.serviceId,center_id:J.centerId,lane_id:we,booking_datetime:Se.toISOString(),duration_minutes:Ce.duration_minutes,total_price_cents:Ce.price_cents,status:"confirmed",channel:"web",notes:J.notes||null,payment_status:"pending"}).select("id").single();if(Cn)throw Cn;if(Ar&&Qe)try{const at=Fe&&Fe>0?Math.round(Fe*100):null,{data:De,error:mt}=await G.rpc("redeem_voucher_code",{p_code:Qe.trim(),p_booking_id:(He==null?void 0:He.id)||null,p_amount_cents:at,p_notes:qt||null});if(mt)throw mt;if(e({title:" Canje aplicado",description:"Se aplic el bono/tarjeta a la reserva."}),(De==null?void 0:De.kind)==="package"&&(De!=null&&De.client_package_id))try{await G.functions.invoke("send-voucher-remaining",{body:{client_package_id:De.client_package_id}})}catch(In){console.warn("No se pudo enviar email de saldo del bono:",In)}}catch(at){e({title:"Canje no aplicado",description:at.message||"Revisa el cdigo o el importe",variant:"destructive"})}const Sn=J.isWalkIn?J.saveAsClient?` Reserva WALK IN creada y cliente ${se} guardado para futuras visitas`:` Reserva WALK IN creada${se?` para ${se}`:""}`:" Reserva Creada";e({title:Sn,description:"Reserva creada correctamente."}),m(!1),y(null),T(null),ot(""),xt(void 0),ut(""),Xn(!1),Te({clientName:"",clientPhone:"",clientEmail:"",centerId:"",laneId:"",serviceId:"",date:new Date,timeSlot:new Date,notes:""}),await mn()}catch(se){console.error("Error creating booking:",se),e({title:"Error",description:"No se pudo crear la reserva.",variant:"destructive"})}},Fv=async(B,se,be,oe,Ce)=>{var we;try{const Se=new Date(oe);Se.setHours(Ce.getHours(),Ce.getMinutes(),0,0),console.log(" Moving booking:",{bookingId:B,from:(we=gt.find(Je=>Je.id===B))==null?void 0:we.booking_datetime,to:Se.toISOString(),lane:be});const{error:ze}=await G.from("bookings").update({center_id:se,lane_id:be,booking_datetime:Se.toISOString()}).eq("id",B);if(ze)throw ze;e({title:"Reserva movida",description:"La reserva se ha movido correctamente."}),await mn()}catch(Se){console.error("Error moving booking:",Se),e({title:"Error",description:"No se pudo mover la reserva.",variant:"destructive"})}},zv=async B=>{try{if(!H)return;if(O){const[ze,...Je]=fe.trim().split(" ");await tt(O,{first_name:ze||void 0,last_name:Je.join(" ")||void 0,phone:U||void 0,email:N||void 0})}const se=Dt(H.booking_datetime),be=new Date(se);be.setHours(ve.getHours(),ve.getMinutes(),0,0);const oe=(B==null?void 0:B.paymentStatus)??ue,Ce=(B==null?void 0:B.bookingStatus)??te;if(H.payment_status==="paid"&&oe==="paid"){e({title:"Pago ya registrado",description:"Esta reserva ya fue marcada como cobrada.",variant:"destructive"});return}const we={notes:ne||null,payment_status:oe,status:Ce,service_id:ee||H.service_id,duration_minutes:ye||H.duration_minutes,booking_datetime:be.toISOString(),booking_codes:Z};O&&(we.client_id=O);const{error:Se}=await G.from("bookings").update(we).eq("id",H.id);if(Se)throw Se;B!=null&&B.paymentStatus&&$(B.paymentStatus),B!=null&&B.bookingStatus&&xe(B.bookingStatus),e({title:"Reserva actualizada",description:"Los cambios se han guardado correctamente."}),F(!1),Q(null),await mn()}catch(se){console.error("Error updating booking",se),e({title:"Error",description:"No se pudo actualizar la reserva.",variant:"destructive"})}},Bv=async B=>{try{const{error:se}=await G.from("bookings").delete().eq("id",B);if(se)throw se;e({title:" Reserva borrada",description:"Se elimin la reserva."}),F(!1),Q(null),await mn()}catch(se){console.error("Error deleting booking",se),e({title:"Error",description:"No se pudo borrar la reserva.",variant:"destructive"})}},Ck=()=>{o(i==="day"?$o(a,1):$o(a,7))},Sk=()=>{o(i==="day"?Gt(a,1):Gt(a,7))},kk=()=>o(new Date),Ek=async(B,se)=>{se.stopPropagation(),await xa(B)},Pk=()=>{var be;if(!c)return null;const B=xm(c),se=((be=Or.find(oe=>oe.id===c))==null?void 0:be.name)||"Centro";return s.jsxs(ie,{className:"w-full rounded-none border-0 sm:rounded-md sm:border",children:[s.jsxs(Ne,{className:"p-3",children:[s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:se}),s.jsx(We,{variant:"secondary",className:"ml-2 text-xs",children:ke(a,"d MMM",{locale:Ue})})]}),(t||n)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(W,{variant:_?"destructive":"outline",size:"sm",onClick:()=>{const oe=!_;x(oe),oe&&v(!1),j(null),C(null)},children:[s.jsx(Ym,{className:"w-3 h-3 mr-1"}),_?"Cancelar":"Bloquear"]}),s.jsxs(W,{variant:p?"default":"outline",size:"sm",onClick:()=>{const oe=!p;v(oe),oe&&(x(!1),M(!1),I(null),D(null))},children:[s.jsx(yg,{className:"w-3 h-3 mr-1"}),p?"Mover (on)":"Mover"]})]})]}),(_||p)&&s.jsx("div",{className:"text-xs text-muted-foreground",children:_?"Haz clic en una franja para empezar, luego en otra para definir el rango.":"Modo mover activo: arrastra una reserva y sultala en otro carril u horario."}),!_&&!p&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",s.jsx("strong",{children:"Click y arrastra"})," para crear reservas o ",s.jsx("strong",{children:"Shift + arrastra"})," para bloquear intervalos"]})]}),s.jsx(de,{className:"p-0",children:s.jsx(li,{className:"h-[85vh]",children:s.jsxs("div",{className:le("gap-0 min-w-fit select-none",E&&"cursor-grabbing",B.length===1?"grid grid-cols-[60px_1fr]":B.length===2?"grid grid-cols-[60px_repeat(2,1fr)]":B.length===3?"grid grid-cols-[60px_repeat(3,1fr)]":"grid grid-cols-[60px_repeat(4,1fr)]"),children:[s.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:s.jsx("div",{className:"p-2 text-center font-medium border-r bg-muted/50 text-sm",children:"Hora"})}),B.slice(0,4).map(oe=>s.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:s.jsxs("div",{className:"p-2 text-center font-medium border-r",style:{backgroundColor:"#f1f5f920",borderLeft:"4px solid #6b7280"},children:[s.jsx("div",{className:"font-semibold text-sm",children:(oe.name||"").replace(/ra[i]l/gi,"Carril")}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cap: ",oe.capacity]})]})},oe.id)),Iv.map((oe,Ce)=>s.jsxs("div",{className:"contents",children:[s.jsx("div",{className:"p-1 text-center text-xs border-r border-b bg-muted/30 font-medium h-6 flex items-center justify-center",children:oe.hour}),B.slice(0,4).map(we=>{var Cn,Sn,at;let Se=Mi(c,we.id,a,oe.time);if(!Se&&we.id===B[0].id){const De=gt.find(mt=>{if(!mt.booking_datetime||mt.center_id!==c||mt.lane_id)return!1;const In=Dt(mt.booking_datetime),Rt=Uy(In,mt.duration_minutes||60);return dn(In,a)&&oe.time>=In&&oe.time<Rt});De&&(Se=De)}const ze=Ti(we.id,oe.time),Je=Se&&ke(oe.time,"HH:mm")===ke(Dt(Se.booking_datetime),"HH:mm"),He=xk(we.id,oe.time);return s.jsxs("div",{className:le("relative h-6 border-r border-b cursor-pointer transition-colors",!Se&&!ze&&"hover:bg-muted/20",He&&z==="booking"&&"bg-blue-200/50 border-blue-400",He&&z==="block"&&"bg-red-200/50 border-red-400"),onMouseDown:De=>_k(c,we.id,a,oe.time,De),onMouseEnter:()=>bk(c,we.id,a,oe.time),onMouseUp:De=>jk(c,we.id,a,oe.time,De),onDragOver:De=>{De.preventDefault(),De.dataTransfer.dropEffect="move"},onDrop:De=>{if(!p)return;De.preventDefault();const mt=De.dataTransfer.getData("booking");if(mt){const In=JSON.parse(mt),Rt=we.center_id||In.center_id||c,Ft=new Date(a);Ft.setHours(oe.time.getHours(),oe.time.getMinutes(),0,0),console.log(" Drop detected (day view):",{bookingId:In.id,targetLane:we.id,targetCenter:Rt,dropDate:Ft.toISOString()}),Fv(In.id,Rt,we.id,Ft,oe.time)}},children:[Se&&Je&&s.jsx("div",{className:le("absolute top-1 left-1 right-1 rounded border-l-4 p-2 transition-all hover:shadow-md",p?"cursor-move":"cursor-pointer"),style:{backgroundColor:`${to(Se.service_id)}20`,borderLeftColor:to(Se.service_id),color:to(Se.service_id),height:`${(Se.duration_minutes||60)/5*24}px`,zIndex:2},draggable:p,onDragStart:De=>{if(!p)return;const mt={...Se,originalTimeSlot:oe.time.toISOString()};De.dataTransfer.setData("booking",JSON.stringify(mt)),De.dataTransfer.setData("text/plain",Se.id),De.dataTransfer.effectAllowed="move",De.dataTransfer.setDragImage(De.currentTarget,10,10)},children:s.jsxs("div",{className:"flex items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm font-semibold truncate",children:[(Cn=Se.profiles)==null?void 0:Cn.first_name," ",(Sn=Se.profiles)==null?void 0:Sn.last_name]}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:(at=Se.services)==null?void 0:at.name}),s.jsxs("div",{className:"text-xs font-medium",children:["",((Se.total_price_cents||0)/100).toFixed(0)," - ",ke(Dt(Se.booking_datetime),"HH:mm")]}),Se.notes&&s.jsxs("div",{className:"text-xs text-muted-foreground truncate italic mt-1",children:['" ',Se.notes,'"']}),Se.client_notes&&Se.client_notes.length>0&&s.jsxs("div",{className:"text-xs text-orange-600 truncate italic mt-1",children:['" ',Se.client_notes[0].content,'"']})]}),Se.payment_status==="paid"&&s.jsx(cy,{className:"h-4 w-4 text-green-600"})]})}),ze&&!Se&&s.jsx("div",{className:"absolute top-1 left-1 right-1 bottom-1 rounded bg-gray-400/40 border border-gray-500/60 flex items-center justify-center",onMouseDown:De=>De.stopPropagation(),onMouseEnter:De=>De.stopPropagation(),onMouseUp:De=>De.stopPropagation(),onClick:De=>De.stopPropagation(),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-700",children:"BLOQUEADO"}),s.jsx(W,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-600 hover:text-white",onClick:De=>Ek(ze.id,De),children:s.jsx(Tt,{className:"h-3 w-3"})})]})}),_&&!Se&&!ze&&s.jsx("div",{className:le("absolute top-1 left-1 right-1 bottom-1 rounded border-2 border-dashed transition-all",(b==null?void 0:b.laneId)===we.id&&(b==null?void 0:b.timeSlot.getTime())===oe.time.getTime()?"border-blue-500 bg-blue-500/10":"border-blue-300 hover:border-blue-500 hover:bg-blue-500/5"),children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(Ym,{className:"h-4 w-4 text-blue-600"})})})]},we.id)})]},Ce))]})})})]})},Tk=()=>{var oe;if(!c)return null;const B=vm(),se=xm(c),be=((oe=Or.find(Ce=>Ce.id===c))==null?void 0:oe.name)||"Centro";return s.jsxs(ie,{className:"w-full rounded-none border-0 sm:rounded-md sm:border",children:[s.jsxs(Ne,{className:"p-3",children:[s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-sm",children:["Vista Semanal - ",be]}),s.jsxs(We,{variant:"secondary",className:"ml-2 text-xs",children:[ke(B[0],"d MMM",{locale:Ue})," - ",ke(B[6],"d MMM",{locale:Ue})]})]}),(t||n)&&s.jsxs(W,{variant:_?"destructive":"outline",size:"sm",onClick:()=>{x(!_),j(null),C(null)},children:[s.jsx(Ym,{className:"w-3 h-3 mr-1"}),_?"Cancelar":"Bloquear"]})]}),_&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"Haz clic en una franja para empezar, luego en otra para definir el rango."})]}),s.jsx(de,{className:"p-0",children:s.jsx(li,{className:"h-[85vh]",children:s.jsxs("div",{className:"grid grid-cols-[50px_repeat(28,1fr)] gap-0 min-w-[1200px]",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:s.jsx("div",{className:"p-1 text-center font-medium border-r bg-muted/50 text-xs",children:"Hora"})}),B.map(Ce=>se.map(we=>s.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:s.jsxs("div",{className:"p-1 text-center font-medium border-r",style:{backgroundColor:"#f1f5f920",borderLeft:"3px solid #6b7280"},children:[s.jsxs("div",{className:"font-semibold text-[9px]",children:[ke(Ce,"EEE",{locale:Ue})," - ",(we.name||"").replace(/ra[i]l/gi,"C")]}),s.jsx("div",{className:"text-[8px] text-muted-foreground",children:ke(Ce,"d/M",{locale:Ue})})]})},`${Ce.toISOString()}-${we.id}`))),Iv.map((Ce,we)=>s.jsxs("div",{className:"contents",children:[s.jsx("div",{className:"p-0.5 text-center text-[10px] border-r border-b bg-muted/30 font-medium h-6 flex items-center justify-center",children:Ce.hour}),B.map(Se=>se.map(ze=>{var at,De,mt,In;const Je=new Date(Se);Je.setHours(Ce.time.getHours(),Ce.time.getMinutes(),0,0);const He=Mi(c,ze.id,Se,Je),Cn=Ti(ze.id,Je),Sn=He&&ke(Je,"HH:mm")===ke(Dt(He.booking_datetime),"HH:mm");return s.jsxs("div",{className:"relative h-6 border-r border-b hover:bg-muted/30 cursor-pointer transition-colors",onClick:Rt=>uc(c,ze.id,Se,Je,Rt),onDragOver:Rt=>{Rt.preventDefault(),Rt.dataTransfer.dropEffect="move"},onDrop:Rt=>{if(!p)return;Rt.preventDefault();const Ft=Rt.dataTransfer.getData("booking");if(Ft){const ya=JSON.parse(Ft),Hv=ze.center_id||ya.center_id||c;console.log(" Drop detected (week view):",{bookingId:ya.id,targetLane:ze.id,targetCenter:Hv,date:Se.toISOString(),time:Je.toISOString()}),Fv(ya.id,Hv,ze.id,Se,Je)}},children:[He&&Sn&&s.jsx("div",{className:le("absolute inset-0 rounded-sm text-[8px] p-0.5 border-l-2 truncate z-10",p?"cursor-move":"cursor-pointer"),style:{backgroundColor:`${to(He.service_id)}40`,borderLeftColor:to(He.service_id),color:to(He.service_id),height:`${(He.duration_minutes||60)/5*24}px`,minHeight:"24px"},draggable:p,onDragStart:Rt=>{p&&(Rt.dataTransfer.setData("booking",JSON.stringify(He)),Rt.dataTransfer.setData("text/plain",He.id),Rt.dataTransfer.effectAllowed="move")},children:s.jsxs("div",{className:"flex justify-between items-start h-full",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"font-medium truncate",children:[(De=(at=He.profiles)==null?void 0:at.first_name)==null?void 0:De[0],(In=(mt=He.profiles)==null?void 0:mt.last_name)==null?void 0:In[0]]})}),s.jsxs("div",{className:"flex items-center",children:[He.payment_status==="paid"&&s.jsx(cy,{className:"h-2 w-2 text-green-600"}),s.jsx(W,{variant:"ghost",size:"sm",className:"h-3 w-3 p-0 hover:bg-red-500 hover:text-white ml-1",onClick:Rt=>{Rt.stopPropagation(),Bv(He.id)},children:s.jsx(Tt,{className:"h-2 w-2"})})]})]})}),Cn&&!He&&s.jsxs("div",{className:"absolute inset-0 bg-gray-400/30 rounded-sm flex items-center justify-center",children:[s.jsx("span",{className:"text-[8px] font-medium text-gray-600 rotate-45",children:"BLOCK"}),(t||n)&&s.jsx(W,{variant:"ghost",size:"sm",className:"absolute top-0 right-0 w-4 h-4 p-0 hover:bg-red-100",onClick:Rt=>{Rt.stopPropagation();const Ft=Jn.find(ya=>ya.lane_id===ze.id&&Ce.time>=new Date(ya.start_datetime)&&Ce.time<new Date(ya.end_datetime));Ft&&xa(Ft.id)},children:s.jsx(Tt,{className:"h-2 w-2"})})]})]},`${Se.toISOString()}-${ze.id}`)}))]},we))]})})})]})};if(mr)return s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("span",{className:"ml-3",children:"Cargando calendario..."})]});console.log(" Calendar render - Mobile:",r,"Selected center:",c,"Centers:",Or.length);const Mk=r?s.jsx(lI,{selectedDate:a,selectedCenter:c,onCenterChange:d,onSlotSelect:uc}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(W,{variant:"outline",size:"icon",onClick:Ck,children:s.jsx(pg,{className:"h-4 w-4"})}),s.jsx(W,{variant:"outline",size:"icon",onClick:Sk,children:s.jsx(gg,{className:"h-4 w-4"})}),s.jsx(W,{variant:"outline",size:"sm",onClick:kk,children:"Hoy"})]}),s.jsx("div",{className:"text-lg sm:text-xl font-semibold text-center sm:text-left",children:i==="day"?ke(a,"EEEE, d 'de' MMMM yyyy",{locale:Ue}):`${ke(vm()[0],"d MMM",{locale:Ue})} - ${ke(vm()[6],"d MMM yyyy",{locale:Ue})}`})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Centro"}),s.jsx("div",{className:"space-y-2",children:Or.map(B=>{const se=c===B.id;return s.jsxs("div",{onClick:()=>{console.log(" Center changed:",B.id),d(B.id)},className:le("flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-all duration-200",se?"bg-primary/10 border-primary text-primary":"bg-background border-border hover:bg-accent/50"),children:[s.jsx(yn,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium text-sm",children:B.name})}),se&&s.jsx("div",{className:"h-4 w-4 rounded-full bg-primary flex items-center justify-center",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})})]},B.id)})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Vista"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(W,{variant:i==="day"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>l("day"),children:"Da"}),s.jsx(W,{variant:i==="week"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>l("week"),children:"Semana"})]})]})]}),_&&s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-700",children:" Modo bloqueo activo: Haz clic en una franja para empezar, luego en otra para definir el rango."})})]}),i==="day"?Pk():Tk()]}),Rk=u?s.jsx(s.Fragment,{children:s.jsx(Pr,{open:!0,onClose:()=>m(!1),maxWidth:520,mobileMaxWidth:360,maxHeight:720,children:s.jsxs("div",{className:"bg-background rounded-xl shadow-2xl border border-border/60 overflow-hidden flex flex-col w-full max-h-full",children:[s.jsxs("div",{className:"px-6 pt-6 pb-4 border-b flex-shrink-0 bg-background relative",children:[s.jsxs("button",{onClick:()=>m(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[s.jsx(Tt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Cerrar"})]}),s.jsx("h3",{className:"text-xl font-semibold",children:"Nueva Reserva"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Crear una nueva reserva para el ",w&&ke(w.timeSlot,"HH:mm")," del ",w&&ke(J.date,"d 'de' MMMM",{locale:Ue})]}),A&&s.jsxs("p",{className:"text-sm text-primary font-medium mt-2",children:["Cliente seleccionado: ",J.clientName]})]}),s.jsxs("div",{className:"px-6 py-6 overflow-y-auto flex-1 space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"walkIn",checked:J.isWalkIn||!1,onChange:B=>{const se=B.target.checked;Te(be=>({...be,isWalkIn:se,clientName:se?"":be.clientName,clientPhone:se?"":be.clientPhone,clientEmail:se?"":be.clientEmail})),se&&T(null)},className:"h-4 w-4"}),s.jsx(K,{htmlFor:"walkIn",className:"text-sm font-medium",children:"WALK IN (cliente sin datos previos)"})]}),J.isWalkIn&&s.jsxs("div",{className:"flex items-center space-x-2 pl-6",children:[s.jsx("input",{type:"checkbox",id:"saveAsClient",checked:J.saveAsClient||!1,onChange:B=>Te(se=>({...se,saveAsClient:B.target.checked})),className:"h-4 w-4"}),s.jsx(K,{htmlFor:"saveAsClient",className:"text-sm text-muted-foreground",children:"Guardar como cliente futuro"})]})]}),!J.isWalkIn&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-2",children:s.jsx(D6,{label:"Cliente habitual (opcional)",placeholder:"Buscar cliente que haya venido ms de una vez...",onSelect:B=>{T(B.id),Te(se=>({...se,clientName:`${B.first_name||""} ${B.last_name||""}`.trim(),clientPhone:B.phone||"",clientEmail:B.email||""}))}})}),s.jsxs("div",{className:"text-xs text-muted-foreground mb-2 flex items-center justify-between",children:[s.jsx("span",{children:"O crear nueva reserva para cliente nuevo:"}),s.jsx(A6,{onSelect:B=>{T(B.id),Te(se=>({...se,clientName:`${B.first_name||""} ${B.last_name||""}`.trim(),clientPhone:B.phone||"",clientEmail:B.email||""}))},children:s.jsxs(W,{variant:"outline",size:"sm",type:"button",children:[s.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Ver todos los clientes"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(K,{htmlFor:"clientName",className:"text-sm font-medium",children:[J.isWalkIn?"Nombre Walk-In":"Nombre del cliente"," ",!J.isWalkIn&&"*"]}),s.jsx(pe,{id:"clientName",value:J.clientName,onChange:B=>Te({...J,clientName:B.target.value}),placeholder:J.isWalkIn?"Nombre del cliente walk-in":"Nombre y apellidos",className:"h-11"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"clientPhone",className:"text-sm font-medium",children:"Telfono"}),s.jsx(pe,{id:"clientPhone",value:J.clientPhone,onChange:B=>Te({...J,clientPhone:B.target.value}),placeholder:"+34 600 000 000",className:"h-11"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(K,{htmlFor:"clientEmail",className:"text-sm font-medium",children:"Email"}),s.jsx(pe,{id:"clientEmail",type:"email",value:J.clientEmail,onChange:B=>Te({...J,clientEmail:B.target.value}),placeholder:"cliente@example.com",className:"h-11"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{className:"text-sm font-medium",children:"Servicio *"}),s.jsx(jr,{type:"single",collapsible:!0,defaultValue:"service",className:"w-full",children:s.jsxs(_t,{value:"service",children:[s.jsx(bt,{className:"text-left",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{children:"Seleccin de Servicio"}),J.serviceId&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",(Uv=Xe.find(B=>B.id===J.serviceId))==null?void 0:Uv.name,")"]})]})}),s.jsx(jt,{children:s.jsx("div",{className:"pt-2",children:s.jsx(cS,{mode:"individual",services:Xe.filter(B=>B.center_id===J.centerId||!B.center_id),packages:[],selectedId:J.serviceId,onSelect:B=>Te({...J,serviceId:B}),useDropdown:!1})})})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"notes",children:"Notas internas"}),s.jsx(Yt,{id:"notes",value:J.notes||"",onChange:B=>Te({...J,notes:B.target.value}),rows:3,placeholder:"Aade notas internas..."})]})]}),s.jsx("div",{className:"px-6 py-4 border-t bg-background flex-shrink-0",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(W,{variant:"outline",onClick:()=>m(!1),className:"flex-1",children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),s.jsxs(W,{onClick:Nk,className:"flex-1",disabled:!J.serviceId||!J.isWalkIn&&!J.clientName.trim(),children:[s.jsx(hi,{className:"h-4 w-4 mr-2"}),"Crear Reserva"]})]})})]})})}):null,Dk=S&&H?s.jsx(s.Fragment,{children:s.jsx(Pr,{open:!0,onClose:()=>{F(!1),Q(null)},maxWidth:520,mobileMaxWidth:360,maxHeight:720,children:s.jsxs("div",{className:"flex flex-col h-full max-h-[95vh]",children:[s.jsxs("div",{className:"px-6 pt-6 pb-4 border-b flex-shrink-0 bg-background",children:[s.jsx("h3",{className:"text-xl font-semibold",children:"Editar Reserva"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Editar reserva de ",fe," para el ",ke(ve,"HH:mm")," del ",ke(ve,"d 'de' MMMM",{locale:Ue})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 pb-28 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Nombre"}),s.jsx(pe,{value:fe,onChange:B=>he(B.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Email"}),s.jsx(pe,{value:N,onChange:B=>L(B.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Telfono"}),s.jsx(pe,{value:U,onChange:B=>V(B.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"serviceId",className:"text-sm font-medium",children:"Servicio *"}),s.jsxs(ln,{value:J.serviceId||void 0,onValueChange:B=>Te({...J,serviceId:B}),children:[s.jsx(Jt,{className:"h-11",children:s.jsx(cn,{placeholder:"Seleccionar servicio"})}),s.jsx(Zt,{position:"popper",side:"bottom",align:"center",sideOffset:2,avoidCollisions:!0,collisionPadding:8,sticky:"always",children:Xe.filter(B=>B.center_id===((H==null?void 0:H.center_id)||J.centerId)||!B.center_id).map(B=>s.jsxs(Ke,{value:B.id,children:[B.name," - ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(B.price_cents/100)," (",B.duration_minutes," min)"]},B.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Hora"}),s.jsxs(ln,{value:ke(ve,"HH:mm"),onValueChange:B=>{const[se,be]=B.split(":").map(Number),oe=new Date(ve);oe.setHours(se,be,0,0),Ye(oe)},children:[s.jsx(Jt,{children:s.jsx(cn,{})}),s.jsx(Zt,{position:"popper",side:"bottom",align:"center",sideOffset:2,avoidCollisions:!0,collisionPadding:8,sticky:"always",children:yk.map(B=>s.jsx(Ke,{value:B,children:B},B))})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(K,{children:"Duracin (min)"}),s.jsx(pe,{type:"number",min:15,step:15,value:ye,onChange:B=>me(parseInt(B.target.value||"60",10))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"payment",children:"Estado de pago"}),s.jsxs(ln,{value:ue,onValueChange:B=>$(B),children:[s.jsx(Jt,{children:s.jsx(cn,{})}),s.jsxs(Zt,{position:"popper",side:"bottom",align:"center",sideOffset:2,avoidCollisions:!0,collisionPadding:8,sticky:"always",children:[s.jsx(Ke,{value:"pending",children:"Pendiente"}),s.jsx(Ke,{value:"paid",children:"Pagado"}),s.jsx(Ke,{value:"failed",children:"Fallido"}),s.jsx(Ke,{value:"refunded",children:"Reembolsado"}),s.jsx(Ke,{value:"partial_refund",children:"Reembolso Parcial"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"bookingStatus",children:"Estado de reserva"}),s.jsxs(ln,{value:te,onValueChange:B=>xe(B),children:[s.jsx(Jt,{children:s.jsx(cn,{})}),s.jsxs(Zt,{position:"popper",side:"bottom",align:"center",sideOffset:2,avoidCollisions:!0,collisionPadding:8,sticky:"always",children:[s.jsx(Ke,{value:"pending",children:"Pendiente"}),s.jsx(Ke,{value:"requested",children:"Solicitada"}),s.jsx(Ke,{value:"confirmed",children:"Confirmada"}),s.jsx(Ke,{value:"new",children:"Nueva"}),s.jsx(Ke,{value:"online",children:"Online"}),s.jsx(Ke,{value:"completed",children:"Completada"}),s.jsx(Ke,{value:"cancelled",children:"Cancelada"}),s.jsx(Ke,{value:"no_show",children:"No Show"})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(K,{className:"text-sm font-medium flex items-center gap-1",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Cdigos de la Reserva"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:pk.map(B=>s.jsxs(We,{variant:Z.includes(B.code)?"default":"outline",className:"cursor-pointer text-xs",style:{backgroundColor:Z.includes(B.code)?B.color:"transparent",borderColor:B.color,color:Z.includes(B.code)?"white":B.color},onClick:()=>{const se=Z.includes(B.code)?Z.filter(be=>be!==B.code):[...Z,B.code];ge(se)},children:[B.code," - ",B.name]},B.id))}),((Wv=H==null?void 0:H.profiles)==null?void 0:Wv.id)&&s.jsxs("div",{children:[s.jsx(K,{className:"text-xs text-muted-foreground",children:"Cdigos del cliente:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:gk("client",H.profiles.id).map(B=>s.jsx(We,{variant:"outline",className:"text-xs",style:{borderColor:B.code_color,color:B.code_color,backgroundColor:`${B.code_color}10`},children:B.code},B.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"notesEdit",children:"Notas internas"}),s.jsx(Yt,{id:"notesEdit",value:ne,onChange:B=>Pe(B.target.value),rows:4,placeholder:"Aade notas internas..."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx(W,{size:"sm",variant:"default",className:"flex-1",onClick:()=>{zv({paymentStatus:"paid",bookingStatus:"confirmed"})},children:" Cobrar"}),s.jsxs(lv,{children:[s.jsx(cv,{asChild:!0,children:s.jsxs(W,{size:"sm",variant:"destructive",className:"flex-1",children:[s.jsx(pi,{className:"h-4 w-4 mr-2"})," Borrar"]})}),s.jsxs(tm,{className:"mx-4 sm:mx-auto",children:[s.jsxs(nm,{children:[s.jsx(sm,{children:"Borrar reserva?"}),s.jsx(am,{children:"Esta accin elimina la reserva definitivamente. No se puede deshacer."})]}),s.jsxs(rm,{className:"flex-col sm:flex-row gap-2",children:[s.jsx(im,{className:"w-full sm:w-auto",children:"Cancelar"}),s.jsx(om,{onClick:()=>Bv(H==null?void 0:H.id),className:"w-full sm:w-auto",children:"S, borrar"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(W,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{F(!1),Q(null)},children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"})," Cancelar"]}),s.jsxs(W,{size:"sm",onClick:()=>zv(),className:"flex-1",children:[s.jsx(Vb,{className:"h-4 w-4 mr-2"})," Guardar"]})]})]})]})]})})}):null;return s.jsxs(s.Fragment,{children:[Mk,Rk,Dk]})},au=({children:e,className:t,padding:n="md",maxWidth:r="7xl"})=>{const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl","6xl":"max-w-6xl","7xl":"max-w-7xl",full:"max-w-full"},o={none:"",sm:"px-2 sm:px-4",md:"px-2 sm:px-4 lg:px-6",lg:"px-4 sm:px-6 lg:px-8"};return s.jsx("div",{className:le("mx-auto w-full",a[r],o[n],t),children:e})},dS=({children:e,className:t,title:n,description:r,icon:a,padding:o="md",hover:i=!1})=>{const l={none:"p-0",sm:"p-2 sm:p-3",md:"p-3 sm:p-4",lg:"p-4 sm:p-6"};return s.jsxs(ie,{className:le("w-full",i&&"hover:shadow-md transition-shadow cursor-pointer",t),children:[(n||r)&&s.jsxs(Ne,{className:"pb-2 sm:pb-4",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base sm:text-lg",children:[a,s.jsx("span",{children:n})]}),r&&s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:r})]}),s.jsx(de,{className:l[o],children:e})]})},$6=({client:e,bookings:t,editingClient:n,newNote:r,notes:a,codes:o,clientCodes:i,onUpdateClient:l,onCreateNote:c,onUpdateEditingClient:d,onUpdateNewNote:u,onOpenEmailModal:m,onAssignCode:h,onUnassignCode:g,onCreateCode:w,getStatusColor:y,getStatusText:_})=>{const[x,p]=f.useState(!1),[v,b]=f.useState({code:"",name:"",description:"",category:"general",color:"#3B82F6"}),j="flex h-11 w-full rounded-2xl border border-border/60 bg-gradient-to-b from-slate-100 via-slate-50 to-white px-4 text-sm font-semibold text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",k=async()=>{if(!(!w||!v.code.trim()||!v.name.trim()))try{await w(v),b({code:"",name:"",description:"",category:"general",color:"#3B82F6"}),p(!1)}catch(C){console.error("Error creating code:",C)}};return s.jsxs(ys,{defaultValue:"info",className:"w-full",children:[s.jsxs(ws,{className:"grid w-full grid-cols-4 h-auto",children:[s.jsx(ct,{value:"info",className:"text-xs sm:text-sm px-2 py-2",children:"Info"}),s.jsx(ct,{value:"codes",className:"text-xs sm:text-sm px-2 py-2",children:"Cdigos"}),s.jsx(ct,{value:"bookings",className:"text-xs sm:text-sm px-2 py-2",children:"Reservas"}),s.jsx(ct,{value:"notes",className:"text-xs sm:text-sm px-2 py-2",children:"Notas"})]}),s.jsxs(st,{value:"info",className:"space-y-3 sm:space-y-4 mt-4",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-3",children:s.jsx(Ee,{className:"text-base sm:text-lg",children:"Datos del Cliente"})}),s.jsxs(de,{className:"space-y-3 sm:space-y-4 p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"first_name",className:"text-sm",children:"Nombre"}),s.jsx(pe,{id:"first_name",value:n.first_name||"",onChange:C=>d({first_name:C.target.value}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"last_name",className:"text-sm",children:"Apellidos"}),s.jsx(pe,{id:"last_name",value:n.last_name||"",onChange:C=>d({last_name:C.target.value}),className:"mt-1"})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"email",className:"text-sm",children:"Email"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(pe,{id:"email",type:"email",value:n.email||"",onChange:C=>d({email:C.target.value}),className:"flex-1"}),n.email&&s.jsx(W,{variant:"outline",size:"icon",onClick:C=>{C.stopPropagation(),m(n)},title:"Enviar email",children:s.jsx(Eu,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"phone",className:"text-sm",children:"Telfono"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(pe,{id:"phone",value:n.phone||"",onChange:C=>d({phone:C.target.value}),className:"flex-1"}),n.phone&&s.jsx(W,{variant:"outline",size:"icon",asChild:!0,children:s.jsx("a",{href:`tel:${n.phone}`,title:"Llamar",onClick:C=>C.stopPropagation(),children:s.jsx(Pu,{className:"h-4 w-4"})})})]})]}),s.jsxs(W,{onClick:l,className:"w-full mt-4",children:[s.jsx($a,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm",children:"Guardar Cambios"})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-3",children:s.jsx(Ee,{className:"text-base sm:text-lg",children:"Estadsticas"})}),s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 text-center",children:[s.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:e.total_bookings}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Reservas"})]}),s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:["",((e.total_spent||0)/100).toFixed(2)]}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Gastado"})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:e.last_booking?ke(new Date(e.last_booking),"dd/MM/yy",{locale:Ue}):"N/A"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"ltima Visita"})]})]})})]})]}),s.jsxs(st,{value:"codes",className:"space-y-4",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Kb,{className:"h-5 w-5"}),"Cdigos Asignados"]})}),s.jsx(de,{children:i.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No hay cdigos asignados"}):s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:i.map(C=>{const E=o.find(M=>M.id===C.code_id);return E?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(We,{variant:"outline",className:"text-sm",style:{borderColor:E.color,color:E.color,backgroundColor:`${E.color}15`},children:E.name}),s.jsx(W,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-muted-foreground hover:text-destructive",onClick:()=>g(C.id),children:s.jsx(Tt,{className:"h-3 w-3"})})]},C.id):null})})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"text-lg flex items-center justify-between",children:[s.jsx("span",{children:"Asignar Cdigos"}),w&&s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p(!x),children:[s.jsx(En,{className:"h-4 w-4 mr-1"}),"Crear Cdigo"]})]})}),s.jsxs(de,{children:[x&&w&&s.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/20 mb-4",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Crear Nuevo Cdigo"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"new_code",className:"text-xs",children:"Cdigo"}),s.jsx(pe,{id:"new_code",value:v.code,onChange:C=>b({...v,code:C.target.value.toUpperCase()}),placeholder:"ej. VIP",className:"text-sm"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"new_name",className:"text-xs",children:"Nombre"}),s.jsx(pe,{id:"new_name",value:v.name,onChange:C=>b({...v,name:C.target.value}),placeholder:"ej. Cliente VIP",className:"text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"new_category",className:"text-xs",children:"Categora"}),s.jsxs("select",{id:"new_category",className:j,value:v.category,onChange:C=>b({...v,category:C.target.value}),children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"vip",children:"VIP"}),s.jsx("option",{value:"behavior",children:"Comportamiento"}),s.jsx("option",{value:"preferences",children:"Preferencias"}),s.jsx("option",{value:"medical",children:"Mdico"}),s.jsx("option",{value:"payment",children:"Pago"})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"new_color",className:"text-xs",children:"Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(pe,{id:"new_color",type:"color",value:v.color,onChange:C=>b({...v,color:C.target.value}),className:"w-12 h-8 p-1"}),s.jsx("div",{className:"flex-1 border rounded px-3 flex items-center text-sm",style:{backgroundColor:v.color+"20",borderColor:v.color},children:v.color})]})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"new_description",className:"text-xs",children:"Descripcin (opcional)"}),s.jsx(Yt,{id:"new_description",value:v.description,onChange:C=>b({...v,description:C.target.value}),placeholder:"Descripcin del cdigo...",rows:2,className:"text-sm"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{size:"sm",onClick:k,disabled:!v.code.trim()||!v.name.trim(),children:"Crear y Asignar"}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>p(!1),children:"Cancelar"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(K,{className:"text-sm",children:"Cdigos disponibles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.filter(C=>!i.some(E=>E.code_id===C.id)).map(C=>s.jsxs(We,{variant:"outline",className:"cursor-pointer transition-colors hover:shadow-sm text-sm",style:{borderColor:C.color,color:C.color,backgroundColor:"transparent"},onClick:()=>h(C.id),children:["+ ",C.name]},C.id))}),o.filter(C=>!i.some(E=>E.code_id===C.id)).length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Todos los cdigos disponibles ya estn asignados"})]})]})]})]}),s.jsx(st,{value:"bookings",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-lg",children:"Historial de Reservas"})}),s.jsx(de,{children:t.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay reservas registradas"}):s.jsx(li,{className:"h-[400px]",children:s.jsx("div",{className:"space-y-3",children:t.map(C=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Nt,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:ke(new Date(C.booking_datetime),"dd/MM/yyyy HH:mm",{locale:Ue})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(yn,{className:"h-3 w-3"}),C.center_name]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx(We,{className:y(C.status),children:_(C.status)}),s.jsxs("p",{className:"text-sm font-medium mt-1",children:["",(C.total_price_cents/100).toFixed(2)]})]})]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Servicio:"})," ",C.service_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Duracin:"})," ",C.duration_minutes," min"]}),C.notes&&s.jsxs("p",{children:[s.jsx("strong",{children:"Notas:"})," ",C.notes]})]})]},C.id))})})})]})}),s.jsxs(st,{value:"notes",className:"space-y-4",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-lg",children:"Aadir Nueva Nota"})}),s.jsxs(de,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"note_title",children:"Ttulo"}),s.jsx(pe,{id:"note_title",value:r.title,onChange:C=>u({title:C.target.value}),placeholder:"Ttulo de la nota"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"note_category",children:"Categora"}),s.jsxs("select",{id:"note_category",className:j,value:r.category,onChange:C=>u({category:C.target.value}),children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"preferences",children:"Preferencias"}),s.jsx("option",{value:"medical",children:"Mdico"}),s.jsx("option",{value:"allergies",children:"Alergias"}),s.jsx("option",{value:"behavior",children:"Comportamiento"}),s.jsx("option",{value:"payment",children:"Pago"}),s.jsx("option",{value:"complaints",children:"Quejas"}),s.jsx("option",{value:"compliments",children:"Cumplidos"})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"note_priority",children:"Prioridad"}),s.jsxs("select",{id:"note_priority",className:j,value:r.priority,onChange:C=>u({priority:C.target.value}),children:[s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"Alta"}),s.jsx("option",{value:"urgent",children:"Urgente"})]})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"note_content",children:"Contenido"}),s.jsx(Yt,{id:"note_content",value:r.content,onChange:C=>u({content:C.target.value}),placeholder:"Escribe aqu el contenido de la nota...",rows:3})]}),s.jsxs(W,{onClick:c,className:"w-full",children:[s.jsx(En,{className:"h-4 w-4 mr-2"}),"Aadir Nota"]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-lg",children:"Notas Existentes"})}),s.jsx(de,{children:a.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay notas registradas"}):s.jsx(li,{className:"h-[300px]",children:s.jsx("div",{className:"space-y-3",children:a.map(C=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"font-medium",children:C.title}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(We,{variant:"outline",className:"text-xs",children:C.category}),s.jsx(We,{variant:C.priority==="urgent"?"destructive":C.priority==="high"?"default":"secondary",className:"text-xs",children:C.priority})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:C.content}),s.jsx("p",{className:"text-xs text-muted-foreground",children:ke(new Date(C.created_at),"dd/MM/yyyy HH:mm",{locale:Ue})})]},C.id))})})})]})]})]})},F6=(e,t,n)=>{const[r,a]=f.useState([]),[o,i]=f.useState(!0),[l,c]=f.useState(null),{toast:d}=kt(),u=async()=>{var _;try{i(!0),c(null);let x=G.from("client_notes").select(`
          *,
          client:profiles!client_notes_client_id_fkey (
            first_name,
            last_name,
            email
          ),
          staff:profiles!client_notes_staff_id_fkey (
            first_name,
            last_name,
            email
          )
        `);const{data:p,error:v}=await x.order("created_at",{ascending:!1}).limit(100);if(v)throw v;const b=(p==null?void 0:p.map(j=>{var k,C,E,M,R,I;return{id:j.id,client_id:j.client_id,staff_id:j.staff_id,title:j.title,content:j.content,category:j.category,priority:j.priority,is_private:j.is_private,is_alert:j.is_alert,created_at:j.created_at,updated_at:j.updated_at,client_name:`${((k=j.client)==null?void 0:k.first_name)||""} ${((C=j.client)==null?void 0:C.last_name)||""}`.trim(),client_email:((E=j.client)==null?void 0:E.email)||"",staff_name:`${((M=j.staff)==null?void 0:M.first_name)||""} ${((R=j.staff)==null?void 0:R.last_name)||""}`.trim(),staff_email:((I=j.staff)==null?void 0:I.email)||""}}))||[];a(b)}catch(x){console.error("Error fetching client notes:",x),(x==null?void 0:x.code)!=="PGRST116"&&!((_=x==null?void 0:x.message)!=null&&_.includes("permission denied"))?(c("Revisar en useClients hook"),d({title:"Error",description:"No se pudieron cargar las notas",variant:"destructive"})):c("Sin permisos para ver notas")}finally{i(!1)}},m=async _=>{var x;try{const{data:p,error:v}=await G.from("profiles").select("id").eq("user_id",(x=(await G.auth.getUser()).data.user)==null?void 0:x.id).single();if(v)throw v;const{data:b,error:j}=await G.from("client_notes").insert([{..._,staff_id:p.id,category:_.category||"general",priority:_.priority||"normal",is_private:_.is_private||!1,is_alert:_.is_alert||!1}]).select().single();if(j)throw j;return await u(),d({title:"xito",description:"Nota creada correctamente"}),b}catch(p){throw console.error("Error creating note:",p),d({title:"Error",description:"No se pudo crear la nota",variant:"destructive"}),p}},h=async(_,x)=>{try{const{error:p}=await G.from("client_notes").update(x).eq("id",_);if(p)throw p;await u(),d({title:"xito",description:"Nota actualizada correctamente"})}catch(p){console.error("Error updating note:",p),d({title:"Error",description:"No se pudo actualizar la nota",variant:"destructive"})}},g=async _=>{try{const{error:x}=await G.from("client_notes").delete().eq("id",_);if(x)throw x;await u(),d({title:"xito",description:"Nota eliminada correctamente"})}catch(x){console.error("Error deleting note:",x),d({title:"Error",description:"No se pudo eliminar la nota",variant:"destructive"})}},w=async(_,x)=>{try{const{error:p}=await G.from("client_notes").update({is_alert:x}).eq("id",_);if(p)throw p;await u(),d({title:"xito",description:x?"Alerta activada":"Alerta desactivada"})}catch(p){console.error("Error toggling alert:",p),d({title:"Error",description:"No se pudo cambiar el estado de la alerta",variant:"destructive"})}};return f.useEffect(()=>{u()},[e,t,n]),{notes:r,loading:o,error:l,refetch:()=>{u()},createNote:m,updateNote:h,deleteNote:g,toggleAlert:w}};function z6(){const{clients:e,loading:t,error:n,updateClient:r,fetchClientBookings:a}=mm(),{codes:o,assignments:i,getAssignmentsByEntity:l,createCode:c,assignCode:d,unassignCode:u}=ic();kt();const m=dr(),[h,g]=f.useState(""),[w,y]=f.useState([]),_=p=>l("client",p),x=e.filter(p=>{var R,I;const v=`${p.first_name} ${p.last_name}`.toLowerCase(),b=((R=p.email)==null?void 0:R.toLowerCase())||"",j=((I=p.phone)==null?void 0:I.toLowerCase())||"",k=h.toLowerCase(),C=v.includes(k)||b.includes(k)||j.includes(k);if(w.length===0)return C;const M=_(p.id).map(P=>P.code);return C&&w.some(P=>M.includes(P))});return f.useEffect(()=>{document.title="Gestin de Clientes | The Nook Madrid"},[]),t?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Cargando clientes..."})]})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-40",children:s.jsx(au,{padding:"md",children:s.jsx("h1",{className:`font-bold text-foreground no-underline ${m?"text-lg":"text-2xl"}`,children:"Gestin de Clientes - The Nook Madrid"})})}),s.jsx("main",{className:"py-4 sm:py-8",children:s.jsx(au,{maxWidth:"7xl",padding:"md",children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Va,{className:"h-5 w-5"}),"Buscar y Filtrar Clientes"]})}),s.jsxs(de,{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{type:"text",placeholder:"Buscar por nombre, email o telfono...",value:h,onChange:p=>g(p.target.value),className:"pl-10"}),h&&s.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>g(""),children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(K,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Hb,{className:"h-4 w-4"}),"Filtrar por cdigos"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>s.jsx(We,{variant:w.includes(p.code)?"default":"outline",className:"cursor-pointer transition-colors",style:{backgroundColor:w.includes(p.code)?p.color:"transparent",borderColor:p.color,color:w.includes(p.code)?"white":p.color},onClick:()=>{y(v=>v.includes(p.code)?v.filter(b=>b!==p.code):[...v,p.code])},children:p.name},p.id))}),w.length>0&&s.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>y([]),className:"text-xs",children:[s.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Limpiar filtros"]})]}),(h||w.length>0)&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.length," cliente(s) encontrado(s)"]})]})]}),x.length===0&&h?s.jsx(ie,{children:s.jsxs(de,{className:"text-center py-8",children:[s.jsx(Gn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No se encontraron clientes"}),s.jsxs("p",{className:"text-muted-foreground",children:['No hay clientes que coincidan con "',h,'"']})]})}):s.jsx("div",{className:"space-y-4 sm:space-y-6",children:x.map(p=>s.jsx(dS,{className:"client-card",padding:"sm",children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:`${m?"space-y-3":"flex justify-between items-start"}`,children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`font-semibold flex items-center gap-2 ${m?"text-base":"text-lg"}`,children:[s.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),p.first_name," ",p.last_name]}),s.jsxs("div",{className:`${m?"flex flex-col gap-1":"flex items-center gap-4"} text-xs sm:text-sm text-muted-foreground`,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:p.email})]}),p.phone&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pu,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:p.phone})]})]}),(()=>{const v=_(p.id);return v.length>0?s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[s.jsx(Kb,{className:"h-3 w-3 text-muted-foreground"}),v.map(b=>{const j=o.find(k=>k.id===b.code_id);return j?s.jsx(We,{variant:"outline",className:"text-xs",style:{borderColor:j.color,color:j.color,backgroundColor:`${j.color}10`},children:j.name},b.id):null})]}):null})()]}),s.jsx("div",{className:`${m?"flex justify-between items-center":"text-right"} space-y-2`,children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`font-bold text-primary ${m?"text-base":"text-lg"}`,children:[(p.total_spent||0)/100," gastados"]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[p.total_bookings||0," citas"]})]})})]}),s.jsxs("div",{className:`grid gap-3 sm:gap-4 ${m?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:[s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Fecha registro"}),s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:ke(new Date(p.created_at),"dd/MM/yyyy",{locale:Ue})})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"ltima cita"}),s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:p.last_booking?ke(new Date(p.last_booking),"dd/MM/yyyy",{locale:Ue}):"Sin citas"})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Estado"}),s.jsx(We,{className:p.total_bookings?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:p.total_bookings?"Activo":"Nuevo"})]})]}),s.jsx("div",{className:`pt-3 sm:pt-4 border-t ${m?"flex justify-center":"flex justify-end"}`,children:s.jsx(B6,{client:p,onClientUpdated:()=>{}})})]})},p.id))})]})})})]})}function B6({client:e,onClientUpdated:t}){const{isOpen:n,handleOpenModal:r,closeModal:a,modalStyle:o}=JN({anchorSelector:".client-card"}),[i,l]=f.useState(null),[c,d]=f.useState([]),[u,m]=f.useState({first_name:"",last_name:"",email:"",phone:""}),{toast:h}=kt(),g=dr(),{updateClient:w,fetchClientBookings:y}=mm(),{codes:_,assignCode:x,unassignCode:p,getAssignmentsByEntity:v,createCode:b}=ic(),{notes:j,createNote:k}=F6(),[C,E]=f.useState({title:"",content:"",category:"general",priority:"normal"}),M=async F=>{r(F);const H=await y(e.id);d(H),l(null)},R=()=>{l(e),m({first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone||""})},I=async()=>{if(i)try{await w(i.id,u),l(null),t(),h({title:"xito",description:"Cliente actualizado correctamente"})}catch(F){console.error("Error updating client:",F),h({title:"Error",description:"No se pudo actualizar el cliente",variant:"destructive"})}},P=()=>{a(),l(null)},D=async F=>{try{await x({code_id:F,entity_type:"client",entity_id:e.id,notes:""}),h({title:"Cdigo asignado",description:"El cdigo se ha asignado correctamente al cliente"})}catch{h({title:"Error",description:"No se pudo asignar el cdigo",variant:"destructive"})}},z=async F=>{try{await p(F),h({title:"Cdigo removido",description:"El cdigo se ha removido correctamente del cliente"})}catch{h({title:"Error",description:"No se pudo remover el cdigo",variant:"destructive"})}},Y=async()=>{try{await k({...C,client_id:e.id}),E({title:"",content:"",category:"general",priority:"normal"}),h({title:"Nota creada",description:"La nota se ha creado correctamente"})}catch{h({title:"Error",description:"No se pudo crear la nota",variant:"destructive"})}},A=async F=>{try{const H=await b(F);H&&(await x({code_id:H.id,entity_type:"client",entity_id:e.id,notes:"Cdigo creado y asignado desde gestin de cliente"}),h({title:"Cdigo creado y asignado",description:`El cdigo "${F.name}" se ha creado y asignado al cliente`}))}catch(H){throw console.error("Error creating and assigning code:",H),h({title:"Error",description:"No se pudo crear el cdigo",variant:"destructive"}),H}},T=F=>{switch(F){case"completed":return"bg-green-100 text-green-800";case"confirmed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},S=F=>{switch(F){case"completed":return"Completada";case"confirmed":return"Confirmada";case"cancelled":return"Cancelada";case"no_show":return"No vino";case"pending":return"Pendiente";default:return F}};return s.jsxs(s.Fragment,{children:[s.jsxs(W,{onClick:M,className:"flex items-center gap-2",variant:"outline",children:[s.jsx(Wb,{className:"h-4 w-4"}),"Ver Detalles"]}),s.jsx(Pr,{open:n,onClose:P,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:s.jsxs("div",{className:`${g?"p-4":"p-6"}`,children:[s.jsxs("div",{className:`flex items-center justify-between ${g?"mb-4":"mb-6"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx(Gn,{className:`text-primary ${g?"h-5 w-5":"h-6 w-6"}`}),s.jsxs("h3",{className:`font-semibold ${g?"text-lg":"text-xl"}`,children:[e.first_name," ",e.last_name]})]}),s.jsx(W,{variant:"outline",size:"sm",onClick:P,className:"h-8 w-8 p-0",children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsx($6,{client:e,bookings:c,editingClient:i?u:e,newNote:C,notes:j.filter(F=>F.client_id===e.id),codes:_,clientCodes:v("client",e.id),onUpdateClient:i?I:R,onCreateNote:Y,onUpdateEditingClient:F=>m(H=>({...H,...F})),onUpdateNewNote:F=>E(H=>({...H,...F,category:F.category||H.category,priority:F.priority||H.priority})),onOpenEmailModal:()=>{},onAssignCode:D,onUnassignCode:z,onCreateCode:A,getStatusColor:T,getStatusText:S})]})})]})}function Vr({className:e,...t}){return s.jsx("div",{className:le("animate-pulse rounded-md bg-muted",e),...t})}const U6=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null),{toast:l}=kt(),c=async()=>{try{a(!0),i(null);let w=G.from("client_packages").select(`
          *,
          packages!inner(
            name,
            description,
            service_id,
            services(name, type)
          ),
          profiles!inner(
            first_name,
            last_name,
            email
          )
        `).order("created_at",{ascending:!1});e&&(w=w.eq("client_id",e));const{data:y,error:_}=await w;if(_)throw _;n(y||[])}catch(w){console.error("Error fetching client packages:",w),i("Error al cargar los bonos"),l({title:"Error",description:"No se pudieron cargar los bonos",variant:"destructive"})}finally{a(!1)}},d=async w=>{try{const{data:y,error:_}=await G.rpc("generate_voucher_code");if(_)throw _;const x={...w,voucher_code:y},{data:p,error:v}=await G.from("client_packages").insert([x]).select(`
          *,
          packages!inner(
            name,
            description,
            service_id,
            services(name, type)
          ),
          profiles!inner(
            first_name,
            last_name,
            email
          )
        `).single();if(v)throw v;return n(b=>[p,...b]),l({title:"xito",description:`Bono creado con cdigo: ${p.voucher_code}`}),p}catch(y){throw console.error("Error creating package:",y),l({title:"Error",description:"No se pudo crear el bono",variant:"destructive"}),y}},u=async(w,y)=>{try{const{data:_,error:x}=await G.rpc("use_client_package_session",{package_id:w,booking_id:y});if(x)throw x;return _?(await c(),l({title:"xito",description:"Sesin del bono utilizada correctamente"}),!0):(l({title:"Error",description:"No se pudo usar la sesin del bono (puede estar agotado)",variant:"destructive"}),!1)}catch(_){return console.error("Error using package session:",_),l({title:"Error",description:"Error al usar la sesin del bono",variant:"destructive"}),!1}},m=async w=>{try{const{error:y}=await G.from("client_packages").update({status:"cancelled"}).eq("id",w);if(y)throw y;await c(),l({title:"xito",description:"Bono cancelado correctamente"})}catch(y){console.error("Error cancelling package:",y),l({title:"Error",description:"No se pudo cancelar el bono",variant:"destructive"})}},h=async(w,y)=>{try{const{error:_}=await G.from("client_packages").update({notes:y}).eq("id",w);if(_)throw _;await c(),l({title:"xito",description:"Notas actualizadas correctamente"})}catch(_){console.error("Error updating package notes:",_),l({title:"Error",description:"No se pudieron actualizar las notas",variant:"destructive"})}};return f.useEffect(()=>{c()},[e]),{packages:t,loading:r,error:o,refetch:()=>{c()},createPackage:d,usePackageSession:u,cancelPackage:m,updatePackageNotes:h}},W6=(e=7)=>{const[t,n]=f.useState([]),[r,a]=f.useState(!1),[o,i]=f.useState(null),l=()=>{a(!1),n([]),i(null)};return f.useEffect(()=>{l()},[e]),{expiringPackages:t,loading:r,error:o,refetch:l}};function uS(e){const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null),{toast:l}=kt(),c=async()=>{try{a(!0),i(null);let h=G.from("gift_cards").select(`
          *,
          profiles (
            id,
            first_name,
            last_name,
            email
          )
        `).order("created_at",{ascending:!1});e&&(h=h.or(`code.ilike.%${e}%,purchased_by_name.ilike.%${e}%,purchased_by_email.ilike.%${e}%`));const{data:g,error:w}=await h;if(w)throw w;n((g||[]).map(y=>({...y,total_sessions:y.total_sessions??0,remaining_sessions:y.remaining_sessions??0})))}catch(h){console.error("Error fetching gift cards:",h),i(h instanceof Error?h.message:"Error desconocido")}finally{a(!1)}},d=async h=>{try{const{data:g,error:w}=await G.from("gift_cards").insert({initial_balance_cents:h.initial_balance_cents,remaining_balance_cents:h.initial_balance_cents,status:"active",total_sessions:h.total_sessions??0,remaining_sessions:h.remaining_sessions??h.total_sessions??0,assigned_client_id:h.assigned_client_id,purchased_by_email:h.purchased_by_email,purchased_by_name:h.purchased_by_name}).select().single();if(w)throw w;return l({title:"Tarjeta regalo creada",description:`Se ha creado la tarjeta con cdigo ${g.code}`}),g}catch(g){throw console.error("Error creating gift card:",g),l({title:"Error",description:"No se pudo crear la tarjeta regalo",variant:"destructive"}),g}},u=async(h,g)=>{try{const{error:w}=await G.from("gift_cards").update(g).eq("id",h);if(w)throw w;return l({title:"Tarjeta actualizada",description:"Los cambios se han guardado correctamente"}),!0}catch(w){return console.error("Error updating gift card:",w),l({title:"Error",description:"No se pudo actualizar la tarjeta regalo",variant:"destructive"}),!1}},m=async h=>{try{const{error:g}=await G.from("gift_cards").update({status:"expired"}).eq("id",h);if(g)throw g;return l({title:"Tarjeta desactivada",description:"La tarjeta regalo ha sido desactivada"}),!0}catch(g){return console.error("Error deactivating gift card:",g),l({title:"Error",description:"No se pudo desactivar la tarjeta regalo",variant:"destructive"}),!1}};return f.useEffect(()=>{c()},[e]),{giftCards:t,loading:r,error:o,refetch:c,createGiftCard:d,updateGiftCard:u,deactivateGiftCard:m}}function H6(e=30){const[t,n]=f.useState([]),[r,a]=f.useState(!0),[o,i]=f.useState(null),l=async()=>{try{a(!0),i(null);const c=new Date;c.setDate(c.getDate()+e);const{data:d,error:u}=await G.from("gift_cards").select(`
          *,
          profiles (
            id,
            first_name,
            last_name,
            email
          )
        `).eq("status","active").not("expiry_date","is",null).lte("expiry_date",c.toISOString()).order("expiry_date",{ascending:!0});if(u)throw u;n(d||[])}catch(c){console.error("Error fetching expiring gift cards:",c),i(c instanceof Error?c.message:"Error desconocido")}finally{a(!1)}};return f.useEffect(()=>{l()},[e]),{expiringGiftCards:t,loading:r,error:o,refetch:l}}const q6=()=>{const[e,t]=f.useState("");f.useState(!1);const[n,r]=f.useState(null),[a,o]=f.useState("");f.useState(""),f.useState(null),f.useState();const[i,l]=f.useState(""),{packages:c,loading:d,error:u,refetch:m,createPackage:h,usePackageSession:g,cancelPackage:w,updatePackageNotes:y}=U6(e),[_,x]=f.useState(7);W6(_),XN(),f.useState("");const{giftCards:p,loading:v,error:b,refetch:j,createGiftCard:k,updateGiftCard:C,deactivateGiftCard:E}=uS(i),[M,R]=f.useState(30);H6(M),f.useState("");const I=S=>{switch(S){case"active":return"bg-green-100 text-green-800 border-green-300";case"expired":return"bg-red-100 text-red-800 border-red-300";case"used_up":return"bg-gray-100 text-gray-800 border-gray-300";case"cancelled":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},P=S=>{switch(S){case"active":return"Activo/a";case"expired":return"Expirado/a";case"used_up":return"Agotado/a";case"cancelled":return"Cancelado/a";default:return S}},D=(S,F)=>Math.round(S/F*100),z=async S=>{await g(S)&&m()},Y=async S=>{await w(S),m()},A=async S=>{await y(S,a),r(null),o(""),m()},T=(S,F)=>{r(S),o(F||"")};return d||v?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((S,F)=>s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Vr,{className:"h-6 w-32"})}),s.jsxs(de,{children:[s.jsx(Vr,{className:"h-8 w-16 mb-2"}),s.jsx(Vr,{className:"h-4 w-24"})]})]},F))})}):u||b?s.jsx("div",{className:"space-y-6",children:s.jsx(ie,{children:s.jsx(de,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ub,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-500 mb-4",children:u||b}),s.jsxs(W,{onClick:()=>{m(),j()},variant:"outline",children:[s.jsx(Dl,{className:"mr-2 h-4 w-4"}),"Reintentar"]})]})})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gestin de Bonos"}),s.jsx("p",{className:"text-muted-foreground",children:"Administra los bonos y paquetes de sesiones"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(W,{onClick:m,variant:"outline",size:"sm",children:[s.jsx(Dl,{className:"mr-2 h-4 w-4"}),"Actualizar"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ee,{className:"text-sm font-medium",children:"Bonos Activos"}),s.jsx(La,{className:"h-4 w-4 text-green-500"})]}),s.jsx(de,{children:s.jsx("div",{className:"text-2xl font-bold",children:c.filter(S=>S.status==="active").length})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ee,{className:"text-sm font-medium",children:"Valor Bonos"}),s.jsx(Bd,{className:"h-4 w-4 text-green-500"})]}),s.jsx(de,{children:s.jsxs("div",{className:"text-2xl font-bold",children:["",c.reduce((S,F)=>S+F.purchase_price_cents/100,0).toFixed(2)]})})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(pe,{placeholder:"Buscar bonos por cdigo o cliente...",value:i,onChange:S=>l(S.target.value),className:"pl-10"})]})}),s.jsxs(ys,{defaultValue:"bonos-all",className:"w-full",children:[s.jsxs(ws,{className:"grid w-full grid-cols-2",children:[s.jsx(ct,{value:"bonos-all",children:"Todos los Bonos"}),s.jsx(ct,{value:"bonos-active",children:"Solo Bonos Activos"})]}),s.jsx(st,{value:"bonos-all",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Todos los Bonos"})}),s.jsx(de,{children:c.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(La,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No hay bonos registrados"})]}):s.jsx("div",{className:"space-y-4",children:c.map(S=>{var F,H,Q,O;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm font-medium",children:["Cdigo: ",s.jsx("span",{className:"font-mono",children:S.voucher_code})]}),s.jsx(We,{className:I(S.status),children:P(S.status)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[S.status==="active"&&s.jsx(W,{size:"sm",variant:"outline",onClick:()=>z(S.id),children:"Usar Sesin"}),s.jsx(W,{size:"sm",variant:"outline",onClick:()=>T(S.id,S.notes||""),children:s.jsx(qb,{className:"h-4 w-4"})}),S.status==="active"&&s.jsxs(lv,{children:[s.jsx(cv,{asChild:!0,children:s.jsx(W,{size:"sm",variant:"destructive",children:s.jsx(pi,{className:"h-4 w-4"})})}),s.jsxs(tm,{children:[s.jsxs(nm,{children:[s.jsx(sm,{children:"Cancelar bono?"}),s.jsx(am,{children:"Esta accin no se puede deshacer. El bono ser marcado como cancelado."})]}),s.jsxs(rm,{children:[s.jsx(im,{children:"Cancelar"}),s.jsx(om,{onClick:()=>Y(S.id),children:"Confirmar"})]})]})]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm font-medium",children:[(F=S.profiles)==null?void 0:F.first_name," ",(H=S.profiles)==null?void 0:H.last_name]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(Q=S.profiles)==null?void 0:Q.email})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(La,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:(O=S.packages)==null?void 0:O.name})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${D(S.used_sessions,S.total_sessions)}%`}})}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[S.used_sessions,"/",S.total_sessions]})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bd,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm font-medium",children:["",(S.purchase_price_cents/100).toFixed(2)]})]})})]}),n===S.id&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx(Yt,{value:a,onChange:q=>o(q.target.value),placeholder:"Agregar notas..."}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(W,{size:"sm",variant:"outline",onClick:()=>r(null),children:"Cancelar"}),s.jsx(W,{size:"sm",onClick:()=>A(S.id),children:"Guardar"})]})]})]},S.id)})})})]})}),s.jsx(st,{value:"bonos-active",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Bonos Activos"})}),s.jsx(de,{children:s.jsx("div",{className:"space-y-4",children:c.filter(S=>S.status==="active").map(S=>{var F,H;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm font-medium",children:["Cdigo: ",s.jsx("span",{className:"font-mono",children:S.voucher_code})]}),s.jsx(We,{className:I(S.status),children:P(S.status)})]}),s.jsx(W,{size:"sm",onClick:()=>z(S.id),children:"Usar Sesin"})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[(F=S.profiles)==null?void 0:F.first_name," ",(H=S.profiles)==null?void 0:H.last_name]}),s.jsxs("div",{className:"text-sm",children:[S.used_sessions,"/",S.total_sessions," sesiones"]})]})]},S.id)})})})]})})]})]})},mS=f.createContext(null),V6=()=>{const e=f.useContext(mS);if(!e)throw new Error("Dialog components must be used within <Dialog>");return e},G6=e=>e?e.closest("[data-modal-anchor]")||e.closest("[data-dialog-anchor]")||e.closest(".client-card")||e:null,Fa=({open:e,defaultOpen:t,onOpenChange:n,children:r,...a})=>{const[o,i]=f.useState(t??!1),l=f.useRef(null),c=e!==void 0,d=f.useCallback(h=>{c||i(h),h||(l.current=null),n==null||n(h)},[c,n]),u=c?!!e:o,m=f.useCallback(h=>{l.current=G6(h)},[]);return s.jsx(mS.Provider,{value:{isOpen:u,setOpen:d,setAnchor:m,anchorRef:l},children:s.jsx(dC,{open:u,defaultOpen:t,onOpenChange:d,...a,children:r})})},jv=f.forwardRef(({onPointerDown:e,onClick:t,...n},r)=>{const{setAnchor:a}=V6(),o=f.useCallback(l=>{e==null||e(l),l.defaultPrevented||a(l.currentTarget)},[e,a]),i=f.useCallback(l=>{t==null||t(l),!l.defaultPrevented&&l.detail===0&&a(l.currentTarget)},[t,a]);return s.jsx(nv,{ref:r,onPointerDown:o,onClick:i,...n})});jv.displayName=nv.displayName;const K6=uC,hS=f.forwardRef(({className:e,...t},n)=>s.jsx(rv,{ref:n,className:le("fixed inset-0 z-[99] bg-black/50 backdrop-blur-[2px] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));hS.displayName=rv.displayName;const Zs=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(K6,{children:[s.jsx(hS,{}),s.jsxs(sv,{ref:r,className:le("fixed left-1/2 top-1/2 z-[100] w-[calc(100vw-40px)] max-w-[500px] -translate-x-1/2 -translate-y-1/2 rounded-xl border border-border bg-background shadow-2xl p-6 max-h-[min(600px,calc(100vh-40px))] overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",e),...n,children:[t,s.jsxs(iv,{className:"absolute right-4 top-4 inline-flex h-8 w-8 items-center justify-center rounded-full border border-border bg-background text-muted-foreground shadow-sm transition hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Tt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zs.displayName=sv.displayName;const ea=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ea.displayName="DialogHeader";const fS=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fS.displayName="DialogFooter";const ta=f.forwardRef(({className:e,...t},n)=>s.jsx(av,{ref:n,className:le("text-lg font-semibold leading-none tracking-tight",e),...t}));ta.displayName=av.displayName;const Bo=f.forwardRef(({className:e,...t},n)=>s.jsx(ov,{ref:n,className:le("text-sm text-muted-foreground",e),...t}));Bo.displayName=ov.displayName;const pS=(e,t=100)=>{const n=f.useRef(null),r=f.useCallback(()=>{n.current&&e&&setTimeout(()=>{var a;(a=n.current)==null||a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},t)},[e,t]);return f.useEffect(()=>{r()},[r]),f.useEffect(()=>{if(!e)return;const a=()=>{r()};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[e,r]),n},gS=({children:e,isOpen:t=!1,autoScroll:n=!0,delay:r=100,className:a})=>{const o=pS(t&&n,r),i=f.useRef(null);return f.useEffect(()=>{o&&i.current&&(o.current=i.current)},[o]),s.jsx("div",{ref:i,className:a,children:e})},Y6=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(null),[a,o]=f.useState(!1);f.useState(),f.useState(null),f.useState(null);const{giftCards:i,loading:l,error:c,refetch:d,createGiftCard:u,updateGiftCard:m,deactivateGiftCard:h}=uS(e);f.useState("");const g=v=>{switch(v){case"active":return"bg-green-100 text-green-800 border-green-300";case"expired":return"bg-red-100 text-red-800 border-red-300";case"used_up":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},w=v=>{switch(v){case"active":return"Activa";case"expired":return"Expirada";case"used_up":return"Agotada";default:return v}},y=(v,b)=>!b||b<=0?0:Math.round((b-v)/b*100),_=(v,b)=>!b||b<=0||v==null?0:Math.round((b-v)/b*100),x=async(v,b)=>{await m(v,b)&&(r(null),o(!1),d())},p=async v=>{await h(v)&&d()};return l?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((v,b)=>s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Vr,{className:"h-6 w-32"})}),s.jsxs(de,{children:[s.jsx(Vr,{className:"h-8 w-16 mb-2"}),s.jsx(Vr,{className:"h-4 w-24"})]})]},b))}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Vr,{className:"h-6 w-40"})}),s.jsx(de,{children:s.jsx("div",{className:"space-y-4",children:[...Array(3)].map((v,b)=>s.jsx(Vr,{className:"h-20 w-full"},b))})})]})]}):c?s.jsx("div",{className:"space-y-6",children:s.jsx(ie,{children:s.jsx(de,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ub,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-500 mb-4",children:c}),s.jsxs(W,{onClick:d,variant:"outline",children:[s.jsx(Dl,{className:"mr-2 h-4 w-4"}),"Reintentar"]})]})})})}):s.jsxs("div",{className:"space-y-4 sm:space-y-6 px-2 sm:px-4 lg:px-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold truncate",children:"Gestin de Tarjetas Regalo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Administra las tarjetas regalo y su saldo"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:s.jsxs(W,{onClick:d,variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[s.jsx(Dl,{className:"mr-2 h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Actualizar"}),s.jsx("span",{className:"sm:hidden",children:"Actualizar"})]})})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(pe,{placeholder:"Buscar por cdigo, nombre o email...",value:e,onChange:v=>t(v.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[s.jsx(Ee,{className:"text-xs sm:text-sm font-medium",children:"Tarjetas Activas"}),s.jsx(xg,{className:"h-4 w-4 text-green-500"})]}),s.jsx(de,{className:"p-3 sm:p-6 pt-0",children:s.jsx("div",{className:"text-lg sm:text-2xl font-bold",children:i.filter(v=>v.status==="active").length})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[s.jsx(Ee,{className:"text-xs sm:text-sm font-medium",children:"Valor Total Activo"}),s.jsx(Bd,{className:"h-4 w-4 text-blue-500"})]}),s.jsx(de,{className:"p-3 sm:p-6 pt-0",children:s.jsxs("div",{className:"text-lg sm:text-2xl font-bold",children:["",i.filter(v=>v.status==="active").reduce((v,b)=>v+b.remaining_balance_cents/100,0).toFixed(2)]})})]})]}),s.jsxs(ys,{defaultValue:"all",className:"w-full",children:[s.jsxs(ws,{className:"grid w-full grid-cols-2 h-auto p-1",children:[s.jsx(ct,{value:"all",className:"text-xs sm:text-sm px-2 py-2",children:"Todas"}),s.jsx(ct,{value:"active",className:"text-xs sm:text-sm px-2 py-2",children:"Activas"})]}),s.jsx(st,{value:"all",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Todas las Tarjetas Regalo"})}),s.jsx(de,{children:i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ml,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No hay tarjetas regalo registradas"})]}):s.jsx("div",{className:"space-y-3 sm:space-y-4",children:i.map(v=>{var b;return s.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 min-w-0",children:[s.jsxs("div",{className:"text-xs sm:text-sm font-medium truncate",children:["Cdigo: ",s.jsx("span",{className:"font-mono",children:v.code})]}),s.jsx(We,{className:`${g(v.status)} text-xs`,children:w(v.status)})]}),s.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[s.jsx(W,{size:"sm",variant:"outline",onClick:()=>{r({...v}),o(!0)},className:"h-8 w-8 p-0",children:s.jsx(qb,{className:"h-3 w-3"})}),v.status==="active"&&s.jsxs(lv,{children:[s.jsx(cv,{asChild:!0,children:s.jsx(W,{size:"sm",variant:"destructive",className:"h-8 w-8 p-0",children:s.jsx(pi,{className:"h-3 w-3"})})}),s.jsxs(tm,{className:"max-w-md mx-auto",children:[s.jsxs(nm,{children:[s.jsx(sm,{children:"Desactivar tarjeta regalo?"}),s.jsx(am,{children:"Esta accin marcar la tarjeta como expirada. El saldo restante se perder."})]}),s.jsxs(rm,{className:"flex-col sm:flex-row gap-2",children:[s.jsx(im,{className:"w-full sm:w-auto",children:"Cancelar"}),s.jsx(om,{onClick:()=>p(v.id),className:"w-full sm:w-auto",children:"Confirmar"})]})]})]})]})]}),s.jsxs("div",{className:"mt-3 space-y-2 sm:mt-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0",children:[s.jsxs("div",{className:"min-w-0",children:[v.profiles?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium truncate",children:[v.profiles.first_name," ",v.profiles.last_name]})]}):s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:v.purchased_by_name||"Sin asignar"}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((b=v.profiles)==null?void 0:b.email)||v.purchased_by_email||""})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bd,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium truncate",children:["",(v.remaining_balance_cents/100).toFixed(2)," / ",(v.initial_balance_cents/100).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${100-y(v.remaining_balance_cents,v.initial_balance_cents)}%`}})}),s.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[100-y(v.remaining_balance_cents,v.initial_balance_cents),"%"]})]}),(v.total_sessions??0)>0&&s.jsxs("div",{className:"mt-3 space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium truncate",children:[v.remaining_sessions??0," / ",v.total_sessions??0," sesiones"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${100-_(v.remaining_sessions,v.total_sessions)}%`}})}),s.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[100-_(v.remaining_sessions,v.total_sessions),"%"]})]})]})]}),s.jsx("div",{className:"min-w-0",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Creada: ",ke(new Date(v.created_at),"dd/MM/yyyy",{locale:Ue})]})})]})]},v.id)})})})]})}),s.jsx(st,{value:"active",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Tarjetas Activas"})}),s.jsx(de,{children:s.jsx("div",{className:"space-y-4",children:i.filter(v=>v.status==="active").map(v=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm font-medium",children:["Cdigo: ",s.jsx("span",{className:"font-mono",children:v.code})]}),s.jsx(We,{className:g(v.status),children:w(v.status)})]})}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:["Saldo: ",(v.remaining_balance_cents/100).toFixed(2)]}),v.profiles&&s.jsxs("div",{className:"text-sm",children:[v.profiles.first_name," ",v.profiles.last_name]})]}),(v.total_sessions??0)>0&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Sesiones restantes: ",v.remaining_sessions??0," / ",v.total_sessions??0]})]},v.id))})})]})})]}),s.jsx(Fa,{modal:!0,open:a,onOpenChange:v=>{o(v),v||r(null)},children:s.jsx(Zs,{className:"p-0 sm:max-w-lg",children:s.jsxs(gS,{isOpen:a,className:"flex flex-col gap-6 p-6",children:[s.jsxs(ea,{className:"px-4 sm:px-6 pt-4 pb-3 border-b bg-background text-left",children:[s.jsx(ta,{children:"Editar Tarjeta Regalo"}),s.jsx(Bo,{children:"Modifica los datos de la tarjeta regalo"})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Cdigo"}),s.jsx(pe,{value:n.code,disabled:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Saldo restante ()"}),s.jsx(pe,{type:"number",step:"0.01",value:(n.remaining_balance_cents/100).toString(),onChange:v=>{const b=parseFloat(v.target.value||"0"),j=Number.isNaN(b)?0:Math.round(b*100);r({...n,remaining_balance_cents:j})}})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Sesiones totales"}),s.jsx(pe,{type:"number",min:"0",value:String(n.total_sessions??0),onChange:v=>{const b=parseInt(v.target.value||"0",10),j=Number.isNaN(b)?0:Math.max(0,b),k=Math.min(n.remaining_sessions??0,j);r({...n,total_sessions:j,remaining_sessions:k})}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Sesiones restantes"}),s.jsx(pe,{type:"number",min:"0",value:String(n.remaining_sessions??0),onChange:v=>{const b=parseInt(v.target.value||"0",10),j=Number.isNaN(b)?0:Math.max(0,b),k=n.total_sessions!=null&&n.total_sessions>0?Math.min(j,n.total_sessions):j;r({...n,remaining_sessions:k})}})]})]})]}),s.jsxs(fS,{className:"gap-2 sm:justify-end",children:[s.jsx(W,{variant:"outline",onClick:()=>{o(!1),r(null)},children:"Cancelar"}),s.jsx(W,{onClick:()=>x(n.id,{remaining_balance_cents:n.remaining_balance_cents,total_sessions:n.total_sessions??0,remaining_sessions:n.remaining_sessions??0}),children:"Guardar"})]})]})]})})})]})},Q6=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(null),[a,o]=f.useState([]),[i,l]=f.useState([]),[c,d]=f.useState([]),[u,m]=f.useState([]),[h,g]=f.useState(!0),{toast:w}=kt(),y=C=>{const E=new Date,M=new Date(E.getFullYear(),E.getMonth(),E.getDate());switch(C){case"today":return{start:M,end:new Date(M.getTime()+24*60*60*1e3-1)};case"week":const R=new Date(M);return R.setDate(M.getDate()-M.getDay()),{start:R,end:new Date(R.getTime()+7*24*60*60*1e3-1)};case"month":return{start:new Date(E.getFullYear(),E.getMonth(),1),end:new Date(E.getFullYear(),E.getMonth()+1,0,23,59,59)};case"quarter":const I=Math.floor(E.getMonth()/3);return{start:new Date(E.getFullYear(),I*3,1),end:new Date(E.getFullYear(),I*3+3,0,23,59,59)};case"year":return{start:new Date(E.getFullYear(),0,1),end:new Date(E.getFullYear(),11,31,23,59,59)};default:return{start:M,end:E}}},_=C=>{const E=new Date;switch(C){case"today":const M=new Date(E);return M.setDate(E.getDate()-1),{start:new Date(M.getFullYear(),M.getMonth(),M.getDate()),end:new Date(M.getFullYear(),M.getMonth(),M.getDate(),23,59,59)};case"week":const R=new Date(E);R.setDate(E.getDate()-E.getDay()-7);const I=new Date(R);return I.setDate(R.getDate()+6),I.setHours(23,59,59),{start:R,end:I};case"month":const P=new Date(E.getFullYear(),E.getMonth()-1,1),D=new Date(E.getFullYear(),E.getMonth(),0,23,59,59);return{start:P,end:D};case"quarter":const z=Math.floor(E.getMonth()/3),Y=z===0?3:z-1,A=z===0?E.getFullYear()-1:E.getFullYear(),T=new Date(A,Y*3,1),S=new Date(A,Y*3+3,0,23,59,59);return{start:T,end:S};case"year":const F=new Date(E.getFullYear()-1,0,1),H=new Date(E.getFullYear()-1,11,31,23,59,59);return{start:F,end:H};default:const Q=y(C),O=Q.end.getTime()-Q.start.getTime();return{start:new Date(Q.start.getTime()-O),end:new Date(Q.end.getTime()-O)}}},x=async(C,E)=>{try{const{data:M}=await G.from("bookings").select(`
          *,
          profiles!inner(id, email, created_at),
          services!inner(name, price_cents, type)
        `).gte("booking_datetime",C.toISOString()).lte("booking_datetime",E.toISOString()),R=(M==null?void 0:M.length)||0,I=(M==null?void 0:M.reduce((fe,he)=>fe+he.total_price_cents/100,0))||0,P=R>0?I/R:0,D=Array.from(new Set((M==null?void 0:M.map(fe=>fe.profiles.email))||[])),Y=(await Promise.all(D.map(async fe=>{var N;const{data:he}=await G.from("bookings").select("id").eq("client_id",(N=M==null?void 0:M.find(L=>L.profiles.email===fe))==null?void 0:N.client_id).lt("booking_datetime",C.toISOString()).limit(1);return(he==null?void 0:he.length)===0}))).filter(Boolean).length,A=D.length-Y,T=(M==null?void 0:M.filter(fe=>fe.status==="confirmed"||fe.status==="completed"))||[],S=(M==null?void 0:M.filter(fe=>fe.status==="cancelled"||fe.status==="no_show"))||[],F=(M==null?void 0:M.filter(fe=>fe.status==="no_show"))||[],H=R>0?T.length/R*100:0,Q=R>0?(R-F.length)/R*100:0,O=R>0?F.length/R*100:0,{data:q}=await G.from("lanes").select("id, center_id"),ne=10,Pe=Math.ceil((E.getTime()-C.getTime())/(1e3*60*60*24)),ue=((q==null?void 0:q.length)||1)*ne*Pe,$=ue>0?R/ue*100:0,{data:te}=await G.from("employees").select("id").eq("active",!0),xe=((te==null?void 0:te.length)||1)>0?I/((te==null?void 0:te.length)||1):0;return{totalBookings:R,totalRevenue:I,averageTicket:P,conversionRate:H,attendanceRate:Q,noShowRate:O,newClients:Y,recurringClients:A,occupancyRate:$,revenuePerTherapist:xe}}catch(M){return console.error("Error calculating KPI metrics:",M),{totalBookings:0,totalRevenue:0,averageTicket:0,conversionRate:0,attendanceRate:0,noShowRate:0,newClients:0,recurringClients:0,occupancyRate:0,revenuePerTherapist:0}}},p=async(C,E)=>{try{const{data:M}=await G.from("employees").select(`
          id,
          profiles!inner(first_name, last_name)
        `).eq("active",!0);return M?await Promise.all(M.map(async I=>{const{data:P}=await G.from("bookings").select("*, services!inner(price_cents)").eq("employee_id",I.id).gte("booking_datetime",C.toISOString()).lte("booking_datetime",E.toISOString()),D=(P==null?void 0:P.length)||0,z=(P==null?void 0:P.reduce((S,F)=>S+F.total_price_cents/100,0))||0,Y=D>0?z/D:0,A=(P==null?void 0:P.filter(S=>S.status==="confirmed"||S.status==="completed"))||[],T=D>0?A.length/D*100:0;return{therapistId:I.id,therapistName:`${I.profiles.first_name} ${I.profiles.last_name}`,totalBookings:D,totalRevenue:z,averageTicket:Y,attendanceRate:T,occupancyRate:0,clientSatisfaction:85+Math.random()*15}})):[]}catch(M){return console.error("Error fetching therapist metrics:",M),[]}},v=async(C,E)=>{try{const{data:M}=await G.from("services").select("*").eq("active",!0);return M?(await Promise.all(M.map(async(I,P)=>{const{data:D}=await G.from("bookings").select("total_price_cents").eq("service_id",I.id).gte("booking_datetime",C.toISOString()).lte("booking_datetime",E.toISOString()),z=(D==null?void 0:D.length)||0,Y=(D==null?void 0:D.reduce((T,S)=>T+S.total_price_cents/100,0))||0,A=I.price_cents/100;return{serviceId:I.id,serviceName:I.name,totalBookings:z,totalRevenue:Y,averagePrice:A,popularityRank:P+1,growthRate:Math.random()*40-20}}))).sort((I,P)=>P.totalBookings-I.totalBookings).map((I,P)=>({...I,popularityRank:P+1})):[]}catch(M){return console.error("Error fetching service metrics:",M),[]}},b=async(C,E)=>{try{const M=[],R=new Date(C);for(;R<=E;){const I=new Date(R),P=new Date(R);P.setHours(23,59,59,999);const{data:D}=await G.from("bookings").select(`
            total_price_cents,
            profiles!inner(created_at)
          `).gte("booking_datetime",I.toISOString()).lte("booking_datetime",P.toISOString()),z=(D==null?void 0:D.length)||0,Y=(D==null?void 0:D.reduce((T,S)=>T+S.total_price_cents/100,0))||0,A=(D==null?void 0:D.filter(T=>{const S=new Date(T.profiles.created_at);return S>=I&&S<=P}).length)||0;M.push({date:R.toISOString().split("T")[0],bookings:z,revenue:Y,newClients:A}),R.setDate(R.getDate()+1)}return M}catch(M){return console.error("Error fetching time series data:",M),[]}},j=async(C,E)=>{try{const{data:M}=await G.from("centers").select("*").eq("active",!0);return M?await Promise.all(M.map(async I=>{const{data:P}=await G.from("bookings").select("total_price_cents").eq("center_id",I.id).gte("booking_datetime",C.toISOString()).lte("booking_datetime",E.toISOString()),{data:D}=await G.from("employees").select("id").eq("center_id",I.id).eq("active",!0),z=(P==null?void 0:P.length)||0,Y=(P==null?void 0:P.reduce((A,T)=>A+T.total_price_cents/100,0))||0;return{centerId:I.id,centerName:I.name,totalBookings:z,totalRevenue:Y,occupancyRate:Math.random()*40+40,therapistCount:(D==null?void 0:D.length)||0}})):[]}catch(M){return console.error("Error fetching center metrics:",M),[]}},k=async(C="month")=>{g(!0);try{const E=y(C),M=_(C),[R,I]=await Promise.all([x(E.start,E.end),x(M.start,M.end)]);t(R);const P={totalBookings:I.totalBookings>0?(R.totalBookings-I.totalBookings)/I.totalBookings*100:0,totalRevenue:I.totalRevenue>0?(R.totalRevenue-I.totalRevenue)/I.totalRevenue*100:0,averageTicket:I.averageTicket>0?(R.averageTicket-I.averageTicket)/I.averageTicket*100:0,conversionRate:R.conversionRate-I.conversionRate,attendanceRate:R.attendanceRate-I.attendanceRate};r({current:R,previous:I,growth:P});const[D,z,Y,A]=await Promise.all([p(E.start,E.end),v(E.start,E.end),b(E.start,E.end),j(E.start,E.end)]);o(D),l(z),d(Y),m(A)}catch(E){console.error("Error loading analytics:",E),w({title:"Error",description:"No se pudieron cargar las mtricas",variant:"destructive"})}finally{g(!1)}};return f.useEffect(()=>{k()},[]),{kpiMetrics:e,periodComparison:n,therapistMetrics:a,serviceMetrics:i,timeSeriesData:c,centerMetrics:u,loading:h,loadAnalytics:k}},X6=({title:e,data:t,periodLabel:n})=>{const r=(i,l)=>{switch(l){case"currency":return`${i.toFixed(2)}`;case"percentage":return`${i.toFixed(1)}%`;default:return i.toString()}},a=(i,l)=>{if(l===0)return{growth:0,isPositive:i>=0};const c=(i-l)/l*100;return{growth:c,isPositive:c>=0}},o=Math.max(...t.flatMap(i=>[i.current,i.previous]));return s.jsxs(ie,{className:"w-full",children:[s.jsxs(Ne,{className:"pb-4",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(fg,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("span",{className:"truncate",children:e})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 text-xs sm:text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-primary rounded-full"}),s.jsx("span",{className:"truncate",children:n.current})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-muted rounded-full"}),s.jsx("span",{className:"truncate",children:n.previous})]})]})]}),s.jsx(de,{className:"pt-0",children:s.jsx("div",{className:"space-y-4 sm:space-y-6",children:t.map((i,l)=>{const{growth:c,isPositive:d}=a(i.current,i.previous),u=d?wg:Yb;return s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm sm:text-base truncate flex-1",children:i.label}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[s.jsx(u,{className:le("h-3 w-3 sm:h-4 sm:w-4",d?"text-green-500":"text-red-500")}),s.jsx(We,{variant:d?"default":"destructive",className:"text-xs px-1 py-0",children:c!==0?`${d?"+":""}${c.toFixed(1)}%`:"0%"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[s.jsx("span",{className:"text-primary font-medium truncate",children:n.current}),s.jsx("span",{className:"font-medium ml-2",children:r(i.current,i.format)})]}),s.jsx("div",{className:"h-2 sm:h-3 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${o>0?i.current/o*100:0}%`}})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[s.jsx("span",{className:"text-muted-foreground truncate",children:n.previous}),s.jsx("span",{className:"text-muted-foreground ml-2",children:r(i.previous,i.format)})]}),s.jsx("div",{className:"h-2 sm:h-3 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-muted-foreground rounded-full transition-all duration-500",style:{width:`${o>0?i.previous/o*100:0}%`}})})]})]})]},l)})})})]})};var Ae=function(){return Ae=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ae.apply(this,arguments)};function J6(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function vS(e,t,n){for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function lc(e){return e.mode==="multiple"}function cc(e){return e.mode==="range"}function hm(e){return e.mode==="single"}var Z6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function e$(e,t){return ke(e,"LLLL y",t)}function t$(e,t){return ke(e,"d",t)}function n$(e,t){return ke(e,"LLLL",t)}function r$(e){return"".concat(e)}function s$(e,t){return ke(e,"cccccc",t)}function a$(e,t){return ke(e,"yyyy",t)}var o$=Object.freeze({__proto__:null,formatCaption:e$,formatDay:t$,formatMonthCaption:n$,formatWeekNumber:r$,formatWeekdayName:s$,formatYearCaption:a$}),i$=function(e,t,n){return ke(e,"do MMMM (EEEE)",n)},l$=function(){return"Month: "},c$=function(){return"Go to next month"},d$=function(){return"Go to previous month"},u$=function(e,t){return ke(e,"cccc",t)},m$=function(e){return"Week n. ".concat(e)},h$=function(){return"Year: "},f$=Object.freeze({__proto__:null,labelDay:i$,labelMonthDropdown:l$,labelNext:c$,labelPrevious:d$,labelWeekNumber:m$,labelWeekday:u$,labelYearDropdown:h$});function p$(){var e="buttons",t=Z6,n=_N,r={},a={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:o$,labels:f$,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function g$(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=bn(r):t&&(o=new Date(t,0,1)),a?i=Uu(a):n&&(i=new Date(n,11,31)),{fromDate:o?ca(o):void 0,toDate:i?ca(i):void 0}}var xS=f.createContext(void 0);function v$(e){var t,n=e.initialProps,r=p$(),a=g$(n),o=a.fromDate,i=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(hm(n)||lc(n)||cc(n))&&(c=n.onSelect);var d=Ae(Ae(Ae({},r),n),{captionLayout:l,classNames:Ae(Ae({},r.classNames),n.classNames),components:Ae({},n.components),formatters:Ae(Ae({},r.formatters),n.formatters),fromDate:o,labels:Ae(Ae({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ae(Ae({},r.modifiers),n.modifiers),modifiersClassNames:Ae(Ae({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ae(Ae({},r.styles),n.styles),toDate:i});return s.jsx(xS.Provider,{value:d,children:e.children})}function dt(){var e=f.useContext(xS);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function yS(e){var t=dt(),n=t.locale,r=t.classNames,a=t.styles,o=t.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function x$(e){return s.jsx("svg",Ae({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function wS(e){var t,n,r=e.onChange,a=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=dt(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:x$;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:r,children:o}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,s.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function y$(e){var t,n=dt(),r=n.fromDate,a=n.toDate,o=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var m=[];if(JD(r,a))for(var h=bn(r),g=r.getMonth();g<=a.getMonth();g++)m.push(ah(h,g));else for(var h=bn(new Date),g=0;g<=11;g++)m.push(ah(h,g));var w=function(_){var x=Number(_.target.value),p=ah(bn(e.displayMonth),x);e.onChange(p)},y=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:wS;return s.jsx(y,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:w,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:m.map(function(_){return s.jsx("option",{value:_.getMonth(),children:l(_,{locale:i})},_.getMonth())})})}function w$(e){var t,n=e.displayMonth,r=dt(),a=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,c=r.classNames,d=r.components,u=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!o)return s.jsx(s.Fragment,{});for(var g=a.getFullYear(),w=o.getFullYear(),y=g;y<=w;y++)h.push(Ky(Xd(new Date),y));var _=function(p){var v=Ky(bn(n),Number(p.target.value));e.onChange(v)},x=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:wS;return s.jsx(x,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:_,value:n.getFullYear(),caption:u(n,{locale:i}),children:h.map(function(p){return s.jsx("option",{value:p.getFullYear(),children:u(p,{locale:i})},p.getFullYear())})})}function _$(e,t){var n=f.useState(e),r=n[0],a=n[1],o=t===void 0?r:t;return[o,a]}function b$(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&Bl(o,a)<0){var d=-1*(c-1);a=Tr(o,d)}return i&&Bl(a,i)<0&&(a=i),bn(a)}function j$(){var e=dt(),t=b$(e),n=_$(t,e.month),r=n[0],a=n[1],o=function(i){var l;if(!e.disableNavigation){var c=bn(i);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,o]}function N$(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=bn(e),o=bn(Tr(a,r)),i=Bl(o,a),l=[],c=0;c<i;c++){var d=Tr(a,c);l.push(d)}return n&&(l=l.reverse()),l}function C$(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=r?o:1,l=bn(e);if(!n)return Tr(l,i);var c=Bl(n,e);if(!(c<o))return Tr(l,i)}}function S$(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=r?o:1,l=bn(e);if(!n)return Tr(l,-i);var c=Bl(l,n);if(!(c<=0))return Tr(l,-i)}}var _S=f.createContext(void 0);function k$(e){var t=dt(),n=j$(),r=n[0],a=n[1],o=N$(r,t),i=C$(r,t),l=S$(r,t),c=function(m){return o.some(function(h){return Ug(m,h)})},d=function(m,h){c(m)||(h&&SN(m,h)?a(Tr(m,1+t.numberOfMonths*-1)):a(m))},u={currentMonth:r,displayMonths:o,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return s.jsx(_S.Provider,{value:u,children:e.children})}function dc(){var e=f.useContext(_S);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function j0(e){var t,n=dt(),r=n.classNames,a=n.styles,o=n.components,i=dc().goToMonth,l=function(u){i(Tr(u,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:yS,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:d}),s.jsx(y$,{onChange:l,displayMonth:e.displayMonth}),s.jsx(w$,{onChange:l,displayMonth:e.displayMonth})]})}function E$(e){return s.jsx("svg",Ae({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function P$(e){return s.jsx("svg",Ae({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ou=f.forwardRef(function(e,t){var n=dt(),r=n.classNames,a=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=Ae(Ae({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Ae({},e,{ref:t,type:"button",className:i,style:l}))});function T$(e){var t,n,r=dt(),a=r.dir,o=r.locale,i=r.classNames,l=r.styles,c=r.labels,d=c.labelPrevious,u=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=d(e.previousMonth,{locale:o}),g=[i.nav_button,i.nav_button_previous].join(" "),w=u(e.nextMonth,{locale:o}),y=[i.nav_button,i.nav_button_next].join(" "),_=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:P$,x=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:E$;return s.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(ou,{name:"previous-month","aria-label":h,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(_,{className:i.nav_icon,style:l.nav_icon}):s.jsx(x,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(ou,{name:"next-month","aria-label":w,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(x,{className:i.nav_icon,style:l.nav_icon}):s.jsx(_,{className:i.nav_icon,style:l.nav_icon})})]})}function N0(e){var t=dt().numberOfMonths,n=dc(),r=n.previousMonth,a=n.nextMonth,o=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(w){return Ug(e.displayMonth,w)}),c=l===0,d=l===i.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c),h=function(){r&&o(r)},g=function(){a&&o(a)};return s.jsx(T$,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:g})}function M$(e){var t,n=dt(),r=n.classNames,a=n.disableNavigation,o=n.styles,i=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:yS,d;return a?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=s.jsx(j0,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(j0,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(N0,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(N0,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:o.caption,children:d})}function R$(e){var t=dt(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?s.jsx("tfoot",{className:a,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function D$(e,t,n){for(var r=n?Ka(new Date):Mr(new Date,{locale:e,weekStartsOn:t}),a=[],o=0;o<7;o++){var i=Gt(r,o);a.push(i)}return a}function A$(){var e=dt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=D$(a,o,i);return s.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,m){return s.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function O$(){var e,t=dt(),n=t.classNames,r=t.styles,a=t.components,o=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:A$;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(o,{})})}function I$(e){var t=dt(),n=t.locale,r=t.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:n})})}var Nv=f.createContext(void 0);function L$(e){if(!lc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Nv.Provider,{value:t,children:e.children})}return s.jsx($$,{initialProps:e.initialProps,children:e.children})}function $$(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,o=t.max,i=function(d,u,m){var h,g;(h=t.onDayClick)===null||h===void 0||h.call(t,d,u,m);var w=!!(u.selected&&a&&(r==null?void 0:r.length)===a);if(!w){var y=!!(!u.selected&&o&&(r==null?void 0:r.length)===o);if(!y){var _=r?vS([],r):[];if(u.selected){var x=_.findIndex(function(p){return dn(d,p)});_.splice(x,1)}else _.push(d);(g=t.onSelect)===null||g===void 0||g.call(t,_,d,u,m)}}},l={disabled:[]};r&&l.disabled.push(function(d){var u=o&&r.length>o-1,m=r.some(function(h){return dn(h,d)});return!!(u&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return s.jsx(Nv.Provider,{value:c,children:n})}function Cv(){var e=f.useContext(Nv);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function F$(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?dn(a,e)&&dn(r,e)?void 0:dn(a,e)?{from:a,to:void 0}:dn(r,e)?void 0:qf(r,e)?{from:e,to:a}:{from:r,to:e}:a?qf(e,a)?{from:a,to:e}:{from:e,to:a}:r?SN(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var Sv=f.createContext(void 0);function z$(e){if(!cc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(Sv.Provider,{value:t,children:e.children})}return s.jsx(B$,{initialProps:e.initialProps,children:e.children})}function B$(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},o=a.from,i=a.to,l=t.min,c=t.max,d=function(g,w,y){var _,x;(_=t.onDayClick)===null||_===void 0||_.call(t,g,w,y);var p=F$(g,r);(x=t.onSelect)===null||x===void 0||x.call(t,p,g,w,y)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],dn(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:$o(o,l-1),before:Gt(o,l-1)}),o&&i&&u.disabled.push({after:o,before:Gt(o,l-1)}),!o&&i&&u.disabled.push({after:$o(i,l-1),before:Gt(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:Gt(o,-c+1)}),u.disabled.push({after:Gt(o,c-1)})),o&&i){var m=Gr(i,o)+1,h=c-m;u.disabled.push({before:$o(o,h)}),u.disabled.push({after:Gt(i,h)})}!o&&i&&(u.disabled.push({before:Gt(i,-c+1)}),u.disabled.push({after:Gt(i,c-1)}))}return s.jsx(Sv.Provider,{value:{selected:r,onDayClick:d,modifiers:u},children:n})}function kv(){var e=f.useContext(Sv);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function fd(e){return Array.isArray(e)?vS([],e):e!==void 0?[e]:[]}function U$(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=fd(a)}),t}var Rr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Rr||(Rr={}));var W$=Rr.Selected,ts=Rr.Disabled,H$=Rr.Hidden,q$=Rr.Today,_h=Rr.RangeEnd,bh=Rr.RangeMiddle,jh=Rr.RangeStart,V$=Rr.Outside;function G$(e,t,n){var r,a=(r={},r[W$]=fd(e.selected),r[ts]=fd(e.disabled),r[H$]=fd(e.hidden),r[q$]=[e.today],r[_h]=[],r[bh]=[],r[jh]=[],r[V$]=[],r);return e.fromDate&&a[ts].push({before:e.fromDate}),e.toDate&&a[ts].push({after:e.toDate}),lc(e)?a[ts]=a[ts].concat(t.modifiers[ts]):cc(e)&&(a[ts]=a[ts].concat(n.modifiers[ts]),a[jh]=n.modifiers[jh],a[bh]=n.modifiers[bh],a[_h]=n.modifiers[_h]),a}var bS=f.createContext(void 0);function K$(e){var t=dt(),n=Cv(),r=kv(),a=G$(t,n,r),o=U$(t.modifiers),i=Ae(Ae({},a),o);return s.jsx(bS.Provider,{value:i,children:e.children})}function jS(){var e=f.useContext(bS);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Y$(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Q$(e){return!!(e&&typeof e=="object"&&"from"in e)}function X$(e){return!!(e&&typeof e=="object"&&"after"in e)}function J$(e){return!!(e&&typeof e=="object"&&"before"in e)}function Z$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function eF(e,t){var n,r=t.from,a=t.to;if(r&&a){var o=Gr(a,r)<0;o&&(n=[a,r],r=n[0],a=n[1]);var i=Gr(e,r)>=0&&Gr(a,e)>=0;return i}return a?dn(a,e):r?dn(r,e):!1}function tF(e){return Bg(e)}function nF(e){return Array.isArray(e)&&e.every(Bg)}function rF(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(tF(n))return dn(e,n);if(nF(n))return n.includes(e);if(Q$(n))return eF(e,n);if(Z$(n))return n.dayOfWeek.includes(e.getDay());if(Y$(n)){var r=Gr(n.before,e),a=Gr(n.after,e),o=r>0,i=a<0,l=qf(n.before,n.after);return l?i&&o:o||i}return X$(n)?Gr(e,n.after)>0:J$(n)?Gr(n.before,e)>0:typeof n=="function"?n(e):!1})}function Ev(e,t,n){var r=Object.keys(t).reduce(function(o,i){var l=t[i];return rF(e,l)&&o.push(i),o},[]),a={};return r.forEach(function(o){return a[o]=!0}),n&&!Ug(e,n)&&(a.outside=!0),a}function sF(e,t){for(var n=bn(e[0]),r=Uu(e[e.length-1]),a,o,i=n;i<=r;){var l=Ev(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Gt(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=Gt(i,1)}return o||a}var aF=365;function NS(e,t){var n=t.moveBy,r=t.direction,a=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:Gt,week:Hf,month:Tr,year:K5,startOfWeek:function(_){return a.ISOWeek?Ka(_):Mr(_,{locale:m,weekStartsOn:c})},endOfWeek:function(_){return a.ISOWeek?yN(_):Wu(_,{locale:m,weekStartsOn:c})}},g=h[n](e,r==="after"?1:-1);r==="before"&&d?g=Y5([d,g]):r==="after"&&u&&(g=Q5([u,g]));var w=!0;if(o){var y=Ev(g,o);w=!y.disabled&&!y.hidden}return w?g:l.count>aF?l.lastFocused:NS(g,{moveBy:n,direction:r,context:a,modifiers:o,retry:Ae(Ae({},l),{count:l.count+1})})}var CS=f.createContext(void 0);function oF(e){var t=dc(),n=jS(),r=f.useState(),a=r[0],o=r[1],i=f.useState(),l=i[0],c=i[1],d=sF(t.displayMonths,n),u=a??(l&&t.isDateDisplayed(l))?l:d,m=function(){c(a),o(void 0)},h=function(_){o(_)},g=dt(),w=function(_,x){if(a){var p=NS(a,{moveBy:_,direction:x,context:g,modifiers:n});dn(a,p)||(t.goToDate(p,a),h(p))}},y={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return s.jsx(CS.Provider,{value:y,children:e.children})}function Pv(){var e=f.useContext(CS);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function iF(e,t){var n=jS(),r=Ev(e,n,t);return r}var Tv=f.createContext(void 0);function lF(e){if(!hm(e.initialProps)){var t={selected:void 0};return s.jsx(Tv.Provider,{value:t,children:e.children})}return s.jsx(cF,{initialProps:e.initialProps,children:e.children})}function cF(e){var t=e.initialProps,n=e.children,r=function(o,i,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,l)},a={selected:t.selected,onDayClick:r};return s.jsx(Tv.Provider,{value:a,children:n})}function SS(){var e=f.useContext(Tv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function dF(e,t){var n=dt(),r=SS(),a=Cv(),o=kv(),i=Pv(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,m=i.blur,h=i.focus,g=i.focusMonthBefore,w=i.focusMonthAfter,y=i.focusYearBefore,_=i.focusYearAfter,x=i.focusStartOfWeek,p=i.focusEndOfWeek,v=function(T){var S,F,H,Q;hm(n)?(S=r.onDayClick)===null||S===void 0||S.call(r,e,t,T):lc(n)?(F=a.onDayClick)===null||F===void 0||F.call(a,e,t,T):cc(n)?(H=o.onDayClick)===null||H===void 0||H.call(o,e,t,T):(Q=n.onDayClick)===null||Q===void 0||Q.call(n,e,t,T)},b=function(T){var S;h(e),(S=n.onDayFocus)===null||S===void 0||S.call(n,e,t,T)},j=function(T){var S;m(),(S=n.onDayBlur)===null||S===void 0||S.call(n,e,t,T)},k=function(T){var S;(S=n.onDayMouseEnter)===null||S===void 0||S.call(n,e,t,T)},C=function(T){var S;(S=n.onDayMouseLeave)===null||S===void 0||S.call(n,e,t,T)},E=function(T){var S;(S=n.onDayPointerEnter)===null||S===void 0||S.call(n,e,t,T)},M=function(T){var S;(S=n.onDayPointerLeave)===null||S===void 0||S.call(n,e,t,T)},R=function(T){var S;(S=n.onDayTouchCancel)===null||S===void 0||S.call(n,e,t,T)},I=function(T){var S;(S=n.onDayTouchEnd)===null||S===void 0||S.call(n,e,t,T)},P=function(T){var S;(S=n.onDayTouchMove)===null||S===void 0||S.call(n,e,t,T)},D=function(T){var S;(S=n.onDayTouchStart)===null||S===void 0||S.call(n,e,t,T)},z=function(T){var S;(S=n.onDayKeyUp)===null||S===void 0||S.call(n,e,t,T)},Y=function(T){var S;switch(T.key){case"ArrowLeft":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":T.preventDefault(),T.stopPropagation(),d();break;case"ArrowUp":T.preventDefault(),T.stopPropagation(),u();break;case"PageUp":T.preventDefault(),T.stopPropagation(),T.shiftKey?y():g();break;case"PageDown":T.preventDefault(),T.stopPropagation(),T.shiftKey?_():w();break;case"Home":T.preventDefault(),T.stopPropagation(),x();break;case"End":T.preventDefault(),T.stopPropagation(),p();break}(S=n.onDayKeyDown)===null||S===void 0||S.call(n,e,t,T)},A={onClick:v,onFocus:b,onBlur:j,onKeyDown:Y,onKeyUp:z,onMouseEnter:k,onMouseLeave:C,onPointerEnter:E,onPointerLeave:M,onTouchCancel:R,onTouchEnd:I,onTouchMove:P,onTouchStart:D};return A}function uF(){var e=dt(),t=SS(),n=Cv(),r=kv(),a=hm(e)?t.selected:lc(e)?n.selected:cc(e)?r.selected:void 0;return a}function mF(e){return Object.values(Rr).includes(e)}function hF(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(mF(r)){var o=e.classNames["day_".concat(r)];o&&n.push(o)}}),n}function fF(e,t){var n=Ae({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=Ae(Ae({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function pF(e,t,n){var r,a,o,i=dt(),l=Pv(),c=iF(e,t),d=dF(e,c),u=uF(),m=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var k;c.outside||l.focusedDay&&m&&dn(l.focusedDay,e)&&((k=n.current)===null||k===void 0||k.focus())},[l.focusedDay,e,n,m,c.outside]);var h=hF(i,c).join(" "),g=fF(i,c),w=!!(c.outside&&!i.showOutsideDays||c.hidden),y=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:I$,_=s.jsx(y,{date:e,displayMonth:t,activeModifiers:c}),x={style:g,className:h,children:_,role:"gridcell"},p=l.focusTarget&&dn(l.focusTarget,e)&&!c.outside,v=l.focusedDay&&dn(l.focusedDay,e),b=Ae(Ae(Ae({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=v||p?0:-1,r)),d),j={isButton:m,isHidden:w,activeModifiers:c,selectedDays:u,buttonProps:b,divProps:x};return j}function gF(e){var t=f.useRef(null),n=pF(e.date,e.displayMonth,t);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(ou,Ae({name:"day",ref:t},n.buttonProps)):s.jsx("div",Ae({},n.divProps))}function vF(e){var t=e.number,n=e.dates,r=dt(),a=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return s.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var m=c(Number(t),{locale:l}),h=function(g){a(t,n,g)};return s.jsx(ou,{name:"week-number","aria-label":m,className:i.weeknumber,style:o.weeknumber,onClick:h,children:u})}function xF(e){var t,n,r=dt(),a=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:gF,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:vF,u;return i&&(u=s.jsx("td",{className:o.cell,style:a.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:o.row,style:a.row,children:[u,e.dates.map(function(m){return s.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:m})},YD(m))})]})}function C0(e,t,n){for(var r=n!=null&&n.ISOWeek?yN(t):Wu(t,n),a=n!=null&&n.ISOWeek?Ka(e):Mr(e,n),o=Gr(r,a),i=[],l=0;l<=o;l++)i.push(Gt(a,l));var c=i.reduce(function(d,u){var m=n!=null&&n.ISOWeek?bN(u):NN(u,n),h=d.find(function(g){return g.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function yF(e,t){var n=C0(bn(e),Uu(e),t);if(t!=null&&t.useFixedWeeks){var r=XD(e,t);if(r<6){var a=n[n.length-1],o=a.dates[a.dates.length-1],i=Hf(o,6-r),l=C0(Hf(o,1),i,t);n.push.apply(n,l)}}return n}function wF(e){var t,n,r,a=dt(),o=a.locale,i=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,g=a.ISOWeek,w=yF(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:g,locale:o,weekStartsOn:m,firstWeekContainsDate:h}),y=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:O$,_=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:xF,x=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:R$;return s.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(y,{}),s.jsx("tbody",{className:i.tbody,style:l.tbody,children:w.map(function(p){return s.jsx(_,{displayMonth:e.displayMonth,dates:p.dates,weekNumber:p.weekNumber},p.weekNumber)})}),s.jsx(x,{displayMonth:e.displayMonth})]})}function _F(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var bF=_F()?f.useLayoutEffect:f.useEffect,Nh=!1,jF=0;function S0(){return"react-day-picker-".concat(++jF)}function NF(e){var t,n=e??(Nh?S0():null),r=f.useState(n),a=r[0],o=r[1];return bF(function(){a===null&&o(S0())},[]),f.useEffect(function(){Nh===!1&&(Nh=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function CF(e){var t,n,r=dt(),a=r.dir,o=r.classNames,i=r.styles,l=r.components,c=dc().displayMonths,d=NF(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],h=i.month,g=e.displayIndex===0,w=e.displayIndex===c.length-1,y=!g&&!w;a==="rtl"&&(t=[g,w],w=t[0],g=t[1]),g&&(m.push(o.caption_start),h=Ae(Ae({},h),i.caption_start)),w&&(m.push(o.caption_end),h=Ae(Ae({},h),i.caption_end)),y&&(m.push(o.caption_between),h=Ae(Ae({},h),i.caption_between));var _=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:M$;return s.jsxs("div",{className:m.join(" "),style:h,children:[s.jsx(_,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(wF,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function SF(e){var t=dt(),n=t.classNames,r=t.styles;return s.jsx("div",{className:n.months,style:r.months,children:e.children})}function kF(e){var t,n,r=e.initialProps,a=dt(),o=Pv(),i=dc(),l=f.useState(!1),c=l[0],d=l[1];f.useEffect(function(){a.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[a.initialFocus,c,o.focus,o.focusTarget,o]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=Ae(Ae({},a.styles.root),a.style),h=Object.keys(r).filter(function(w){return w.startsWith("data-")}).reduce(function(w,y){var _;return Ae(Ae({},w),(_={},_[y]=r[y],_))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:SF;return s.jsx("div",Ae({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:s.jsx(g,{children:i.displayMonths.map(function(w,y){return s.jsx(CF,{displayIndex:y,displayMonth:w},y)})})}))}function EF(e){var t=e.children,n=J6(e,["children"]);return s.jsx(v$,{initialProps:n,children:s.jsx(k$,{children:s.jsx(lF,{initialProps:n,children:s.jsx(L$,{initialProps:n,children:s.jsx(z$,{initialProps:n,children:s.jsx(K$,{children:s.jsx(oF,{children:t})})})})})})})}function PF(e){return s.jsx(EF,Ae({},e,{children:s.jsx(kF,{initialProps:e})}))}function Mv({className:e,classNames:t,showOutsideDays:n=!0,...r}){return s.jsx(PF,{showOutsideDays:n,className:le("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:le(zl({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:le(zl({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(pg,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(gg,{className:"h-4 w-4"})},...r})}Mv.displayName="Calendar";const TF=({open:e,onOpenChange:t})=>{var I,P;kt();const n=e,r=()=>t(!1),[a,o]=f.useState("day"),[i,l]=f.useState(null);f.useState(!1);const[c,d]=f.useState(null),[u,m]=f.useState(!1),[h,g]=f.useState([]),[w,y]=f.useState("all"),x=(()=>{const D=new Date,z=D.getMonth(),Y=D.getFullYear();return z<=2?{year:Y,quarter:1}:z<=5?{year:Y,quarter:2}:z<=8?{year:Y,quarter:3}:{year:Y,quarter:4}})(),p=[{label:"Q1 2025",start:new Date(2025,0,1),end:new Date(2025,2,31),isCurrent:x.year===2025&&x.quarter===1},{label:"Q2 2025",start:new Date(2025,3,1),end:new Date(2025,5,30),isCurrent:x.year===2025&&x.quarter===2},{label:"Q3 2025",start:new Date(2025,6,1),end:new Date(2025,8,31),isCurrent:x.year===2025&&x.quarter===3},{label:"Q4 2025",start:new Date(2025,9,1),end:new Date(2025,11,31),isCurrent:x.year===2025&&x.quarter===4},{label:"Q1 2026",start:new Date(2026,0,1),end:new Date(2026,2,31),isCurrent:x.year===2026&&x.quarter===1},{label:"Q2 2026",start:new Date(2026,3,1),end:new Date(2026,5,30),isCurrent:x.year===2026&&x.quarter===2},{label:"Q3 2026",start:new Date(2026,6,1),end:new Date(2026,8,31),isCurrent:x.year===2026&&x.quarter===3},{label:"Q4 2026",start:new Date(2026,9,1),end:new Date(2026,11,31),isCurrent:x.year===2026&&x.quarter===4}],v=Array.from({length:24},(D,z)=>{const Y=2025+Math.floor(z/12),A=z%12,T=new Date(Y,A,1);return{label:ke(T,"MMMM yyyy",{locale:Ue}),start:bn(T),end:Uu(T)}}),b=[{label:"2025",start:Xd(new Date(2025,0,1)),end:Wy(new Date(2025,0,1))},{label:"2026",start:Xd(new Date(2026,0,1)),end:Wy(new Date(2026,0,1))}];f.useEffect(()=>{e&&(async()=>{const{data:D,error:z}=await G.from("centers").select("id, name").eq("active",!0);!z&&D&&g(D)})()},[e]),f.useEffect(()=>{i&&j()},[i,w]);const j=async()=>{if(i){m(!0);try{const D=ke(i.from,"yyyy-MM-dd"),z=ke(i.to,"yyyy-MM-dd");let Y=G.from("bookings").select("total_price_cents, booking_datetime, payment_status, status, center_id").gte("booking_datetime",`${D}T00:00:00`).lte("booking_datetime",`${z}T23:59:59`);w!=="all"&&(Y=Y.eq("center_id",w));const{data:A,error:T}=await Y;if(T){console.error("Error fetching period stats:",T);return}const S=(A==null?void 0:A.filter(O=>O.status==="confirmed"))||[],F=(A==null?void 0:A.filter(O=>["paid","completed"].includes(O.payment_status||"")))||[],H=F.reduce((O,q)=>O+(q.total_price_cents||0),0),Q=F.length>0?H/F.length:0;d({totalBookings:S.length,totalRevenue:H/100,averageTicket:Q/100,totalBookingsAll:(A==null?void 0:A.length)||0})}catch(D){console.error("Error fetching period stats:",D)}finally{m(!1)}}},k=(D,z)=>{l({from:D,to:z})},C=D=>{D!=null&&D.from&&(D.to?l(D):l({from:D.from,to:D.from}))},E=()=>i?Math.ceil((i.to.getTime()-i.from.getTime())/(1e3*60*60*24))+1:0,R=(()=>{if(!i)return null;const D=E();return{start:ke(i.from,"dd/MM/yyyy",{locale:Ue}),end:ke(i.to,"dd/MM/yyyy",{locale:Ue}),days:D}})();return s.jsx(s.Fragment,{children:s.jsxs(Pr,{open:n,onClose:r,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("div",{className:"flex items-center gap-2 text-xl",children:[s.jsx(Nt,{className:"h-6 w-6 text-primary"}),"Comparar Perodos - Datos Reales"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-wrap items-end gap-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-sm font-medium",children:"Centro"}),s.jsxs(ln,{value:w,onValueChange:D=>y(D),children:[s.jsx(Jt,{className:"w-56",children:s.jsx(cn,{placeholder:"Todos los centros"})}),s.jsxs(Zt,{children:[s.jsx(Ke,{value:"all",children:"Todos los centros"}),h.map(D=>s.jsx(Ke,{value:D.id,children:D.name},D.id))]})]})]})}),s.jsxs(ys,{value:a,onValueChange:D=>o(D),children:[s.jsxs(ws,{className:"grid w-full grid-cols-4",children:[s.jsx(ct,{value:"day",className:"text-sm",children:"Das"}),s.jsx(ct,{value:"month",className:"text-sm",children:"Meses"}),s.jsx(ct,{value:"quarter",className:"text-sm",children:"Trimestres"}),s.jsx(ct,{value:"year",className:"text-sm",children:"Aos"})]}),s.jsx(st,{value:"day",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Ee,{children:"Seleccionar Perodo - Pulsa dos fechas"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Primera fecha: inicio del perodo | Segunda fecha: fin del perodo"})]}),s.jsx(de,{children:s.jsx(Mv,{mode:"range",selected:i,onSelect:C,numberOfMonths:2,className:"pointer-events-auto",locale:Ue})})]})}),s.jsx(st,{value:"month",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Seleccionar Mes"})}),s.jsx(de,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-64 overflow-y-auto",children:v.map(D=>{var z;return s.jsxs(W,{variant:((z=i==null?void 0:i.from)==null?void 0:z.getTime())===D.start.getTime()?"default":"outline",className:"h-auto p-3 flex flex-col items-center text-xs",onClick:()=>k(D.start,D.end),children:[s.jsx("span",{className:"font-medium",children:D.label}),s.jsxs("span",{className:"text-xs text-muted-foreground mt-1",children:[ke(D.start,"dd MMM",{locale:Ue})," - ",ke(D.end,"dd MMM",{locale:Ue})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.ceil((D.end.getTime()-D.start.getTime())/(1e3*60*60*24))+1," das"]})]},D.label)})})})]})}),s.jsx(st,{value:"quarter",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Seleccionar Trimestre"})}),s.jsx(de,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:p.map(D=>{var A;const z=((A=i==null?void 0:i.from)==null?void 0:A.getTime())===D.start.getTime(),Y=D.isCurrent;return s.jsxs(W,{variant:z?"default":"outline",className:le("h-auto p-4 flex flex-col items-center relative",Y&&"ring-2 ring-primary ring-offset-2"),onClick:()=>k(D.start,D.end),children:[Y&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-bold",children:"ACTUAL"}),s.jsx("span",{className:le("font-bold text-lg",Y&&"text-primary"),children:D.label}),s.jsxs("span",{className:"text-sm text-muted-foreground mt-2",children:[ke(D.start,"dd MMM",{locale:Ue})," - ",ke(D.end,"dd MMM",{locale:Ue})]}),s.jsxs("span",{className:"text-xs text-muted-foreground mt-1",children:[Math.ceil((D.end.getTime()-D.start.getTime())/(1e3*60*60*24))+1," das"]})]},D.label)})})})]})}),s.jsx(st,{value:"year",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Seleccionar Ao"})}),s.jsx(de,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:b.map(D=>{var z;return s.jsxs(W,{variant:((z=i==null?void 0:i.from)==null?void 0:z.getTime())===D.start.getTime()?"default":"outline",className:"h-auto p-8 flex flex-col items-center",onClick:()=>k(D.start,D.end),children:[s.jsx("span",{className:"font-bold text-2xl",children:D.label}),s.jsxs("span",{className:"text-sm text-muted-foreground mt-2",children:[ke(D.start,"dd MMM",{locale:Ue})," - ",ke(D.end,"dd MMM",{locale:Ue})]}),s.jsxs("span",{className:"text-xs text-muted-foreground mt-1",children:[Math.ceil((D.end.getTime()-D.start.getTime())/(1e3*60*60*24))+1," das"]})]},D.label)})})})]})})]}),i&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:" Datos del Perodo Seleccionado"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ie,{className:"bg-blue-50 border-blue-200 border-2",children:s.jsx(de,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-blue-700",children:" Reservas Confirmadas"}),s.jsx("p",{className:"text-4xl font-bold text-blue-900",children:u?"...":(c==null?void 0:c.totalBookings)||0}),s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"reservas confirmadas"})]}),s.jsx(Ud,{className:"h-12 w-12 text-blue-500"})]})})}),s.jsx(ie,{className:"bg-green-50 border-green-200 border-2",children:s.jsx(de,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-green-700",children:" Cash Total"}),s.jsx("p",{className:"text-4xl font-bold text-green-900",children:u?"...":`${((I=c==null?void 0:c.totalRevenue)==null?void 0:I.toFixed(2))||"0.00"}`}),s.jsx("p",{className:"text-sm text-green-600 mt-1",children:"ingresos confirmados"})]}),s.jsx(Sf,{className:"h-12 w-12 text-green-500"})]})})})]}),s.jsx(ie,{className:"bg-purple-50 border-purple-200",children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Ticket Medio"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:u?"...":`${((P=c==null?void 0:c.averageTicket)==null?void 0:P.toFixed(2))||"0.00"}`})]}),s.jsx(wg,{className:"h-8 w-8 text-purple-500"})]})})})]}),R&&s.jsxs(ie,{className:"bg-primary/5 border-primary/20",children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2 text-lg",children:[s.jsx(xg,{className:"h-5 w-5 text-primary"}),"Resumen del Perodo"]})}),s.jsxs(de,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Perodo:"}),s.jsxs("span",{children:[R.start," - ",R.end]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Duracin:"}),s.jsxs("span",{children:[R.days," da",R.days!==1?"s":""]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Tipo:"}),s.jsx(We,{variant:"secondary",children:a==="day"?"Da(s)":a==="month"?"Mes":a==="quarter"?"Trimestre":"Ao"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(W,{onClick:r,children:"Cerrar"})})]})]})})},MF=()=>{const[e,t]=f.useState("month"),[n,r]=f.useState(!1),{kpiMetrics:a,periodComparison:o,therapistMetrics:i,serviceMetrics:l,timeSeriesData:c,centerMetrics:d,loading:u,loadAnalytics:m}=Q6();f.useEffect(()=>{const p=G.channel("dashboard-bookings-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},v=>{console.log("Dashboard: Booking change detected:",v),m(e)}).subscribe();return()=>{G.removeChannel(p)}},[m,e]);const h=p=>{t(p),m(p)},g=p=>`${p.toFixed(2)}`,w=p=>`${p.toFixed(1)}%`,y=({value:p,className:v})=>{const b=p>=0,j=b?wg:Yb;return s.jsxs("div",{className:le("flex items-center",v),children:[s.jsx(j,{className:le("h-4 w-4 mr-1",b?"text-green-500":"text-red-500")}),s.jsx("span",{className:le("text-sm font-medium",b?"text-green-500":"text-red-500"),children:w(Math.abs(p))})]})},_=({title:p,value:v,icon:b,growth:j,subtitle:k})=>s.jsxs(ie,{className:"overflow-hidden",children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ee,{className:"text-xs sm:text-sm font-medium truncate pr-2",children:p}),s.jsx(b,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]}),s.jsxs(de,{className:"space-y-1",children:[s.jsx("div",{className:"text-lg sm:text-2xl font-bold truncate",children:v}),k&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:k}),j!==void 0&&s.jsxs("div",{className:"flex items-center pt-1",children:[s.jsx(y,{value:j}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2 hidden sm:inline",children:"vs perodo anterior"}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2 sm:hidden",children:"vs anterior"})]})]})]}),x=({data:p,valueKey:v,labelKey:b,title:j})=>{const k=Math.max(...p.map(C=>C[v]||0));return s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(fg,{className:"h-5 w-5"}),j]})}),s.jsx(de,{children:s.jsx("div",{className:"space-y-3",children:p.slice(0,8).map((C,E)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium truncate",children:C[b]}),s.jsx("span",{children:v==="totalRevenue"?g(C[v]):C[v]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${k>0?C[v]/k*100:0}%`}})})]},E))})})]})};return u&&!a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Dashboard Avanzado"}),s.jsx("div",{className:"animate-pulse h-10 w-32 bg-gray-200 rounded"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((p,v)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"})},v))})]}):s.jsxs("div",{className:"space-y-4 sm:space-y-6 p-2 sm:p-4 lg:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:" Analytics"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Anlisis del rendimiento del negocio"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[s.jsxs(ln,{value:e,onValueChange:h,children:[s.jsx(Jt,{className:"w-full sm:w-32",children:s.jsx(cn,{})}),s.jsxs(Zt,{children:[s.jsx(Ke,{value:"today",children:"Hoy"}),s.jsx(Ke,{value:"week",children:"Semana"}),s.jsx(Ke,{value:"month",children:"Mes"}),s.jsx(Ke,{value:"quarter",children:"Trimestre"}),s.jsx(Ke,{value:"year",children:"Ao"})]})]}),s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>m(e),disabled:u,className:"w-full sm:w-auto",children:[s.jsx(lT,{className:le("h-4 w-4",u&&"animate-spin")}),s.jsx("span",{className:"ml-2 sm:hidden",children:"Actualizar"})]})]})]}),s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(_,{title:"Reservas Totales",value:(a==null?void 0:a.totalBookings.toString())||"0",icon:Nt,growth:o==null?void 0:o.growth.totalBookings}),s.jsx(_,{title:"Ingresos Totales",value:g((a==null?void 0:a.totalRevenue)||0),icon:Sf,growth:o==null?void 0:o.growth.totalRevenue}),s.jsx(_,{title:"Ticket Medio",value:g((a==null?void 0:a.averageTicket)||0),icon:uT,growth:o==null?void 0:o.growth.averageTicket}),s.jsx(_,{title:"Tasa de Conversin",value:w((a==null?void 0:a.conversionRate)||0),icon:Rl,growth:o==null?void 0:o.growth.conversionRate})]}),s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(_,{title:"Tasa de Asistencia",value:w((a==null?void 0:a.attendanceRate)||0),icon:Ud,growth:o==null?void 0:o.growth.attendanceRate}),s.jsx(_,{title:"No Shows",value:w((a==null?void 0:a.noShowRate)||0),icon:sr,subtitle:"Mejora de proceso necesaria"}),s.jsx(_,{title:"Ocupacin",value:w((a==null?void 0:a.occupancyRate)||0),icon:rT,subtitle:"Capacidad utilizada"}),s.jsx(_,{title:"Ingresos/Terapeuta",value:g((a==null?void 0:a.revenuePerTherapist)||0),icon:Pf,subtitle:"Promedio por profesional"})]}),s.jsxs(ys,{defaultValue:"trends",className:"w-full",children:[s.jsx("div",{className:"lg:hidden mb-4",children:s.jsxs("select",{className:"w-full p-3 border rounded-lg bg-background text-sm font-medium shadow-sm",onChange:p=>{document.querySelectorAll('[role="tab"]').forEach(b=>{b.getAttribute("value")===p.target.value&&b.click()})},defaultValue:"trends",children:[s.jsx("option",{value:"trends",children:" Tendencias"}),s.jsx("option",{value:"services",children:" Servicios"}),s.jsx("option",{value:"centers",children:" Centros"}),s.jsx("option",{value:"clients",children:" Clientes"})]})}),s.jsx("div",{className:"hidden lg:block",children:s.jsxs(ws,{className:"grid w-full grid-cols-4",children:[s.jsx(ct,{value:"trends",children:"Tendencias"}),s.jsx(ct,{value:"services",children:"Servicios"}),s.jsx(ct,{value:"centers",children:"Centros"}),s.jsx(ct,{value:"clients",children:"Clientes"})]})}),s.jsxs(st,{value:"trends",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(W,{onClick:()=>r(!0),className:le("px-6 py-3 text-base font-semibold rounded-xl","bg-gradient-to-r from-primary to-primary/80","hover:from-primary/90 hover:to-primary/70","shadow-lg hover:shadow-xl transition-all duration-200","flex items-center gap-2"),children:[s.jsx(Nt,{className:"h-5 w-5"}),"Calendario"]})}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[s.jsx("div",{className:"lg:col-span-2",children:o&&s.jsx(X6,{title:"Comparacin de Perodos",periodLabel:{current:`${e==="today"?"Hoy":e==="week"?"Esta semana":e==="month"?"Este mes":e==="quarter"?"Este trimestre":"Este ao"}`,previous:`${e==="today"?"Ayer":e==="week"?"Semana anterior":e==="month"?"Mes anterior":e==="quarter"?"Trimestre anterior":"Ao anterior"}`},data:[{label:"Reservas Totales",current:o.current.totalBookings,previous:o.previous.totalBookings,format:"number"},{label:"Ingresos Totales",current:o.current.totalRevenue,previous:o.previous.totalRevenue,format:"currency"},{label:"Ticket Medio",current:o.current.averageTicket,previous:o.previous.averageTicket,format:"currency"},{label:"Nuevos Clientes",current:o.current.newClients,previous:o.previous.newClients,format:"number"}]})}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-5 w-5"}),"ltimos 7 das"]})}),s.jsx(de,{children:s.jsx("div",{className:"space-y-3",children:c.slice(-7).map((p,v)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-medium",children:new Date(p.date).toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Nt,{className:"h-3 w-3 text-blue-500"}),s.jsx("span",{children:p.bookings})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Sf,{className:"h-3 w-3 text-green-500"}),s.jsx("span",{children:g(p.revenue)})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ud,{className:"h-3 w-3 text-purple-500"}),s.jsx("span",{children:p.newClients})]})]})]},v))})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(ie,{className:"text-center p-3 sm:p-4 bg-blue-50",children:[s.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:(a==null?void 0:a.totalBookings)||0}),s.jsx("div",{className:"text-xs sm:text-sm text-blue-600",children:"Total Reservas"}),o&&s.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[o.growth.totalBookings>=0?"+":"",o.growth.totalBookings.toFixed(1),"% vs anterior"]})]}),s.jsxs(ie,{className:"text-center p-3 sm:p-4 bg-green-50",children:[s.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:g((a==null?void 0:a.totalRevenue)||0)}),s.jsx("div",{className:"text-xs sm:text-sm text-green-600",children:"Ingresos"}),o&&s.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[o.growth.totalRevenue>=0?"+":"",o.growth.totalRevenue.toFixed(1),"% vs anterior"]})]}),s.jsxs(ie,{className:"text-center p-3 sm:p-4 bg-purple-50",children:[s.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:(a==null?void 0:a.newClients)||0}),s.jsx("div",{className:"text-xs sm:text-sm text-purple-600",children:"Nuevos Clientes"})]}),s.jsxs(ie,{className:"text-center p-3 sm:p-4 bg-orange-50",children:[s.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:w((a==null?void 0:a.attendanceRate)||0)}),s.jsx("div",{className:"text-xs sm:text-sm text-orange-600",children:"Asistencia"}),o&&s.jsxs("div",{className:"text-xs text-orange-500 mt-1",children:[o.growth.attendanceRate>=0?"+":"",o.growth.attendanceRate.toFixed(1),"% vs anterior"]})]})]})]}),s.jsx(st,{value:"services",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[s.jsx(x,{data:l,valueKey:"totalBookings",labelKey:"serviceName",title:"Servicios Ms Populares"}),s.jsx(x,{data:l,valueKey:"totalRevenue",labelKey:"serviceName",title:"Servicios Ms Rentables"})]})}),s.jsx(st,{value:"centers",className:"space-y-4",children:s.jsx(x,{data:d,valueKey:"totalRevenue",labelKey:"centerName",title:"Rendimiento por Centro"})}),s.jsx(st,{value:"clients",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-base sm:text-lg",children:"Nuevos Clientes"})}),s.jsxs(de,{children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:(a==null?void 0:a.newClients)||0}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En el perodo seleccionado"})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-base sm:text-lg",children:"Clientes Recurrentes"})}),s.jsxs(de,{children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:(a==null?void 0:a.recurringClients)||0}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Clientes que repiten"})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Ee,{className:"text-lg",children:"Tasa de Retencin"})}),s.jsxs(de,{children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:a?w(a.recurringClients/Math.max(a.newClients+a.recurringClients,1)*100):"0%"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes que vuelven"})]})]})]})})]}),s.jsx(TF,{open:n,onOpenChange:r})]})},Hc=["#3B82F6","#10B981","#F97316","#8B5CF6","#EF4444","#F59E0B","#EC4899","#06B6D4","#84CC16","#6366F1","#8B5A2B","#6B7280","#DC2626","#059669","#7C3AED","#0EA5E9","#F472B6","#FCD34D","#34D399","#A78BFA"],qc=[{id:"masajes-individuales",name:"Masaje Individual",color:"#3B82F6",description:"Masajes para una persona"},{id:"masajes-pareja",name:"Masaje para Dos",color:"#10B981",description:"Masajes para dos personas"},{id:"masajes-cuatro-manos",name:"Masaje a Cuatro Manos",color:"#F59E0B",description:"Masajes con cuatro manos"},{id:"rituales",name:"Rituales",color:"#8B5CF6",description:"Rituales individuales"},{id:"rituales-pareja",name:"Rituales para Dos",color:"#EC4899",description:"Rituales para dos personas"}],RF=()=>{const{services:e,refetch:t}=ki(),{lanes:n}=Yu(),{centers:r}=Si(),{treatmentGroups:a,createTreatmentGroup:o,updateTreatmentGroup:i,fetchTreatmentGroups:l,loading:c}=ac(),{toast:d}=kt(),u=X.useRef(!1),[m,h]=f.useState(null),[g,w]=f.useState(!1),[y,_]=f.useState(!1),[x,p]=f.useState(!1),[v,b]=f.useState(null),[j,k]=f.useState({top:0,left:0}),C="flex h-12 w-full rounded-2xl border border-border/60 bg-gradient-to-b from-slate-100 via-slate-50 to-white px-4 text-sm font-semibold text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60";pS(x,150);const[E,M]=f.useState({name:"",color:Hc[0],lane_id:"",lane_ids:[],center_id:"",active:!0}),[R,I]=f.useState({name:"",description:"",type:"massage",duration_minutes:60,price_cents:5e3,active:!0,center_id:"",has_discount:!1,discount_price_cents:0,show_online:!0}),P=X.useMemo(()=>{const O={"masajes-individuales":[],"masajes-pareja":[],"masajes-cuatro-manos":[],rituales:[],"rituales-pareja":[]};return e.forEach(q=>{const ne=q.name.toLowerCase();ne.includes("cuatro manos")?O["masajes-cuatro-manos"].push(q):ne.includes("ritual")&&(ne.includes("dos personas")||ne.includes("pareja")||ne.includes("para dos")||ne.includes("2 personas"))?O["rituales-pareja"].push(q):ne.includes("dos personas")||ne.includes("pareja")||ne.includes("para dos")||ne.includes("2 personas")?O["masajes-pareja"].push(q):q.type==="package"||ne.includes("ritual")?O.rituales.push(q):O["masajes-individuales"].push(q)}),O},[e]);X.useEffect(()=>{if(u.current||c||e.length===0)return;const O=async()=>{const ue=new Set(a.map($=>$.name.toLowerCase()));for(const $ of qc)if(!ue.has($.name.toLowerCase())){console.log(`Creating missing group: ${$.name}`);try{const te=await o({name:$.name,color:$.color,active:!0});te&&await q($.id,te.id)}catch{console.log(`Group ${$.name} might already exist, continuing...`)}}},q=async(ue,$)=>{const te=P[ue];for(const xe of te)if(!xe.group_id)try{await G.from("services").update({group_id:$}).eq("id",xe.id),console.log(` Servicio "${xe.name}" asignado al grupo "${ue}"`)}catch(fe){console.error(`Error asignando servicio ${xe.name}:`,fe)}},ne=async()=>{for(const ue of qc){const $=a.find(te=>te.name===ue.name);$&&await q(ue.id,$.id)}};(async()=>{u.current=!0,a.length<qc.length&&await O(),await ne()})()},[a,o,e,c,P]);const D=X.useMemo(()=>{const O=qc.map(q=>{const ne=a.filter(ue=>ue.name===q.name).sort((ue,$)=>new Date($.updated_at).getTime()-new Date(ue.updated_at).getTime())[0],Pe={...q,dbGroup:ne,lane_id:(ne==null?void 0:ne.lane_id)||"",lane_ids:(ne==null?void 0:ne.lane_ids)||[],center_id:(ne==null?void 0:ne.center_id)||""};return console.log(`=== combinedGroups for ${q.name} ===`),console.log("Predefined:",q),console.log("dbGroup found (most recent):",ne),console.log("Result:",Pe),Pe});return console.log("=== All combined groups ===",O),O},[a]),z=(O,q)=>{var V;q.preventDefault(),q.stopPropagation();const Pe=q.currentTarget.getBoundingClientRect(),ue=window.pageYOffset||document.documentElement.scrollTop,$=window.innerHeight,te=window.innerWidth,xe=Math.min(600,te-40),fe=Math.min(500,$-80);let he=Pe.top+ue-50,N=(te-xe)/2;const L=ue+20,U=ue+$-20;he<L?he=L:he+fe>U&&(he=U-fe),N<20&&(N=20),N+xe>te-20&&(N=te-xe-20),k({top:he,left:N}),_(!0),h(O.id),M({name:O.name,color:((V=O.dbGroup)==null?void 0:V.color)||O.color,lane_id:O.lane_id||"",lane_ids:O.lane_ids||[],center_id:O.center_id||"",active:!0}),w(!0)},Y=async()=>{try{if(!m)return;const O=D.find(ne=>ne.id===m);if(!O)return;console.log("Guardando grupo con formData:",E);const q={name:E.name,color:E.color,center_id:E.center_id==="all"?null:E.center_id||null,lane_ids:E.lane_ids||[],active:E.active};console.log("Data to save:",q),O.dbGroup?(console.log("Updating existing group:",O.dbGroup.id),await i(O.dbGroup.id,q)):(console.log("Creating new group"),await o(q)),await l(),d({title:"xito",description:"Grupo actualizado correctamente"}),w(!1),h(null),A()}catch(O){console.error("Error guardando grupo:",O),d({title:"Error",description:"No se pudo guardar el grupo",variant:"destructive"})}},A=()=>{M({name:"",color:Hc[0],lane_id:"",lane_ids:[],center_id:"",active:!0}),h(null)},T=()=>{w(!1),_(!1),A()},S=O=>{b(O),p(!0)},F=O=>{O.preventDefault(),O.stopPropagation();const ne=O.currentTarget.getBoundingClientRect(),Pe=window.pageYOffset||document.documentElement.scrollTop,ue=window.innerHeight,$=window.innerWidth,te=Math.min(600,$-40),xe=Math.min(500,ue-80);let fe=ne.top+Pe-50,he=($-te)/2;const N=Pe+20,L=Pe+ue-20;fe<N?fe=N:fe+xe>L&&(fe=L-xe),he<20&&(he=20),he+te>$-20&&(he=$-te-20),k({top:fe,left:he}),_(!0),h(null),M({name:"",color:Hc[0],lane_id:"",lane_ids:[],center_id:"",active:!0}),w(!0)},H=async()=>{try{if(!R.name||!R.duration_minutes||!R.price_cents){d({title:"Campos requeridos",description:"Nombre, duracin y precio son obligatorios",variant:"destructive"});return}const O=D.find(ne=>ne.id===v);if(!(O!=null&&O.dbGroup)){d({title:"Error",description:"Grupo no encontrado o no inicializado",variant:"destructive"});return}const{error:q}=await G.from("services").insert({name:R.name,description:R.description||null,type:R.type,duration_minutes:R.duration_minutes,price_cents:R.price_cents,active:R.active,has_discount:R.has_discount,discount_price_cents:R.discount_price_cents,show_online:R.show_online,center_id:R.center_id||null,group_id:O.dbGroup.id});q?d({title:"Error",description:`No se pudo crear el servicio: ${q.message}`,variant:"destructive"}):(d({title:"Creado",description:"Servicio creado exitosamente"}),I({name:"",description:"",type:"massage",duration_minutes:60,price_cents:5e3,active:!0,center_id:"",has_discount:!1,discount_price_cents:0,show_online:!0}),p(!1),b(null),t())}catch(O){console.error("Error creating service:",O),d({title:"Error",description:"Error inesperado al crear el servicio",variant:"destructive"})}},Q=()=>{p(!1),b(null),I({name:"",description:"",type:"massage",duration_minutes:60,price_cents:5e3,active:!0,center_id:"",has_discount:!1,discount_price_cents:0,show_online:!0})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Grupos de Tratamientos"}),s.jsx("p",{className:"text-muted-foreground",children:"Organizacin automtica de servicios por categoras con asignacin de carriles"})]}),s.jsxs(W,{onClick:F,className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-4 w-4"}),"Nuevo Grupo"]})]}),s.jsx(jr,{type:"multiple",className:"space-y-4",children:D.map(O=>{var ue;const q=P[O.id]||[],ne=n.find($=>$.id===O.lane_id),Pe=r.find($=>$.id===O.center_id);return s.jsx(_t,{value:O.id,className:"border rounded-lg treatment-group-item",children:s.jsxs(ie,{className:"border-0 shadow-none",children:[s.jsx(bt,{className:"hover:no-underline px-4 py-3 sm:px-6 sm:py-4",children:s.jsxs("div",{className:"flex items-center gap-3 w-full",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:((ue=O.dbGroup)==null?void 0:ue.color)||O.color}}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx(Ee,{className:"text-lg",children:O.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:O.description}),ne&&s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(We,{variant:"outline",className:"text-xs",children:["Carril: ",ne.name]}),Pe&&s.jsx(We,{variant:"secondary",className:"text-xs",children:Pe.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(We,{variant:"outline",children:[q.length," servicio",q.length!==1?"s":""]}),s.jsxs(W,{variant:"outline",size:"sm",onClick:$=>z(O,$),className:"gap-2 text-xs sm:text-sm",children:[s.jsx($a,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Editar"})]})]})]})}),s.jsx(jt,{children:q.length>0?s.jsx(de,{className:"pt-0 pb-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Servicios incluidos:"}),s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>S(O.id),className:"gap-2 text-xs",children:[s.jsx(En,{className:"w-3 h-3"}),"Agregar Masaje"]})]}),s.jsx("div",{className:"grid gap-2",children:q.map($=>{var te,xe;return s.jsx("div",{className:"service-item flex items-center justify-between p-3 rounded-lg border bg-card/50",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border border-border flex-shrink-0",style:{backgroundColor:((te=O.dbGroup)==null?void 0:te.color)||O.color||"#3B82F6"},title:`Color del grupo: ${((xe=O.dbGroup)==null?void 0:xe.color)||O.color||"#3B82F6"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm",children:$.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:[$.duration_minutes," min"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:($.price_cents/100).toLocaleString("es-ES",{style:"currency",currency:"EUR"})}),$.lane_ids&&Array.isArray($.lane_ids)&&$.lane_ids.length>0&&s.jsxs(We,{variant:"outline",className:"text-xs",children:[$.lane_ids.length," carril",$.lane_ids.length!==1?"es":""]})]})]})]})},$.id)})})]})}):s.jsx(de,{className:"pt-0 pb-4",children:s.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[s.jsx("p",{className:"text-sm mb-3",children:"No hay servicios en esta categora"}),s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>S(O.id),className:"gap-2",children:[s.jsx(dT,{className:"w-4 h-4"}),"Agregar Primer Masaje"]})]})})})]})},O.id)})}),g&&y&&s.jsx(s.Fragment,{children:s.jsx(AppModal,{open:!0,onClose:T,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg sm:text-xl",children:"Editar Grupo de Tratamiento"}),s.jsx(W,{variant:"outline",size:"sm",onClick:T,className:"h-8 w-8 p-0",children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"name",className:"text-sm font-medium",children:"Nombre del Grupo"}),s.jsx(pe,{id:"name",value:E.name,onChange:O=>M(q=>({...q,name:O.target.value})),placeholder:"Ej: Masajes Relajantes",className:"mt-1",required:!0})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm font-medium",children:"Color"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Hc.map(O=>s.jsx("button",{type:"button",className:`w-8 h-8 rounded-full border-2 ${E.color===O?"border-foreground":"border-border"}`,style:{backgroundColor:O},onClick:()=>M(q=>({...q,color:O}))},O))})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm font-medium",children:"Centro (Opcional)"}),s.jsxs("select",{className:`${C} mt-1`,value:E.center_id,onChange:O=>M(q=>({...q,center_id:O.target.value})),children:[s.jsx("option",{value:"",children:"Seleccionar centro"}),s.jsx("option",{value:"all",children:"Todos los centros"}),r.filter(O=>O.id&&O.id.trim()!=="").map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm font-medium",children:"Carriles Asignados (Mltiple seleccin)"}),s.jsxs("div",{className:"mt-1 space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2 p-3 border rounded-md min-h-[40px]",children:!E.lane_ids||E.lane_ids.length===0?s.jsx("span",{className:"text-muted-foreground text-sm",children:"Sin carriles especficos"}):E.lane_ids.map(O=>{const q=n.find(Pe=>Pe.id===O),ne=r.find(Pe=>Pe.id===(q==null?void 0:q.center_id));return q?s.jsxs(We,{variant:"secondary",className:"text-xs",children:[q.name," - ",ne==null?void 0:ne.name,s.jsx(W,{variant:"ghost",size:"sm",className:"h-auto p-0 ml-1 hover:bg-transparent",onClick:()=>M(Pe=>{var ue;return{...Pe,lane_ids:((ue=Pe.lane_ids)==null?void 0:ue.filter($=>$!==O))||[]}}),children:s.jsx(Tt,{className:"w-3 h-3"})})]},O):null})}),s.jsxs("select",{className:C,value:"",onChange:O=>{const q=O.target.value;q==="none"?M(ne=>({...ne,lane_ids:[]})):q&&(!E.lane_ids||!E.lane_ids.includes(q))&&M(ne=>({...ne,lane_ids:[...ne.lane_ids||[],q]}))},children:[s.jsx("option",{value:"",disabled:!0,children:"Aadir carril"}),s.jsx("option",{value:"none",children:"Limpiar todos los carriles"}),n.filter(O=>{var q;return O.id&&O.id.trim()!==""&&!((q=E.lane_ids)!=null&&q.includes(O.id))}).map(O=>{var q;return s.jsxs("option",{value:O.id,children:[O.name," - ",(q=r.find(ne=>ne.id===O.center_id))==null?void 0:q.name]},O.id)})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(W,{variant:"outline",className:"flex-1",onClick:T,children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),s.jsxs(W,{onClick:Y,className:"flex-1",children:[s.jsx(Vb,{className:"w-4 h-4 mr-2"}),"Guardar"]})]})]})]})})}),x&&s.jsx(s.Fragment,{children:s.jsx(AppModal,{open:!0,onClose:Q,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold",children:"Agregar Nuevo Masaje"}),s.jsx(W,{variant:"outline",size:"sm",onClick:Q,className:"h-8 w-8 p-0",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-name",className:"text-sm font-medium",children:"Nombre del Masaje"}),s.jsx(pe,{id:"service-name",value:R.name,onChange:O=>I(q=>({...q,name:O.target.value})),placeholder:"Ej: Masaje Relajante",className:"mt-1",required:!0})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-description",className:"text-sm font-medium",children:"Descripcin"}),s.jsx(Yt,{id:"service-description",value:R.description,onChange:O=>I(q=>({...q,description:O.target.value})),placeholder:"Descripcin del masaje...",className:"mt-1",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-duration",className:"text-sm font-medium",children:"Duracin (minutos)"}),s.jsx(pe,{id:"service-duration",type:"number",value:R.duration_minutes,onChange:O=>I(q=>({...q,duration_minutes:parseInt(O.target.value)||60})),placeholder:"60",className:"mt-1",min:"15",max:"300",required:!0})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-price",className:"text-sm font-medium",children:"Precio ()"}),s.jsx(pe,{id:"service-price",type:"number",step:"0.01",value:R.price_cents/100,onChange:O=>I(q=>({...q,price_cents:Math.round((parseFloat(O.target.value)||0)*100)})),placeholder:"50.00",className:"mt-1",min:"0",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm font-medium",children:"Tipo de Servicio"}),s.jsx("select",{className:`${C} mt-1`,value:R.type,onChange:O=>I(q=>({...q,type:O.target.value})),children:["massage","treatment","package"].map(O=>s.jsx("option",{value:O,children:O==="massage"?"Masaje":O==="treatment"?"Tratamiento":"Paquete"},O))})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm font-medium",children:"Centro (Opcional)"}),s.jsxs("select",{className:`${C} mt-1`,value:R.center_id||"all_centers",onChange:O=>I(q=>({...q,center_id:O.target.value==="all_centers"?"":O.target.value})),children:[s.jsx("option",{value:"all_centers",children:"Todos los centros"}),r.filter(O=>O.id&&O.id.trim()!=="").map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(W,{variant:"outline",className:"flex-1",onClick:Q,children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),s.jsxs(W,{onClick:H,className:"flex-1",children:[s.jsx(En,{className:"w-4 h-4 mr-2"}),"Crear Masaje"]})]})]})]})})})]})};var Rv="Switch",[DF,Wz]=cr(Rv),[AF,OF]=DF(Rv),kS=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[h,g]=f.useState(null),w=Ie(t,v=>g(v)),y=f.useRef(!1),_=h?u||!!h.closest("form"):!0,[x=!1,p]=lr({prop:a,defaultProp:o,onChange:d});return s.jsxs(AF,{scope:n,checked:x,disabled:l,children:[s.jsx(Me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":TS(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:w,onClick:_e(e.onClick,v=>{p(b=>!b),_&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),_&&s.jsx(IF,{control:h,bubbles:!y.current,name:r,value:c,checked:x,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});kS.displayName=Rv;var ES="SwitchThumb",PS=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=OF(ES,n);return s.jsx(Me.span,{"data-state":TS(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});PS.displayName=ES;var IF=e=>{const{control:t,checked:n,bubbles:r=!0,...a}=e,o=f.useRef(null),i=Qu(n),l=Du(t);return f.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==n&&m){const h=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(h)}},[i,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function TS(e){return e?"checked":"unchecked"}var MS=kS,LF=PS;const iu=f.forwardRef(({className:e,...t},n)=>s.jsx(MS,{className:le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(LF,{className:le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));iu.displayName=MS.displayName;const k0=[{value:0,label:"Domingo"},{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mircoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sbado"}],$F=()=>{const{promotions:e,loading:t,createPromotion:n,updatePromotion:r,deletePromotion:a,togglePromotionStatus:o}=bv(),{centers:i,refetch:l}=Si(),{services:c}=ki(),[d,u]=f.useState(!1),[m,h]=f.useState(null),[g,w]=f.useState({name:"",description:"",type:"percentage",value:0,applies_to:"all_services",target_id:"",start_at:"",end_at:"",days_of_week:[],time_start:"",time_end:"",is_active:!0}),y=f.useRef(null),_=f.useRef(null),[x,p]=f.useState({top:0,left:0,width:620,maxHeight:720}),v="flex h-12 w-full rounded-2xl border border-border/60 bg-gradient-to-b from-slate-100 via-slate-50 to-white px-4 text-sm font-semibold text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",b=()=>{w({name:"",description:"",type:"percentage",value:0,applies_to:"all_services",target_id:"",start_at:"",end_at:"",days_of_week:[],time_start:"",time_end:"",is_active:!0}),h(null)},j=async P=>{P.preventDefault();try{m?await r(m,g):await n(g),u(!1),b()}catch(D){console.error("Error saving promotion:",D)}},k=(P,D)=>{l();const z=D||y.current;_.current=z,E(z||void 0),w({name:P.name,description:P.description||"",type:P.type,value:P.value,applies_to:P.applies_to,target_id:P.target_id||"",start_at:P.start_at?P.start_at.split("T")[0]:"",end_at:P.end_at?P.end_at.split("T")[0]:"",days_of_week:P.days_of_week||[],time_start:P.time_start||"",time_end:P.time_end||"",is_active:P.is_active}),h(P.id),u(!0)},C=P=>{w(D=>{var z;return{...D,days_of_week:(z=D.days_of_week)!=null&&z.includes(P)?D.days_of_week.filter(Y=>Y!==P):[...D.days_of_week||[],P]}})},E=P=>{if(typeof window>"u")return;P&&(_.current=P);const D=window.innerWidth,z=window.innerHeight,Y=Math.min(620,D-32),A=Math.min(720,z-32);let T=window.scrollY+(z-A)/2,S=(D-Y)/2;if(P){const q=P.getBoundingClientRect();T=q.top+window.scrollY-A/2+q.height/2,S=q.left+q.width/2-Y/2}const F=window.scrollY+16,H=Math.max(F,window.scrollY+z-A-16),Q=16,O=Math.max(Q,D-Y-16);p({top:Math.max(F,Math.min(T,H)),left:Math.max(Q,Math.min(S,O)),width:Y,maxHeight:A})};f.useEffect(()=>{if(!d)return;const P=_.current||y.current;E(P||void 0);const D=()=>E(P||void 0);return window.addEventListener("resize",D),window.addEventListener("scroll",D,!0),()=>{window.removeEventListener("resize",D),window.removeEventListener("scroll",D,!0)}},[d]);const M=P=>{b(),l(),_.current=P||y.current,E(P||_.current||void 0),u(!0)},R=P=>P.type==="percentage"?`${P.value}%`:`${P.value}`,I=P=>!P||P.length===0?"Todos los das":P.sort().map(D=>k0[D].label).join(", ");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gestin de Promociones Automticas"}),s.jsx("p",{className:"text-muted-foreground",children:"Crea promociones que se aplican automticamente segn horarios, fechas y servicios"})]}),s.jsxs(Fa,{open:d,onOpenChange:u,children:[s.jsx(jv,{asChild:!0,children:s.jsxs(W,{ref:y,onClick:P=>{M(P.currentTarget)},children:[s.jsx(En,{className:"h-4 w-4 mr-2"}),"Nueva Promocin"]})}),s.jsxs(Zs,{className:"max-w-none w-full overflow-hidden rounded-xl border bg-background shadow-2xl left-auto top-auto -translate-x-0 -translate-y-0 p-6",onOpenAutoFocus:P=>P.preventDefault(),style:{position:"fixed",top:x.top,left:x.left,width:x.width,maxHeight:x.maxHeight,display:"flex",flexDirection:"column"},children:[s.jsx(ea,{children:s.jsx(ta,{children:m?"Editar Promocin":"Nueva Promocin"})}),s.jsxs("form",{onSubmit:j,className:"flex-1 space-y-6 overflow-y-auto pr-2",children:[s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"name",children:"Nombre *"}),s.jsx(pe,{id:"name",value:g.name,onChange:P=>w(D=>({...D,name:P.target.value})),placeholder:"Ej: Descuento Verano",required:!0})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"description",children:"Descripcin"}),s.jsx(Yt,{id:"description",value:g.description,onChange:P=>w(D=>({...D,description:P.target.value})),placeholder:"Describe cundo y cmo se aplica esta promocin automticamente..."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"type",children:"Tipo de Descuento *"}),s.jsxs("select",{id:"type",className:v,value:g.type,onChange:P=>w(D=>({...D,type:P.target.value})),children:[s.jsx("option",{value:"percentage",children:"Porcentaje"}),s.jsx("option",{value:"fixed_amount",children:"Cantidad Fija"}),s.jsx("option",{value:"happy_hour",children:"Happy Hour"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(K,{htmlFor:"value",children:["Valor * ",g.type==="percentage"?"(%)":"()"]}),s.jsx(pe,{id:"value",type:"number",min:"0",max:g.type==="percentage"?100:void 0,value:g.value,onChange:P=>w(D=>({...D,value:Number(P.target.value)})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"applies_to",children:"Se Aplica A *"}),s.jsxs("select",{id:"applies_to",className:v,value:g.applies_to,onChange:P=>w(D=>({...D,applies_to:P.target.value,target_id:""})),children:[s.jsx("option",{value:"all_services",children:"Todos los Servicios"}),s.jsx("option",{value:"specific_service",children:"Servicio Especfico"}),s.jsx("option",{value:"specific_center",children:"Centro Especfico"})]})]})]}),g.applies_to==="specific_service"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"target_service",children:"Servicio Especfico *"}),s.jsxs("select",{id:"target_service",className:v,value:g.target_id||"",onChange:P=>w(D=>({...D,target_id:P.target.value})),children:[s.jsx("option",{value:"",disabled:!0,children:"Seleccionar servicio"}),c.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),g.applies_to==="specific_center"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"target_center",children:"Centro Especfico *"}),s.jsxs("select",{id:"target_center",className:v,value:g.target_id||"",onChange:P=>w(D=>({...D,target_id:P.target.value})),children:[s.jsx("option",{value:"",disabled:!0,children:"Seleccionar centro"}),i.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"start_at",children:"Fecha de Inicio"}),s.jsx(pe,{id:"start_at",type:"date",value:g.start_at,onChange:P=>w(D=>({...D,start_at:P.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"end_at",children:"Fecha de Fin"}),s.jsx(pe,{id:"end_at",type:"date",value:g.end_at,onChange:P=>w(D=>({...D,end_at:P.target.value}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"time_start",children:"Hora de Inicio"}),s.jsx(pe,{id:"time_start",type:"time",value:g.time_start,onChange:P=>w(D=>({...D,time_start:P.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"time_end",children:"Hora de Fin"}),s.jsx(pe,{id:"time_end",type:"time",value:g.time_end,onChange:P=>w(D=>({...D,time_end:P.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:"Das de la Semana"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k0.map(P=>{var D;return s.jsx(W,{type:"button",variant:(D=g.days_of_week)!=null&&D.includes(P.value)?"default":"outline",size:"sm",onClick:()=>C(P.value),children:P.label.slice(0,3)},P.value)})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(iu,{id:"is_active",checked:g.is_active,onCheckedChange:P=>w(D=>({...D,is_active:P}))}),s.jsx(K,{htmlFor:"is_active",children:"Promocin Activa"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(W,{type:"button",variant:"outline",onClick:()=>{u(!1),b()},children:"Cancelar"}),s.jsxs(W,{type:"submit",disabled:t,children:[m?"Actualizar":"Crear"," Promocin"]})]})]})]})]})]}),s.jsxs("div",{className:"grid gap-4",children:[e.map(P=>{var D;return s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[P.name,s.jsx(We,{variant:P.is_active?"default":"secondary",children:P.is_active?"Activa":"Inactiva"})]}),P.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:P.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{variant:"outline",size:"sm",onClick:z=>k(P,z.currentTarget),children:s.jsx($a,{className:"h-4 w-4"})}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(P.id),children:s.jsx(pi,{className:"h-4 w-4"})})]})]})}),s.jsxs(de,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-2xl text-primary",children:R(P)}),s.jsx("p",{className:"text-muted-foreground",children:P.type==="percentage"?"Descuento":"Cantidad fija"})]}),(P.start_at||P.end_at)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Perodo"}),s.jsxs("p",{className:"text-muted-foreground",children:[P.start_at&&ke(new Date(P.start_at),"dd/MM/yyyy",{locale:Ue}),P.start_at&&P.end_at&&" - ",P.end_at&&ke(new Date(P.end_at),"dd/MM/yyyy",{locale:Ue})]})]})]}),(P.time_start||P.time_end||((D=P.days_of_week)==null?void 0:D.length))&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sr,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Horario"}),s.jsx("p",{className:"text-muted-foreground",children:P.time_start&&P.time_end&&`${P.time_start} - ${P.time_end}`}),s.jsx("p",{className:"text-xs text-muted-foreground",children:I(P.days_of_week||[])})]})]})]}),s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Se aplica a: ",P.applies_to==="all_services"?"Todos los servicios":P.applies_to==="specific_service"?"Servicio especfico":"Centro especfico"]}),s.jsx(iu,{checked:P.is_active,onCheckedChange:z=>o(P.id,z)})]})]})]},P.id)}),e.length===0&&!t&&s.jsx(ie,{children:s.jsx(de,{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"No hay promociones creadas"})})})]})]})},Zi=({originalPrice:e,serviceId:t,centerId:n,className:r="",showPromotionBadge:a=!0,serviceDiscount:o})=>{const{calculatePriceWithPromotions:i}=bv(),l=i(e,t,n);let c=e,d=0,u="";o!=null&&o.has_discount&&o.discount_price_cents>0&&o.discount_price_cents<e&&(c=o.discount_price_cents,d=e-o.discount_price_cents,u="service"),l.discount>d&&(d=l.discount,c=l.finalPrice,u="promotion");const m=d>0,h=w=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(w/100);if(!m)return s.jsx("span",{className:`font-semibold ${r}`,children:h(e)});const g=Math.round(d/e*100);return s.jsxs("div",{className:`flex items-center gap-2 ${r}`,children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-sm text-muted-foreground line-through",children:h(e)}),s.jsx("span",{className:"font-semibold text-lg text-primary",children:h(c)})]}),a&&s.jsxs(We,{variant:"destructive",className:"text-xs",children:["-",g,"%"]}),u==="promotion"&&l.appliedPromotions.length>0&&a&&s.jsx(We,{variant:"outline",className:"text-xs",children:l.appliedPromotions[0].name}),u==="service"&&a&&s.jsx(We,{variant:"outline",className:"text-xs",children:"Descuento"})]})};var RS=["PageUp","PageDown"],DS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],AS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Pi="Slider",[up,FF,zF]=Xl(Pi),[OS,Hz]=cr(Pi,[zF]),[BF,fm]=OS(Pi),IS=f.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:m=()=>{},onValueCommit:h=()=>{},inverted:g=!1,form:w,...y}=e,_=f.useRef(new Set),x=f.useRef(0),v=i==="horizontal"?UF:WF,[b=[],j]=lr({prop:u,defaultProp:d,onChange:I=>{var D;(D=[..._.current][x.current])==null||D.focus(),m(I)}}),k=f.useRef(b);function C(I){const P=KF(b,I);R(I,P)}function E(I){R(I,x.current)}function M(){const I=k.current[x.current];b[x.current]!==I&&h(b)}function R(I,P,{commit:D}={commit:!1}){const z=JF(o),Y=ZF(Math.round((I-r)/o)*o+r,z),A=Wl(Y,[r,a]);j((T=[])=>{const S=VF(T,A,P);if(XF(S,c*o)){x.current=S.indexOf(A);const F=String(S)!==String(T);return F&&D&&h(S),F?S:T}else return T})}return s.jsx(BF,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:b,orientation:i,form:w,children:s.jsx(up.Provider,{scope:e.__scopeSlider,children:s.jsx(up.Slot,{scope:e.__scopeSlider,children:s.jsx(v,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:t,onPointerDown:_e(y.onPointerDown,()=>{l||(k.current=b)}),min:r,max:a,inverted:g,onSlideStart:l?void 0:C,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&R(r,0,{commit:!0}),onEndKeyDown:()=>!l&&R(a,b.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:P})=>{if(!l){const Y=RS.includes(I.key)||I.shiftKey&&DS.includes(I.key)?10:1,A=x.current,T=b[A],S=o*Y*P;R(T+S,A,{commit:!0})}}})})})})});IS.displayName=Pi;var[LS,$S]=OS(Pi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),UF=f.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[m,h]=f.useState(null),g=Ie(t,v=>h(v)),w=f.useRef(),y=bi(a),_=y==="ltr",x=_&&!o||!_&&o;function p(v){const b=w.current||m.getBoundingClientRect(),j=[0,b.width],C=Dv(j,x?[n,r]:[r,n]);return w.current=b,C(v-b.left)}return s.jsx(LS,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:s.jsx(FS,{dir:y,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const b=p(v.clientX);i==null||i(b)},onSlideMove:v=>{const b=p(v.clientX);l==null||l(b)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:v=>{const j=AS[x?"from-left":"from-right"].includes(v.key);d==null||d({event:v,direction:j?-1:1})}})})}),WF=f.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=f.useRef(null),m=Ie(t,u),h=f.useRef(),g=!a;function w(y){const _=h.current||u.current.getBoundingClientRect(),x=[0,_.height],v=Dv(x,g?[r,n]:[n,r]);return h.current=_,v(y-_.top)}return s.jsx(LS,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:s.jsx(FS,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const _=w(y.clientY);o==null||o(_)},onSlideMove:y=>{const _=w(y.clientY);i==null||i(_)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:y=>{const x=AS[g?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:x?-1:1})}})})}),FS=f.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=fm(Pi,n);return s.jsx(Me.span,{...d,ref:t,onKeyDown:_e(e.onKeyDown,m=>{m.key==="Home"?(i(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):RS.concat(DS).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:_e(e.onPointerDown,m=>{const h=m.target;h.setPointerCapture(m.pointerId),m.preventDefault(),u.thumbs.has(h)?h.focus():r(m)}),onPointerMove:_e(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&a(m)}),onPointerUp:_e(e.onPointerUp,m=>{const h=m.target;h.hasPointerCapture(m.pointerId)&&(h.releasePointerCapture(m.pointerId),o(m))})})}),zS="SliderTrack",BS=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=fm(zS,n);return s.jsx(Me.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});BS.displayName=zS;var mp="SliderRange",US=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=fm(mp,n),o=$S(mp,n),i=f.useRef(null),l=Ie(t,i),c=a.values.length,d=a.values.map(h=>HS(h,a.min,a.max)),u=c>1?Math.min(...d):0,m=100-Math.max(...d);return s.jsx(Me.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:l,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:m+"%"}})});US.displayName=mp;var hp="SliderThumb",WS=f.forwardRef((e,t)=>{const n=FF(e.__scopeSlider),[r,a]=f.useState(null),o=Ie(t,l=>a(l)),i=f.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(HF,{...e,ref:o,index:i})}),HF=f.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...o}=e,i=fm(hp,n),l=$S(hp,n),[c,d]=f.useState(null),u=Ie(t,p=>d(p)),m=c?i.form||!!c.closest("form"):!0,h=Du(c),g=i.values[r],w=g===void 0?0:HS(g,i.min,i.max),y=GF(r,i.values.length),_=h==null?void 0:h[l.size],x=_?YF(_,w,l.direction):0;return f.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${w}% + ${x}px)`},children:[s.jsx(up.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Me.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:u,style:g===void 0?{display:"none"}:e.style,onFocus:_e(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),m&&s.jsx(qF,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:g},r)]})});WS.displayName=hp;var qF=e=>{const{value:t,...n}=e,r=f.useRef(null),a=Qu(t);return f.useEffect(()=>{const o=r.current,i=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(i,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(o,t),o.dispatchEvent(d)}},[a,t]),s.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function VF(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,o)=>a-o)}function HS(e,t,n){const o=100/(n-t)*(e-t);return Wl(o,[0,100])}function GF(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function KF(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function YF(e,t,n){const r=e/2,o=Dv([0,50],[0,r]);return(r-o(t)*n)*n}function QF(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function XF(e,t){if(t>0){const n=QF(e);return Math.min(...n)>=t}return!0}function Dv(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function JF(e){return(String(e).split(".")[1]||"").length}function ZF(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var qS=IS,e8=BS,t8=US,n8=WS;const VS=f.forwardRef(({className:e,...t},n)=>s.jsxs(qS,{ref:n,className:le("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(e8,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(t8,{className:"absolute h-full bg-primary"})}),s.jsx(n8,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));VS.displayName=qS.displayName;const r8=({onImageSelect:e,currentImage:t,label:n})=>{const[r,a]=f.useState(t||null),[o,i]=f.useState(!1),[l,c]=f.useState({x:0,y:0}),[d,u]=f.useState([1]),[m,h]=f.useState(!1),[g,w]=f.useState({x:0,y:0}),y=f.useRef(null),_=f.useRef(null),[x,p]=f.useState(null),v=R=>{var P;const I=(P=R.target.files)==null?void 0:P[0];if(I&&I.type.startsWith("image/")){const D=URL.createObjectURL(I);a(D),p(I),c({x:0,y:0}),u([1]),i(!0)}},b=R=>{h(!0),w({x:R.clientX-l.x,y:R.clientY-l.y})},j=f.useCallback(R=>{if(!m||!_.current)return;const I=_.current.getBoundingClientRect(),P=Math.max(0,(I.width*d[0]-I.width)/2),D=Math.max(0,(I.height*d[0]-I.height)/2),z=Math.min(P,Math.max(-P,R.clientX-g.x)),Y=Math.min(D,Math.max(-D,R.clientY-g.y));c({x:z,y:Y})},[m,g,d]),k=()=>{h(!1)},C=()=>{c({x:0,y:0}),u([1])},E=()=>{if(x){const R={x:-l.x/d[0],y:-l.y/d[0],width:300/d[0],height:200/d[0]};e(x,R),i(!1)}},M=()=>{a(null),p(null),c({x:0,y:0}),u([1]),y.current&&(y.current.value="")};return s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{children:n}),r?s.jsxs(ie,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Imagen seleccionada"}),s.jsx(W,{variant:"ghost",size:"sm",onClick:M,className:"h-6 w-6 p-0",children:s.jsx(Tt,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:r,alt:"Vista previa",className:"w-full h-32 object-cover rounded-md"}),s.jsxs(Fa,{open:o,onOpenChange:i,children:[s.jsx(jv,{asChild:!0,children:s.jsxs(W,{variant:"secondary",size:"sm",className:"absolute top-2 right-2",children:[s.jsx(cT,{className:"h-3 w-3 mr-1"}),"Ajustar"]})}),s.jsxs(Zs,{className:"max-w-md",children:[s.jsx(ea,{children:s.jsxs(ta,{className:"flex items-center gap-2",children:[s.jsx(yg,{className:"h-4 w-4"}),"Ajustar Imagen"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative overflow-hidden border rounded-md bg-muted",style:{height:"200px"},children:[r&&s.jsx("img",{ref:_,src:r,alt:"Editar",className:"absolute cursor-move select-none",style:{transform:`translate(${l.x}px, ${l.y}px) scale(${d[0]})`,transformOrigin:"center",maxWidth:"none",height:"200px",width:"auto"},onMouseDown:b,onMouseMove:j,onMouseUp:k,onMouseLeave:k,draggable:!1}),s.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-dashed border-primary/50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{className:"text-xs",children:"Zoom"}),s.jsx(VS,{value:d,onValueChange:u,min:.5,max:3,step:.1,className:"w-full"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(W,{variant:"outline",size:"sm",onClick:C,className:"flex-1",children:[s.jsx(Dl,{className:"h-3 w-3 mr-1"}),"Resetear"]}),s.jsx(W,{onClick:E,className:"flex-1",children:"Confirmar"})]})]})]})]})]})]}):s.jsx(ie,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsxs("div",{className:"p-6 text-center cursor-pointer",onClick:()=>{var R;return(R=y.current)==null?void 0:R.click()},children:[s.jsx(mT,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Haz clic para subir una imagen"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG hasta 5MB"})]})}),s.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:v,className:"hidden"})]})},ho=({value:e,onChange:t,options:n,className:r,triggerClassName:a})=>{const[o,i]=f.useState(!1),l=n.find(c=>c.value===e);return s.jsxs("div",{className:le("w-full",r),children:[s.jsxs("button",{type:"button",onClick:()=>i(c=>!c),className:le("flex w-full items-center justify-between rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",a),"aria-expanded":o,children:[s.jsx("span",{className:"truncate",children:(l==null?void 0:l.label)??"Seleccionar"}),s.jsx(fi,{className:"ml-2 h-4 w-4 opacity-60"})]}),o&&s.jsx("div",{className:le("mt-2 w-full rounded-md border bg-background shadow z-50","overflow-hidden"),children:s.jsx("ul",{className:"py-1 max-h-60 overflow-auto",children:n.map(c=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>{t(c.value),i(!1)},className:le("flex w-full items-center gap-2 px-3 py-2 text-left text-sm",e===c.value?"bg-accent text-foreground":"hover:bg-muted/60"),children:[e===c.value&&s.jsx(hi,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"truncate",children:c.label})]})},c.value))})})]})},E0=e=>typeof e=="number"?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e):"-";function s8(){const{services:e,refetch:t}=ki(),{packages:n,refetch:r}=XN(),{centers:a}=Si();ac();const{toast:o}=kt(),i=dr(),l="flex h-12 w-full rounded-2xl border border-border/60 bg-gradient-to-b from-slate-100 via-slate-50 to-white px-4 text-sm font-semibold text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60";f.useEffect(()=>{document.title="Precios y Promos | The Nook Madrid"},[]);const[c,d]=f.useState(!1);f.useState({});const[u,m]=f.useState({name:"",description:"",type:"massage",duration_minutes:60,price_cents:5e3,active:!0,center_id:"",has_discount:!1,discount_price_cents:0,show_online:!0}),[h,g]=f.useState(null),[w,y]=f.useState({top:0,left:0}),[_,x]=f.useState({name:"",service_ids:[],sessions_count:1,price_euros:0,center_id:"all",description:""}),[p,v]=f.useState(!1),b=[{value:"massage",label:"Masaje"},{value:"treatment",label:"Tratamiento"},{value:"package",label:"Paquete"}],j=f.useMemo(()=>{const N={"masajes-individuales":{id:"masajes-individuales",name:"Masajes Individuales",color:"#3B82F6",services:[]},"masajes-pareja":{id:"masajes-pareja",name:"Masajes para Dos",color:"#10B981",services:[]},"masajes-cuatro-manos":{id:"masajes-cuatro-manos",name:"Masajes a Cuatro Manos",color:"#F59E0B",services:[]},rituales:{id:"rituales",name:"Rituales Individuales",color:"#8B5CF6",services:[]},"rituales-pareja":{id:"rituales-pareja",name:"Rituales para Dos",color:"#EC4899",services:[]}};console.log("AdminPricingPromos classification debug:"),console.log("Total services:",e.length),e.forEach(U=>{const V=U.name.toLowerCase(),ee=(U.description||"").toLowerCase(),ae=V.includes("ritual")||ee.includes("ritual"),ye=V.includes("dos personas")||V.includes("pareja")||V.includes("para dos")||V.includes("2 personas")||V.includes("duo")||V.includes("two")||ee.includes("dos personas")||ee.includes("pareja")||ee.includes("para dos");console.log(`AdminPricingPromos - Service "${U.name}": isRitual=${ae}, isDuo=${ye}, name="${V}", description="${ee}"`),V.includes("cuatro manos")?(console.log(`-> Clasificando "${U.name}" como cuatro manos`),N["masajes-cuatro-manos"].services.push(U)):ae&&ye?(console.log(`-> Clasificando "${U.name}" como ritual para dos`),N["rituales-pareja"].services.push(U)):ye?(console.log(`-> Clasificando "${U.name}" como masaje para dos`),N["masajes-pareja"].services.push(U)):ae&&!ye?(console.log(`-> Clasificando "${U.name}" como ritual individual`),N.rituales.services.push(U)):(console.log(`-> Clasificando "${U.name}" como masaje individual`),N["masajes-individuales"].services.push(U))});const L=Object.values(N).filter(U=>U.services.length>0);return console.log("AdminPricingPromos - Final groups result:",L.map(U=>({name:U.name,services:U.services.length}))),L},[e]),k=async()=>{if(!u.name||!u.duration_minutes||!u.price_cents){o({title:"Campos requeridos",description:"Nombre, duracin y precio son obligatorios",variant:"destructive"});return}try{const{error:N}=await G.from("services").insert({name:u.name,description:u.description||null,type:u.type,duration_minutes:u.duration_minutes,price_cents:u.price_cents,active:u.active,has_discount:u.has_discount,discount_price_cents:u.discount_price_cents,show_online:u.show_online,center_id:u.center_id||null});N?o({title:"Error",description:`No se pudo crear el servicio: ${N.message}`,variant:"destructive"}):(o({title:"Creado",description:"Servicio creado exitosamente"}),m({name:"",description:"",type:"massage",duration_minutes:60,price_cents:5e3,active:!0,center_id:"",has_discount:!1,discount_price_cents:0,show_online:!0}),t())}catch(N){console.error("Error creating service:",N),o({title:"Error",description:"Error inesperado al crear el servicio",variant:"destructive"})}},C=async()=>{if(h){console.log("Updating service:",h);try{const N={name:h.name,description:h.description||null,type:h.type,duration_minutes:h.duration_minutes,price_cents:h.price_cents,center_id:h.center_id,active:h.active,has_discount:h.has_discount||!1,discount_price_cents:h.discount_price_cents||0,show_online:h.show_online??!0};console.log("Update data:",N);const{error:L}=await G.from("services").update(N).eq("id",h.id);L?(console.error("Update error:",L),o({title:"Error",description:`No se pudo actualizar el servicio: ${L.message}`,variant:"destructive"})):(o({title:"Actualizado",description:"Servicio actualizado exitosamente"}),g(null),t())}catch(N){console.error("Error updating service:",N),o({title:"Error",description:"Error inesperado al actualizar el servicio",variant:"destructive"})}}},E=async N=>{console.log("Delete service called with ID:",N);const L=new Map,{data:U,error:V}=await G.from("packages").select("id, name").eq("service_id",N);if(V){o({title:"Error",description:"Error verificando paquetes relacionados",variant:"destructive"});return}U==null||U.forEach(ve=>{ve!=null&&ve.id&&L.set(ve.id,{id:ve.id,name:ve.name})});const{data:ee,error:ae}=await G.from("package_services").select("package_id").eq("service_id",N);if(ae){o({title:"Error",description:"Error verificando paquetes relacionados",variant:"destructive"});return}const ye=(ee||[]).map(ve=>ve.package_id).filter(ve=>ve&&!L.has(ve));if(ye.length){const{data:ve,error:Ye}=await G.from("packages").select("id, name").in("id",ye);if(Ye){o({title:"Error",description:"Error verificando paquetes relacionados",variant:"destructive"});return}ve==null||ve.forEach(Z=>{Z!=null&&Z.id&&L.set(Z.id,{id:Z.id,name:Z.name})})}const me=Array.from(L.values());if(me.length>0){const ve=me.map(ge=>ge.name).join(", "),Ye=`Este servicio est siendo usado en ${me.length} paquete(s): ${ve}.

Quieres eliminar TODOS los paquetes y el servicio? Esta accin no se puede deshacer.`;if(!confirm(Ye))return;const Z=me.map(ge=>ge.id);if(Z.length){const{error:ge}=await G.from("package_services").delete().in("package_id",Z);if(ge){o({title:"Error",description:"Error eliminando servicios del paquete",variant:"destructive"});return}const{error:J}=await G.from("packages").delete().in("id",Z);if(J){o({title:"Error",description:"Error eliminando paquetes relacionados",variant:"destructive"});return}}}else if(!confirm("Ests seguro de que quieres eliminar este servicio? Esta accin no se puede deshacer."))return;try{console.log("Attempting to delete service:",N);const{error:ve}=await G.from("services").delete().eq("id",N);if(ve)console.error("Supabase delete error:",ve),o({title:"Error",description:`No se pudo eliminar el servicio: ${ve.message}`,variant:"destructive"});else{console.log("Service deleted successfully");const Ye=me.length>0?`Servicio y ${me.length} paquete(s) eliminados exitosamente`:"Servicio eliminado exitosamente";o({title:"Eliminado",description:Ye}),t(),r()}}catch(ve){console.error("Error deleting service:",ve),o({title:"Error",description:"Error inesperado al eliminar el servicio",variant:"destructive"})}};f.useMemo(()=>{const N=new Map;return e.forEach(L=>{const U=`${(L.name||"").trim().toLowerCase()}|${L.duration_minutes}`,V=N.get(U);V?(V.ids.push(L.id),V.allActive=V.allActive&&!!L.active,V.hasDiscount=V.hasDiscount&&!!L.has_discount,V.discountPriceEuros=(L.discount_price_cents||0)/100):N.set(U,{key:U,ids:[L.id],name:L.name,type:L.type,duration_minutes:L.duration_minutes,price_euros:L.price_cents/100,allActive:!!L.active,hasDiscount:!!L.has_discount,discountPriceEuros:(L.discount_price_cents||0)/100})}),Array.from(N.values())},[e]);const[M,R]=f.useState({}),I=(N,L,U)=>{R(V=>{var ee,ae,ye,me;return{...V,[N]:{price_euros:((ee=V[N])==null?void 0:ee.price_euros)??0,sessions_count:((ae=V[N])==null?void 0:ae.sessions_count)??1,active:((ye=V[N])==null?void 0:ye.active)??!0,show_online:((me=V[N])==null?void 0:me.show_online)??!0,[L]:U}}})},P=f.useMemo(()=>{const N=new Map;return n.forEach(L=>{var ye;const U=`${(L.name||"").trim().toLowerCase()}|${L.sessions_count}`,V=N.get(U),ee=L.service_names||((ye=L.services)!=null&&ye.name?[L.services.name]:[]),ae=Array.from(new Set(ee.filter(me=>typeof me=="string")));if(!V)N.set(U,{key:U,ids:[L.id],name:L.name,service_names:ae,sessions_count:L.sessions_count,price_euros:L.price_cents/100,allActive:!!L.active});else{V.ids.push(L.id),V.allActive=V.allActive&&!!L.active;const me=new Set(V.service_names);ae.forEach(ve=>{typeof ve=="string"&&ve&&me.add(ve)}),V.service_names=Array.from(me)}}),Array.from(N.values())},[n]),D=async(N,L)=>{const U=M[N];if(!U)return;const V=Math.round(U.price_euros*100);for(const ee of L)await G.from("packages").update({price_cents:V,sessions_count:U.sessions_count,active:U.active,has_discount:!1,discount_price_cents:0,show_online:U.show_online}).eq("id",ee);o({title:"Guardado",description:"Bono actualizado en todos los centros"}),delete M[N],R({...M}),r()},z=_.name.trim().length>0&&_.sessions_count>0&&_.price_euros>0&&_.service_ids.length>0,Y=async()=>{if(!z||p)return;v(!0);let N=null;try{const{data:L,error:U}=await G.from("packages").insert({name:_.name.trim(),service_id:_.service_ids[0]||null,center_id:_.center_id==="all"?null:_.center_id,sessions_count:_.sessions_count,price_cents:Math.round(_.price_euros*100),description:_.description?_.description.trim():null,active:!0,has_discount:!1,discount_price_cents:0,show_online:!0}).select().single();if(U)throw U;if(N=(L==null?void 0:L.id)||null,N){const V=_.service_ids.map(ee=>({package_id:N,service_id:ee,quantity:1}));if(V.length){const{error:ee}=await G.from("package_services").insert(V);if(ee)throw ee}}o({title:"Bono creado",description:"Se cre el nuevo bono correctamente."}),x({name:"",service_ids:[],sessions_count:1,price_euros:0,center_id:"all",description:""}),r()}catch(L){console.error("Error creando package:",L),N&&await G.from("packages").delete().eq("id",N),o({title:"Error al crear bono",description:(L==null?void 0:L.message)||"No se pudo crear el bono. Intntalo nuevamente.",variant:"destructive"})}finally{v(!1)}},[A,T]=f.useState([]),[S,F]=f.useState({}),[H,Q]=f.useState({name:"",description:"",amount_euros:0,active:!0,show_online:!0,sessions_count:1,image:null,imageCrop:null}),O=[5,10,15,20,25,30,40,50,60,75,100,125,150,200,250,300],q=async()=>{const{data:N}=await G.from("gift_card_options").select("*").order("amount_cents");T((N||[]).map(L=>({...L,sessions_count:typeof L.sessions_count=="number"?L.sessions_count:parseInt(L.sessions_count||"0",10)||0})))};f.useEffect(()=>{q()},[]);const ne=(N,L,U)=>{F(V=>{var ye,me,ve,Ye;const ee=A.find(Z=>Z.id===N),ae={amount_euros:((ye=V[N])==null?void 0:ye.amount_euros)??((ee==null?void 0:ee.amount_cents)??0)/100,active:((me=V[N])==null?void 0:me.active)??(ee==null?void 0:ee.is_active)??!0,show_online:((ve=V[N])==null?void 0:ve.show_online)??(ee==null?void 0:ee.show_online)??!0,sessions_count:((Ye=V[N])==null?void 0:Ye.sessions_count)??(ee==null?void 0:ee.sessions_count)??1};return{...V,[N]:{...ae,[L]:U}}})},Pe=async N=>{const L=S[N];if(!L)return;const U=Math.round(L.amount_euros*100),{error:V}=await G.from("gift_card_options").update({amount_cents:U,is_active:L.active,show_online:L.show_online,sessions_count:L.sessions_count}).eq("id",N);if(V){console.error("Error updating gift card option:",V),o({title:"Error",description:"No se pudo guardar la tarjeta regalo. Revisa que la columna sessions_count exista.",variant:"destructive"});return}o({title:"Guardado",description:"Opcin de tarjeta regalo actualizada"}),delete S[N],F({...S}),q()},ue=async N=>{confirm("Eliminar esta opcin de tarjeta regalo?")&&(await G.from("gift_card_options").delete().eq("id",N),o({title:"Eliminado",description:"Opcin eliminada"}),q())},$=async()=>{const N=A.map(V=>V.amount_cents),L=O.filter(V=>!N.includes(V*100)).map(V=>({name:`Tarjeta ${V}`,amount_cents:V*100,is_active:!0,sessions_count:1}));if(L.length===0){o({title:"Ya completo",description:"Todas las opciones ya existen"});return}const{error:U}=await G.from("gift_card_options").insert(L);U?o({title:"Error",description:"No se pudieron crear opciones",variant:"destructive"}):(o({title:"Importadas",description:`Se crearon ${L.length} opciones`}),q())},te=async()=>{if(console.log("Creating gift card option with data:",H),!H.name||!H.amount_euros){o({title:"Campos requeridos",description:"Nombre e importe son obligatorios",variant:"destructive"});return}if(!H.sessions_count||H.sessions_count<0){o({title:"Sesiones requeridas",description:"Indica las sesiones disponibles en la tarjeta regalo",variant:"destructive"});return}try{let N=null;if(H.image){console.log("Uploading image:",H.image);const ee=H.image.name.split(".").pop(),ae=`${Date.now()}-${Math.random().toString(36).substring(2)}.${ee}`,{data:ye,error:me}=await G.storage.from("gift-cards").upload(ae,H.image,{cacheControl:"3600",upsert:!1});if(me){console.error("Error uploading image:",me),o({title:"Error",description:`No se pudo subir la imagen: ${me.message}`,variant:"destructive"});return}const{data:{publicUrl:ve}}=G.storage.from("gift-cards").getPublicUrl(ye.path);N=ve,console.log("Image uploaded successfully, URL:",N)}const L={name:H.name,description:H.description||null,image_url:N,amount_cents:Math.round(H.amount_euros*100),is_active:H.active,show_online:H.show_online,sessions_count:H.sessions_count};console.log("Inserting gift card option:",L);const{data:U,error:V}=await G.from("gift_card_options").insert(L).select();V?(console.error("Database error:",V),o({title:"Error",description:`No se pudo crear la opcin: ${V.message}`,variant:"destructive"})):(console.log("Gift card option created successfully:",U),o({title:"Creada",description:"Opcin de tarjeta regalo creada exitosamente"}),Q({name:"",description:"",amount_euros:0,active:!0,show_online:!0,sessions_count:1,image:null,imageCrop:null}),q())}catch(N){console.error("Error creating gift card option:",N),o({title:"Error",description:`Error inesperado al crear la opcin: ${N}`,variant:"destructive"})}},xe=(N,L)=>{Q(U=>({...U,image:N,imageCrop:L||null}))},fe=async()=>{try{const{data:N,error:L}=await G.from("gift_card_options").select("id");if(L)throw L;const U=(N||[]).map(ee=>ee.id);if(!U.length){o({title:"Sin opciones",description:"No hay opciones para eliminar"});return}const{error:V}=await G.from("gift_card_options").delete().in("id",U);if(V)throw V;o({title:"Eliminadas",description:"Se eliminaron todas las opciones de tarjetas regalo"}),q()}catch(N){console.error("Error deleting all gift options:",N),o({title:"Error",description:(N==null?void 0:N.message)||"No se pudieron eliminar las opciones",variant:"destructive"})}},he=async()=>{confirm("Seguro que deseas eliminar TODAS las opciones de tarjetas regalo?")&&await fe()};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Precios y Promos - The Nook Madrid"})})}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsxs(ys,{defaultValue:"manage-services",children:[s.jsxs(ws,{className:"grid w-full grid-cols-4 lg:grid-cols-4 gap-1 h-auto p-1",children:[s.jsx(ct,{value:"manage-services",className:"text-xs sm:text-sm px-2 py-2",children:"Gestin"}),s.jsx(ct,{value:"packages",className:"text-xs sm:text-sm px-2 py-2",children:"Bonos"}),s.jsx(ct,{value:"giftcards",className:"text-xs sm:text-sm px-2 py-2",children:"Tarjeta Regalo"}),s.jsx(ct,{value:"promotions",className:"text-xs sm:text-sm px-2 py-2",children:"Promos"})]}),s.jsxs(st,{value:"manage-services",className:"mt-6 space-y-4",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ee,{children:"Todos los Servicios"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," servicios"]})]}),s.jsx(W,{variant:"ghost",size:"sm",onClick:()=>d(!c),className:"h-8 w-8 p-0",children:c?s.jsx(fi,{className:"h-4 w-4"}):s.jsx(vg,{className:"h-4 w-4"})})]})}),!c&&s.jsx(de,{children:s.jsx(jr,{type:"multiple",className:"w-full space-y-4",children:j.map(N=>s.jsxs(_t,{value:N.id,className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:N.color}}),s.jsx("span",{className:"text-lg font-semibold",children:N.name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",N.services.length," servicios)"]})]})}),s.jsx(jt,{className:"pt-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.services.map(L=>{var U;return s.jsxs("div",{className:"border rounded-lg p-4 service-card",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:L.name}),s.jsxs("div",{className:"text-sm text-muted-foreground mb-2 flex items-center gap-2",children:[s.jsxs("span",{children:[L.duration_minutes," min"]}),s.jsx("span",{children:""}),s.jsx(Zi,{originalPrice:L.price_cents,serviceId:L.id,centerId:L.center_id,serviceDiscount:{has_discount:!!L.has_discount,discount_price_cents:L.discount_price_cents||0},className:"text-sm"})]}),L.description&&s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:L.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded ${L.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:L.active?"Activo":"Inactivo"}),s.jsx("span",{className:"text-muted-foreground",children:((U=a.find(V=>V.id===L.center_id))==null?void 0:U.name)||"Todos los centros"})]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(W,{size:"sm",variant:"outline",onClick:V=>{V.preventDefault(),V.stopPropagation();const ee=V.currentTarget.closest(".service-card");if(!ee)return;const ae=ee.getBoundingClientRect(),ye=window.pageYOffset||document.documentElement.scrollTop,me=window.innerHeight,ve=window.innerWidth,Ye=Math.min(i?350:1e3,ve-40),Z=Math.min(i?me-40:700,me-80);let ge=ae.top+ye-50,J=(ve-Ye)/2;const Te=ye+20,Qe=ye+me-20;ge<Te?ge=Te:ge+Z>Qe&&(ge=Qe-Z),J<20&&(J=20),J+Ye>ve-20&&(J=ve-Ye-20),console.log("Service edit modal position:",{top:ge,left:J,cardTop:ae.top,scrollTop:ye}),y({top:ge,left:J}),g({...L})},className:"flex-1",children:[s.jsx($a,{className:"h-3 w-3 mr-1"}),"Editar"]}),s.jsx(W,{size:"sm",variant:"destructive",onClick:V=>{V.preventDefault(),V.stopPropagation(),E(L.id)},children:s.jsx(pi,{className:"h-3 w-3"})})]})]},L.id)})})})]},N.id))})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5"}),"Crear Nuevo Servicio"]})}),s.jsxs(de,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-name",children:"Nombre *"}),s.jsx(pe,{id:"service-name",value:u.name,onChange:N=>m({...u,name:N.target.value}),placeholder:"Ej: Masaje Relajante"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-type",children:"Tipo"}),s.jsxs(ln,{value:u.type,onValueChange:N=>m({...u,type:N}),children:[s.jsx(Jt,{className:"w-full",children:s.jsx(cn,{})}),s.jsx(Zt,{position:"popper",side:"bottom",align:"center",sideOffset:2,collisionPadding:8,sticky:"always",className:"z-[9999] bg-popover border shadow-md min-w-[var(--radix-select-trigger-width)]",children:b.map(N=>s.jsx(Ke,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-duration",children:"Duracin (min) *"}),s.jsx(pe,{id:"service-duration",type:"number",value:u.duration_minutes,onChange:N=>m({...u,duration_minutes:parseInt(N.target.value||"0")}),min:"1",step:"5"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-price",children:"Precio () *"}),s.jsx(pe,{id:"service-price",type:"number",step:"0.01",value:(u.price_cents/100).toFixed(2),onChange:N=>m({...u,price_cents:Math.round(parseFloat(N.target.value||"0")*100)}),min:"0"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-center",children:"Centro"}),s.jsxs(ln,{value:u.center_id||"all",onValueChange:N=>m({...u,center_id:N==="all"?"":N}),children:[s.jsx(Jt,{className:"w-full",children:s.jsx(cn,{})}),s.jsxs(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,avoidCollisions:!0,collisionPadding:20,className:"z-[100] min-w-[170px] rounded-2xl border border-border/60 bg-white px-2 py-2 shadow-xl",children:[s.jsx(Ke,{value:"all",children:"Todos los centros"}),a.map(N=>s.jsx(Ke,{value:N.id,children:N.name},N.id))]})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"service-status",children:"Estado"}),s.jsxs(ln,{value:String(u.active),onValueChange:N=>m({...u,active:N==="true"}),children:[s.jsx(Jt,{className:"w-full",children:s.jsx(cn,{})}),s.jsxs(Zt,{position:"item-aligned",children:[s.jsx(Ke,{value:"true",children:"Activo"}),s.jsx(Ke,{value:"false",children:"Inactivo"})]})]})]}),s.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsx("input",{type:"checkbox",id:"new-has-discount",checked:u.has_discount,onChange:N=>m({...u,has_discount:N.target.checked}),className:"rounded"}),s.jsx(K,{htmlFor:"new-has-discount",className:"text-sm",children:"Aplicar descuento"})]}),u.has_discount&&s.jsxs("div",{children:[s.jsx(K,{className:"text-sm",children:"Precio con descuento ()"}),s.jsx(pe,{type:"number",step:"0.01",value:(u.discount_price_cents/100).toFixed(2),onChange:N=>m({...u,discount_price_cents:Math.round(parseFloat(N.target.value||"0")*100)}),min:"0",className:"text-sm"})]})]}),s.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[s.jsx(K,{htmlFor:"service-description",children:"Descripcin"}),s.jsx(Yt,{id:"service-description",value:u.description,onChange:N=>m({...u,description:N.target.value}),placeholder:"Descripcin opcional del servicio...",rows:3})]})]}),s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsxs(W,{onClick:k,className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-4 w-4"}),"Crear Servicio"]})})]})]}),h&&s.jsx(s.Fragment,{children:s.jsx(AppModal,{open:!0,onClose:()=>g(null),maxWidth:1e3,mobileMaxWidth:350,maxHeight:700,children:s.jsxs("div",{className:`${i?"p-4":"p-6"}`,children:[s.jsxs("div",{className:`flex items-center justify-between ${i?"mb-4":"mb-6"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx($a,{className:`text-primary ${i?"h-5 w-5":"h-6 w-6"}`}),s.jsxs("h3",{className:`font-semibold ${i?"text-lg":"text-xl"}`,children:["Editando: ",h.name]})]}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>g(null),className:"h-8 w-8 p-0",children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:`gap-3 ${i?"grid grid-cols-1 space-y-3":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"}`,children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-name",className:i?"text-xs":"",children:"Nombre *"}),s.jsx(pe,{id:"edit-service-name",value:h.name,onChange:N=>g({...h,name:N.target.value}),className:i?"text-sm":""})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-type",className:i?"text-xs":"",children:"Tipo"}),s.jsx("select",{id:"edit-service-type",value:h.type,onChange:N=>g({...h,type:N.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 text-sm",children:b.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-duration",className:i?"text-xs":"",children:"Duracin (min) *"}),s.jsx(pe,{id:"edit-service-duration",type:"number",value:h.duration_minutes,onChange:N=>g({...h,duration_minutes:parseInt(N.target.value||"0")}),min:"1",step:"5",className:i?"text-sm":""})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-price",className:i?"text-xs":"",children:"Precio () *"}),s.jsx(pe,{id:"edit-service-price",type:"number",step:"0.01",value:h.price_cents?(h.price_cents/100).toFixed(2):"0.00",onChange:N=>{const L=parseFloat(N.target.value||"0");console.log("Price change:",L),g({...h,price_cents:Math.round(L*100)})},min:"0",className:i?"text-sm":""})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-status",className:i?"text-xs":"",children:"Estado"}),s.jsxs("select",{id:"edit-service-status",value:h.active?"true":"false",onChange:N=>{console.log("Estado changed to:",N.target.value),g({...h,active:N.target.value==="true"})},className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 text-sm",children:[s.jsx("option",{value:"true",children:"Activo"}),s.jsx("option",{value:"false",children:"Inactivo"})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-service-center",className:i?"text-xs":"",children:"Centro"}),s.jsxs("select",{id:"edit-service-center",value:h.center_id||"all",onChange:N=>{console.log("Centro changed to:",N.target.value),g({...h,center_id:N.target.value==="all"?null:N.target.value})},className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 text-sm",children:[s.jsx("option",{value:"all",children:"Ambos centros"}),a.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))]})]}),s.jsxs("div",{className:i?"":"col-span-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("input",{type:"checkbox",id:"edit-has-discount",checked:h.has_discount||!1,onChange:N=>g({...h,has_discount:N.target.checked}),className:"rounded"}),s.jsx(K,{htmlFor:"edit-has-discount",className:`${i?"text-xs":"text-sm"}`,children:"Aplicar descuento"})]}),h.has_discount&&s.jsxs("div",{children:[s.jsx(K,{className:`${i?"text-xs":"text-sm"}`,children:"Precio con descuento ()"}),s.jsx(pe,{type:"text",placeholder:"Escribe el precio: 85,50",defaultValue:"",onBlur:N=>{if(N.target.value){const L=N.target.value.replace(",","."),U=parseFloat(L);!isNaN(U)&&U>0&&g({...h,discount_price_cents:Math.round(U*100)})}},className:`${i?"text-xs":"text-sm"}`})]})]}),s.jsxs("div",{className:i?"":"md:col-span-2 lg:col-span-3",children:[s.jsx(K,{htmlFor:"edit-service-description",className:i?"text-xs":"",children:"Descripcin"}),s.jsx(Yt,{id:"edit-service-description",value:h.description||"",onChange:N=>g({...h,description:N.target.value}),rows:i?2:3,className:i?"text-sm":""})]})]}),s.jsxs("div",{className:`flex gap-2 mt-4 ${i?"flex-col":"justify-end"}`,children:[s.jsx(W,{variant:"outline",onClick:()=>g(null),size:i?"sm":"default",className:i?"flex-1":"",children:"Cancelar"}),s.jsxs(W,{onClick:C,className:`flex items-center gap-2 ${i?"flex-1":""}`,size:i?"sm":"default",children:[s.jsx($a,{className:"h-4 w-4"}),s.jsx("span",{className:i?"text-xs":"",children:"Actualizar Servicio"})]})]})]})]})})})]}),s.jsx(st,{value:"packages",className:"mt-6 space-y-4",children:s.jsxs(jr,{type:"multiple",className:"space-y-4",children:[s.jsxs(_t,{value:"create-package",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-6 py-4 hover:no-underline",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5"}),s.jsx("span",{className:"text-lg font-semibold",children:"Crear Nuevo Bono"})]})}),s.jsxs(jt,{className:"px-6 pb-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"package-name",children:"Nombre del Bono *"}),s.jsx(pe,{id:"package-name",placeholder:"Ej: Bono 5 Masajes",value:_.name,onChange:N=>x(L=>({...L,name:N.target.value}))})]}),s.jsxs("div",{className:"sm:col-span-2 xl:col-span-3",children:[s.jsx(K,{children:"Tratamientos incluidos *"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2 min-h-[44px] rounded-xl border border-dashed border-primary/40 bg-primary/5 p-3",children:_.service_ids.length===0?s.jsx("span",{className:"text-sm text-muted-foreground",children:"Sin tratamientos seleccionados"}):_.service_ids.map(N=>{const L=e.find(U=>U.id===N);return s.jsxs(We,{variant:"secondary",className:"flex items-center gap-2",children:[(L==null?void 0:L.name)||"Servicio",s.jsx(W,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0",onClick:()=>x(U=>({...U,service_ids:U.service_ids.filter(V=>V!==N)})),children:s.jsx(Tt,{className:"h-3 w-3"})})]},N)})}),(()=>{const N=e.filter(L=>(_.center_id==="all"||!L.center_id||L.center_id===_.center_id)&&!_.service_ids.includes(L.id));return s.jsxs("select",{className:`${l} mt-3`,value:"",onChange:L=>{const U=L.target.value;U&&x(V=>({...V,service_ids:V.service_ids.includes(U)?V.service_ids:[...V.service_ids,U]}))},disabled:N.length===0,children:[s.jsx("option",{value:"",children:N.length===0?"Todos los tratamientos asignados":"Aadir tratamiento"}),N.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})})()]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"package-sessions",children:"Sesiones *"}),s.jsx(pe,{id:"package-sessions",type:"number",min:"1",value:_.sessions_count,onChange:N=>x(L=>({...L,sessions_count:Math.max(1,parseInt(N.target.value||"1",10))}))})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"package-price",children:"Precio () *"}),s.jsx(pe,{id:"package-price",type:"number",step:"0.01",min:"0",value:Number.isFinite(_.price_euros)?_.price_euros:"",onChange:N=>x(L=>({...L,price_euros:Math.max(0,parseFloat(N.target.value||"0"))}))})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"package-center",children:"Centro"}),s.jsxs("select",{id:"package-center",className:l,value:_.center_id,onChange:N=>{const L=N.target.value;x(U=>{const V=L==="all"?U.service_ids:U.service_ids.filter(ee=>{const ae=e.find(ye=>ye.id===ee);return!(ae!=null&&ae.center_id)||ae.center_id===L});return{...U,center_id:L,service_ids:V}})},children:[s.jsx("option",{value:"all",children:"Todos los centros"}),a.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))]})]}),s.jsxs("div",{className:"sm:col-span-2 xl:col-span-3",children:[s.jsx(K,{htmlFor:"package-description",children:"Descripcin"}),s.jsx(pe,{id:"package-description",placeholder:"Descripcin opcional del bono...",value:_.description,onChange:N=>x(L=>({...L,description:N.target.value}))})]})]}),s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsxs(W,{onClick:Y,disabled:!z||p,className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-4 w-4"}),p?"Creando...":"Crear Bono"]})})]})]}),s.jsxs(_t,{value:"manage-packages",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-6 py-4 hover:no-underline",children:s.jsxs("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("span",{className:"text-lg font-semibold",children:"Gestionar Bonos Existentes"}),s.jsxs("span",{className:"text-sm text-muted-foreground mr-4",children:[P.length," bonos"]})]})}),s.jsx(jt,{className:"px-6 pb-4 space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:P.map(N=>{const L=M[N.key]||{price_euros:N.price_euros,sessions_count:N.sessions_count,active:N.allActive,show_online:!0},U=L.price_euros;return s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:N.service_names&&N.service_names.length>0?s.jsxs("span",{children:["Servicios: ",N.service_names.join(", "),"  ",L.sessions_count," sesiones"]}):s.jsxs("span",{children:[L.sessions_count," sesiones"]})})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-sm font-semibold",children:E0(U)})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 xl:grid-cols-4 items-end",children:[s.jsxs("div",{children:[s.jsx(K,{children:"Precio ()"}),s.jsx(pe,{type:"number",step:"0.01",value:L.price_euros,onChange:V=>I(N.key,"price_euros",parseFloat(V.target.value||"0"))})]}),s.jsxs("div",{children:[s.jsx(K,{children:"Sesiones"}),s.jsx(pe,{type:"number",min:"1",value:L.sessions_count,onChange:V=>I(N.key,"sessions_count",parseInt(V.target.value||"1"))})]}),s.jsxs("div",{children:[s.jsx(K,{children:"Estado"}),s.jsx(ho,{value:String(L.active),onChange:V=>I(N.key,"active",V==="true"),options:[{label:"Activo",value:"true"},{label:"Inactivo",value:"false"}]})]}),s.jsxs("div",{children:[s.jsx(K,{children:"Mostrar Online"}),s.jsx(ho,{value:String(L.show_online),onChange:V=>I(N.key,"show_online",V==="true"),options:[{label:"S",value:"true"},{label:"No",value:"false"}]})]}),L.show_online&&s.jsxs("div",{className:"sm:col-span-2 xl:col-span-4 mt-3 rounded-xl border border-dashed border-primary/40 bg-primary/5 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary",children:[s.jsx(Ao,{className:"h-4 w-4"}),s.jsx("span",{children:"Visibilidad online"})]}),s.jsxs("div",{className:"mt-3 grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Estado online"}),s.jsx("span",{className:"font-medium text-green-600",children:"Visible"})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Disponible para compra"}),s.jsx("span",{className:"font-medium text-blue-600",children:"Habilitado"})]})]}),s.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"Este bono aparecer en la tienda online y estar disponible para comprar."})]}),s.jsx("div",{className:"sm:col-span-2 md:col-span-3 flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsx(W,{size:"sm",onClick:()=>D(N.key,N.ids),children:"Guardar"})})]})]},N.key)})})})]})]})}),s.jsx(st,{value:"giftcards",className:"mt-6 space-y-4",children:s.jsxs(jr,{type:"multiple",className:"space-y-4",children:[s.jsxs(_t,{value:"create-giftcard",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-6 py-4 hover:no-underline",children:s.jsxs("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5"}),s.jsx("span",{className:"text-lg font-semibold",children:"Crear Nueva Opcin de Tarjeta Regalo"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[s.jsx(W,{size:"sm",variant:"ghost",onClick:$,children:"Aadir Tarjeta Regalo"}),A.length===0&&(O.length>0?s.jsx(W,{size:"sm",onClick:$,children:"Importar catlogo"}):null)]})]})}),s.jsxs(jt,{className:"px-6 pb-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-5",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-name",children:"Nombre *"}),s.jsx(pe,{id:"giftcard-name",placeholder:"Ej: Tarjeta 50",value:H.name,onChange:N=>Q(L=>({...L,name:N.target.value}))})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-amount",children:"Importe () *"}),s.jsx(pe,{id:"giftcard-amount",type:"number",step:"0.01",min:"0",placeholder:"50.00",value:H.amount_euros||"",onChange:N=>Q(L=>({...L,amount_euros:parseFloat(N.target.value)||0}))})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-sessions",children:"Sesiones *"}),s.jsx(pe,{id:"giftcard-sessions",type:"number",min:"0",placeholder:"Ej: 3",value:H.sessions_count??"",onChange:N=>{const L=parseInt(N.target.value||"0",10),U=Number.isNaN(L)?0:Math.max(0,L);Q(V=>({...V,sessions_count:U}))}})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-status",children:"Estado"}),s.jsx(ho,{value:String(H.active),onChange:N=>Q(L=>({...L,active:N==="true"})),options:[{label:"Activo",value:"true"},{label:"Inactivo",value:"false"}]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-show-online",children:"Mostrar Online"}),s.jsx(ho,{value:String(H.show_online),onChange:N=>Q(L=>({...L,show_online:N==="true"})),options:[{label:"S",value:"true"},{label:"No",value:"false"}]})]})]}),H.show_online&&s.jsxs("div",{className:"mt-4 rounded-xl border border-dashed border-primary/40 bg-primary/5 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary",children:[s.jsx(Ao,{className:"h-4 w-4"}),s.jsx("span",{children:"Vista previa online"})]}),s.jsxs("div",{className:"mt-3 grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Estado online"}),s.jsx("span",{className:"font-medium text-green-600",children:"Visible"})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Disponible para compra"}),s.jsx("span",{className:"font-medium text-blue-600",children:"Habilitado"})]})]}),s.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"Esta tarjeta regalo aparecer en la tienda online inmediatamente despus de crearla."})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"giftcard-description",children:"Descripcin"}),s.jsx(Yt,{id:"giftcard-description",placeholder:"Descripcin de la tarjeta regalo...",value:H.description,onChange:N=>Q(L=>({...L,description:N.target.value})),rows:3})]}),s.jsx("div",{children:s.jsx(r8,{label:"Imagen de la tarjeta regalo (opcional)",onImageSelect:xe})})]}),s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end mt-4",children:s.jsxs(W,{onClick:te,className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-4 w-4"}),"Crear Tarjeta Regalo"]})})]})]}),s.jsxs(_t,{value:"manage-giftcards",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-6 py-4 hover:no-underline",children:s.jsxs("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("span",{className:"text-lg font-semibold",children:"Gestionar Tarjetas Regalo Existentes"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.length," opciones"]})]})}),s.jsxs(jt,{className:"px-6 pb-4 space-y-6",children:[s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsx(W,{variant:"destructive",size:"sm",onClick:he,children:"Eliminar todas"})}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-3",children:A.map(N=>{const L=S[N.id]||{amount_euros:N.amount_cents/100,active:N.is_active,show_online:N.show_online??!0,sessions_count:N.sessions_count??0};return s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"font-medium",children:N.name}),s.jsx("div",{className:"text-sm font-semibold",children:E0(L.amount_euros)})]}),s.jsxs("div",{className:"mb-2 text-xs text-muted-foreground",children:["Sesiones configuradas: ",s.jsx("span",{className:"font-semibold text-foreground",children:L.sessions_count??0})]}),N.image_url&&s.jsx("div",{className:"mb-2",children:s.jsx("img",{src:N.image_url,alt:N.name,className:"w-full h-20 object-cover rounded"})}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 items-end",children:[s.jsxs("div",{children:[s.jsx(K,{children:"Importe ()"}),s.jsx(pe,{type:"number",step:"0.01",value:L.amount_euros,onChange:U=>ne(N.id,"amount_euros",parseFloat(U.target.value||"0"))})]}),s.jsxs("div",{children:[s.jsx(K,{children:"Estado"}),s.jsx(ho,{value:String(L.active),onChange:U=>ne(N.id,"active",U==="true"),options:[{label:"Activo",value:"true"},{label:"Inactivo",value:"false"}]})]}),s.jsxs("div",{children:[s.jsx(K,{children:"Mostrar Online"}),s.jsx(ho,{value:String(L.show_online),onChange:U=>ne(N.id,"show_online",U==="true"),options:[{label:"S",value:"true"},{label:"No",value:"false"}]})]}),s.jsx("div",{className:"sm:col-span-2 md:col-span-3",children:s.jsx(jr,{type:"single",collapsible:!0,children:s.jsxs(_t,{value:"sessions",children:[s.jsxs(bt,{className:"rounded-md border border-dashed border-primary/40 bg-primary/5 px-3 py-2 text-left text-sm font-medium hover:bg-primary/10",children:["Sesiones incluidas: ",s.jsx("span",{className:"ml-1 font-semibold",children:L.sessions_count})]}),s.jsxs(jt,{className:"pt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(K,{children:"Sesiones *"}),s.jsx(pe,{type:"number",min:"0",value:L.sessions_count,onChange:U=>{const V=parseInt(U.target.value||"0",10),ee=Number.isNaN(V)?0:Math.max(0,V);ne(N.id,"sessions_count",ee)}})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Define cuntas sesiones incluye esta tarjeta regalo para su uso interno."})]})]})})}),L.show_online&&s.jsxs("div",{className:"sm:col-span-2 md:col-span-3 mt-3 rounded-xl border border-dashed border-primary/40 bg-primary/5 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary",children:[s.jsx(Ao,{className:"h-4 w-4"}),s.jsx("span",{children:"Visibilidad online"})]}),s.jsxs("div",{className:"mt-3 grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Estado online"}),s.jsx("span",{className:"font-medium text-green-600",children:"Visible"})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white/60 px-3 py-2",children:[s.jsx("span",{children:"Disponible para compra"}),s.jsx("span",{className:"font-medium text-blue-600",children:"Habilitado"})]})]}),s.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"Esta tarjeta regalo aparece en la tienda online y puede comprarse desde la web."})]}),s.jsxs("div",{className:"sm:col-span-2 md:col-span-3 mb-2",children:[s.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:`image-upload-${N.id}`,onChange:async U=>{var ee;const V=(ee=U.target.files)==null?void 0:ee[0];if(V)try{console.log("Uploading image for gift card:",N.id);const ae=V.name.split(".").pop(),ye=`${Date.now()}-${Math.random().toString(36).substring(2)}.${ae}`,{data:me,error:ve}=await G.storage.from("gift-cards").upload(ye,V,{cacheControl:"3600",upsert:!1});if(ve)throw console.error("Upload error:",ve),ve;console.log("Upload successful:",me);const{data:{publicUrl:Ye}}=G.storage.from("gift-cards").getPublicUrl(me.path);console.log("Public URL:",Ye);const{error:Z}=await G.from("gift_card_options").update({image_url:Ye}).eq("id",N.id);if(Z)throw console.error("Update error:",Z),Z;console.log("Image URL updated successfully"),o({title:"Imagen actualizada",description:"La imagen se ha subido correctamente"}),q()}catch(ae){console.error("Error uploading image:",ae),o({title:"Error",description:"No se pudo subir la imagen",variant:"destructive"})}}}),s.jsx(W,{size:"sm",variant:"outline",onClick:()=>{const U=document.getElementById(`image-upload-${N.id}`);U==null||U.click()},className:"w-full",children:N.image_url?"Cambiar imagen":"Subir imagen"})]}),s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsx(W,{size:"sm",onClick:()=>Pe(N.id),children:"Guardar"})}),s.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:s.jsx(W,{size:"sm",variant:"destructive",onClick:()=>ue(N.id),children:"Eliminar"})})]})]},N.id)})})]})]})]})}),s.jsx(st,{value:"promotions",className:"mt-6",children:s.jsx($F,{})})]})})})]})}const a8=()=>{const{codes:e,assignments:t,loading:n,createCode:r,updateCode:a,deleteCode:o,assignCode:i,unassignCode:l,searchEntitiesByCodes:c,getCodesByCategory:d,getAvailableCategories:u}=ic(),[m,h]=f.useState("all"),[g,w]=f.useState(!1),[y,_]=f.useState(!1),[x,p]=f.useState(null),[v,b]=f.useState(""),j=f.useRef(null),[k,C]=f.useState({code:"",name:"",description:"",color:"#3B82F6",category:"general"}),E=[{value:"general",label:"General"},{value:"client",label:"Cliente"},{value:"employee",label:"Empleado"},{value:"service",label:"Servicio"},{value:"booking",label:"Reserva"}],M=[{value:"#EF4444",label:"Rojo"},{value:"#F59E0B",label:"Naranja"},{value:"#EAB308",label:"Amarillo"},{value:"#10B981",label:"Verde"},{value:"#06B6D4",label:"Cian"},{value:"#3B82F6",label:"Azul"},{value:"#8B5CF6",label:"Violeta"},{value:"#EC4899",label:"Rosa"},{value:"#6B7280",label:"Gris"}],R=e.filter(T=>{const S=m==="all"||T.category===m,F=v===""||T.code.toLowerCase().includes(v.toLowerCase())||T.name.toLowerCase().includes(v.toLowerCase());return S&&F}),I=async()=>{try{await r(k),C({code:"",name:"",description:"",color:"#3B82F6",category:"general"}),w(!1)}catch{}},P=T=>{p(T),_(!0)},D=async()=>{if(x)try{await a(x.id,{name:x.name,description:x.description,color:x.color,category:x.category}),_(!1),p(null)}catch{}},z=async T=>{window.confirm("Ests seguro de que quieres eliminar este cdigo?")&&await o(T)},Y=T=>T.usage_count===0?"Sin uso":`${T.usage_count} uso${T.usage_count>1?"s":""}`,A=T=>T.last_used?`ltimo uso: ${new Date(T.last_used).toLocaleDateString()}`:"Nunca usado";return f.useEffect(()=>{},[g]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Cdigos Internos"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestiona cdigos y etiquetas para organizar informacin"})]}),s.jsxs(W,{ref:j,className:"flex items-center space-x-2",onClick:()=>w(!0),children:[s.jsx(En,{className:"h-4 w-4"}),s.jsx("span",{children:"Nuevo Cdigo"})]}),s.jsx(Pr,{open:g,onClose:()=>w(!1),maxWidth:520,mobileMaxWidth:360,maxHeight:680,children:s.jsxs("div",{className:"flex flex-col h-full max-h-[95vh]",children:[s.jsxs("div",{className:"px-6 pt-6 pb-4 border-b",children:[s.jsx("h3",{className:"text-xl font-semibold",children:"Crear Nuevo Cdigo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Crea un nuevo cdigo interno para organizar y categorizar informacin."})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:s.jsxs(jr,{type:"single",collapsible:!0,defaultValue:"basic",className:"w-full",children:[s.jsxs(_t,{value:"basic",children:[s.jsx(bt,{className:"text-left",children:"Datos del Cdigo"}),s.jsxs(jt,{className:"space-y-4 pt-2",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"code",children:"Cdigo *"}),s.jsx(pe,{id:"code",value:k.code,onChange:T=>C({...k,code:T.target.value.toUpperCase()}),placeholder:"VIP, PRIORITY, etc.",className:"uppercase"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"name",children:"Nombre *"}),s.jsx(pe,{id:"name",value:k.name,onChange:T=>C({...k,name:T.target.value}),placeholder:"Nombre descriptivo"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"description",children:"Descripcin"}),s.jsx(Yt,{id:"description",value:k.description,onChange:T=>C({...k,description:T.target.value}),placeholder:"Descripcin opcional del cdigo",rows:3})]})]})]}),s.jsxs(_t,{value:"options",children:[s.jsx(bt,{className:"text-left",children:"Opciones"}),s.jsxs(jt,{className:"space-y-4 pt-2",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"category",children:"Categora"}),s.jsxs(ln,{value:k.category,onValueChange:T=>C({...k,category:T}),children:[s.jsx(Jt,{children:s.jsx(cn,{placeholder:"Selecciona una categora"})}),s.jsx(Zt,{className:"z-[130] bg-popover border shadow-md",position:"popper",side:"bottom",align:"start",sideOffset:8,avoidCollisions:!0,collisionPadding:16,children:E.map(T=>s.jsx(Ke,{value:T.value,children:T.label},T.value))})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"color",children:"Color"}),s.jsxs(ln,{value:k.color,onValueChange:T=>C({...k,color:T}),children:[s.jsx(Jt,{children:s.jsx(cn,{placeholder:"Selecciona un color"})}),s.jsx(Zt,{className:"z-[130] bg-popover border shadow-md",position:"popper",side:"bottom",align:"start",sideOffset:8,avoidCollisions:!0,collisionPadding:16,children:M.map(T=>s.jsx(Ke,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:T.value}}),T.label]})},T.value))})]})]})]})]})]})}),s.jsx("div",{className:"px-6 py-4 border-t bg-background flex-shrink-0",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx(W,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancelar"}),s.jsx(W,{onClick:I,disabled:!k.code||!k.name||n,className:"flex-1",children:n?"Creando...":"Crear Cdigo"})]})})]})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Buscar cdigos...",value:v,onChange:T=>b(T.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hb,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(ln,{value:m,onValueChange:h,children:[s.jsx(Jt,{className:"w-40",children:s.jsx(cn,{placeholder:"Categora"})}),s.jsxs(Zt,{children:[s.jsx(Ke,{value:"all",children:"Todas"}),E.map(T=>s.jsx(Ke,{value:T.value,children:T.label},T.value))]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kf,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Cdigos"}),s.jsx("p",{className:"text-2xl font-bold",children:e.length})]})]})})}),s.jsx(ie,{children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tf,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En Uso"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(T=>T.usage_count>0).length})]})]})})}),s.jsx(ie,{children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Nt,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Asignaciones"}),s.jsx("p",{className:"text-2xl font-bold",children:t.length})]})]})})}),s.jsx(ie,{children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Categoras"}),s.jsx("p",{className:"text-2xl font-bold",children:u().length})]})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(T=>{var S;return s.jsx(ie,{className:"hover:shadow-md transition-shadow",children:s.jsxs(de,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"font-mono text-xs px-2 py-1",style:{backgroundColor:T.color,color:"#ffffff"},children:T.code}),s.jsx(We,{variant:"outline",className:"text-xs",children:((S=E.find(F=>F.value===T.category))==null?void 0:S.label)||T.category})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(W,{variant:"ghost",size:"sm",onClick:()=>P(T),className:"h-8 w-8 p-0",children:s.jsx($a,{className:"h-4 w-4"})}),s.jsx(W,{variant:"ghost",size:"sm",onClick:()=>z(T.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:s.jsx(pi,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-medium text-sm",children:T.name}),T.description&&s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:T.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:Y(T)}),s.jsx("span",{children:A(T)})]}),T.creator_name&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Creado por: ",T.creator_name]})]})]})},T.id)})}),R.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(kf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay cdigos"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:v||m!=="all"?"No hay cdigos que coincidan con los filtros":"An no tienes cdigos creados"}),s.jsxs(W,{onClick:()=>w(!0),children:[s.jsx(En,{className:"h-4 w-4 mr-2"}),"Crear Primer Cdigo"]})]}),s.jsx(Pr,{open:y,onClose:()=>_(!1),maxWidth:520,mobileMaxWidth:360,maxHeight:680,children:x&&s.jsxs("div",{className:"flex flex-col h-full max-h-[95vh]",children:[s.jsxs("div",{className:"px-6 pt-6 pb-4 border-b",children:[s.jsx("h3",{className:"text-xl font-semibold",children:"Editar Cdigo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Modifica los detalles del cdigo seleccionado. El cdigo no se puede cambiar."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[s.jsxs(jr,{type:"single",collapsible:!0,defaultValue:"basic",className:"w-full",children:[s.jsxs(_t,{value:"basic",children:[s.jsx(bt,{className:"text-left",children:"Datos del Cdigo"}),s.jsxs(jt,{className:"space-y-4 pt-2",children:[s.jsxs("div",{children:[s.jsx(K,{children:"Cdigo"}),s.jsx(pe,{value:x.code,disabled:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"El cdigo no se puede modificar despus de crearlo"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-name",children:"Nombre *"}),s.jsx(pe,{id:"edit-name",value:x.name,onChange:T=>p({...x,name:T.target.value}),placeholder:"Nombre descriptivo"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-description",children:"Descripcin"}),s.jsx(Yt,{id:"edit-description",value:x.description,onChange:T=>p({...x,description:T.target.value}),placeholder:"Descripcin opcional del cdigo",rows:3})]})]})]}),s.jsxs(_t,{value:"options",children:[s.jsx(bt,{className:"text-left",children:"Opciones"}),s.jsxs(jt,{className:"space-y-4 pt-2",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-category",children:"Categora"}),s.jsxs(ln,{value:x.category,onValueChange:T=>p({...x,category:T}),children:[s.jsx(Jt,{children:s.jsx(cn,{placeholder:"Selecciona una categora"})}),s.jsx(Zt,{className:"z-[130] bg-popover border shadow-md",position:"popper",side:"bottom",align:"start",sideOffset:8,avoidCollisions:!0,collisionPadding:16,children:E.map(T=>s.jsx(Ke,{value:T.value,children:T.label},T.value))})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"edit-color",children:"Color"}),s.jsxs(ln,{value:x.color,onValueChange:T=>p({...x,color:T}),children:[s.jsx(Jt,{children:s.jsx(cn,{placeholder:"Selecciona un color"})}),s.jsx(Zt,{className:"z-[130] bg-popover border shadow-md",position:"popper",side:"bottom",align:"start",sideOffset:8,avoidCollisions:!0,collisionPadding:16,children:M.map(T=>s.jsx(Ke,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:T.value}}),T.label]})},T.value))})]})]})]})]})]}),s.jsxs("div",{className:"flex gap-2 pb-2",children:[s.jsx(W,{onClick:D,disabled:!x.name||n,className:"flex-1",children:n?"Actualizando...":"Actualizar"}),s.jsx(W,{variant:"outline",onClick:()=>_(!1),className:"flex-1",children:"Cancelar"})]})]})]})})]})},o8=()=>{const{toast:e}=kt(),[t,n]=f.useState({monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"10:00",close:"22:00",closed:!1},sunday:{open:"10:00",close:"22:00",closed:!1}}),[r,a]=f.useState(!1),o=async()=>{var d,u,m,h,g,w,y,_,x,p,v,b,j,k,C,E,M,R,I,P,D;try{a(!0);const{data:z,error:Y}=await G.from("centers").select("working_hours").limit(1).single();if(Y){console.error("Error loading working hours:",Y);return}if(z!=null&&z.working_hours){const A=z.working_hours,T={monday:{open:((d=A.monday)==null?void 0:d.start)||"10:00",close:((u=A.monday)==null?void 0:u.end)||"22:00",closed:!((m=A.monday)!=null&&m.enabled)},tuesday:{open:((h=A.tuesday)==null?void 0:h.start)||"10:00",close:((g=A.tuesday)==null?void 0:g.end)||"22:00",closed:!((w=A.tuesday)!=null&&w.enabled)},wednesday:{open:((y=A.wednesday)==null?void 0:y.start)||"10:00",close:((_=A.wednesday)==null?void 0:_.end)||"22:00",closed:!((x=A.wednesday)!=null&&x.enabled)},thursday:{open:((p=A.thursday)==null?void 0:p.start)||"10:00",close:((v=A.thursday)==null?void 0:v.end)||"22:00",closed:!((b=A.thursday)!=null&&b.enabled)},friday:{open:((j=A.friday)==null?void 0:j.start)||"10:00",close:((k=A.friday)==null?void 0:k.end)||"22:00",closed:!((C=A.friday)!=null&&C.enabled)},saturday:{open:((E=A.saturday)==null?void 0:E.start)||"10:00",close:((M=A.saturday)==null?void 0:M.end)||"22:00",closed:!((R=A.saturday)!=null&&R.enabled)},sunday:{open:((I=A.sunday)==null?void 0:I.start)||"10:00",close:((P=A.sunday)==null?void 0:P.end)||"22:00",closed:!((D=A.sunday)!=null&&D.enabled)}};n(T)}}catch(z){console.error("Error loading working hours:",z)}finally{a(!1)}},i=async d=>{try{a(!0);const u={monday:{start:d.monday.open,end:d.monday.close,enabled:!d.monday.closed},tuesday:{start:d.tuesday.open,end:d.tuesday.close,enabled:!d.tuesday.closed},wednesday:{start:d.wednesday.open,end:d.wednesday.close,enabled:!d.wednesday.closed},thursday:{start:d.thursday.open,end:d.thursday.close,enabled:!d.thursday.closed},friday:{start:d.friday.open,end:d.friday.close,enabled:!d.friday.closed},saturday:{start:d.saturday.open,end:d.saturday.close,enabled:!d.saturday.closed},sunday:{start:d.sunday.open,end:d.sunday.close,enabled:!d.sunday.closed}},{error:m}=await G.from("centers").update({working_hours:u,updated_at:new Date().toISOString()}).eq("active",!0);return m?(console.error("Error saving working hours:",m),e({title:"Error",description:"No se pudieron guardar los horarios de trabajo",variant:"destructive"}),!1):(n(d),e({title:"Horarios guardados",description:"Los horarios de trabajo se han actualizado correctamente"}),!0)}catch(u){return console.error("Error saving working hours:",u),e({title:"Error",description:"No se pudieron guardar los horarios de trabajo",variant:"destructive"}),!1}finally{a(!1)}},l=(d,u)=>{n(m=>({...m,[d]:{...m[d],...u}}))},c=()=>{const d=new Date,m=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][d.getDay()],h=d.toTimeString().slice(0,5),g=t[m];return g.closed?!1:h>=g.open&&h<=g.close};return f.useEffect(()=>{o()},[]),{workingHours:t,setWorkingHours:n,updateWorkingHours:l,saveWorkingHours:i,loadWorkingHours:o,isOpenNow:c,loading:r}},i8=()=>{const[e,t]=f.useState("general"),{toast:n}=kt(),{workingHours:r,updateWorkingHours:a,saveWorkingHours:o,loading:i}=o8(),[l,c]=f.useState({businessName:"",phone:"",email:"",website:"",whatsapp:"+34 622 36 09 22",addressZurbaran:"",addressConchaEspina:""}),[d,u]=f.useState(!1),[m,h]=f.useState([]),[g,w]=f.useState(!1),y=async()=>{try{u(!0);const{data:j,error:k}=await G.from("centers").select("name, phone, email, whatsapp, website, address_zurbaran, address_concha_espina").eq("active",!0).limit(1);if(k){console.error("Error loading general settings:",k);return}if(j&&j.length>0){const C=j[0];c(E=>({...E,businessName:(C==null?void 0:C.name)||"",phone:(C==null?void 0:C.phone)||"",email:(C==null?void 0:C.email)||"",website:(C==null?void 0:C.website)||"",whatsapp:(C==null?void 0:C.whatsapp)||"+34 622 36 09 22",addressZurbaran:(C==null?void 0:C.address_zurbaran)||"C. de Zurbarn, 10, bajo dcha, Chamber, 28010 Madrid",addressConchaEspina:(C==null?void 0:C.address_concha_espina)||"C. del Prncipe de Vergara, 204 duplicado posterior, local 10, 28002 Madrid"}))}}catch(j){console.error("Error loading general settings:",j)}finally{u(!1)}},_=async()=>{try{u(!0);const{error:j}=await G.from("centers").update({name:l.businessName,phone:l.phone,email:l.email,website:l.website,whatsapp:l.whatsapp,address_zurbaran:l.addressZurbaran,address_concha_espina:l.addressConchaEspina,updated_at:new Date().toISOString()}).eq("active",!0);if(j){console.error("Error saving general settings:",j),n({title:"Error",description:"No se pudo guardar la configuracin general",variant:"destructive"});return}n({title:"Configuracin guardada",description:"La configuracin general ha sido actualizada correctamente"})}catch(j){console.error("Error saving general settings:",j),n({title:"Error",description:"No se pudo guardar la configuracin general",variant:"destructive"})}finally{u(!1)}},x=async()=>{await o(r)&&n({title:"Horarios guardados",description:"Los horarios de trabajo se han actualizado en todo el sistema"})},p=async()=>{try{w(!0);const{data:j,error:k}=await G.from("pricing_policies").select("*").order("created_at",{ascending:!0});if(k){console.error("Error loading pricing policies:",k);return}h(j||[])}catch(j){console.error("Error loading pricing policies:",j)}finally{w(!1)}},v=async(j,k)=>{try{const{error:C}=await G.from("pricing_policies").update({percentage_charge:k,updated_at:new Date().toISOString()}).eq("id",j);if(C){console.error("Error saving pricing policy:",C),n({title:"Error",description:"No se pudo guardar la poltica de precios",variant:"destructive"});return}n({title:"Poltica guardada",description:"La poltica de precios ha sido actualizada correctamente"}),p()}catch(C){console.error("Error saving pricing policy:",C),n({title:"Error",description:"No se pudo guardar la poltica de precios",variant:"destructive"})}},b=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Mircoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sbado"},{key:"sunday",label:"Domingo"}];return f.useEffect(()=>{y(),p()},[]),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Configuracin del Sistema - The Nook Madrid"})})}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6 px-2 sm:px-4 lg:px-6",children:s.jsxs(ys,{value:e,onValueChange:t,className:"w-full",children:[s.jsx("div",{className:"lg:hidden mb-4",children:s.jsxs("select",{value:e,onChange:j=>t(j.target.value),className:"w-full p-3 border rounded-lg bg-background text-sm font-medium shadow-sm",children:[s.jsx("option",{value:"general",children:" General"}),s.jsx("option",{value:"pricing",children:" Precios y Polticas"}),s.jsx("option",{value:"codes",children:" Cdigos"})]})}),s.jsxs(ws,{className:"hidden lg:grid w-full grid-cols-3 h-auto mb-6",children:[s.jsxs(ct,{value:"general",className:"flex items-center gap-2 p-3",children:[s.jsx(iy,{className:"h-4 w-4"}),s.jsx("span",{children:"General"})]}),s.jsxs(ct,{value:"pricing",className:"flex items-center gap-2 p-3",children:[s.jsx(Rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Precios y Polticas"})]}),s.jsxs(ct,{value:"codes",className:"flex items-center gap-2 p-3",children:[s.jsx(kf,{className:"h-4 w-4"}),s.jsx("span",{children:"Cdigos"})]})]}),s.jsxs(st,{value:"general",className:"space-y-4 sm:space-y-6",children:[s.jsxs(ie,{className:"shadow-sm border-2",children:[s.jsxs(Ne,{className:"pb-3 sm:pb-6",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(iy,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Informacin General del Negocio"]}),s.jsx(Un,{className:"text-sm sm:text-base",children:"Configura los datos bsicos de tu centro"})]}),s.jsxs(de,{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"businessName",className:"text-sm font-medium",children:"Nombre del Negocio"}),s.jsx(pe,{id:"businessName",value:l.businessName,onChange:j=>c(k=>({...k,businessName:j.target.value})),className:"h-10 sm:h-11"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"phone",className:"text-sm font-medium",children:"Telfono"}),s.jsx(pe,{id:"phone",value:l.phone,onChange:j=>c(k=>({...k,phone:j.target.value})),className:"h-10 sm:h-11"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"whatsapp",className:"text-sm font-medium",children:"WhatsApp"}),s.jsx(pe,{id:"whatsapp",value:l.whatsapp,onChange:j=>c(k=>({...k,whatsapp:j.target.value})),className:"h-10 sm:h-11",placeholder:"+34 622 36 09 22"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),s.jsx(pe,{id:"email",type:"email",value:l.email,onChange:j=>c(k=>({...k,email:j.target.value})),className:"h-10 sm:h-11"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"website",className:"text-sm font-medium",children:"Sitio Web"}),s.jsx(pe,{id:"website",value:l.website,onChange:j=>c(k=>({...k,website:j.target.value})),className:"h-10 sm:h-11"})]})]}),s.jsx(W,{onClick:_,className:"w-full sm:w-auto",disabled:d,children:d?"Guardando...":"Guardar Configuracin General"})]})]}),s.jsxs(ie,{className:"shadow-sm border-2",children:[s.jsxs(Ne,{className:"pb-3 sm:pb-6",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(sr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Horarios de Atencin"]}),s.jsx(Un,{className:"text-sm sm:text-base",children:"Configura los horarios de trabajo por da de la semana"})]}),s.jsxs(de,{className:"space-y-3 sm:space-y-4",children:[b.map(j=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 border rounded-lg gap-3 sm:gap-2 bg-accent/10",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("span",{className:"font-medium w-16 sm:w-20 text-sm sm:text-base",children:j.label}),s.jsx(iu,{checked:!r[j.key].closed,onCheckedChange:k=>a(j.key,{closed:!k})})]}),!r[j.key].closed&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{type:"time",value:r[j.key].open,onChange:k=>a(j.key,{open:k.target.value}),className:"w-20 sm:w-24 h-9 text-sm"}),s.jsx("span",{className:"text-muted-foreground",children:"-"}),s.jsx(pe,{type:"time",value:r[j.key].close,onChange:k=>a(j.key,{close:k.target.value}),className:"w-20 sm:w-24 h-9 text-sm"})]})]},j.key)),s.jsx(W,{onClick:x,className:"w-full sm:w-auto mt-4",disabled:i,children:i?"Guardando...":"Guardar Horarios"})]})]}),s.jsxs(ie,{className:"shadow-sm border-2",children:[s.jsxs(Ne,{className:"pb-3 sm:pb-6",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(yn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Ubicaciones de los Centros"]}),s.jsx(Un,{className:"text-sm sm:text-base",children:"Mapas de las dos ubicaciones de The Nook Madrid"})]}),s.jsxs(de,{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yn,{className:"h-4 w-4 text-primary"}),s.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Centro Zurbarn"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"addressZurbaran",className:"text-xs font-medium",children:"Direccin"}),s.jsx(Yt,{id:"addressZurbaran",value:l.addressZurbaran,onChange:j=>c(k=>({...k,addressZurbaran:j.target.value})),className:"min-h-[60px] text-xs resize-none",rows:3})]}),s.jsx("div",{className:"rounded-lg overflow-hidden border",children:s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3036.5489!2d-3.6917!3d40.4296!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd4228849b1e5263%3A0x7e1b9e3f8b3c1234!2sC.%20de%20Zurbar%C3%A1n%2C%2010%2C%20Chamber%C3%AD%2C%2028010%20Madrid!5e0!3m2!1sen!2ses!4v1234567890",width:"100%",height:"200",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),s.jsx(W,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:s.jsxs("a",{href:"https://maps.google.com/?q=C. de Zurbarn, 10, bajo dcha, Chamber, 28010 Madrid",target:"_blank",rel:"noopener noreferrer",children:[s.jsx(yn,{className:"mr-2 h-3 w-3"}),"Abrir en Google Maps"]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yn,{className:"h-4 w-4 text-primary"}),s.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Centro Concha Espina"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"addressConchaEspina",className:"text-xs font-medium",children:"Direccin"}),s.jsx(Yt,{id:"addressConchaEspina",value:l.addressConchaEspina,onChange:j=>c(k=>({...k,addressConchaEspina:j.target.value})),className:"min-h-[60px] text-xs resize-none",rows:3})]}),s.jsx("div",{className:"rounded-lg overflow-hidden border",children:s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3036.364!2d-3.6736659!3d40.4347875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDI2JzA1LjIiTiAzwrA0MCcyNS4yIlc!5e0!3m2!1sen!2ses!4v1646123456789!5m2!1sen!2ses&q=C.+del+Prncipe+de+Vergara,+204+duplicado+posterior,+local+10,+28002+Madrid",width:"100%",height:"200",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),s.jsx(W,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:s.jsxs("a",{href:"https://maps.google.com/?q=Centro+de+masajes+Madrid+Concha+Espina+The+Nook,+C.+del+Prncipe+de+Vergara,+204+duplicado+posterior,+local+10,+28002+Madrid",target:"_blank",rel:"noopener noreferrer",children:[s.jsx(yn,{className:"mr-2 h-3 w-3"}),"Abrir en Google Maps"]})})]})]}),s.jsx(W,{onClick:_,className:"w-full sm:w-auto",disabled:d,children:d?"Guardando...":"Guardar Ubicaciones"})]})]})]}),s.jsx(st,{value:"pricing",className:"space-y-4 sm:space-y-6",children:s.jsxs(ie,{className:"shadow-sm border-2",children:[s.jsxs(Ne,{className:"pb-3 sm:pb-6",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Rl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Polticas de Precios y Stripe"]}),s.jsx(Un,{className:"text-sm sm:text-base",children:"Configura las polticas de cobro para no-shows, cancelaciones y otros eventos conectados con Stripe"})]}),s.jsxs(de,{className:"space-y-4 sm:space-y-6",children:[g?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Cargando polticas..."})}):s.jsx("div",{className:"space-y-4",children:m.map(j=>s.jsxs("div",{className:"border rounded-lg p-4 bg-accent/10",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm sm:text-base",children:j.policy_name}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:j.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{type:"number",min:"0",max:"100",step:"0.01",defaultValue:j.percentage_charge,className:"w-20 h-9 text-sm",onBlur:k=>{const C=parseFloat(k.target.value)||0;C!==j.percentage_charge&&v(j.id,C)}}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),j.policy_type==="no_show"&&s.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:"Stripe Integration:"})," Si el cliente no se presenta y el porcentaje es mayor a 0%, se cobrar automticamente este porcentaje del precio del servicio a la tarjeta guardada en Stripe."]})})]},j.id))}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:" Configuracin de Stripe"}),s.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Para que las polticas de precios funcionen correctamente, asegrate de que Stripe est configurado y las tarjetas de los clientes estn guardadas durante el proceso de reserva."}),s.jsxs("ul",{className:"text-xs text-yellow-600 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"No Show (0%):"})," No se cobra nada aunque haya tarjeta guardada"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"No Show (>0%):"})," Se cobra el porcentaje automticamente"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Cancelaciones:"})," Se aplicarn segn las polticas configuradas"]})]})]})})]})]})}),s.jsx(st,{value:"codes",className:"space-y-4 sm:space-y-6",children:s.jsx(a8,{})}),s.jsx(st,{value:"gifts",className:"space-y-4 sm:space-y-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Esta seccin est disponible en el men principal de administracin."})})})]})})})]})},Ch=[{value:"requested",label:"Solicitada",color:"bg-yellow-100 text-yellow-800"},{value:"confirmed",label:"Confirmada",color:"bg-blue-100 text-blue-800"},{value:"new",label:"Nueva",color:"bg-green-100 text-green-800"},{value:"online",label:"Online",color:"bg-purple-100 text-purple-800"},{value:"cancelled",label:"Cancelada",color:"bg-red-100 text-red-800"},{value:"no_show",label:"No Show",color:"bg-gray-100 text-gray-800"}],Sh=[{value:"pending",label:"Pendiente de Pago",color:"bg-orange-100 text-orange-800"},{value:"paid",label:"Pagada",color:"bg-green-100 text-green-800"}],P0=[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"bizum",label:"Bizum"},{value:"paypal",label:"PayPal"},{value:"apple_pay",label:"Apple Pay"}];function l8({booking:e,onBookingUpdated:t}){var F,H,Q,O,q,ne,Pe,ue;const[n,r]=f.useState(!1),[a,o]=f.useState(e.status),[i,l]=f.useState(e.payment_status),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,g]=f.useState(!1),[w,y]=f.useState(e.booking_codes||[]),{toast:_}=kt(),x=dr(),p="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm font-medium text-foreground ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{codes:v,assignments:b,getAssignmentsByEntity:j}=ic(),k=(F=e.profiles)!=null&&F.id?j("client",e.profiles.id):[],C=$=>{const te=Ch.find(xe=>xe.value===$)||Ch[0];return s.jsx(We,{className:te.color,children:te.label})},E=$=>{const te=Sh.find(xe=>xe.value===$)||Sh[0];return s.jsx(We,{className:te.color,children:te.label})},M=async $=>{try{const{error:te}=await G.from("bookings").update({status:$}).eq("id",e.id);if(te)throw te;_({title:"Estado actualizado",description:"El estado de la cita ha sido actualizado"}),o($),t()}catch(te){console.error("Error updating booking status:",te),_({title:"Error",description:"No se pudo actualizar el estado",variant:"destructive"})}},R=async $=>{try{const{error:te}=await G.from("bookings").update({payment_status:$}).eq("id",e.id);if(te)throw te;_({title:"Pago actualizado",description:"El estado del pago ha sido actualizado"}),l($),t()}catch(te){console.error("Error updating payment status:",te),_({title:"Error",description:"No se pudo actualizar el estado del pago",variant:"destructive"})}},I=async $=>{try{const{error:te}=await G.from("bookings").update({booking_codes:$}).eq("id",e.id);if(te)throw te;_({title:"Cdigos actualizados",description:"Los cdigos de la reserva han sido actualizados"}),y($),t()}catch(te){console.error("Error updating booking codes:",te),_({title:"Error",description:"No se pudieron actualizar los cdigos",variant:"destructive"})}},P=$=>{const te=w.includes($)?w.filter(xe=>xe!==$):[...w,$];I(te)},D=$=>{const te=v.find(xe=>xe.code===$);return(te==null?void 0:te.color)||"#3B82F6"},z=()=>k.some($=>{var te;return(te=$.code_name)==null?void 0:te.toLowerCase().includes("vip")})||w.some($=>$.toLowerCase().includes("vip")),Y=()=>k.some($=>{var te;return(te=$.code_name)==null?void 0:te.toLowerCase().includes("priority")})||w.some($=>$.toLowerCase().includes("priority")),A=async $=>{$.preventDefault(),$.stopPropagation(),r(!0)},T=()=>{r(!1),d(""),m("")},S=async()=>{var $,te,xe,fe;if(!c){_({title:"Error",description:"Selecciona una forma de pago",variant:"destructive"});return}g(!0);try{const{error:he}=await G.from("bookings").update({payment_status:"paid",payment_method:c,payment_notes:u||`Cobrado por ${c} el ${new Date().toLocaleString()}`}).eq("id",e.id);if(he)throw he;try{const N={event_type:"payment_processed",booking_id:e.id,payment_method:c,amount_cents:e.total_price_cents,client_id:($=e.profiles)==null?void 0:$.email,service_name:(te=e.services)==null?void 0:te.name,center_name:(xe=e.centers)==null?void 0:xe.name,processed_at:new Date().toISOString(),processed_by:"staff"};await G.from("business_metrics").insert({metric_name:"payment_processed",metric_type:"revenue",metric_value:e.total_price_cents/100,period_start:new Date().toISOString().split("T")[0],period_end:new Date().toISOString().split("T")[0],metadata:N}),console.log("Analytics data sent:",N)}catch(N){console.error("Error sending analytics data:",N)}_({title:" Pago procesado exitosamente",description:`Cita cobrada por ${(fe=P0.find(N=>N.value===c))==null?void 0:fe.label} - ${(e.total_price_cents/100).toFixed(2)}`}),l("paid"),d(""),m(""),r(!1),t()}catch(he){console.error("Error processing payment:",he),_({title:"Error",description:"No se pudo procesar el pago",variant:"destructive"})}finally{g(!1)}};return s.jsx(dS,{className:`booking-card ${z()?"ring-2 ring-yellow-400":Y()?"ring-2 ring-orange-400":""}`,padding:"sm",children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:`${x?"space-y-3":"flex justify-between items-start"}`,children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`font-semibold flex items-center gap-2 ${x?"text-base":"text-lg"}`,children:[s.jsx(Nt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Cita - ",ke(new Date(e.booking_datetime),"dd/MM/yyyy",{locale:Ue})]}),s.jsxs("div",{className:`${x?"flex flex-col gap-1":"flex items-center gap-4"} text-xs sm:text-sm text-muted-foreground`,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),ke(new Date(e.booking_datetime),"HH:mm",{locale:Ue}),"(",e.duration_minutes," min)"]}),e.profiles&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsxs("span",{className:"truncate",children:[e.profiles.first_name," ",e.profiles.last_name]})]})]})]}),s.jsxs("div",{className:`${x?"flex justify-between items-center":"text-right"} space-y-2`,children:[s.jsxs("div",{className:`font-bold text-primary ${x?"text-lg":"text-xl"}`,children:[(e.total_price_cents/100).toFixed(2),""]}),s.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[C(a),E(i)]})]})]}),s.jsxs("div",{className:`grid gap-3 sm:gap-4 ${x?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}`,children:[s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Servicio"}),s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:((H=e.services)==null?void 0:H.name)||"Sin servicio"})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Centro"}),s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:((Q=e.centers)==null?void 0:Q.name)||"Sin centro"})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Cliente"}),s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:((O=e.profiles)==null?void 0:O.email)||"Sin email"}),((q=e.profiles)==null?void 0:q.phone)&&s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:e.profiles.phone})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Notas"}),s.jsx("p",{className:"text-xs sm:text-sm line-clamp-2",children:e.notes||"Sin notas"})]})]}),(k.length>0||w.length>0)&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(K,{className:"text-xs sm:text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Tf,{className:"h-3 w-3"}),"Cdigos"]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[k.map($=>s.jsxs(We,{variant:"outline",className:"text-xs",style:{borderColor:$.code_color,color:$.code_color,backgroundColor:`${$.code_color}10`},children:["Cliente: ",$.code]},$.id)),w.map($=>s.jsxs(We,{variant:"secondary",className:"text-xs",style:{borderColor:D($),color:D($),backgroundColor:`${D($)}20`},children:["Reserva: ",$]},$))]})]}),s.jsx("div",{className:"pt-3 sm:pt-4 border-t",children:s.jsx(W,{className:"w-full sm:w-auto",variant:"outline",onClick:A,children:"Modificar Reserva"})}),s.jsx(Pr,{open:n,onClose:T,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:s.jsxs("div",{className:`${x?"p-4":"p-6"} flex flex-col gap-4 h-full`,children:[s.jsxs("div",{className:`flex items-center justify-between ${x?"":"mb-2"}`,children:[s.jsx("h3",{className:`font-semibold ${x?"text-lg":"text-xl"}`,children:"Modificar Reserva"}),s.jsx(W,{variant:"outline",size:"sm",onClick:T,className:"h-8 w-8 p-0",children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 overflow-y-auto pr-1 flex-1",children:[s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground border-b pb-3",children:[s.jsxs("p",{children:["Cliente: ",(ne=e.profiles)==null?void 0:ne.first_name," ",(Pe=e.profiles)==null?void 0:Pe.last_name]}),s.jsxs("p",{children:["Fecha: ",ke(new Date(e.booking_datetime),"dd/MM/yyyy HH:mm",{locale:Ue})]}),s.jsxs("p",{children:["Servicio: ",((ue=e.services)==null?void 0:ue.name)||"Sin servicio"]}),s.jsxs("p",{children:["Precio: ",(e.total_price_cents/100).toFixed(2),""]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{className:"text-sm font-medium",children:"Estado de la Cita"}),s.jsx("select",{value:a,onChange:$=>M($.target.value),className:p,children:Ch.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{className:"text-sm font-medium",children:"Estado del Pago"}),s.jsx("select",{value:i,onChange:$=>R($.target.value),className:p,children:Sh.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))})]}),s.jsxs("div",{className:"space-y-3 border-t pt-3",children:[s.jsxs(K,{className:"text-sm font-medium flex items-center gap-1",children:[s.jsx(Tf,{className:"h-4 w-4"}),"Cdigos de la Reserva"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:v.map($=>s.jsxs(We,{variant:w.includes($.code)?"default":"outline",className:"cursor-pointer text-xs",style:{backgroundColor:w.includes($.code)?$.color:"transparent",borderColor:$.color,color:w.includes($.code)?"white":$.color},onClick:()=>P($.code),children:[$.code," - ",$.name]},$.id))}),k.length>0&&s.jsxs("div",{children:[s.jsx(K,{className:"text-xs text-muted-foreground",children:"Cdigos del cliente:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:k.map($=>s.jsx(We,{variant:"outline",className:"text-xs",style:{borderColor:$.code_color,color:$.code_color,backgroundColor:`${$.code_color}10`},children:$.code},$.id))})]})]})]}),i==="pending"&&s.jsxs("div",{className:"space-y-3 border-t pt-3",children:[s.jsx(K,{className:"text-sm font-medium",children:"Procesar Pago"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(K,{className:"text-sm",children:"Mtodo de Pago"}),s.jsxs("select",{value:c,onChange:$=>d($.target.value),className:p,children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Seleccionar mtodo..."}),P0.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))]})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm",children:"Notas del Pago (Opcional)"}),s.jsx(Yt,{placeholder:"Notas adicionales...",value:u,onChange:$=>m($.target.value),className:"min-h-[60px] resize-none"})]}),s.jsx(W,{onClick:S,disabled:h||!c,className:"w-full",size:"sm",children:h?"Procesando...":`Procesar Pago (${(e.total_price_cents/100).toFixed(2)})`})]})]})]})]})})]})})}function c8(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),{toast:a}=kt(),o=dr();f.useEffect(()=>{document.title="Gestin de Citas | The Nook Madrid",i()},[]);const i=async()=>{try{const{data:h,error:g}=await G.from("bookings").select(`
          *,
          services (name),
          centers (name),
          profiles (id, first_name, last_name, email, phone)
        `).order("booking_datetime",{ascending:!1});if(g)throw g;t(h||[])}catch(h){console.error("Error fetching bookings:",h),a({title:"Error",description:"No se pudieron cargar las citas",variant:"destructive"})}finally{r(!1)}},{upcomingGroups:l,historicalGroups:c}=f.useMemo(()=>{const h=Date.now(),g=new Map,w=new Map;e.forEach(x=>{const p=Dt(x.booking_datetime),v=p.getTime(),b=ke(p,"yyyy-MM-dd",{locale:Ue}),j=v>=h?g:w;j.has(b)||j.set(b,[]),j.get(b).push(x)});const y=Array.from(g.entries()).map(([x,p])=>({key:x,bookings:[...p].sort((v,b)=>Dt(v.booking_datetime).getTime()-Dt(b.booking_datetime).getTime()),nextTime:Math.min(...p.map(v=>Dt(v.booking_datetime).getTime()))})).sort((x,p)=>x.nextTime-p.nextTime).map(({key:x,bookings:p})=>({key:x,bookings:p})),_=Array.from(w.entries()).map(([x,p])=>({key:x,bookings:[...p].sort((v,b)=>Dt(b.booking_datetime).getTime()-Dt(v.booking_datetime).getTime()),lastTime:Math.max(...p.map(v=>Dt(v.booking_datetime).getTime()))})).sort((x,p)=>p.lastTime-x.lastTime).map(({key:x,bookings:p})=>({key:x,bookings:p}));return{upcomingGroups:y,historicalGroups:_}},[e]),[d,u]=f.useState(l.length>0?"upcoming":"historical");f.useEffect(()=>{d==="upcoming"&&l.length===0&&c.length>0?u("historical"):d==="historical"&&c.length===0&&l.length>0&&u("upcoming")},[d,l.length,c.length]);const m=h=>h.map(({key:g,bookings:w})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-foreground border-b pb-2",children:[g," (",w.length," ",w.length===1?"cita":"citas",")"]}),s.jsx("div",{className:"space-y-3",children:w.map(y=>s.jsx(l8,{booking:y,onBookingUpdated:i},y.id))})]},g));return n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Cargando citas..."})]})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-40",children:s.jsx(au,{padding:"md",children:s.jsx("h1",{className:`font-bold text-foreground ${o?"text-lg":"text-2xl"}`,children:"Gestin de Citas - The Nook Madrid"})})}),s.jsx("main",{className:"py-4 sm:py-8",children:s.jsx(au,{maxWidth:"7xl",padding:"md",children:s.jsx("div",{className:"space-y-4 sm:space-y-6",children:s.jsxs(ys,{value:d,onValueChange:h=>u(h),className:"space-y-4",children:[s.jsxs(ws,{className:"grid w-full grid-cols-2 sm:w-auto",children:[s.jsx(ct,{value:"upcoming",children:"Prximas"}),s.jsx(ct,{value:"historical",children:"Histrico"})]}),s.jsxs(st,{value:"upcoming",children:[m(l),l.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay citas prximas."})]}),s.jsxs(st,{value:"historical",children:[m(c),c.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay citas histricas."})]})]})})})})]})}const d8=()=>{const[e,t]=f.useState("calendario"),{user:n,isAdmin:r,isEmployee:a,loading:o}=_v(),i=xs();if(o)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Cargando panel de administracin..."})]})});const l=[{id:"calendario",label:"Calendario",icon:Nt,component:L6,roles:["admin","employee"]},{id:"clientes",label:"Gestin de Clientes",icon:Ud,component:z6,roles:["admin","employee"]},{id:"bonos",label:"Bonos",icon:La,component:q6,roles:["admin","employee"]},{id:"tarjetas-regalo",label:"Tarjetas Regalo",icon:La,component:Y6,roles:["admin","employee"]},{id:"advanced-analytics",label:"Dashboard Avanzado",icon:fg,component:MF,roles:["admin"]},{id:"precios-promos",label:"Precios y Promos",icon:Rl,component:s8,roles:["admin"]},{id:"grupos-tratamientos",label:"Grupos de Tratamientos",icon:iT,component:RF,roles:["admin"]},{id:"gestion-citas",label:"Gestin de Citas",icon:Nt,component:c8,roles:["admin"]},{id:"configuracion",label:"Configuracin",icon:Ao,component:i8,roles:["admin"]}],c=r?"admin":"employee",d=l.filter(m=>m.roles.includes(c));d.find(m=>m.id===e)||d[0];const u=()=>{localStorage.removeItem("nook_user_session"),i("/admin-login")};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 truncate",children:"Panel de Administracin"}),s.jsxs("p",{className:"text-muted-foreground text-sm sm:text-base truncate",children:["Bienvenido, ",(n==null?void 0:n.name)||"Usuario"," - ",r?"Administrador":"Empleado"]})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>i("/"),className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 h-7 sm:h-8",children:[s.jsx("span",{className:"hidden sm:inline",children:"Ver pgina pblica"}),s.jsx("span",{className:"sm:hidden",children:"Ver web"})]}),s.jsxs(W,{variant:"outline",size:"sm",onClick:u,className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 h-7 sm:h-8",children:[s.jsx("span",{className:"hidden sm:inline",children:"Cerrar sesin"}),s.jsx("span",{className:"sm:hidden",children:"Salir"})]})]})]})}),s.jsxs(ys,{value:e,onValueChange:t,className:"w-full",children:[s.jsx("div",{className:"lg:hidden mb-6",children:s.jsx(ie,{children:s.jsx(de,{className:"p-4",children:s.jsx("select",{value:e,onChange:m=>t(m.target.value),className:"w-full p-3 border rounded-lg bg-background text-sm font-medium",children:d.map(m=>s.jsx("option",{value:m.id,children:m.label},m.id))})})})}),s.jsx("div",{className:"hidden lg:block mb-8",children:s.jsx(ie,{children:s.jsx(de,{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-5 gap-4",children:d.map(m=>{const h=m.icon,g=e===m.id;return s.jsxs(W,{variant:g?"default":"outline",onClick:()=>t(m.id),className:"h-auto p-4 flex flex-col items-center gap-3 text-sm font-medium transition-all hover:scale-105",children:[s.jsx(h,{className:"h-6 w-6"}),s.jsx("span",{children:m.label})]},m.id)})})})})}),d.map(m=>{const h=m.component;return s.jsx(st,{value:m.id,className:"mt-0",children:s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"h-6 w-6"}),m.label]})}),s.jsx(de,{children:s.jsx(h,{})})]})},m.id)})]})]})})},u8=()=>{const[e,t]=f.useState({email:"",password:""}),[n,r]=f.useState(!1),[a,o]=f.useState(!1),[i,l]=f.useState(!1),{toast:c}=kt(),d=xs(),u=async h=>{h.preventDefault(),r(!0);try{const{data:g,error:w}=await G.auth.signInWithPassword({email:e.email,password:e.password});if(w||!(g!=null&&g.user)){c({title:"Error de autenticacin",description:(w==null?void 0:w.message)||"Credenciales incorrectas",variant:"destructive"}),r(!1);return}await new Promise(p=>setTimeout(p,300));const{data:y,error:_}=await G.from("profiles").select("*").eq("user_id",g.user.id).maybeSingle();if(_||!y){await G.auth.signOut(),c({title:"Error",description:"No se encontr el perfil del usuario",variant:"destructive"}),r(!1);return}if(!y.is_staff||!y.is_active){await G.auth.signOut(),c({title:"Acceso denegado",description:"No tienes permisos para acceder al panel",variant:"destructive"}),r(!1);return}const x={id:y.id,email:y.email,role:y.role,name:`${y.first_name||""} ${y.last_name||""}`.trim()||y.email,loginTime:Date.now()};localStorage.setItem("nook_user_session",JSON.stringify(x)),c({title:" Acceso concedido",description:`Bienvenido ${y.role==="admin"?"Administrador":"Empleado"}`}),d("/panel-gestion-nook-madrid-2024")}catch(g){console.error("Error durante login:",g),c({title:"Error del sistema",description:"Ocurri un error. Intenta de nuevo.",variant:"destructive"}),r(!1)}},m=async()=>{if(!e.email){c({title:"Email requerido",description:"Introduce tu email para restablecer la contrasea",variant:"destructive"});return}l(!0);try{const{error:h}=await G.auth.resetPasswordForEmail(e.email,{redirectTo:`${window.location.origin}/admin-login`});if(h){c({title:"Error",description:h.message,variant:"destructive"});return}c({title:"Email enviado",description:"Revisa tu correo para restablecer la contrasea"})}catch(h){console.error("Error resetting password:",h),c({title:"Error del sistema",description:"No se pudo enviar el email. Intenta de nuevo.",variant:"destructive"})}finally{l(!1)}};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"mx-auto bg-primary/10 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:s.jsx(Gb,{className:"h-6 w-6 text-primary"})}),s.jsx(Ee,{className:"text-2xl",children:"Panel de Administracin"}),s.jsx(Un,{children:"Accede al sistema de gestin"})]}),s.jsxs(de,{children:[s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"email",children:"Email"}),s.jsx(pe,{id:"email",type:"email",value:e.email,onChange:h=>t({...e,email:h.target.value}),placeholder:"",required:!0})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"password",children:"Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"password",type:a?"text":"password",value:e.password,onChange:h=>t({...e,password:h.target.value}),placeholder:"",required:!0}),s.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!a),children:a?s.jsx(oT,{className:"h-4 w-4"}):s.jsx(Wb,{className:"h-4 w-4"})})]})]}),s.jsx(W,{type:"submit",className:"w-full",disabled:n,children:n?"Verificando...":"Iniciar Sesin"}),s.jsx("div",{className:"text-center",children:s.jsx(W,{type:"button",variant:"outline",size:"sm",disabled:i,onClick:m,children:i?"Enviando...":"Olvidaste tu contrasea?"})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(W,{variant:"ghost",onClick:()=>d("/"),className:"text-sm text-muted-foreground",children:"Volver a la pgina principal"})})]})]})})},T0=[{code:"es",name:"Espaol",flag:""},{code:"en",name:"English",flag:""},{code:"fr",name:"Franais",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"it",name:"Italiano",flag:""},{code:"pt",name:"Portugus",flag:""}];function pm(){const{language:e,setLanguage:t}=tc(),n=r=>{t(r)};return T0.find(r=>r.code===e),s.jsx("div",{className:"flex items-center",children:s.jsxs(ln,{value:e,onValueChange:n,children:[s.jsx(Jt,{className:"min-w-[150px] h-9 rounded-full border border-border/60 bg-white/90 px-4 text-sm font-medium shadow-sm hover:bg-accent/40 focus:ring-2 focus:ring-primary/30 focus:ring-offset-0",children:s.jsx(cn,{className:"text-sm font-medium text-foreground"})}),s.jsx(Zt,{position:"popper",side:"bottom",align:"start",sideOffset:4,avoidCollisions:!0,collisionPadding:20,className:"z-[100] min-w-[170px] rounded-2xl border border-border/60 bg-white px-2 py-2 shadow-xl",children:T0.map(r=>s.jsx(Ke,{value:r.code,className:"text-sm font-medium",children:s.jsxs("span",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-base leading-none",children:r.flag}),s.jsx("span",{children:r.name})]})},r.code))})]})})}function m8(){const{t:e}=tc(),t=xs();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/10",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:s.jsxs(_n,{to:"/",className:"inline-flex items-center gap-3",children:[s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"Logotipo The Nook Madrid",className:"h-8 w-auto md:h-10",loading:"lazy",width:160,height:40}),s.jsx("span",{className:"sr-only",children:"The Nook Madrid"})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pm,{}),s.jsx(_n,{to:"/panel-gestion-nook-madrid-2024",className:"opacity-5 hover:opacity-100 transition-opacity",children:s.jsx("span",{className:"text-xs text-muted-foreground",children:""})})]})]})})}),s.jsx("section",{className:"container mx-auto px-4 py-8 sm:py-12",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 max-w-6xl mx-auto",children:[s.jsxs(ie,{className:"glass-effect border-primary/20 shadow-lg flex flex-col",children:[s.jsxs(Ne,{className:"text-center p-4 sm:p-6 flex-1 flex flex-col gap-2",children:[s.jsxs(Ee,{className:"flex items-center justify-center gap-2 text-lg sm:text-xl",children:[s.jsx(Nt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),s.jsx("span",{className:"text-sm sm:text-base",children:e("book_appointment")})]}),s.jsx(Un,{className:"text-center text-sm",children:e("book_description")})]}),s.jsx(de,{className:"text-center p-4 sm:p-6 pt-0 mt-auto",children:s.jsxs(W,{size:"lg",className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-primary-foreground text-sm sm:text-base py-3",onClick:()=>t("/client-reservation"),children:[s.jsx(Nt,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),e("book_now")]})})]}),s.jsxs(ie,{className:"glass-effect border-primary/20 shadow-lg flex flex-col",children:[s.jsxs(Ne,{className:"text-center p-4 sm:p-6 flex-1 flex flex-col gap-2",children:[s.jsxs(Ee,{className:"flex items-center justify-center gap-2 text-lg sm:text-xl",children:[s.jsx(La,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),s.jsx("span",{className:"text-sm sm:text-base",children:e("vouchers")})]}),s.jsx(Un,{className:"text-center text-sm",children:e("vouchers_description")})]}),s.jsx(de,{className:"text-center p-4 sm:p-6 pt-0 mt-auto",children:s.jsxs(W,{size:"lg",variant:"outline",className:"w-full text-sm sm:text-base py-3",onClick:()=>t("/packages"),children:[s.jsx(La,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),e("buy_voucher")]})})]}),s.jsxs(ie,{className:"glass-effect border-primary/20 shadow-lg flex flex-col",children:[s.jsxs(Ne,{className:"text-center p-4 sm:p-6 flex-1 flex flex-col gap-2",children:[s.jsxs(Ee,{className:"flex items-center justify-center gap-2 text-lg sm:text-xl",children:[s.jsx(Pf,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),s.jsx("span",{className:"text-sm sm:text-base",children:e("gift_cards")})]}),s.jsx(Un,{className:"text-center text-sm",children:e("gift_description")})]}),s.jsx(de,{className:"text-center p-4 sm:p-6 pt-0 mt-auto",children:s.jsxs(W,{size:"lg",variant:"outline",className:"w-full text-sm sm:text-base py-3",onClick:()=>t("/gift-cards"),children:[s.jsx(Pf,{className:"mr-2 h-5 w-5"}),e("gift_cards")]})})]})]})}),s.jsxs("section",{className:"container mx-auto px-4 py-16",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e("our_locations")}),s.jsx("p",{className:"text-lg text-muted-foreground",children:e("locations_subtitle")})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[s.jsxs(ie,{className:"glass-effect border-primary/20 shadow-lg",children:[s.jsxs(Ne,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5 text-primary"}),"Centro Zurbarn"]}),s.jsx(Un,{children:"C. de Zurbarn, 10, bajo dcha, Chamber, 28010 Madrid"})]}),s.jsx(de,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3036.5489!2d-3.6917!3d40.4296!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd4228849b1e5263%3A0x7e1b9e3f8b3c1234!2sC.%20de%20Zurbar%C3%A1n%2C%2010%2C%20Chamber%C3%AD%2C%2028010%20Madrid!5e0!3m2!1sen!2ses!4v1234567890",width:"100%",height:"200",style:{border:0,borderRadius:"8px"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),s.jsx(W,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs("a",{href:"https://maps.google.com/?q=C. de Zurbarn, 10, bajo dcha, Chamber, 28010 Madrid",target:"_blank",rel:"noopener noreferrer",children:[s.jsx(yn,{className:"mr-2 h-4 w-4"}),e("open_maps")]})})]})})]}),s.jsxs(ie,{className:"glass-effect border-primary/20 shadow-lg",children:[s.jsxs(Ne,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5 text-primary"}),"Centro Concha Espina"]}),s.jsx(Un,{children:"Centro de masajes Madrid Concha Espina - The Nook, C. del Prncipe de Vergara, 204 duplicado posterior, local 10, 28002 Madrid"})]}),s.jsx(de,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3036.364!2d-3.6736659!3d40.4347875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDI2JzA1LjIiTiAzwrA0MCcyNS4yIlc!5e0!3m2!1sen!2ses!4v1646123456789!5m2!1sen!2ses&q=C.+del+Prncipe+de+Vergara,+204+duplicado+posterior,+local+10,+28002+Madrid",width:"100%",height:"200",style:{border:0,borderRadius:"8px"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),s.jsx(W,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs("a",{href:"https://maps.google.com/?q=Centro+de+masajes+Madrid+Concha+Espina+The+Nook,+C.+del+Prncipe+de+Vergara,+204+duplicado+posterior,+local+10,+28002+Madrid",target:"_blank",rel:"noopener noreferrer",children:[s.jsx(yn,{className:"mr-2 h-4 w-4"}),e("open_maps")]})})]})})]})]})]}),s.jsx("footer",{className:"border-t bg-background/95 py-8",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-6 text-muted-foreground",children:[s.jsxs("a",{href:"tel:911481474",className:"flex items-center gap-2 hover:text-primary transition-colors",children:[s.jsx(Pu,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"text-sm whitespace-nowrap",children:"911 481 474"})]}),s.jsxs("a",{href:"https://wa.me/+34622360922",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-primary transition-colors",children:[s.jsx("span",{className:"text-sm",children:""}),s.jsx("span",{className:"text-sm whitespace-nowrap",children:"WhatsApp"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Eu,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"text-sm break-all sm:break-normal",children:"reservas@thenookmadrid.com"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:" GnerAI 2025  Todos los derechos reservados"})]})})]})}const h8=({open:e,onOpenChange:t,selected:n,onSelect:r,disabled:a,placeholder:o="Seleccionar fecha"})=>{dr();const[i,l]=X.useState(e);X.useEffect(()=>{l(e)},[e]),X.useEffect(()=>{l(e)},[e]);const c=u=>{u.preventDefault(),u.stopPropagation(),l(!0),t(!0)},d=()=>{l(!1),t(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs(W,{variant:"outline",className:le("w-full justify-start text-left font-normal mt-1",!n&&"text-muted-foreground"),onClick:c,children:[s.jsx(Nt,{className:"mr-2 h-4 w-4"}),n?ke(n,"PPP",{locale:Ue}):o]}),s.jsxs(Pr,{open:i,onClose:d,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:[s.jsx("div",{className:"pb-4 border-b border-border/10 p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Nt,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-semibold text-left",children:" Seleccionar Fecha"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Elige la fecha para tu cita"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(Mv,{mode:"single",selected:n,onSelect:u=>{r(u),d()},disabled:a,locale:Ue,className:"w-full max-w-sm mx-auto p-3 pointer-events-auto",classNames:{months:"flex flex-col space-y-6 w-full",month:"space-y-6 w-full",caption:"flex justify-center pt-2 relative items-center w-full mb-4",caption_label:"text-lg font-bold text-foreground",nav:"space-x-1 flex items-center",nav_button:"h-12 w-12 bg-transparent p-0 opacity-80 hover:opacity-100 border-2 border-input hover:bg-accent hover:text-accent-foreground rounded-lg transition-all",nav_button_previous:"absolute left-2",nav_button_next:"absolute right-2",table:"w-full border-collapse space-y-2",head_row:"flex w-full mb-2",head_cell:"text-muted-foreground rounded-md w-12 font-semibold text-base flex items-center justify-center py-3",row:"flex w-full mt-3",cell:"text-center text-base p-1 relative w-12 h-12 flex items-center justify-center",day:"h-11 w-11 p-0 font-medium text-base cursor-pointer rounded-lg hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground transition-all duration-200 flex items-center justify-center border border-transparent hover:border-accent-foreground/20",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground border-primary",day_today:"bg-accent text-accent-foreground font-bold border-accent-foreground/30",day_outside:"text-muted-foreground opacity-40",day_disabled:"text-muted-foreground opacity-20 cursor-not-allowed",day_hidden:"invisible"}})})})]})]})},f8=({open:e,onOpenChange:t,selected:n,onSelect:r,timeSlots:a,placeholder:o="Seleccionar hora"})=>{dr();const[i,l]=X.useState(e);X.useEffect(()=>l(e),[e]);const c=u=>{u.preventDefault(),u.stopPropagation(),l(!0),t(!0)},d=()=>{l(!1),t(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs(W,{variant:"outline",className:le("w-full justify-start text-left font-normal mt-1",!n&&"text-muted-foreground"),onClick:c,children:[s.jsx(sr,{className:"mr-2 h-4 w-4"}),n||o]}),s.jsxs(Pr,{open:i,onClose:d,maxWidth:500,mobileMaxWidth:350,maxHeight:600,children:[s.jsx("div",{className:"pb-4 border-b border-border/10 p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(sr,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-semibold text-left",children:" Seleccionar Hora"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Elige el horario que prefieras"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto py-6",children:[s.jsx("div",{className:"grid grid-cols-3 gap-3 px-4",children:a.map(({time:u,disabled:m,reason:h})=>s.jsx(W,{variant:n===u?"default":"outline",className:le("h-12 text-sm font-medium transition-all duration-200",m?"bg-muted text-muted-foreground opacity-70 cursor-not-allowed":n===u?"bg-primary text-primary-foreground shadow-md scale-105":"hover:bg-accent hover:text-accent-foreground hover:scale-105"),disabled:m,title:h,onClick:()=>{r(u),d()},children:u},u))}),a.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(sr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No hay horarios disponibles para esta fecha"})]})]})]})]})},p8=()=>{var z,Y;const{toast:e}=kt(),{t}=tc(),{centers:n}=Si(),{employees:r}=aI(),{lanes:a}=Yu(),{createBooking:o}=Kg(),{treatmentGroups:i,getTreatmentGroupByService:l}=ac();dr();const[c,d]=f.useState({clientName:"",clientPhone:"",clientEmail:"",center:"",date:void 0,time:"",notes:""}),[u,m]=f.useState(null),[h,g]=f.useState(!1),[w,y]=f.useState(!1),{services:_,loading:x}=ki(c.center),[p,v]=f.useState([]),[b,j]=f.useState(!1),k=(A,T,S=5)=>{const[F,H]=A.split(":").map(Number),[Q,O]=T.split(":").map(Number),q=[];let ne=new Date;ne.setHours(F,H,0,0);const Pe=new Date;for(Pe.setHours(Q,O,0,0);ne<=Pe;){const ue=String(ne.getHours()).padStart(2,"0"),$=String(ne.getMinutes()).padStart(2,"0");q.push(`${ue}:${$}`),ne.setMinutes(ne.getMinutes()+S)}return q},C=f.useMemo(()=>k("10:00","20:35",5),[]),[E,M]=f.useState(()=>C.map(A=>({time:A,disabled:!0})));f.useEffect(()=>{let A=!0;return(async()=>{var U,V;const S=C.map(ee=>({time:ee,disabled:!0})),F=c.center,H=c.date,Q=u;if(!F||!H||!Q){A&&M(S);return}const O=a.filter(ee=>ee.center_id===F&&ee.active);if(O.length===0){A&&M(S.map(ee=>({...ee,reason:"Sin carriles disponibles"})));return}let q=60;if(Q.kind==="service"){const ee=_.find(ae=>ae.id===Q.id);ee!=null&&ee.duration_minutes&&(q=ee.duration_minutes)}let ne=[];if(Q.kind==="service"){const ee=_.find(ae=>ae.id===Q.id);if((U=ee==null?void 0:ee.lane_ids)!=null&&U.length)ne=ee.lane_ids.filter(ae=>O.some(ye=>ye.id===ae));else{const ae=l(Q.id,_),ye=((V=ae==null?void 0:ae.lane_ids)==null?void 0:V.filter(me=>O.some(ve=>ve.id===me)))??[];ye.length>0?ne=ye:ae!=null&&ae.lane_id&&(ne=O.filter(me=>me.id===ae.lane_id).map(me=>me.id))}}let Pe=O;if(ne.length>0){const ee=O.filter(ae=>ne.includes(ae.id));Pe=ee.length>0?ee:O}const ue=new Date(H);ue.setHours(0,0,0,0);const $=new Date(ue);$.setDate($.getDate()+1);const{data:te,error:xe}=await G.from("bookings").select("lane_id, booking_datetime, duration_minutes, status").eq("center_id",F).gte("booking_datetime",ue.toISOString()).lt("booking_datetime",$.toISOString()).neq("status","cancelled");if(xe){console.error("Error al cargar disponibilidad de horarios:",xe),A&&M(C.map(ee=>({time:ee,disabled:!1})));return}const fe=te||[],he=new Date,N=H.toDateString()===he.toDateString(),L=C.map(ee=>{const ae=new Date(H),[ye,me]=ee.split(":").map(Number);ae.setHours(ye,me,0,0);const ve=new Date(ae);ve.setMinutes(ve.getMinutes()+q);let Ye=!1,Z;if(N){const ge=new Date(he);ge.setMinutes(ge.getMinutes()+30),ae<=ge&&(Ye=!0,Z="Horario pasado")}if(!Ye){let ge=!1;for(const J of Pe){if(J.blocked_until){const ot=new Date(J.blocked_until);if(ae<ot)continue}const Te=J.capacity||1;if(fe.filter(ot=>{if(ot.lane_id!==J.id)return!1;const Fe=new Date(ot.booking_datetime),xt=new Date(Fe);return xt.setMinutes(xt.getMinutes()+(ot.duration_minutes||60)),ae<xt&&ve>Fe}).length<Te){ge=!0;break}}ge||(Ye=!0,Z="Sin disponibilidad")}return{time:ee,disabled:Ye,reason:Z}});A&&M(L)})(),()=>{A=!1}},[c.center,c.date,u==null?void 0:u.id,u==null?void 0:u.kind,a,_,C,l]),f.useEffect(()=>{if(!c.time)return;const A=E.find(T=>T.time===c.time);(!A||A.disabled)&&d(T=>({...T,time:""}))},[E,c.time]);const R=async()=>{if(!(!c.clientEmail&&!c.clientPhone))try{const{data:A}=await G.from("profiles").select("*").or(`email.eq.${c.clientEmail},phone.eq.${c.clientPhone}`).maybeSingle();if(A){const{data:T}=await G.from("bookings").select(`
            *,
            services(name),
            centers(name),
            employees(profiles(first_name, last_name))
          `).eq("client_id",A.id).gte("booking_datetime",new Date().toISOString()).order("booking_datetime",{ascending:!0}),S=T||[];S.length>0&&(v(S),j(!0))}}catch(A){console.error("Error checking existing bookings:",A)}},I=async A=>{if(A.preventDefault(),!c.clientName||!c.center||!c.date||!c.time||!u){e({title:t("error"),description:t(u?"complete_required_fields":"select_service_error"),variant:"destructive"});return}try{let T;const S=c.clientEmail||`cliente_${Date.now()}@temp.com`,{data:F}=await G.from("profiles").select("*").or(`email.eq.${S},phone.eq.${c.clientPhone}`).maybeSingle();if(F){const{data:U,error:V}=await G.from("profiles").update({first_name:c.clientName.split(" ")[0],last_name:c.clientName.split(" ").slice(1).join(" ")||"",phone:c.clientPhone||F.phone,email:S}).eq("id",F.id).select().single();if(V)throw V;T=U}else{const{data:U,error:V}=await G.from("profiles").insert([{email:S,first_name:c.clientName.split(" ")[0],last_name:c.clientName.split(" ").slice(1).join(" ")||"",phone:c.clientPhone,role:"client"}]).select().single();if(V)throw V;T=U}let H=60,Q=0,O=null,q=c.notes||null;if((u==null?void 0:u.kind)==="service"){const U=_.find(V=>V.id===u.id);U&&(H=U.duration_minutes,O=U.id,Q=U.price_cents)}const ne=new Date(c.date),[Pe,ue]=c.time.split(":");ne.setHours(parseInt(Pe),parseInt(ue),0,0);const $=a.filter(U=>U.center_id===c.center&&U.active),te=r.filter(U=>U.center_id===c.center&&U.active);let xe=null,fe=!1;if(O&&(u==null?void 0:u.kind)==="service"){const U=_.find(V=>V.id===O);if(U!=null&&U.lane_ids&&U.lane_ids.length>0){console.log(` Servicio "${U.name}" tiene carriles asignados:`,U.lane_ids);for(const V of U.lane_ids){const ee=$.find(ae=>ae.id===V);if(ee){const{data:ae}=await G.from("bookings").select("*").eq("lane_id",V).eq("booking_datetime",ne.toISOString()).neq("status","cancelled"),ye=ee.capacity||1;if(!ae||ae.length<ye){xe=V,console.log(` Servicio asignado al carril especfico: ${ee.name}`);break}else console.log(` Carril especfico ocupado: ${ee.name}`)}}xe||(fe=!0,console.log(` TODOS los carriles especficos del servicio "${U.name}" estn ocupados`))}else{const V=l(O,_);if(V!=null&&V.lane_ids&&V.lane_ids.length>0){console.log(` Grupo "${V.name}" tiene carriles asignados:`,V.lane_ids);for(const ee of V.lane_ids){const ae=$.find(ye=>ye.id===ee);if(ae){const{data:ye}=await G.from("bookings").select("*").eq("lane_id",ee).eq("booking_datetime",ne.toISOString()).neq("status","cancelled"),me=ae.capacity||1;if(!ye||ye.length<me){xe=ee,console.log(` Servicio asignado al carril del grupo "${V.name}": ${ae.name}`);break}else console.log(` Carril del grupo ocupado: ${ae.name}`)}}xe||(fe=!0,console.log(` TODOS los carriles del grupo "${V.name}" estn ocupados`))}}}if(fe){e({title:"Sin disponibilidad",description:"No hay carriles disponibles para este servicio en el horario seleccionado. Por favor, elige otra hora.",variant:"destructive"});return}if(!xe){const U=$.length>0?$[Math.floor(Math.random()*$.length)]:null;xe=(U==null?void 0:U.id)||null,console.log(" Asignacin aleatoria de carril (no hay configuracin especfica)")}const he=te.length>0?te[Math.floor(Math.random()*te.length)]:null,N={client_id:T==null?void 0:T.id,service_id:O,center_id:c.center,lane_id:xe,employee_id:(he==null?void 0:he.id)||null,booking_datetime:ne.toISOString(),duration_minutes:H,total_price_cents:Q,status:"pending",channel:"web",notes:q,stripe_session_id:null,payment_status:"pending"},L=await o(N);console.log("Booking successfully created:",L),console.log(" Redirigiendo a asegurar reserva:",L.id),window.location.href=`/asegurar-reserva?booking_id=${L.id}`;return}catch(T){console.error("Error creating booking:",T),((T==null?void 0:T.message)||"").includes("Capacidad mxima alcanzada")?e({title:"Capacidad Completa",description:"Esta franja horaria ya tiene el mximo de 4 reservas. Por favor, elige otro horario.",variant:"destructive"}):e({title:"Error",description:"No se pudo crear la reserva. Intntalo de nuevo.",variant:"destructive"})}},P=n.find(A=>A.id===c.center),D=async A=>{if(d(T=>({...T,clientEmail:A})),A&&A.includes("@"))try{const{data:T}=await G.from("profiles").select("*").eq("email",A.toLowerCase()).single();T&&(d(S=>({...S,clientName:`${T.first_name||""} ${T.last_name||""}`.trim()||S.clientName,clientPhone:T.phone||S.clientPhone})),e({title:"Cliente encontrado",description:"Datos del cliente cargados automticamente"}))}catch{console.log("Cliente no encontrado, continuar con nuevo cliente")}};return!n||n.length===0?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-lg text-muted-foreground",children:t("loading_centers")})})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/10",children:[(h||w)&&s.jsx("div",{className:"fixed inset-0 z-30 bg-black/20 backdrop-blur-sm",onClick:()=>{g(!1),y(!1)}}),s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(_n,{to:"/",className:"inline-flex items-center hover:opacity-80 transition-opacity",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-8 w-auto md:h-10",loading:"lazy",width:160,height:40})}),s.jsxs(_n,{to:"/",className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors rounded-md hover:bg-muted",children:[" ",t("back")]})]}),s.jsx(pm,{})]})})}),s.jsx("main",{className:"container mx-auto px-4 py-4 sm:py-6 md:py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(ie,{className:"glass-effect border-primary/20",children:[s.jsx(Ne,{className:"p-4 sm:p-6",children:s.jsxs(Ee,{className:"flex items-center space-x-2 text-lg sm:text-xl",children:[s.jsx(ly,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("span",{children:t("book_appointment")})]})}),s.jsx(de,{className:"p-4 sm:p-6",children:s.jsxs("form",{onSubmit:I,className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center space-x-2 text-sm sm:text-base",children:[s.jsx(Gn,{className:"h-4 w-4"}),s.jsx("span",{children:t("personal_information")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-full sm:col-span-1",children:[s.jsx(K,{htmlFor:"clientName",className:"text-sm",children:t("name_label")}),s.jsx(pe,{id:"clientName",value:c.clientName,onChange:A=>d({...c,clientName:A.target.value}),onBlur:async()=>{const A=c.clientName.trim().split(" ")[0];if(!c.clientEmail&&A&&c.clientPhone)try{const{data:T}=await G.from("profiles").select("email, first_name, last_name, phone").ilike("first_name",`%${A}%`).eq("phone",c.clientPhone).maybeSingle();T!=null&&T.email&&d(S=>({...S,clientEmail:T.email}))}catch{}},className:"mt-1"})]}),s.jsxs("div",{className:"col-span-full sm:col-span-1",children:[s.jsx(K,{htmlFor:"clientPhone",className:"text-sm",children:t("phone")}),s.jsx(pe,{id:"clientPhone",value:c.clientPhone,onChange:A=>d({...c,clientPhone:A.target.value}),onBlur:async()=>{const A=c.clientName.trim().split(" ")[0];if(!c.clientEmail&&A&&c.clientPhone)try{const{data:T}=await G.from("profiles").select("email, first_name, last_name, phone").ilike("first_name",`%${A}%`).eq("phone",c.clientPhone).maybeSingle();T!=null&&T.email&&d(S=>({...S,clientEmail:T.email}))}catch{}await R()},placeholder:t("phone_placeholder"),className:"mt-1"})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"clientEmail",className:"text-sm",children:t("email")}),s.jsx(pe,{id:"clientEmail",type:"email",value:c.clientEmail,onChange:A=>D(A.target.value),onBlur:R,placeholder:t("email_placeholder"),className:"mt-1"})]})]}),b&&p.length>0&&s.jsxs("div",{className:"space-y-3 p-4 bg-accent/20 border border-primary/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center space-x-2",children:[s.jsx(Va,{className:"h-4 w-4"}),s.jsx("span",{children:"Reservas Existentes"})]}),s.jsx(W,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(!1),children:s.jsx(Tt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-2",children:p.map(A=>{var T,S;return s.jsx(ie,{className:"p-3 sm:p-4",children:s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm sm:text-base",children:(T=A.services)==null?void 0:T.name}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:ke(new Date(A.booking_datetime),"PPP 'a las' HH:mm",{locale:Ue})}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:(S=A.centers)==null?void 0:S.name})]})})},A.id)})})]}),s.jsx(jr,{type:"single",collapsible:!0,className:"w-full",children:s.jsxs(_t,{value:"center",children:[s.jsx(bt,{className:"text-left",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(yn,{className:"h-4 w-4"}),s.jsxs("span",{children:[" ",t("center_selection")]}),c.center&&s.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",(z=n.find(A=>A.id===c.center))==null?void 0:z.name,")"]})]})}),s.jsx(jt,{children:s.jsx("div",{className:"space-y-4 pt-2",children:s.jsxs("div",{children:[s.jsxs(K,{htmlFor:"center",className:"text-sm",children:[t("center")," *"]}),s.jsx("div",{className:"space-y-2 mt-2",children:n.map(A=>{if(console.log("Processing center:",{id:A.id,name:A.name,idType:typeof A.id,isEmpty:A.id==="",isNull:A.id===null,isUndefined:A.id===void 0}),!A.id||A.id===""||A.id===null||A.id===void 0)return console.warn("Skipping invalid center:",A),null;const T=c.center===A.id;return s.jsxs("div",{onClick:()=>d({...c,center:A.id}),className:le("flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-all duration-200",T?"bg-primary/10 border-primary text-primary":"bg-background border-border hover:bg-accent/50"),children:[s.jsx(yn,{className:"h-4 w-4 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm",children:A.name}),A.address&&s.jsx("p",{className:"text-xs text-muted-foreground",children:A.address})]}),T&&s.jsx("div",{className:"h-4 w-4 rounded-full bg-primary flex items-center justify-center",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})})]},A.id)}).filter(Boolean)})]})})})]})}),c.center&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center space-x-2 text-sm sm:text-base",children:[s.jsx(ly,{className:"h-4 w-4"}),s.jsx("span",{children:t("service_selection")})]}),s.jsx(cS,{services:_,packages:[],selectedId:u==null?void 0:u.id,onSelect:(A,T)=>m({id:A,kind:T}),useDropdown:!1})]}),c.center&&u&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center space-x-2 text-sm sm:text-base",children:[s.jsx(sr,{className:"h-4 w-4"}),s.jsx("span",{children:"Fecha y Hora"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx(K,{className:"text-sm",children:"Fecha *"}),s.jsx(h8,{open:h,onOpenChange:g,selected:c.date,onSelect:A=>d({...c,date:A}),disabled:A=>A<new Date,placeholder:t("select_date")})]}),s.jsxs("div",{children:[s.jsx(K,{className:"text-sm",children:"Hora *"}),s.jsx(f8,{open:w,onOpenChange:y,selected:c.time,onSelect:A=>d({...c,time:A}),timeSlots:E,placeholder:t("select_time")})]})]})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"notes",className:"text-sm",children:t("additional_notes")}),s.jsx(Yt,{id:"notes",value:c.notes,onChange:A=>d({...c,notes:A.target.value}),placeholder:t("notes_placeholder_form"),className:"mt-1 min-h-[80px] resize-none"})]}),c.center&&c.date&&c.time&&u&&s.jsxs("div",{className:"p-4 bg-accent/20 border border-primary/20 rounded-lg space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm sm:text-base",children:t("booking_summary")}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t("center"),":"]}),s.jsx("span",{className:"font-medium",children:P==null?void 0:P.name})]}),u.kind==="service"&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t("service"),":"]}),s.jsx("span",{className:"font-medium",children:(Y=_.find(A=>A.id===u.id))==null?void 0:Y.name})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t("date"),":"]}),s.jsx("span",{className:"font-medium",children:ke(c.date,"PPP",{locale:Ue})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t("time"),":"]}),s.jsx("span",{className:"font-medium",children:c.time})]})]})]}),s.jsx(W,{type:"submit",className:"w-full h-11 text-sm sm:text-base font-medium",children:"Continuar"})]})})]})})}),s.jsx("footer",{className:"bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 border-t mt-8",children:s.jsx("div",{className:"container mx-auto px-4 py-6",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("div",{className:"flex justify-center items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("a",{href:"tel:911481474",className:"flex items-center gap-1 hover:text-primary transition-colors",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"911 481 474"})]}),s.jsxs("a",{href:"https://wa.me/+34622360922",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-primary transition-colors",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"WhatsApp"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-3",children:" GnerAI 2025  Todos los derechos reservados"})]})})})]})};function GS(){return s.jsx(ie,{className:"border-border/20 bg-gradient-to-r from-accent/5 to-primary/5",children:s.jsxs(de,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ml,{className:"h-4 w-4"}),s.jsx("span",{children:"Tarjeta"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uy,{className:"h-4 w-4"}),s.jsx("span",{children:"Apple Pay"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hT,{className:"h-4 w-4"}),s.jsx("span",{children:"PayPal"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uy,{className:"h-4 w-4"}),s.jsx("span",{children:"Bizum"})]})]}),s.jsx("p",{className:"text-center text-xs text-muted-foreground mt-2",children:"Pago 100% seguro procesado por Stripe"})]})})}const kh=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e/100),M0=e=>{const t=(e||"").toLowerCase();return/(dos|pareja|parejas|do|duo)/.test(t)||/\b2\s*personas?\b/.test(t)||/para\s*2\s*personas?/.test(t)||/\b(2p|2\s*pax)\b/.test(t)},R0=e=>!!(e!=null&&e.toLowerCase().includes("cuatro manos")),D0=e=>!!(e!=null&&e.toLowerCase().includes("ritual")),g8=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState([]),[a,o]=f.useState(""),[i,l]=f.useState(""),{t:c}=tc(),d=p=>{const b=p.toLowerCase().replace(/\s+/g,"_").replace(/'/g,"").replace(/[^\w_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),j=c(b);return j!==b?j:p},u=()=>{const[p,v]=f.useState(()=>{try{const E=localStorage.getItem("cart:packages");return E?JSON.parse(E):[]}catch{return[]}});f.useEffect(()=>{localStorage.setItem("cart:packages",JSON.stringify(p))},[p]);const b=E=>{v(M=>{const R=M.findIndex(I=>E.packageId&&I.packageId?I.packageId===E.packageId:I.name===E.name&&I.priceCents===E.priceCents);if(R>=0){const I=[...M];return I[R]={...I[R],quantity:I[R].quantity+(E.quantity??1)},I}return[...M,{id:crypto.randomUUID(),name:E.name,priceCents:E.priceCents,packageId:E.packageId,quantity:E.quantity??1}]}),Wt.success(c("added_to_cart"))},j=E=>v(M=>M.filter(R=>R.id!==E)),k=()=>v([]),C=f.useMemo(()=>p.reduce((E,M)=>E+M.priceCents*M.quantity,0),[p]);return{items:p,add:b,remove:j,clear:k,totalCents:C}};f.useEffect(()=>{(async()=>{const{data:p,error:v}=await G.from("packages").select(`
          *,
          services(name, duration_minutes),
          centers(name)
        `).eq("active",!0).order("price_cents");v||r(p||[])})()},[]);const m=f.useMemo(()=>n.map(p=>({id:p.id,name:p.name,type:"fixed",priceCents:p.price_cents,sessions_count:p.sessions_count,description:p.description})),[n]),h=f.useMemo(()=>{const p=m.filter(k=>k.type==="fixed"&&!R0(k.name)&&!D0(k.name)&&!M0(k.name)),v=m.filter(k=>k.type==="fixed"&&R0(k.name)),b=m.filter(k=>k.type==="fixed"&&D0(k.name)),j=m.filter(k=>k.type==="fixed"&&M0(k.name));return{individuales:p,cuatro:v,rituales:b,paraDos:j}},[m]),{items:g,add:w,remove:y,clear:_,totalCents:x}=u();return f.useEffect(()=>{e&&setTimeout(()=>{const p=document.querySelector("[data-cart-dialog-content]");p&&p.scrollIntoView({behavior:"smooth",block:"center"})},100)},[e]),f.useEffect(()=>{document.title="Bonos de Masaje | The Nook Madrid",((j,k)=>{let C=document.querySelector(`meta[name="${j}"]`);C||(C=document.createElement("meta"),C.setAttribute("name",j),document.head.appendChild(C)),C.setAttribute("content",k)})("description","Bonos de masaje con descuento para todos los tratamientos en The Nook Madrid.");let b=document.querySelector('link[rel="canonical"]');b||(b=document.createElement("link"),b.setAttribute("rel","canonical"),document.head.appendChild(b)),b.setAttribute("href",window.location.href)},[]),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-3 sm:py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(_n,{to:"/",className:"inline-flex items-center hover:opacity-80 transition-opacity",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-8 w-auto md:h-10",loading:"lazy",width:160,height:40})}),s.jsxs(_n,{to:"/",className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors rounded-md hover:bg-muted",children:[" ",c("back")]})]}),s.jsx(pm,{})]})})}),s.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-6 sm:py-8",children:s.jsxs("article",{children:[s.jsxs("header",{className:"mb-5 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:c("massage_vouchers")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c("save_buying_session_packages")})]}),s.jsxs(W,{variant:"outline",onClick:()=>t(!0),children:[c("cart")," (",g.length,")"]})]}),s.jsx("section",{className:"grid gap-6",children:s.jsxs(jr,{type:"multiple",defaultValue:[],className:"space-y-4",children:[h.individuales.length>0&&s.jsxs(_t,{value:"bonos-individuales",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:c("individual_massages_packages")})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.individuales.map(p=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Ee,{className:"text-base leading-tight",children:d(p.name)})}),s.jsx(de,{className:"pb-2",children:s.jsxs("div",{className:"space-y-1",children:[p.sessions_count&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.sessions_count," ",c("sessions_count")]}),s.jsx(Zi,{originalPrice:p.priceCents,className:"text-lg font-bold"})]})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>{w({name:d(p.name),priceCents:p.priceCents,packageId:p.id}),t(!0)},children:c("add_to_cart")})})]},p.id))})})]}),h.paraDos.length>0&&s.jsxs(_t,{value:"bonos-dos-personas",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:c("couples_packages")})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.paraDos.map(p=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Ee,{className:"text-base leading-tight",children:d(p.name)})}),s.jsx(de,{className:"pb-2",children:s.jsxs("div",{className:"space-y-1",children:[p.sessions_count&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.sessions_count," ",c("sessions_count")]}),s.jsx(Zi,{originalPrice:p.priceCents,className:"text-lg font-bold"})]})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>{w({name:d(p.name),priceCents:p.priceCents,packageId:p.id}),t(!0)},children:c("add_to_cart")})})]},p.id))})})]}),h.cuatro.length>0&&s.jsxs(_t,{value:"bonos-cuatro-manos",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:c("four_hands_packages")})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.cuatro.map(p=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Ee,{className:"text-base leading-tight",children:d(p.name)})}),s.jsx(de,{className:"pb-2",children:s.jsxs("div",{className:"space-y-1",children:[p.sessions_count&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.sessions_count," ",c("sessions_count")]}),s.jsx(Zi,{originalPrice:p.priceCents,className:"text-lg font-bold"})]})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>{w({name:d(p.name),priceCents:p.priceCents,packageId:p.id}),t(!0)},children:c("add_to_cart")})})]},p.id))})})]}),h.rituales.length>0&&s.jsxs(_t,{value:"bonos-rituales",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:c("rituals_packages")})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.rituales.map(p=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Ee,{className:"text-base leading-tight",children:d(p.name)})}),s.jsx(de,{className:"pb-2",children:s.jsxs("div",{className:"space-y-1",children:[p.sessions_count&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.sessions_count," ",c("sessions_count")]}),s.jsx(Zi,{originalPrice:p.priceCents,className:"text-lg font-bold"})]})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>{w({name:d(p.name),priceCents:p.priceCents,packageId:p.id}),t(!0)},children:c("add_to_cart")})})]},p.id))})})]})]})})]})}),s.jsx(Fa,{open:e,onOpenChange:t,children:s.jsxs(Zs,{"data-cart-dialog-content":!0,className:"w-[95vw] max-w-[600px] max-h-[90vh] p-0 overflow-hidden flex flex-col",children:[s.jsxs(ea,{className:"flex-shrink-0 px-4 sm:px-6 pt-4 pb-3 border-b bg-background",children:[s.jsx(ta,{children:c("your_cart")}),s.jsx(Bo,{className:"sr-only",children:c("your_cart")})]}),s.jsx("div",{className:"overflow-y-auto px-6 py-4",style:{height:"calc(90vh - 180px)"},children:g.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:c("cart_empty")}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:g.map(p=>s.jsxs("div",{className:"flex items-center justify-between gap-3 border rounded-md p-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium leading-tight",children:p.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[kh(p.priceCents),"  ",p.quantity]})]}),s.jsx(W,{size:"sm",variant:"ghost",onClick:()=>y(p.id),children:c("remove")})]},p.id))}),s.jsx("div",{className:"space-y-2 border-t pt-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:c("total")}),s.jsx("span",{className:"font-semibold",children:kh(x)})]})}),s.jsxs("div",{className:"space-y-3 border-t pt-3",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"purchased_by_name",className:"text-sm",children:c("purchased_by_name")}),s.jsx(pe,{id:"purchased_by_name",value:a,onChange:p=>o(p.target.value),placeholder:c("buyer_name_placeholder"),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"purchased_by_email",className:"text-sm",children:c("buyer_email")}),s.jsx(pe,{id:"purchased_by_email",type:"email",value:i,onChange:p=>l(p.target.value),placeholder:c("buyer_email_placeholder"),className:"mt-1"})]})]})]})}),s.jsxs("div",{className:"border-t bg-background px-6 py-4 space-y-3",children:[s.jsx(GS,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{variant:"secondary",onClick:_,className:"flex-1",children:c("empty_cart_button")}),s.jsxs(W,{className:"flex-1 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",onClick:async()=>{if(g.length!==0){if(!a.trim()){Wt.error(c("buyer_name_error"));return}if(!i.trim()){Wt.error(c("buyer_email_error"));return}try{const v={intent:"package_voucher",package_voucher:{items:g.map(C=>{const E=n.find(M=>C.packageId?M.id===C.packageId:(d(M.name)===C.name||M.name===C.name)&&M.price_cents===C.priceCents);if(!(E!=null&&E.id))throw new Error("No se encontr el bono seleccionado. Actualiza la pgina e intntalo nuevamente.");return{package_id:E.id,quantity:C.quantity}}),purchaser_name:a.trim(),purchaser_email:i.trim()},currency:"eur"},{data:b,error:j}=await G.functions.invoke("create-checkout",{body:v});if(j)throw j;const k=(b==null?void 0:b.url)||(b!=null&&b.client_secret?`https://checkout.stripe.com/c/pay/${b.client_secret}`:null);if(!k)throw new Error("No se pudo iniciar el pago.");window.location.href=k,Wt.success("Redirigiendo a Stripe..."),t(!1),_(),o(""),l("")}catch(p){console.error("Error al procesar la compra:",p),Wt.error((p==null?void 0:p.message)||c("purchase_error"))}}},children:[c("buy_button")," ",kh(x)]})]})]})]})})]})};var Av="Checkbox",[v8,qz]=cr(Av),[x8,y8]=v8(Av),KS=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[h,g]=f.useState(null),w=Ie(t,b=>g(b)),y=f.useRef(!1),_=h?u||!!h.closest("form"):!0,[x=!1,p]=lr({prop:a,defaultProp:o,onChange:d}),v=f.useRef(x);return f.useEffect(()=>{const b=h==null?void 0:h.form;if(b){const j=()=>p(v.current);return b.addEventListener("reset",j),()=>b.removeEventListener("reset",j)}},[h,p]),s.jsxs(x8,{scope:n,state:x,disabled:l,children:[s.jsx(Me.button,{type:"button",role:"checkbox","aria-checked":na(x)?"mixed":x,"aria-required":i,"data-state":XS(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:w,onKeyDown:_e(e.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:_e(e.onClick,b=>{p(j=>na(j)?!0:!j),_&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),_&&s.jsx(w8,{control:h,bubbles:!y.current,name:r,value:c,checked:x,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:na(o)?!1:o})]})});KS.displayName=Av;var YS="CheckboxIndicator",QS=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,o=y8(YS,n);return s.jsx(Qn,{present:r||na(o.state)||o.state===!0,children:s.jsx(Me.span,{"data-state":XS(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});QS.displayName=YS;var w8=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:a,...o}=e,i=f.useRef(null),l=Qu(n),c=Du(t);f.useEffect(()=>{const u=i.current,m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&g){const w=new Event("click",{bubbles:r});u.indeterminate=na(n),g.call(u,na(n)?!1:n),u.dispatchEvent(w)}},[l,n,r]);const d=f.useRef(na(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function na(e){return e==="indeterminate"}function XS(e){return na(e)?"indeterminate":e?"checked":"unchecked"}var JS=KS,_8=QS;const pd=f.forwardRef(({className:e,...t},n)=>s.jsx(JS,{ref:n,className:le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(_8,{className:le("flex items-center justify-center text-current"),children:s.jsx(hi,{className:"h-4 w-4"})})}));pd.displayName=JS.displayName;const Hi=({src:e,alt:t,className:n="",width:r=400,height:a=300,quality:o=80})=>{const[i,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(!1),h=f.useRef(null);f.useEffect(()=>{const y=new IntersectionObserver(([_])=>{_.isIntersecting&&(d(!0),y.disconnect())},{threshold:.1,rootMargin:"50px"});return h.current&&y.observe(h.current),()=>y.disconnect()},[]);const w=(y=>y.includes("supabase.co")&&y.includes("/storage/")?`${y.split("?")[0]}?width=${r}&height=${a}&resize=cover&quality=${o}&format=webp`:y)(e);return s.jsx("div",{ref:h,className:`relative overflow-hidden ${n}`,children:c?s.jsxs(s.Fragment,{children:[!i&&!u&&s.jsx(Vr,{className:"absolute inset-0 w-full h-full"}),s.jsx("img",{src:w,alt:t,loading:"lazy",decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onLoad:()=>l(!0),onError:()=>{m(!0),l(!0)},onLoadStart:()=>{if(!window.HTMLCanvasElement){const y=document.createElement("img");y.src=w.replace("format=webp","format=jpeg")}}}),u&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:s.jsx("div",{className:"text-center text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:"Error al cargar imagen"})})})]}):s.jsx(Vr,{className:"w-full h-full"})})};var ZS="basil",b8=function(t){return t===3?"v3":t},ek="https://js.stripe.com",j8="".concat(ek,"/").concat(ZS,"/stripe.js"),N8=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C8=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,A0="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",S8=function(t){return N8.test(t)||C8.test(t)},k8=function(){for(var t=document.querySelectorAll('script[src^="'.concat(ek,'"]')),n=0;n<t.length;n++){var r=t[n];if(S8(r.src))return r}return null},O0=function(t){var n="",r=document.createElement("script");r.src="".concat(j8).concat(n);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(r),r},E8=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},qi=null,Vc=null,Gc=null,P8=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},T8=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},M8=function(t){return qi!==null?qi:(qi=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(A0),window.Stripe){n(window.Stripe);return}try{var a=k8();if(a&&t)console.warn(A0);else if(!a)a=O0(t);else if(a&&Gc!==null&&Vc!==null){var o;a.removeEventListener("load",Gc),a.removeEventListener("error",Vc),(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=O0(t)}Gc=T8(n,r),Vc=P8(r),a.addEventListener("load",Gc),a.addEventListener("error",Vc)}catch(i){r(i);return}}),qi.catch(function(n){return qi=null,Promise.reject(n)}))},R8=function(t,n,r){if(t===null)return null;var a=n[0],o=a.match(/^pk_test/),i=b8(t.version),l=ZS;o&&i!==l&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return E8(c,r),c},Vi,tk=!1,nk=function(){return Vi||(Vi=M8(null).catch(function(t){return Vi=null,Promise.reject(t)}),Vi)};Promise.resolve().then(function(){return nk()}).catch(function(e){tk||console.warn(e)});var D8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tk=!0;var a=Date.now();return nk().then(function(o){return R8(o,n,a)})},rk={exports:{}},A8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",O8=A8,I8=O8;function sk(){}function ak(){}ak.resetWarningCache=sk;var L8=function(){function e(r,a,o,i,l,c){if(c!==I8){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ak,resetWarningCache:sk};return n.PropTypes=n,n};rk.exports=L8();var $8=rk.exports;const yt=pp($8);function I0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function L0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I0(Object(n),!0).forEach(function(r){ok(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gd=function(t){return typeof t}:gd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function ok(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F8(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function z8(e,t){if(e==null)return{};var n=F8(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ik(e,t){return B8(e)||U8(e,t)||W8(e,t)||H8()}function B8(e){if(Array.isArray(e))return e}function U8(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],a=!0,o=!1,i,l;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(c){o=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function W8(e,t){if(e){if(typeof e=="string")return $0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $0(e,t)}}function $0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ln=function(t,n,r){var a=!!r,o=X.useRef(r);X.useEffect(function(){o.current=r},[r]),X.useEffect(function(){if(!a||!t)return function(){};var i=function(){o.current&&o.current.apply(o,arguments)};return t.on(n,i),function(){t.off(n,i)}},[a,n,t,o])},fp=function(t){var n=X.useRef(t);return X.useEffect(function(){n.current=t},[t]),n.current},ci=function(t){return t!==null&&gd(t)==="object"},q8=function(t){return ci(t)&&typeof t.then=="function"},V8=function(t){return ci(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},F0="[object Object]",G8=function e(t,n){if(!ci(t)||!ci(n))return t===n;var r=Array.isArray(t),a=Array.isArray(n);if(r!==a)return!1;var o=Object.prototype.toString.call(t)===F0,i=Object.prototype.toString.call(n)===F0;if(o!==i)return!1;if(!o&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var d={},u=0;u<l.length;u+=1)d[l[u]]=!0;for(var m=0;m<c.length;m+=1)d[c[m]]=!0;var h=Object.keys(d);if(h.length!==l.length)return!1;var g=t,w=n,y=function(x){return e(g[x],w[x])};return h.every(y)},K8=function(t,n,r){return ci(t)?Object.keys(t).reduce(function(a,o){var i=!ci(n)||!G8(t[o],n[o]);return r.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),a):i?L0(L0({},a||{}),{},ok({},o,t[o])):a},null):null},lk="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",z0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lk;if(t===null||V8(t))return t;throw new Error(n)},Y8=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lk;if(q8(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(a){return z0(a,n)})};var r=z0(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Q8=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.9.2"}),t.registerAppInfo({name:"react-stripe-js",version:"3.9.2",url:"https://stripe.com/docs/stripe-js/react"}))},ck=X.createContext(null);ck.displayName="ElementsContext";var X8=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t};yt.any,yt.object;yt.func.isRequired;var dk=X.createContext(null);dk.displayName="CheckoutSdkContext";var J8=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},Z8=X.createContext(null);Z8.displayName="CheckoutContext";yt.any,yt.shape({fetchClientSecret:yt.func.isRequired,elementsOptions:yt.object}).isRequired;var B0=function(t){var n=X.useContext(dk),r=X.useContext(ck);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?J8(n,t):X8(r,t)},ez=["mode"],tz=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Lt=function(t,n){var r="".concat(tz(t),"Element"),a=function(c){var d=c.id,u=c.className,m=c.options,h=m===void 0?{}:m,g=c.onBlur,w=c.onFocus,y=c.onReady,_=c.onChange,x=c.onEscape,p=c.onClick,v=c.onLoadError,b=c.onLoaderStart,j=c.onNetworksChange,k=c.onConfirm,C=c.onCancel,E=c.onShippingAddressChange,M=c.onShippingRateChange,R=B0("mounts <".concat(r,">")),I="elements"in R?R.elements:null,P="checkoutSdk"in R?R.checkoutSdk:null,D=X.useState(null),z=ik(D,2),Y=z[0],A=z[1],T=X.useRef(null),S=X.useRef(null);Ln(Y,"blur",g),Ln(Y,"focus",w),Ln(Y,"escape",x),Ln(Y,"click",p),Ln(Y,"loaderror",v),Ln(Y,"loaderstart",b),Ln(Y,"networkschange",j),Ln(Y,"confirm",k),Ln(Y,"cancel",C),Ln(Y,"shippingaddresschange",E),Ln(Y,"shippingratechange",M),Ln(Y,"change",_);var F;y&&(t==="expressCheckout"?F=y:F=function(){y(Y)}),Ln(Y,"ready",F),X.useLayoutEffect(function(){if(T.current===null&&S.current!==null&&(I||P)){var Q=null;if(P)switch(t){case"payment":Q=P.createPaymentElement(h);break;case"address":if("mode"in h){var O=h.mode,q=z8(h,ez);if(O==="shipping")Q=P.createShippingAddressElement(q);else if(O==="billing")Q=P.createBillingAddressElement(q);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Q=P.createExpressCheckoutElement(h);break;case"currencySelector":Q=P.createCurrencySelectorElement();break;case"taxId":Q=P.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(Q=I.create(t,h));T.current=Q,A(Q),Q&&Q.mount(S.current)}},[I,P,h]);var H=fp(h);return X.useEffect(function(){if(T.current){var Q=K8(h,H,["paymentRequest"]);Q&&"update"in T.current&&T.current.update(Q)}},[h,H]),X.useLayoutEffect(function(){return function(){if(T.current&&typeof T.current.destroy=="function")try{T.current.destroy(),T.current=null}catch{}}},[]),X.createElement("div",{id:d,className:u,ref:S})},o=function(c){B0("mounts <".concat(r,">"));var d=c.id,u=c.className;return X.createElement("div",{id:d,className:u})},i=n?o:a;return i.propTypes={id:yt.string,className:yt.string,onChange:yt.func,onBlur:yt.func,onFocus:yt.func,onReady:yt.func,onEscape:yt.func,onClick:yt.func,onLoadError:yt.func,onLoaderStart:yt.func,onNetworksChange:yt.func,onConfirm:yt.func,onCancel:yt.func,onShippingAddressChange:yt.func,onShippingRateChange:yt.func,options:yt.object},i.displayName=r,i.__elementType=t,i},Mt=typeof window>"u",Ov=X.createContext(null);Ov.displayName="EmbeddedCheckoutProviderContext";var uk=function(){var t=X.useContext(Ov);if(!t)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return t},nz="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",rz=function(t){var n=t.stripe,r=t.options,a=t.children,o=X.useMemo(function(){return Y8(n,nz)},[n]),i=X.useRef(null),l=X.useRef(null),c=X.useState({embeddedCheckout:null}),d=ik(c,2),u=d[0],m=d[1];X.useEffect(function(){if(!(l.current||i.current)){var w=function(_){l.current||i.current||(l.current=_,i.current=l.current.initEmbeddedCheckout(r).then(function(x){m({embeddedCheckout:x})}))};o.tag==="async"&&!l.current&&(r.clientSecret||r.fetchClientSecret)?o.stripePromise.then(function(y){y&&w(y)}):o.tag==="sync"&&!l.current&&(r.clientSecret||r.fetchClientSecret)&&w(o.stripe)}},[o,r,u,l]),X.useEffect(function(){return function(){u.embeddedCheckout?(i.current=null,u.embeddedCheckout.destroy()):i.current&&i.current.then(function(){i.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),X.useEffect(function(){Q8(l)},[l]);var h=fp(n);X.useEffect(function(){h!==null&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var g=fp(r);return X.useEffect(function(){if(g!=null){if(r==null){console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.");return}r.clientSecret===void 0&&r.fetchClientSecret===void 0&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),g.clientSecret!=null&&r.clientSecret!==g.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),g.fetchClientSecret!=null&&r.fetchClientSecret!==g.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),g.onComplete!=null&&r.onComplete!==g.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),g.onShippingDetailsChange!=null&&r.onShippingDetailsChange!==g.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),g.onLineItemsChange!=null&&r.onLineItemsChange!==g.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")}},[g,r]),X.createElement(Ov.Provider,{value:u},a)},sz=function(t){var n=t.id,r=t.className,a=uk(),o=a.embeddedCheckout,i=X.useRef(!1),l=X.useRef(null);return X.useLayoutEffect(function(){return!i.current&&o&&l.current!==null&&(o.mount(l.current),i.current=!0),function(){if(i.current&&o)try{o.unmount(),i.current=!1}catch{}}},[o]),X.createElement("div",{ref:l,id:n,className:r})},az=function(t){var n=t.id,r=t.className;return uk(),X.createElement("div",{id:n,className:r})},oz=Mt?az:sz;Lt("auBankAccount",Mt);Lt("card",Mt);Lt("cardNumber",Mt);Lt("cardExpiry",Mt);Lt("cardCvc",Mt);Lt("fpxBank",Mt);Lt("iban",Mt);Lt("idealBank",Mt);Lt("p24Bank",Mt);Lt("epsBank",Mt);Lt("payment",Mt);Lt("expressCheckout",Mt);Lt("currencySelector",Mt);Lt("paymentRequestButton",Mt);Lt("linkAuthentication",Mt);Lt("address",Mt);Lt("shippingAddress",Mt);Lt("paymentMethodMessaging",Mt);Lt("affirmMessage",Mt);Lt("afterpayClearpayMessage",Mt);Lt("taxId",Mt);const iz="pk_live_zLwIGpIMHuyrZyCpPHCWDtyJ00dZKV1DzE",U0=D8(iz),lz=({clientSecret:e,sessionId:t,onClose:n,onSuccess:r})=>{const[a,o]=f.useState(!0);f.useEffect(()=>{},[]);const i={clientSecret:e,onComplete:()=>{r==null||r(),setTimeout(()=>{n();const l=t?`/pago-exitoso?session_id=${t}`:"/pago-exitoso";window.location.href=l},2e3)}};return f.useEffect(()=>{const l=setTimeout(()=>o(!1),1e3);return()=>clearTimeout(l)},[]),s.jsx("div",{className:"w-full min-h-[500px]",children:U0?a?s.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Ef,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando mtodo de pago..."})]})}):s.jsx(rz,{stripe:U0,options:i,children:s.jsx(oz,{})}):s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-4",children:[s.jsx(Ef,{className:"h-8 w-8 text-destructive"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No se pudo inicializar Stripe. Revisa la configuracin de la clave pblica."}),s.jsx(W,{variant:"outline",onClick:n,children:"Cerrar"})]})})},ns=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e/100),W0="/lovable-uploads/a67f856f-f685-4134-9b22-730c400d6266.png",fn={width:360,height:270,quality:70},Kc=e=>{const t=(e||"").toLowerCase();return/(dos|pareja|parejas|do|duo)/.test(t)||/\b2\s*personas?\b/.test(t)||/para\s*2\s*personas?/.test(t)||/\b(2p|2\s*pax)\b/.test(t)},H0=e=>!!(e!=null&&e.toLowerCase().includes("cuatro manos")),Yc=e=>!!(e!=null&&e.toLowerCase().includes("ritual")),cz=()=>{const[e,t]=f.useState(!1);f.useEffect(()=>{console.log(" Estado isCartOpen cambi a:",e)},[e]);const[n,r]=f.useState([]),[a,o]=f.useState(""),[i,l]=f.useState(""),[c,d]=f.useState(!1),[u,m]=f.useState(""),[h,g]=f.useState(""),[w,y]=f.useState(""),[_,x]=f.useState(!0),[p,v]=f.useState(!0),[b,j]=f.useState(!0),[k,C]=f.useState(!1),[E,M]=f.useState(null),[R,I]=f.useState(null),[P,D]=f.useState({}),[z,Y]=f.useState({}),[A,T]=f.useState([]),{t:S}=tc();f.useEffect(()=>{e&&setTimeout(()=>{const N=document.querySelector('[role="dialog"]');N&&N.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},[e]);const F=N=>{const L=N.replace(/\s*TARJETA\s*REGALO\s*$/i,"").trim(),U=L.toLowerCase().replace(/\s+/g,"_").replace(/'/g,"").replace(/[^\w_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),V={piernas_cansadas:{en:"Tired Legs Massage",fr:"Jambes Fatigues",de:"Mde Beine",it:"Gambe Stanche",pt:"Pernas Cansadas"},masaje_para_embarazada_50_minutos:{en:"50-Minute Pregnancy Massage",fr:"Massage Prnatal 50 minutes",de:"Schwangerschaftsmassage 50 Minuten",it:"Massaggio Prenatale 50 minuti",pt:"Massagem Pr-natal 50 minutos"},masaje_deportivo_50_minutos:{en:"50-Minute Sports Massage",fr:"Massage Sportif 50 minutes",de:"Sportmassage 50 Minuten",it:"Massaggio Sportivo 50 minuti",pt:"Massagem Desportiva 50 minutos"},shiatsu:{en:"Shiatsu",fr:"Shiatsu",de:"Shiatsu",it:"Shiatsu",pt:"Shiatsu"},masaje_descontracturante_55_minutos:{en:"55-Minute Therapeutic Massage",fr:"Massage Thrapeutique 55 minutes",de:"Therapeutische Massage 55 Minuten",it:"Massaggio Terapeutico 55 minuti",pt:"Massagem Teraputica 55 minutos"},masaje_relajante_55_minutos:{en:"55-Minute Relaxing Massage",fr:"Massage Relaxant 55 minutes",de:"Entspannungsmassage 55 Minuten",it:"Massaggio Rilassante 55 minuti",pt:"Massagem Relaxante 55 minutos"},reflexologia_podal:{en:"Foot Reflexology",fr:"Rflexologie Plantaire",de:"Fureflexzonenmassage",it:"Riflessologia Plantare",pt:"Reflexologia Plantar"}};try{const ye=S(U);if(ye!==U)return ye}catch{console.warn("Translation system error, using fallback")}const ee="es",ae=V[U];return ae&&ae[ee]?ae[ee]:L},H=()=>{const[N,L]=f.useState(()=>{try{const ye=localStorage.getItem("cart:giftcards");return ye?JSON.parse(ye):[]}catch{return[]}});f.useEffect(()=>{localStorage.setItem("cart:giftcards",JSON.stringify(N))},[N]);const U=ye=>{L(me=>{const ve=me.findIndex(Ye=>Ye.name===ye.name&&Ye.priceCents===ye.priceCents);if(ve>=0){const Ye=[...me];return Ye[ve]={...Ye[ve],quantity:Ye[ve].quantity+(ye.quantity??1)},Ye}return[...me,{id:crypto.randomUUID(),name:ye.name,priceCents:ye.priceCents,quantity:ye.quantity??1}]}),Wt.success(S("added_to_cart"))},V=ye=>L(me=>me.filter(ve=>ve.id!==ye)),ee=()=>L([]),ae=f.useMemo(()=>N.reduce((ye,me)=>ye+me.priceCents*me.quantity,0),[N]);return{items:N,add:U,remove:V,clear:ee,totalCents:ae}};f.useEffect(()=>{(async()=>{const{data:N,error:L}=await G.from("gift_card_options").select("*").eq("is_active",!0).order("amount_cents",{ascending:!0});L||r(N||[])})()},[]);const Q=f.useMemo(()=>(n||[]).map(N=>({id:N.id,name:N.name,type:"fixed",priceCents:N.amount_cents,description:N.description,imageUrl:N.image_url||W0})),[n]),O=f.useMemo(()=>{const N=Q.filter(ae=>ae.type==="fixed"&&!H0(ae.name)&&!Yc(ae.name)&&!Kc(ae.name)),L=Q.filter(ae=>ae.type==="fixed"&&H0(ae.name)),U=Q.filter(ae=>ae.type==="fixed"&&Yc(ae.name)&&!Kc(ae.name)),V=Q.filter(ae=>ae.type==="fixed"&&Yc(ae.name)&&Kc(ae.name)),ee=Q.filter(ae=>ae.type==="fixed"&&Kc(ae.name)&&!Yc(ae.name));return{individuales:N,cuatro:L,rituales:U,ritualesParaDos:V,paraDos:ee}},[Q]),{items:q,add:ne,remove:Pe,clear:ue,totalCents:$}=H(),te=N=>{ne(N),T([]),setTimeout(()=>t(!0),0)},xe=f.useCallback(()=>{ue()},[ue]),fe=N=>{D(L=>({...L,[N]:!L[N]}))},he=(N,L)=>{const U=P[N]||!1,V=z[N]||"",ee=[25,50,100,200],ae=me=>{Y(ve=>({...ve,[N]:me}))},ye=me=>{te({name:`Tarjeta Regalo Personalizada - ${me}`,priceCents:me*100}),D(ve=>({...ve,[N]:!1})),Y(ve=>({...ve,[N]:""}))};return s.jsxs(ie,{className:"bg-gradient-to-br from-primary/5 to-accent/5 border-2 border-dashed border-primary/20",children:[s.jsxs(Ne,{className:"pb-3",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ao,{className:"h-5 w-5 text-primary"}),"Tarjeta Regalo Personalizada"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Elige el valor que prefieras para ",L.toLowerCase()]})]}),s.jsx(br,{className:"pt-0",children:s.jsxs(Fa,{open:U,onOpenChange:me=>fe(N),children:[s.jsxs(W,{variant:"outline",className:"w-full",onClick:()=>fe(N),children:[s.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Personalizar"]}),s.jsx(Zs,{className:"sm:max-w-md",children:s.jsxs(gS,{isOpen:U,autoScroll:!0,delay:100,children:[s.jsxs(ea,{children:[s.jsx(ta,{children:"Personalizar Tarjeta Regalo"}),s.jsxs(Bo,{children:["Selecciona el valor de tu tarjeta regalo para ",L.toLowerCase()]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.map(me=>s.jsxs(W,{variant:"outline",onClick:()=>ye(me),className:"h-12",children:[me,""]},me))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(K,{htmlFor:"custom-amount",children:"Otro valor ()"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(pe,{id:"custom-amount",type:"number",min:"10",max:"500",placeholder:"Ej: 75",value:V,onChange:me=>ae(me.target.value)}),s.jsx(W,{onClick:()=>{const me=parseInt(V);me>=10&&me<=500&&ye(me)},disabled:!V||parseInt(V)<10||parseInt(V)>500,children:"Aadir"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor mnimo: 10 - Valor mximo: 500"})]})]})]})})]})})]})};return f.useEffect(()=>{document.title="Tarjetas Regalo | The Nook Madrid",((V,ee)=>{let ae=document.querySelector(`meta[name="${V}"]`);ae||(ae=document.createElement("meta"),ae.setAttribute("name",V),document.head.appendChild(ae)),ae.setAttribute("content",ee)})("description","Tarjetas Regalo elegantes para todos los tratamientos en The Nook Madrid.");let U=document.querySelector('link[rel="canonical"]');U||(U=document.createElement("link"),U.setAttribute("rel","canonical"),document.head.appendChild(U)),U.setAttribute("href",window.location.href)},[]),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-3 sm:py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(_n,{to:"/",className:"inline-flex items-center hover:opacity-80 transition-opacity",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-8 w-auto md:h-10",loading:"lazy",width:160,height:40})}),s.jsxs(_n,{to:"/",className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors rounded-md hover:bg-muted",children:[" ",S("back")]})]}),s.jsx(pm,{})]})})}),s.jsx("div",{className:"fixed top-20 right-4 z-50",children:s.jsxs(W,{variant:"outline",className:"shadow-lg",onClick:()=>t(!0),children:[S("cart")," (",q.length,")"]})}),s.jsx(Fa,{open:e,onOpenChange:N=>{console.log(" Dialog onOpenChange llamado:",N),t(N)},children:s.jsxs(Zs,{className:"w-[95vw] max-w-[600px] max-h-[90vh] p-0 overflow-hidden flex flex-col",children:[s.jsxs(ea,{className:"flex-shrink-0 px-4 sm:px-6 pt-4 pb-3 border-b bg-background",children:[s.jsx(ta,{children:S("your_cart")}),s.jsx(Bo,{className:"sr-only",children:S("your_cart")})]}),s.jsx("div",{className:"overflow-y-auto px-6 py-4",style:{height:"calc(90vh - 140px)"},children:s.jsx("div",{className:"space-y-4",children:q.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:S("cart_empty")}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3",children:q.map(N=>s.jsxs("div",{className:"flex items-center justify-between gap-3 border rounded-md p-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium leading-tight",children:N.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[ns(N.priceCents),"  ",N.quantity]})]}),s.jsx(W,{size:"sm",variant:"ghost",onClick:()=>Pe(N.id),children:S("remove")})]},N.id))}),s.jsxs("div",{className:"space-y-2 border-t pt-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:S("total")}),s.jsx("span",{className:"font-semibold",children:ns($)})]}),$<50&&s.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-2",children:s.jsxs("p",{className:"text-xs text-destructive",children:[" Mnimo requerido: 0.50. Faltan ",ns(50-$),"."]})})]}),s.jsxs("div",{className:"space-y-3 border-t pt-3",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"purchased_by_name",className:"text-sm",children:S("purchased_by_name")}),s.jsx(pe,{id:"purchased_by_name",value:a,onChange:N=>o(N.target.value),placeholder:S("buyer_name_placeholder"),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"purchased_by_email",className:"text-sm",children:S("buyer_email")}),s.jsx(pe,{id:"purchased_by_email",type:"email",value:i,onChange:N=>l(N.target.value),placeholder:S("buyer_email_placeholder"),className:"mt-1"})]})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pd,{id:"is_gift",checked:c,onCheckedChange:N=>d(!!N)}),s.jsx(K,{htmlFor:"is_gift",className:"text-sm",children:S("is_gift")})]}),c&&s.jsxs("div",{className:"space-y-3 mt-3 pl-6 border-l-2 border-primary/20",children:[s.jsxs("div",{children:[s.jsx(K,{htmlFor:"recipient_name",className:"text-sm",children:S("recipient_name_required")}),s.jsx(pe,{id:"recipient_name",value:u,onChange:N=>m(N.target.value),placeholder:S("recipient_name_placeholder"),className:"mt-1",required:c})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"recipient_email",className:"text-sm",children:S("recipient_email")}),s.jsx(pe,{id:"recipient_email",type:"email",value:h,onChange:N=>g(N.target.value),placeholder:S("buyer_email_placeholder"),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(K,{htmlFor:"gift_message",className:"text-sm",children:S("gift_message")}),s.jsx(Yt,{id:"gift_message",value:w,onChange:N=>y(N.target.value),placeholder:S("gift_message_placeholder"),className:"mt-1",rows:3})]})]})]}),s.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.jsx("h4",{className:"text-sm font-semibold",children:S("gift_card_config")}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsx(K,{htmlFor:"show_price",className:"text-sm",children:S("show_price_on_card")}),s.jsx(pd,{id:"show_price",checked:_,onCheckedChange:N=>x(!!N)})]}),s.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[s.jsx(K,{className:"text-sm font-medium mb-3 block",children:S("who_to_send_card")}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"send_to_buyer",name:"send_option",checked:p,onChange:()=>v(!0),className:"h-4 w-4"}),s.jsx(K,{htmlFor:"send_to_buyer",className:"text-sm",children:S("send_to_buyer")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"send_to_recipient",name:"send_option",checked:!p,onChange:()=>v(!1),className:"h-4 w-4"}),s.jsx(K,{htmlFor:"send_to_recipient",className:"text-sm",children:S("send_to_recipient")})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsx(K,{htmlFor:"show_buyer_data",className:"text-sm",children:S("show_buyer_data")}),s.jsx(pd,{id:"show_buyer_data",checked:b,onCheckedChange:N=>j(!!N)})]})]})]}),s.jsx(GS,{})]})})}),q.length>0&&s.jsx("div",{className:"border-t px-6 py-4 bg-background",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(W,{variant:"secondary",onClick:ue,className:"h-12 text-sm",children:S("empty_cart_button")}),s.jsxs(W,{className:"h-12 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-sm font-semibold",onClick:async()=>{var N;if(console.log(" Botn Comprar clickeado",{purchasedByName:a,purchasedByEmail:i,isGift:c,recipientName:u,recipientEmail:h,itemsCount:q.length,totalCents:$}),q.length!==0){if($<50){Wt.error("El monto mnimo es 0.50. Por favor aade ms productos.");return}if(c&&!u.trim()){Wt.error(S("recipient_name_error"));return}if(!a.trim()){Wt.error(S("buyer_name_error"));return}if(!i.trim()){Wt.error(S("buyer_email_error"));return}try{console.log(" Creando checkout...");const L={intent:"gift_cards",gift_cards:{items:q.map(ee=>({amount_cents:ee.priceCents,quantity:ee.quantity,name:ee.name,id:ee.id,purchased_by_name:a.trim(),purchased_by_email:i.trim(),is_gift:c,...c&&{recipient_name:u.trim(),recipient_email:h.trim()},gift_message:w.trim(),show_price:_,show_buyer_data:b,send_to_buyer:p}))}},{data:U,error:V}=await G.functions.invoke("create-checkout",{body:L});if(console.log(" Respuesta create-checkout:",{data:U,error:V}),V){console.error(" Error en create-checkout:",V),Wt.error("Error en el checkout");return}if(U!=null&&U.client_secret){if(typeof window<"u")try{sessionStorage.setItem("lastCheckoutIntent","gift_cards"),sessionStorage.setItem("lastGiftCardSummary",JSON.stringify(((N=L.gift_cards)==null?void 0:N.items)||[]))}catch(ee){console.warn("No se pudo guardar el resumen del checkout en sessionStorage",ee)}console.log(" Abriendo modal de Stripe"),M(U.client_secret),I(U.session_id),C(!0),t(!1)}else console.error(" No se recibi client_secret"),Wt.error("Error en el checkout")}catch(L){console.error(" Error:",L),Wt.error("Error en el checkout")}}},disabled:!a||!i||c&&(!u||!h)||$<50,children:[S("buy_button")," - ",ns($)]})]})})]})}),s.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-6 sm:py-8",children:s.jsxs("article",{children:[s.jsx("header",{className:"mb-5",children:s.jsx("div",{children:s.jsx("h1",{className:"text-2xl font-bold",children:S("gift_cards_page")})})}),s.jsx(Fa,{open:k,onOpenChange:C,children:s.jsxs(Zs,{className:"max-w-[520px] top-[5vh] translate-y-0 max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(ea,{className:"flex-shrink-0 px-4 sm:px-6 pt-4 pb-3 border-b bg-background",children:[s.jsx(ta,{children:S("complete_payment")}),s.jsx(Bo,{children:S("secure_payment_info")})]}),s.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:E&&s.jsx(lz,{clientSecret:E,sessionId:R,onClose:()=>C(!1),onSuccess:xe})})]})}),s.jsx("section",{className:"grid gap-6",children:s.jsxs(jr,{type:"multiple",value:A,onValueChange:N=>T(Array.isArray(N)?N:[N]),className:"space-y-4",children:[O.individuales.length>0&&s.jsxs(_t,{value:"tarjetas-individuales",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tarjeta Regalo - Masaje Individual"})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[he("individuales","Masajes Individuales"),O.individuales.map(N=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Hi,{src:N.imageUrl||"/lovable-uploads/93fd7781-d4ed-4ae8-ab36-5397b4b80598.png",alt:F(N.name),className:"aspect-[4/3]",width:fn.width,height:fn.height,quality:fn.quality}),s.jsxs(Ne,{className:"pb-2",children:[s.jsx(Ee,{className:"text-base leading-tight",children:F(N.name)}),s.jsx("p",{className:"text-sm text-muted-foreground uppercase tracking-wide",children:S("gift_cards").toUpperCase()})]}),s.jsx(de,{className:"pb-2",children:s.jsx("p",{className:"text-2xl font-bold text-primary",children:ns(N.priceCents)})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>te({name:F(N.name),priceCents:N.priceCents}),children:S("add_to_cart")})})]},N.id))]})})]}),O.paraDos.length>0&&s.jsxs(_t,{value:"tarjetas-dos-personas",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tarjeta Regalo - Masaje para Dos"})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[he("paraDos","Masajes para Dos Personas"),O.paraDos.map(N=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Hi,{src:N.imageUrl||"/lovable-uploads/93fd7781-d4ed-4ae8-ab36-5397b4b80598.png",alt:F(N.name),className:"aspect-[4/3]",width:fn.width,height:fn.height,quality:fn.quality}),s.jsxs(Ne,{className:"pb-2",children:[s.jsx(Ee,{className:"text-base leading-tight",children:F(N.name)}),s.jsx("p",{className:"text-sm text-muted-foreground uppercase tracking-wide",children:S("gift_cards").toUpperCase()})]}),s.jsx(de,{className:"pb-2",children:s.jsx("p",{className:"text-2xl font-bold text-primary",children:ns(N.priceCents)})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>te({name:F(N.name),priceCents:N.priceCents}),children:S("add_to_cart")})})]},N.id))]})})]}),O.cuatro.length>0&&s.jsxs(_t,{value:"tarjetas-cuatro-manos",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tarjeta Regalo - Masaje a Cuatro Manos"})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[he("cuatro","Masajes a Cuatro Manos"),O.cuatro.map(N=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Hi,{src:N.imageUrl||W0,alt:F(N.name),className:"aspect-[4/3]",width:fn.width,height:fn.height,quality:fn.quality}),s.jsxs(Ne,{className:"pb-2",children:[s.jsx(Ee,{className:"text-base leading-tight",children:F(N.name)}),s.jsx("p",{className:"text-sm text-muted-foreground uppercase tracking-wide",children:S("gift_cards").toUpperCase()})]}),s.jsx(de,{className:"pb-2",children:s.jsx("p",{className:"text-2xl font-bold text-primary",children:ns(N.priceCents)})}),s.jsx(br,{className:"pt-2",children:s.jsx(W,{size:"sm",className:"w-full",onClick:()=>te({name:F(N.name),priceCents:N.priceCents}),children:S("add_to_cart")})})]},N.id))]})})]}),O.rituales.length>0&&s.jsxs(_t,{value:"tarjetas-rituales",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tarjeta Regalo - Rituales Individuales"})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[he("rituales","Rituales Individuales"),O.rituales.map(N=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200 max-w-sm",children:[s.jsx(Hi,{src:N.imageUrl||"/lovable-uploads/93fd7781-d4ed-4ae8-ab36-5397b4b80598.png",alt:F(N.name),className:"aspect-[4/3]",width:fn.width,height:fn.height,quality:fn.quality}),s.jsxs(Ne,{className:"pb-2 p-3",children:[s.jsx(Ee,{className:"text-sm leading-tight",children:F(N.name)}),s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:S("gift_cards").toUpperCase()})]}),s.jsx(de,{className:"pb-2 p-3 pt-0",children:s.jsx("p",{className:"text-lg font-bold text-primary",children:ns(N.priceCents)})}),s.jsx(br,{className:"pt-2 p-3",children:s.jsx(W,{size:"sm",className:"w-full text-xs",onClick:()=>te({name:F(N.name),priceCents:N.priceCents}),children:S("add_to_cart")})})]},N.id))]})})]}),O.ritualesParaDos.length>0&&s.jsxs(_t,{value:"tarjetas-rituales-dos",className:"border rounded-lg",children:[s.jsx(bt,{className:"px-3 py-2 sm:px-4 sm:py-3 hover:no-underline [&[data-state=open]>svg]:rotate-180",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tarjeta Regalo - Rituales para Dos"})}),s.jsx(jt,{className:"px-4 pb-4",children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:[he("ritualesParaDos","Rituales para Dos Personas"),O.ritualesParaDos.map(N=>s.jsxs(ie,{className:"relative overflow-hidden hover:shadow-lg transition-shadow duration-200 max-w-sm",children:[s.jsx(Hi,{src:N.imageUrl||"/lovable-uploads/93fd7781-d4ed-4ae8-ab36-5397b4b80598.png",alt:F(N.name),className:"aspect-[4/3]",width:fn.width,height:fn.height,quality:fn.quality}),s.jsxs(Ne,{className:"pb-2 p-3",children:[s.jsx(Ee,{className:"text-sm leading-tight",children:F(N.name)}),s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:S("gift_cards").toUpperCase()})]}),s.jsx(de,{className:"pb-2 p-3 pt-0",children:s.jsx("p",{className:"text-lg font-bold text-primary",children:ns(N.priceCents)})}),s.jsx(br,{className:"pt-2 p-3",children:s.jsx(W,{size:"sm",className:"w-full text-xs",onClick:()=>te({name:F(N.name),priceCents:N.priceCents}),children:S("add_to_cart")})})]},N.id))]})})]})]})})]})})]})};var dz="Separator",q0="horizontal",uz=["horizontal","vertical"],mk=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=q0,...a}=e,o=mz(r)?r:q0,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return s.jsx(Me.div,{"data-orientation":o,...l,...a,ref:t})});mk.displayName=dz;function mz(e){return uz.includes(e)}var hk=mk;const fk=f.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(hk,{ref:a,decorative:n,orientation:t,className:le("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));fk.displayName=hk.displayName;function hz(){var _,x,p,v;const[e]=zu(),t=xs(),[n,r]=f.useState(null),[a,o]=f.useState(!0),[i,l]=f.useState(!1),[c,d]=f.useState(!1),u=e.get("setup_intent");e.get("client_secret");const m=e.get("booking_id");f.useEffect(()=>{(async()=>{if(window.StripeInstance){d(!0);return}const j=document.createElement("script");j.src="https://js.stripe.com/v3/",j.onload=()=>d(!0),document.head.appendChild(j)})()},[]),f.useEffect(()=>{(u||m)&&h()},[u,m]);const h=async()=>{try{if(u){const{data:b,error:j}=await G.from("booking_payment_intents").select("booking_id").eq("stripe_setup_intent_id",u).single();if(j)throw j;const{data:k,error:C}=await G.from("bookings").select(`
          id,
          booking_datetime,
          total_price_cents,
          duration_minutes,
          payment_method_status,
          services(name),
          employees(profiles(first_name, last_name)),
          profiles(first_name, last_name, email),
          centers(name, address)
        `).eq("id",b.booking_id).single();if(C)throw C;r(k)}else if(m){const{data:b,error:j}=await G.from("bookings").select(`
          id,
          booking_datetime,
          total_price_cents,
          duration_minutes,
          payment_method_status,
          services(name),
          employees(profiles(first_name, last_name)),
          profiles(first_name, last_name, email),
          centers(name, address)
        `).eq("id",m).single();if(j)throw j;r(b)}}catch(b){console.error("Error fetching booking:",b),Tl({title:"Error",description:"No se pudo cargar la informacin de la reserva",variant:"destructive"}),t("/")}finally{o(!1)}},g=async()=>{l(!0);try{const b=(n==null?void 0:n.id)||m;if(!b)throw new Error("Falta el identificador de la reserva");const{data:j,error:k}=await G.functions.invoke("create-booking-setup-session",{body:{booking_id:b}});if(k)throw k;if(j!=null&&j.url)window.open(j.url,"_blank");else throw new Error("No se pudo iniciar Stripe Checkout")}catch(b){console.error("Payment setup error:",b),Tl({title:"Error",description:b.message||"Error al iniciar la pgina de tarjeta",variant:"destructive"})}finally{l(!1)}};if(a)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 flex items-center justify-center p-4",children:s.jsx(ie,{className:"w-full max-w-md",children:s.jsxs(de,{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),s.jsx("p",{className:"text-center mt-4 text-muted-foreground",children:"Cargando informacin de la reserva..."})]})})});if(!n)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 flex items-center justify-center p-4",children:s.jsx(ie,{className:"w-full max-w-md",children:s.jsx(de,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Reserva no encontrada"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"No se pudo encontrar la informacin de tu reserva."}),s.jsx(W,{onClick:()=>t("/"),children:"Volver al inicio"})]})})})});const w=(_=n.employees)!=null&&_.profiles?`${n.employees.profiles.first_name} ${n.employees.profiles.last_name}`.trim():"Nuestro equipo",y=n.payment_method_status==="succeeded";return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-12 w-auto md:h-16",loading:"lazy"})}),s.jsx("p",{className:"text-muted-foreground",children:"Asegurar tu reserva"})]}),y&&s.jsx(ie,{className:"border-green-200 bg-green-50",children:s.jsx(de,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3 text-green-700",children:[s.jsx(hi,{className:"h-6 w-6"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Reserva asegurada!"}),s.jsx("p",{className:"text-sm",children:"Tu mtodo de pago ha sido configurado correctamente."})]})]})})}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Nt,{className:"h-5 w-5"}),"Detalles de tu Reserva"]}),s.jsx(Un,{children:"Confirma los detalles antes de asegurar tu reserva"})]}),s.jsxs(de,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(Ml,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:((x=n.services)==null?void 0:x.name)||"Servicio personalizado"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tratamiento reservado"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(Nt,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:new Date(n.booking_datetime).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(n.booking_datetime).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(sr,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[n.duration_minutes," minutos"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Duracin estimada"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(Gn,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:w}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Profesional asignado"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(yn,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:((p=n.centers)==null?void 0:p.name)||"The Nook Madrid"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:((v=n.centers)==null?void 0:v.address)||"Centro de tratamientos"})]})]})]}),s.jsx(fk,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold",children:"Total:"}),s.jsx("span",{className:"text-2xl font-bold text-primary",children:n.total_price_cents?`${(n.total_price_cents/100).toFixed(2)}`:"A confirmar"})]})]})]}),s.jsx(ie,{className:"border-blue-200 bg-blue-50",children:s.jsx(de,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gb,{className:"h-6 w-6 text-blue-600 mt-1"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:" Seguridad garantizada"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:" Tu tarjeta se guarda de forma segura con Stripe"}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"No se realizar ningn cargo hasta el momento del tratamiento"})]}),s.jsx("li",{children:" Puedes cancelar hasta 24h antes sin coste"}),s.jsx("li",{children:" Conexin SSL cifrada de extremo a extremo"})]})]})]})})}),s.jsxs("div",{className:"space-y-3",children:[y?s.jsx(W,{onClick:()=>t("/"),className:"w-full h-12 text-lg",size:"lg",children:"Volver al inicio"}):s.jsx(W,{onClick:g,disabled:i,className:"w-full h-12 text-lg",size:"lg",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Procesando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ml,{className:"mr-2 h-5 w-5"})," Asegurar mi Reserva"]})}),s.jsx(W,{variant:"outline",onClick:()=>t("/"),className:"w-full",children:"Volver ms tarde"})]}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{children:"Si tienes alguna pregunta, contctanos en"}),s.jsx("p",{className:"font-medium",children:"reservas@thenookmadrid.com"})]}),s.jsx("p",{className:"text-xs border-t pt-2",children:" GnerAI 2025  Todos los derechos reservados"})]})]})})}function fz(){const[e]=zu(),t=xs(),[n,r]=f.useState(!0),[a,o]=f.useState(!1),[i,l]=f.useState({name:"The Nook Madrid",phone:"911 481 474",email:"reservas@thenookmadrid.com",address:"Calle Zurbarn 10 bajo derecha, Madrid 28010"}),c=e.get("setup_intent");f.useEffect(()=>{d(),c?u():r(!1)},[c]);const d=async()=>{try{const{data:m,error:h}=await G.from("centers").select("name, address, phone, email").eq("active",!0).maybeSingle();if(h){console.error("Error loading center data:",h);return}m&&l({name:m.name||"The Nook Madrid",phone:m.phone||"911 481 474",email:m.email||"reservas@thenookmadrid.com",address:m.address||"Calle Zurbarn 10 bajo derecha, Madrid 28010"})}catch(m){console.error("Error loading center data:",m)}},u=async()=>{try{const{data:m,error:h}=await G.functions.invoke("confirm-payment-method",{body:{setup_intent_id:c}});if(h)throw h;o(!0),Tl({title:"xito!",description:"Tu mtodo de pago ha sido configurado correctamente"})}catch(m){console.error("Error confirming payment method:",m),Tl({title:"Error",description:m.message||"Error al confirmar el mtodo de pago",variant:"destructive"})}finally{r(!1)}};return n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 flex items-center justify-center p-4",children:s.jsx(ie,{className:"w-full max-w-md",children:s.jsxs(de,{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),s.jsx("p",{className:"text-center mt-4 text-muted-foreground",children:"Confirmando mtodo de pago..."})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-12 w-auto md:h-16",loading:"lazy"})}),s.jsx("p",{className:"text-muted-foreground",children:"Confirmacin de pago"})]}),s.jsxs(ie,{className:"border-green-200 bg-green-50",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(hi,{className:"h-8 w-8 text-green-600"})}),s.jsx(Ee,{className:"text-green-800",children:"Reserva Asegurada!"}),s.jsx(Un,{className:"text-green-600",children:"Tu mtodo de pago ha sido configurado correctamente"})]}),s.jsx(de,{className:"space-y-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ml,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Tarjeta guardada de forma segura"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Protegida con encriptacin de grado bancario"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sr,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"No se ha realizado ningn cargo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"El pago se procesar el da de tu cita"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nt,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Recordatorio automtico"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Te enviaremos un recordatorio 24h antes"})]})]})]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Prximos pasos"]})}),s.jsx(de,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Recibirs un recordatorio"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Te enviaremos un email 24 horas antes de tu cita"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Disfruta de tu tratamiento"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Llega unos minutos antes para prepararte"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Pago automtico"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Se procesar el pago una vez completado el servicio"})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(W,{onClick:()=>t("/"),className:"w-full h-12 text-lg",size:"lg",children:"Volver al inicio"}),s.jsx(W,{variant:"outline",onClick:()=>window.print(),className:"w-full",children:"Imprimir confirmacin"})]}),s.jsx(ie,{className:"bg-muted/50",children:s.jsx(de,{className:"p-4",children:s.jsxs("div",{className:"text-center text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:"Necesitas ayuda?"}),s.jsxs("p",{className:"text-muted-foreground",children:[" ",i.email,s.jsx("br",{})," ",i.phone,s.jsx("br",{})," ",i.address]}),s.jsx("p",{className:"text-xs border-t pt-2 mt-3",children:" GnerAI 2025  Todos los derechos reservados"})]})})})]})})}const pz=()=>{var i,l;const[e]=zu(),t=e.get("session_id"),[n,r]=f.useState(!0),[a,o]=f.useState(null);return f.useEffect(()=>{if(document.title="Pago realizado | The Nook Madrid",!t){r(!1);return}(async()=>{try{const{data:c,error:d}=await G.functions.invoke("verify-payment",{body:{session_id:t}});if(d)throw d;o(c),c!=null&&c.paid?Wt.success("Pago verificado correctamente"):Wt.error("El pago no est confirmado todava")}catch(c){Wt.error(c.message||"Error al verificar el pago")}finally{r(!1)}})()},[t]),s.jsx("main",{className:"container mx-auto px-4 py-10",children:s.jsxs(ie,{className:"max-w-xl mx-auto",children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Pago realizado"})}),s.jsx(de,{children:n?s.jsx("p",{children:"Verificando tu pago..."}):s.jsxs("div",{className:"space-y-3",children:[a!=null&&a.paid?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gracias! Tu pago se ha completado correctamente."}),(a==null?void 0:a.intent)==="gift_cards"&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm font-medium",children:["Se han generado ",((i=a==null?void 0:a.gift_cards)==null?void 0:i.length)||0," tarjeta(s) de regalo."]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recibirs un email con los detalles y cdigos de tus tarjetas regalo."})]}),(a==null?void 0:a.intent)==="package_voucher"&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm font-medium",children:["Se han generado ",((l=a==null?void 0:a.vouchers)==null?void 0:l.length)||0," bono(s)."]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recibirs un email con los detalles y cdigos de tus bonos."})]}),(a==null?void 0:a.intent)==="booking_payment"&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tu reserva ha sido confirmada. Recibirs un email de confirmacin."})]}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"No hemos podido confirmar tu pago."}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(W,{asChild:!0,children:s.jsx(_n,{to:"/",children:"Volver al inicio"})}),s.jsx(W,{variant:"outline",asChild:!0,children:s.jsx(_n,{to:"/tarjetas-regalo",children:"Tarjetas de regalo"})})]})]})})]})})},gz=()=>s.jsx("main",{className:"container mx-auto px-4 py-10",children:s.jsxs(ie,{className:"max-w-xl mx-auto",children:[s.jsx(Ne,{children:s.jsx(Ee,{children:"Pago cancelado"})}),s.jsxs(de,{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Has cancelado el proceso de pago. Puedes reintentarlo cuando quieras."}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(W,{asChild:!0,children:s.jsx(_n,{to:"/",children:"Volver al inicio"})}),s.jsx(W,{variant:"outline",asChild:!0,children:s.jsx(_n,{to:"/tarjetas-regalo",children:"Tarjetas de regalo"})})]})]})]})}),vz=({children:e,requireAuth:t=!0,requireAdmin:n=!1,requireEmployee:r=!1})=>{const{isAuthenticated:a,loading:o,isAdmin:i,isEmployee:l}=_v(),c=xs();return f.useEffect(()=>{if(!o){if(t&&!a){c("/admin-login");return}if(n&&!i){c("/admin-login");return}if(r&&!l&&!i){c("/admin-login");return}}},[o,a,i,l,c,t,n,r]),o?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ef,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Cargando..."})]})}):t&&!a?null:n&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Acceso denegado"}),s.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos de administrador para acceder a esta pgina."})]})}):r&&!l&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Acceso denegado"}),s.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos de empleado para acceder a esta pgina."})]})}):s.jsx(s.Fragment,{children:e})},xz=()=>{const[e]=zu(),t=e.get("session_id"),[n,r]=f.useState(!0),[a,o]=f.useState(null);a==null||a.intent;const i=f.useMemo(()=>{if(typeof window>"u")return null;try{return window.sessionStorage.getItem("lastCheckoutIntent")}catch{return null}},[]),l=f.useMemo(()=>{if(typeof window>"u")return[];try{const g=window.sessionStorage.getItem("lastGiftCardSummary");if(!g)return[];const w=JSON.parse(g);return Array.isArray(w)?w:w&&typeof w=="object"?[w]:[]}catch{return[]}},[]),c=f.useMemo(()=>{var w,y;const g=(a==null?void 0:a.gift_cards)??(a==null?void 0:a.giftCards)??((w=a==null?void 0:a.data)==null?void 0:w.gift_cards)??((y=a==null?void 0:a.data)==null?void 0:y.giftCards);return Array.isArray(g)&&g.length>0?g:g&&typeof g=="object"?[g]:l},[a,l]),d=f.useMemo(()=>{var w;const g=(a==null?void 0:a.intent)??((w=a==null?void 0:a.data)==null?void 0:w.intent)??i;return typeof g=="string"?g.toLowerCase():""},[a,i]),u=f.useMemo(()=>{var w,y;if(c.length>0||d.includes("gift"))return!0;const g=((w=a==null?void 0:a.metadata)==null?void 0:w.intent)??((y=a==null?void 0:a.metadata)==null?void 0:y.type);return typeof g=="string"&&g.toLowerCase().includes("gift")?!0:(i==null?void 0:i.toLowerCase())==="gift_cards"},[c,d,a,i]),m=!u&&d==="package_voucher",h=g=>typeof g=="number"?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(g/100):null;return f.useEffect(()=>{if(document.title="Pago Exitoso | The Nook Madrid",!t){r(!1);return}(async()=>{try{const{data:g,error:w}=await G.functions.invoke("verify-payment",{body:{session_id:t}});if(console.log("[PagoExitoso] verify-payment response",{data:g,error:w}),w)throw w;o(g),g!=null&&g.paid?Wt.success("Pago completado exitosamente!"):Wt.error("El pago est siendo procesado")}catch(g){console.error("[PagoExitoso] verify-payment error",g),Wt.error(g.message||"Error al verificar el pago")}finally{if(r(!1),typeof window<"u")try{window.sessionStorage.removeItem("lastCheckoutIntent"),window.sessionStorage.removeItem("lastGiftCardSummary")}catch{}}})()},[t]),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:s.jsx("div",{className:"container mx-auto px-4 py-3 sm:py-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(_n,{to:"/",className:"inline-flex items-center hover:opacity-80 transition-opacity",children:s.jsx("img",{src:"/lovable-uploads/475dc4d6-6d6b-4357-a8b5-4611869beb43.png",alt:"The Nook Madrid",className:"h-8 w-auto md:h-10",loading:"lazy",width:160,height:40})})})})}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs(ie,{className:"text-center",children:[s.jsxs(Ne,{children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(xg,{className:"w-8 h-8 text-green-600"})}),s.jsx(Ee,{className:"text-2xl text-green-600",children:"Pago Completado!"})]}),s.jsx(de,{className:"space-y-4",children:n?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{children:"Verificando tu pago..."})]}):s.jsxs(s.Fragment,{children:[a!=null&&a.paid?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-muted-foreground",children:u?"Tu tarjeta regalo se ha emitido correctamente.":m?"Tu bono se ha emitido correctamente.":"Tu pago se ha procesado correctamente."}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg text-left",children:s.jsx("p",{className:"text-sm text-green-800",children:u?"En unos minutos recibirs un correo con la tarjeta regalo personalizada, lista para descargar y compartir.":m?"En unos minutos recibirs un correo con el cdigo del bono y las instrucciones para canjearlo.":"Recibirs un correo electrnico con los detalles de tu compra en los prximos minutos."})}),u&&c.length>0&&s.jsxs("div",{className:"bg-white border border-primary/20 rounded-lg p-4 text-left space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-primary",children:"Resumen de tu tarjeta regalo"}),c.map((g,w)=>s.jsxs("div",{className:"rounded-md bg-primary/5 p-3 space-y-1",children:[s.jsx("p",{className:"text-sm font-semibold text-primary",children:g.gift_card_name||"Tarjeta regalo"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cdigo: ",s.jsx("span",{className:"font-mono font-semibold",children:g.code})]}),typeof g.amount_cents=="number"&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Valor: ",s.jsx("span",{className:"font-semibold",children:h(g.amount_cents)})]}),g.recipient_name&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Destinatario: ",s.jsx("span",{className:"font-semibold",children:g.recipient_name}),g.recipient_email?s.jsxs("span",{className:"font-normal",children:["  ",g.recipient_email]}):null]})]},g.id??w)),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tambin hemos enviado la tarjeta personalizada por correo electrnico como adjunto para que la descargues."})]})]}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Tu pago est siendo procesado. Te notificaremos cuando se complete."})}),s.jsxs("div",{className:"space-y-3 pt-4",children:[s.jsx(W,{asChild:!0,className:"w-full",children:s.jsxs(_n,{to:u?"/gift-cards":"/packages",children:[s.jsx(aT,{className:"w-4 h-4 mr-2"}),u?"Comprar otra tarjeta regalo":"Comprar otro bono"]})}),s.jsx(W,{variant:"outline",asChild:!0,className:"w-full",children:s.jsxs(_n,{to:"/",children:[s.jsx(sT,{className:"w-4 h-4 mr-2"}),"Volver al inicio"]})})]})]})})]})})})]})},yz=new wR,wz=()=>s.jsx(bR,{client:yz,children:s.jsx(j5,{children:s.jsxs(X4,{children:[s.jsx(YT,{}),s.jsx(NM,{}),s.jsx(x5,{children:s.jsxs(d5,{children:[s.jsx(pn,{path:"/",element:s.jsx(m8,{})}),s.jsx(pn,{path:"/client-reservation",element:s.jsx(p8,{})}),s.jsx(pn,{path:"/packages",element:s.jsx(g8,{})}),s.jsx(pn,{path:"/gift-cards",element:s.jsx(cz,{})}),s.jsx(pn,{path:"/asegurar-reserva",element:s.jsx(hz,{})}),s.jsx(pn,{path:"/pago-configurado",element:s.jsx(fz,{})}),s.jsx(pn,{path:"/admin-login",element:s.jsx(u8,{})}),s.jsx(pn,{path:"/panel-gestion-nook-madrid-2024",element:s.jsx(vz,{requireAuth:!0,children:s.jsx(d8,{})})}),s.jsx(pn,{path:"/pago-exitoso",element:s.jsx(xz,{})}),s.jsx(pn,{path:"/payment-success",element:s.jsx(pz,{})}),s.jsx(pn,{path:"/pago-cancelado",element:s.jsx(gz,{})}),s.jsx(pn,{path:"/admin/*",element:s.jsx(th,{to:"/panel-gestion-nook-madrid-2024",replace:!0})}),s.jsx(pn,{path:"/canjear",element:s.jsx(th,{to:"/panel-gestion-nook-madrid-2024",replace:!0})}),s.jsx(pn,{path:"*",element:s.jsx(th,{to:"/",replace:!0})})]})})]})})});fb(document.getElementById("root")).render(s.jsx(f.StrictMode,{children:s.jsx(wz,{})}));
