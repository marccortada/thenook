@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Paleta principal azul claro y complementarios */
    --background: 205 50% 98%;
    --foreground: 210 25% 15%;

    --card: 205 60% 99%;
    --card-foreground: 210 25% 15%;

    --popover: 205 60% 99%;
    --popover-foreground: 210 25% 15%;

    /* Primary: Azul claro elegante */
    --primary: 205 85% 65%;
    --primary-foreground: 0 0% 100%;

    /* Secondary: Azul grisáceo muy suave */
    --secondary: 210 35% 92%;
    --secondary-foreground: 210 45% 25%;

    /* Muted: Tonos neutros con hint de azul */
    --muted: 210 25% 94%;
    --muted-foreground: 210 15% 50%;

    /* Accent: Azul verdoso complementario */
    --accent: 185 55% 75%;
    --accent-foreground: 210 35% 15%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    /* Borders con tono azul muy sutil */
    --border: 210 20% 88%;
    --input: 210 20% 88%;
    --ring: 205 85% 65%;

    --radius: 0.75rem;

    /* Sidebar con tema azul claro */
    --sidebar-background: 205 45% 97%;
    --sidebar-foreground: 210 30% 25%;
    --sidebar-primary: 205 85% 65%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 30% 94%;
    --sidebar-accent-foreground: 210 45% 25%;
    --sidebar-border: 210 25% 85%;
    --sidebar-ring: 205 85% 65%;

    /* Gradientes para efectos especiales */
    --gradient-primary: linear-gradient(135deg, hsl(205 85% 65%), hsl(185 75% 70%));
    --gradient-secondary: linear-gradient(180deg, hsl(205 50% 98%), hsl(210 35% 92%));
    --gradient-accent: linear-gradient(45deg, hsl(185 55% 75%), hsl(205 85% 65%));

    /* Sombras con tono azul */
    --shadow-soft: 0 2px 10px -2px hsl(205 85% 65% / 0.1);
    --shadow-medium: 0 8px 25px -5px hsl(205 85% 65% / 0.15);
    --shadow-strong: 0 20px 40px -12px hsl(205 85% 65% / 0.25);
  }

  .dark {
    /* Tema oscuro con azules profundos */
    --background: 210 45% 8%;
    --foreground: 205 30% 95%;

    --card: 210 40% 10%;
    --card-foreground: 205 30% 95%;

    --popover: 210 40% 10%;
    --popover-foreground: 205 30% 95%;

    /* Primary más brillante en modo oscuro */
    --primary: 205 85% 70%;
    --primary-foreground: 210 45% 8%;

    --secondary: 210 35% 15%;
    --secondary-foreground: 205 30% 95%;

    --muted: 210 35% 15%;
    --muted-foreground: 205 15% 65%;

    --accent: 185 60% 60%;
    --accent-foreground: 205 30% 95%;

    --destructive: 0 70% 55%;
    --destructive-foreground: 205 30% 95%;

    --border: 210 30% 18%;
    --input: 210 30% 18%;
    --ring: 205 85% 70%;

    /* Sidebar modo oscuro */
    --sidebar-background: 210 40% 9%;
    --sidebar-foreground: 205 25% 85%;
    --sidebar-primary: 205 85% 70%;
    --sidebar-primary-foreground: 210 45% 8%;
    --sidebar-accent: 210 35% 14%;
    --sidebar-accent-foreground: 205 25% 85%;
    --sidebar-border: 210 30% 16%;
    --sidebar-ring: 205 85% 70%;

    /* Gradientes modo oscuro */
    --gradient-primary: linear-gradient(135deg, hsl(205 85% 70%), hsl(185 75% 65%));
    --gradient-secondary: linear-gradient(180deg, hsl(210 45% 8%), hsl(210 35% 15%));
    --gradient-accent: linear-gradient(45deg, hsl(185 60% 60%), hsl(205 85% 70%));

    /* Sombras más intensas en modo oscuro */
    --shadow-soft: 0 2px 10px -2px hsl(205 85% 70% / 0.2);
    --shadow-medium: 0 8px 25px -5px hsl(205 85% 70% / 0.3);
    --shadow-strong: 0 20px 40px -12px hsl(205 85% 70% / 0.4);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    background-image: var(--gradient-secondary);
    background-attachment: fixed;
    /* Prevent mouse jitter/movement issues */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

@layer components {
  /* Componentes con efectos especiales azules */
  .card-gradient {
    background: var(--gradient-primary);
    box-shadow: var(--shadow-medium);
  }
  
  .btn-primary-gradient {
    background: var(--gradient-primary);
    transition: all 0.3s ease;
  }
  
  .btn-primary-gradient:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-strong);
  }
  
  .glass-effect {
    background: hsl(205 60% 99% / 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid hsl(205 85% 65% / 0.2);
  }
  
  .dark .glass-effect {
    background: hsl(210 40% 10% / 0.8);
    border: 1px solid hsl(205 85% 70% / 0.2);
  }
  
  .accent-glow {
    box-shadow: 0 0 20px hsl(205 85% 65% / 0.3);
  }
  
  .hover-lift {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .hover-lift:hover {
    transform: translateY(-4px) translateZ(0);
    box-shadow: var(--shadow-strong);
  }


  /* Fix for dropdown transparency issues */
  [data-radix-select-content] {
    background: hsl(var(--popover)) !important;
    border: 1px solid hsl(var(--border)) !important;
  }

  [data-radix-dropdown-menu-content] {
    background: hsl(var(--popover)) !important;
    border: 1px solid hsl(var(--border)) !important;
  }

  [data-radix-popover-content] {
    background: hsl(var(--popover)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
    z-index: 50 !important;
  }

  [data-radix-select-content] {
    background: hsl(var(--popover)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
    z-index: 50 !important;
    position: fixed !important;
    transform-origin: var(--radix-select-content-transform-origin) !important;
  }

  /* Force all select dropdowns to use proper positioning */
  [data-radix-select-content][data-side="bottom"] {
    transform: translateY(4px) !important;
  }

  [data-radix-select-content][data-align="start"] {
    transform-origin: left top !important;
  }

  /* Service Modal optimization */
  [data-radix-dialog-content] {
    max-height: 85vh !important;
  }

  /* Ensure modal scroll works properly */
  .service-modal-scroll {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }

  /* Mobile touch optimization */
  @media (max-width: 768px) {
    /* Ensure touch targets are large enough */
    .touch-manipulation {
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Improve calendar and select interactions on mobile */
    [data-radix-popover-content],
    [data-radix-select-content] {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      position: fixed !important;
    }

    /* Calendar day cells - ensure they're tappable */
    .react-day-picker button,
    [role="gridcell"] button {
      min-height: 44px !important;
      min-width: 44px !important;
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: rgba(0,0,0,0.1);
      cursor: pointer !important;
    }

    /* Select items - ensure they're tappable */
    [data-radix-select-item] {
      min-height: 44px !important;
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: rgba(0,0,0,0.1);
      cursor: pointer !important;
      padding: 12px 8px !important;
    }

    /* PopoverTrigger and SelectTrigger improvements */
    [data-radix-popover-trigger],
    [data-radix-select-trigger] {
      min-height: 44px !important;
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: rgba(0,0,0,0.1);
    }

    /* Improve calendar navigation buttons */
    .react-day-picker .rdp-nav_button {
      min-height: 44px !important;
      min-width: 44px !important;
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: rgba(0,0,0,0.1);
    }

    /* Ensure input elements don't zoom on iOS */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      font-size: 16px !important;
      transform: translateZ(0);
      -webkit-appearance: none;
    }

    /* Popover and select content positioning fixes for mobile */
    [data-radix-popover-content],
    [data-radix-select-content] {
      position: fixed !important;
      transform: none !important;
      max-width: calc(100vw - 24px) !important;
      max-height: 50vh !important;
      overflow-y: auto !important;
      -webkit-overflow-scrolling: touch !important;
    }


    /* Force dropdowns to appear below triggers */
    [data-radix-popover-content][data-side="bottom"],
    [data-radix-select-content][data-side="bottom"] {
      top: calc(var(--radix-popover-trigger-height, 44px) + 8px) !important;
      margin-top: 0 !important;
    }

    /* Center horizontally relative to trigger */
    [data-radix-popover-content][data-align="start"],
    [data-radix-select-content][data-align="start"] {
      left: var(--radix-popover-trigger-left, 16px) !important;
      transform: none !important;
    }

    [data-radix-select-content][data-side="bottom"] {
      margin-top: 8px !important;
      max-width: calc(100vw - 32px) !important;
      max-height: 50vh !important;
    }

    /* Prevent viewport zoom on double tap */
    * {
      touch-action: manipulation;
    }
  }

  /* Mobile responsive improvements */
  @media (max-width: 768px) {
    /* Hide scrollbars on mobile but keep functionality */
    .scrollbar-hidden {
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
    }
    
    .scrollbar-hidden::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }

    /* Move scrollbars to footer area on mobile */
    [data-radix-scroll-area-scrollbar] {
      opacity: 0.3;
      transition: opacity 0.2s;
    }

    [data-radix-scroll-area-scrollbar]:hover {
      opacity: 0.8;
    }

    /* Reduce scrollbar size on mobile */
    [data-radix-scroll-area-scrollbar] {
      width: 6px !important;
    }

    [data-radix-scroll-area-scrollbar][data-orientation="horizontal"] {
      height: 6px !important;
    }

    /* Mobile optimizations */
    .mobile-safe-area {
      padding-bottom: env(safe-area-inset-bottom);
    }

    /* Improve touch targets on mobile */
    button, [role="button"] {
      min-height: 44px;
      min-width: 44px;
    }

    /* Better modal sizing on mobile */
    [data-radix-dialog-content] {
      max-width: calc(100vw - 2rem) !important;
      max-height: calc(100vh - 2rem) !important;
    }

    /* Prevent zoom on input focus */
    input, select, textarea {
      font-size: 16px !important;
    }

    /* Better dropdown positioning on mobile */
    [data-radix-select-content],
    [data-radix-dropdown-menu-content],
    [data-radix-popover-content] {
      max-width: calc(100vw - 2rem) !important;
      background: hsl(var(--popover)) !important;
      border: 1px solid hsl(var(--border)) !important;
    }
  }

  /* Tablet optimizations */
  @media (max-width: 1024px) and (min-width: 769px) {
    .tablet-grid {
      grid-template-columns: repeat(2, 1fr) !important;
    }
  }

  /* Small mobile screens */
  @media (max-width: 480px) {
    .container {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    /* Ensure cards don't overflow on small screens */
    .responsive-card {
      margin: 0.5rem 0;
      padding: 1rem;
    }
  }
}